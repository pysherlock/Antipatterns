diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/client/XSLTProcessorApplet.java xalan-j_2_7_0/src/org/apache/xalan/client/XSLTProcessorApplet.java
 * $Id: XSLTProcessorApplet.java,v 1.21 2004/02/11 05:22:02 m |	 * $Id: XSLTProcessorApplet.java,v 1.23 2004/12/15 17:35:30 j
							      >	 * 
							      >	 * This class extends Applet which ultimately causes this cla
							      >	 * This is a serious restriction on this class. All fields th
							      >	 * static are written-out/read-in during serialization. So ev
							      >	 * become part of the API. Developers need to take care when 
   * @serial						      |	   * This field is now transient because a 
							      >	   * javax.xml.transform.TransformerFactory from JAXP 
							      >	   * makes no claims to be serializable.
  TransformerFactory m_tfactory = null;			      |	  transient TransformerFactory m_tfactory = null;
  /** 							      <
   * Stylesheet parameter keys				      <
   */							      <
  private Enumeration m_keys;				      <
      System.exit(-1);					      |	      throw new RuntimeException(e.getMessage());
        m_keys = m_parameters.keys();			      |	        
							      >	        Enumeration m_keys = m_parameters.keys();
        System.exit(-1);				      |	        throw new RuntimeException(tfe.getMessage());
        System.exit(-1);				      |	        throw new RuntimeException(e.getMessage());
							      >	  
							      >	  // For compatiblity with old serialized objects
							      >	  // We will change non-serialized fields and change methods
							      >	  // and not have this break us.
							      >	  private static final long serialVersionUID=4618876841979251
							      >	  
							      >	  // For compatibility when de-serializing old objects
							      >	  private void readObject(java.io.ObjectInputStream inStream)
							      >	  {
							      >	      inStream.defaultReadObject();
							      >	      
							      >	      // Needed assignment of non-serialized fields
							      >	      
							      >	      // A TransformerFactory is not guaranteed to be seriali
							      >	      // so we create one here
							      >	      m_tfactory = TransformerFactory.newInstance();
							      >	  }      
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/ExpressionVisitor.java xalan-j_2_7_0/src/org/apache/xalan/extensions/ExpressionVisitor.java
 * $Id: ExpressionVisitor.java,v 1.7 2004/02/11 05:26:23 minc |	 * $Id: ExpressionVisitor.java,v 1.8 2005/01/23 00:10:05 mcna
   * @param function The function currently being visited.    |	   * @param func The function currently being visited.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/ExtensionHandlerExsltFunction.java xalan-j_2_7_0/src/org/apache/xalan/extensions/ExtensionHandlerExsltFunction.java
 * $Id: ExtensionHandlerExsltFunction.java,v 1.8 2004/02/11 2 |	 * $Id: ExtensionHandlerExsltFunction.java,v 1.9 2005/01/23 0
   * @param Local name of the function.			      |	   * @param elemName name of the element.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/ExtensionHandlerGeneral.java xalan-j_2_7_0/src/org/apache/xalan/extensions/ExtensionHandlerGeneral.java
 * $Id: ExtensionHandlerGeneral.java,v 1.23 2004/02/23 10:29: |	 * $Id: ExtensionHandlerGeneral.java,v 1.26 2005/01/23 00:10:
							      >	import org.apache.xml.res.XMLErrorResources;
							      >	import org.apache.xml.res.XMLMessages;
							      >
  private static final String BSF_MANAGER = "com.ibm.bsf.BSFM |	  private static String BSF_MANAGER ;
							      |	  
  /** BSFEngine package name */				      |	  /** Default BSFManager name */
  private static final String BSF_ENGINE = "com.ibm.bsf.BSFEn |	  private static final String DEFAULT_BSF_MANAGER = "org.apac
							      |	  
  /** Negative one integer */				      |	  /** Property name to load the BSFManager class */
  private static final Integer NEG1INT = new Integer(-1);     |	  private static final String propName = "org.apache.xalan.ex
							      >	  
							      >	  /** Integer Zero */
							      >	  private static final Integer ZEROINT = new Integer(0);
							      >
							      >	  static{
							      >	          BSF_MANAGER =  ObjectFactory.lookUpFactoryClassName
							      >	 
							      >	          if (BSF_MANAGER == null){
							      >	                  BSF_MANAGER = DEFAULT_BSF_MANAGER;         
							      >	          }          
							      >	  }
   * @param lang         language of code implementing the ex <
   * @param srcURL       value of src attribute (if any) - tr <
   *                     or a classname depending on the valu <
   *                     srcURL is not null, then scriptSrc i <
							      >	   * @param systemId
        new Object[]{ "XalanScript", NEG1INT, NEG1INT, m_scri |	        new Object[]{ "XalanScript", ZEROINT, ZEROINT, m_scri
   * @param function name of the function being tested	      <
   *							      <
   * @param mode           The current mode.		      <
   * @param sourceTree     The root of the source tree (but d <
   *                       it's a Document).		      <
   * @param sourceNode     The current context node.	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/ExtensionHandler.java xalan-j_2_7_0/src/org/apache/xalan/extensions/ExtensionHandler.java
 * $Id: ExtensionHandler.java,v 1.21 2004/02/23 10:29:34 arun |	 * $Id: ExtensionHandler.java,v 1.22 2005/01/23 00:10:05 mcna
   * @param function name of the function being tested	      <
   *							      <
   * @param transformer      Handle to TransformerImpl.	      |	   * @param transformer    Handle to TransformerImpl.
   * @param mode           The current mode.		      <
   * @param sourceTree     The root of the source tree (but d <
   *                       it's a Document).		      <
   * @param sourceNode     The current context node.	      <
   * @throws TransformerException          if parsing trouble |	   * @throws TransformerException  if parsing trouble
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/ExtensionHandlerJavaClass.java xalan-j_2_7_0/src/org/apache/xalan/extensions/ExtensionHandlerJavaClass.java
 * $Id: ExtensionHandlerJavaClass.java,v 1.19 2004/02/11 05:2 |	 * $Id: ExtensionHandlerJavaClass.java,v 1.22 2005/05/30 17:3
                                     org.apache.xalan.extensi |	                        org.apache.xalan.extensions.XSLProces
          && paramTypes[1].isAssignableFrom(org.apache.xalan. |	          && paramTypes[1].isAssignableFrom(
							      >	                        org.apache.xalan.templates.ElemExtens
							      >	      TransformerImpl trans = (exprContext != null) ?
							      >	          (TransformerImpl)exprContext.getXPathContext().getO
        Constructor c = (Constructor) getFromCache(methodKey, |	        Constructor c = null;
        if (c != null && !TransformerImpl.S_DEBUG)	      |	        if (methodKey != null)
							      >	          c = (Constructor) getFromCache(methodKey, null, met
							      >	        
							      >	        if (c != null && !trans.getDebug())
            MethodResolver.convertParams(methodArgs, converte |	            MethodResolver.convertParams(methodArgs, converte
							      >	                        paramTypes, exprContext);
        putToCache(methodKey, null, methodArgs, c);	      |	        if (methodKey != null)
        if (TransformerImpl.S_DEBUG) {			      |	          putToCache(methodKey, null, methodArgs, c);
            TransformerImpl trans = (TransformerImpl)exprCont |	        
            trans.getTraceManager().fireExtensionEvent(new Ex |	        if (trans != null && trans.getDebug()) {            
							      >	            trans.getTraceManager().fireExtensionEvent(new 
							      >	                    ExtensionEvent(trans, c, convertedArgs[0]
                trans.getTraceManager().fireExtensionEndEvent |	                trans.getTraceManager().fireExtensionEndEvent
							      >	                        ExtensionEvent(trans, c, convertedArg
        Method m = (Method) getFromCache(methodKey, null, met |	        Method m = null;
        if (m != null && !TransformerImpl.S_DEBUG)	      |	        if (methodKey != null)
							      >	          m = (Method) getFromCache(methodKey, null, methodAr
							      >	        
							      >	        if (m != null && !trans.getDebug())
            MethodResolver.convertParams(methodArgs, converte |	            MethodResolver.convertParams(methodArgs, converte
							      >	                        paramTypes, exprContext);
        putToCache(methodKey, null, methodArgs, m);	      |	        if (methodKey != null)
							      >	          putToCache(methodKey, null, methodArgs, m);
          if (TransformerImpl.S_DEBUG) {		      |	          if (trans != null && trans.getDebug()) {
            TransformerImpl trans = (TransformerImpl)exprCont |	            trans.getTraceManager().fireExtensionEvent(m, tar
            trans.getTraceManager().fireExtensionEvent(m, tar |	                        convertedArgs[0]);
                trans.getTraceManager().fireExtensionEndEvent |	                trans.getTraceManager().fireExtensionEndEvent
							      >	                        convertedArgs[0]);
            if (TransformerImpl.S_DEBUG) {		      |	            if (trans != null && trans.getDebug()) {
              TransformerImpl trans = (TransformerImpl)exprCo |	              trans.getTraceManager().fireExtensionEvent(m, n
              trans.getTraceManager().fireExtensionEvent(m, n |	                        convertedArgs[0]);
                trans.getTraceManager().fireExtensionEndEvent |	                trans.getTraceManager().fireExtensionEndEvent
							      >	                        convertedArgs[0]);
              if (TransformerImpl.S_DEBUG) {		      |	              if (trans != null && trans.getDebug()) {
                TransformerImpl trans = (TransformerImpl)expr |	                trans.getTraceManager().fireExtensionEvent(ne
                trans.getTraceManager().fireExtensionEvent(ne |	                        ExtensionEvent(trans, m_classObj));
                    trans.getTraceManager().fireExtensionEndE |	                    trans.getTraceManager().fireExtensionEndE
							      >	                        ExtensionEvent(trans, m_classObj));
            if (TransformerImpl.S_DEBUG) {		      |	            if (trans != null && trans.getDebug()) {
              TransformerImpl trans = (TransformerImpl)exprCo |	              trans.getTraceManager().fireExtensionEvent(m, m
              trans.getTraceManager().fireExtensionEvent(m, m |	                    convertedArgs[0]);
                trans.getTraceManager().fireExtensionEndEvent |	                trans.getTraceManager().fireExtensionEndEvent
							      >	                        m_defaultInstance, convertedArgs[0]);
   * @param sourceTree     The root of the source tree (but d <
   *                       it's a Document).		      <
   * @param sourceNode     The current context node.	      <
   * @param mode           The current mode.		      <
        if ( (null == m_defaultInstance) && !Modifier.isStati |	        if ( (null == m_defaultInstance) && 
          if (TransformerImpl.S_DEBUG) {            	      |	                !Modifier.isStatic(m.getModifiers()) ) {
            transformer.getTraceManager().fireExtensionEvent( |	          if (transformer.getDebug()) {            
							      >	            transformer.getTraceManager().fireExtensionEvent(
							      >	                    new ExtensionEvent(transformer, m_classOb
              transformer.getTraceManager().fireExtensionEndE |	              transformer.getTraceManager().fireExtensionEndE
							      >	                    new ExtensionEvent(transformer, m_classOb
      if (TransformerImpl.S_DEBUG) {			      |	      if (transformer.getDebug()) {
        transformer.getTraceManager().fireExtensionEvent(m, m |	        transformer.getTraceManager().fireExtensionEvent(m, m
							      >	                new Object[] {xpc, element});
          transformer.getTraceManager().fireExtensionEndEvent |	          transformer.getTraceManager().fireExtensionEndEvent
							      >	                m_defaultInstance, new Object[] {xpc, element
        throw new TransformerException (targetException.getMe |	        throw new TransformerException (targetException.getMe
							      >	                targetException);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/ExtensionHandlerJavaPackage.java xalan-j_2_7_0/src/org/apache/xalan/extensions/ExtensionHandlerJavaPackage.java
 * $Id: ExtensionHandlerJavaPackage.java,v 1.19 2004/02/11 05 |	 * $Id: ExtensionHandlerJavaPackage.java,v 1.22 2005/05/30 17
   * @param function name of the function being tested	      |	   * @param element name of the element being tested
   *							      |	   * @param methodKey A key that uniquely identifies this cla
							      >	   * @param exprContext The context in which this expression 
							      |	      TransformerImpl trans = (exprContext != null) ?
							      >	        (TransformerImpl)exprContext.getXPathContext().getOwn
        Constructor c = (Constructor) getFromCache(methodKey, |	        
							      >	        Constructor c = (methodKey != null) ?
							      >	          (Constructor) getFromCache(methodKey, null, methodA
							      >	        
        putToCache(methodKey, null, methodArgs, c);	      |	        if (methodKey != null)
        if (TransformerImpl.S_DEBUG) {			      |	          putToCache(methodKey, null, methodArgs, c);
            TransformerImpl trans = (TransformerImpl)exprCont |	        
							      >	        if (trans != null && trans.getDebug()) {
        Method m = (Method) getFromCache(methodKey, null, met |	        Method m = (methodKey != null) ?
        if (m != null && !TransformerImpl.S_DEBUG)	      |	          (Method) getFromCache(methodKey, null, methodArgs) 
							      >	        
							      >	        if (m != null && !trans.getDebug())
        putToCache(methodKey, null, methodArgs, m);	      |	        if (methodKey != null)
        if (TransformerImpl.S_DEBUG) {			      |	          putToCache(methodKey, null, methodArgs, m);
            TransformerImpl trans = (TransformerImpl)exprCont |	        
							      >	        if (trans != null && trans.getDebug()) {
        Method m = (Method) getFromCache(methodKey, targetObj |	        Method m = (methodKey != null) ?
							      >	          (Method) getFromCache(methodKey, targetObject, meth
							      >	        
        putToCache(methodKey, targetObject, methodArgs, m);   |	        if (methodKey != null)
        if (TransformerImpl.S_DEBUG) {			      |	          putToCache(methodKey, targetObject, methodArgs, m);
            TransformerImpl trans = (TransformerImpl)exprCont |	        
							      >	        if (trans != null && trans.getDebug()) {
   * @param mode           The current mode.		      <
   * @param sourceTree     The root of the source tree (but d <
   *                       it's a Document).		      <
   * @param sourceNode     The current context node.	      <
   * @param mode           The current mode.		      <
      if (TransformerImpl.S_DEBUG) {			      |	      if (transformer.getDebug()) {
只在 xalan-j_2_7_0/src/org/apache/xalan/extensions 存在：ExtensionNamespaceContext.java
只在 xalan-j_2_6_0/src/org/apache/xalan/extensions 存在：extensions.dfPackage
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/MethodResolver.java xalan-j_2_7_0/src/org/apache/xalan/extensions/MethodResolver.java
 * $Id: MethodResolver.java,v 1.31 2004/02/11 05:26:23 mincha |	 * $Id: MethodResolver.java,v 1.32 2004/12/15 17:35:30 jycli 
  static ConversionInfo[] m_javaObjConversions = {	      |	  private final static ConversionInfo[] m_javaObjConversions 
  static ConversionInfo[] m_booleanConversions = {	      |	  private final static ConversionInfo[] m_booleanConversions 
  static ConversionInfo[] m_numberConversions = {	      |	  private final static ConversionInfo[] m_numberConversions =
  static ConversionInfo[] m_stringConversions = {	      |	  private final static ConversionInfo[] m_stringConversions =
  static ConversionInfo[] m_rtfConversions = {		      |	  private final static ConversionInfo[] m_rtfConversions = {
  static ConversionInfo[] m_nodesetConversions = {	      |	  private final static ConversionInfo[] m_nodesetConversions 
  static ConversionInfo[][] m_conversions = 		      |	  private final static ConversionInfo[][] m_conversions = 
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/extensions/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:34 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:11:25 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:34 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:11:25
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 85643051
只在 xalan-j_2_7_0/src/org/apache/xalan/extensions 存在：XPathFunctionImpl.java
只在 xalan-j_2_7_0/src/org/apache/xalan/extensions 存在：XPathFunctionResolverImpl.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/extensions/XSLProcessorContext.java xalan-j_2_7_0/src/org/apache/xalan/extensions/XSLProcessorContext.java
 * $Id: XSLProcessorContext.java,v 1.18 2004/02/11 05:26:23 m |	 * $Id: XSLProcessorContext.java,v 1.19 2005/01/23 00:10:05 m
   * @param sourceTree The source document		      <
   * @param sourceNode The current source node		      <
   * @param mode the current mode being executed.	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/ExsltCommon.java xalan-j_2_7_0/src/org/apache/xalan/lib/ExsltCommon.java
 * $Id: ExsltCommon.java,v 1.10 2004/02/11 17:56:36 minchau E |	 * $Id: ExsltCommon.java,v 1.11 2005/01/23 00:16:04 mcnamara 
   * @param myProcesser is passed in by the Xalan extension p |	   * @param myProcessor is passed in by the Xalan extension p
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/ExsltDatetime.java xalan-j_2_7_0/src/org/apache/xalan/lib/ExsltDatetime.java
 * $Id: ExsltDatetime.java,v 1.13 2004/02/11 17:56:36 minchau |	 * $Id: ExsltDatetime.java,v 1.16 2005/07/15 21:45:11 mcnamar
							      >	import java.util.Locale;
      String[] formatsIn = {dt, d};			      |	      String[] formatsIn = {dt, d, t};
      String zone = datetime.substring(getZoneStart(datetime) |	      
      return (time + zone);				      |		  // The datetime() function returns the zone on the 
							      >		  // append it, we get the zone substring duplicated.
							      >		  // Fix for JIRA 2013
							      >
							      >	      // String zone = datetime.substring(getZoneStart(dateti
							      >	      // return (time + zone);
							      >	      return (time);
     * The date:year function returns the month of a date as  |	     * The date:month-in-year function returns the month of a
      return getNumber(datetime, formats, Calendar.MONTH);    |	      return getNumber(datetime, formats, Calendar.MONTH) + 1
      return cal.get(Calendar.MONTH);			      |	      return cal.get(Calendar.MONTH) + 1;
          SimpleDateFormat dateFormat = new SimpleDateFormat( |	          SimpleDateFormat dateFormat = new SimpleDateFormat(
      SimpleDateFormat dateFormat = new SimpleDateFormat(form |	      SimpleDateFormat dateFormat = new SimpleDateFormat(form
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/Extensions.java xalan-j_2_7_0/src/org/apache/xalan/lib/Extensions.java
 * $Id: Extensions.java,v 1.29 2004/02/23 10:29:34 aruny Exp  |	 * $Id: Extensions.java,v 1.30 2005/01/23 00:16:04 mcnamara E
   * @param xpathExtr The XPath expression to be evaluated.   |	   * @param xpathExpr The XPath expression to be evaluated.
   * @param myContext an <code>ExpressionContext</code> passe <
   *                  extension mechanism.  This must be an X <
   * @param myContext an <code>ExpressionContext</code> passe <
   *                  extension mechanism.  This must be an X <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/NodeInfo.java xalan-j_2_7_0/src/org/apache/xalan/lib/NodeInfo.java
 * $Id: NodeInfo.java,v 1.6 2004/02/11 17:56:36 minchau Exp $ |	 * $Id: NodeInfo.java,v 1.7 2005/01/23 00:16:04 mcnamara Exp 
   * @param context an <code>ExpressionContext</code> value   <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/lib/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:34 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:14:49 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:34 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:14:49
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = -7640369
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/PipeDocument.java xalan-j_2_7_0/src/org/apache/xalan/lib/PipeDocument.java
 * $Id: PipeDocument.java,v 1.8 2004/02/11 17:56:36 minchau E |	 * $Id: PipeDocument.java,v 1.9 2004/12/13 19:59:18 joannet E
    try							      |
    {							      <
     }							      <
     catch (Exception e)				      <
     {							      <
       e.printStackTrace();				      <
     }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/Redirect.java xalan-j_2_7_0/src/org/apache/xalan/lib/Redirect.java
 * $Id: Redirect.java,v 1.22 2004/02/18 23:51:20 minchau Exp  |	 * $Id: Redirect.java,v 1.23 2004/08/13 21:08:27 minchau Exp 
							      >	    startRedirection(transf, formatter);  // for tracing only
							      >	    
							      >	                                 
							      >	    endRedirection(transf); // for tracing only
        transformer.createSerializationHandler(new StreamResu |	        createSerializationHandler(transformer, ostream, file
                                               format);	      |	        
							      >	  }
							      >
							      >	  /**
							      >	   * A class that extends this class can over-ride this publi
							      >	   * a callback that redirection is about to start
							      >	   * @param transf The transformer.
							      >	   * @param formatter The handler that receives the redirecte
							      >	   */
							      >	  public void startRedirection(TransformerImpl transf, Conten
							      >	  {
							      >	      // A class that extends this class could provide a meth
							      >	  }
							      >	    
							      >	  /**
							      >	   * A class that extends this class can over-ride this publi
							      >	   * a callback that redirection to the ContentHandler specif
							      >	   * call has ended
							      >	   * @param transf The transformer.
							      >	   */
							      >	  public void endRedirection(TransformerImpl transf)
							      >	  {
							      >	      // A class that extends this class could provide a meth
							      >	  }
							      >	    
							      >	  /**
							      >	   * A class that extends this one could over-ride this publi
							      >	   * a callback for the creation of the serializer used in th
							      >	   * @param transformer The transformer
							      >	   * @param ostream The output stream that the serializer wra
							      >	   * @param file The file associated with the ostream
							      >	   * @param format The format parameter used to create the se
							      >	   * @return the serializer that the redirection will go to.
							      >	   * 
							      >	   * @throws java.io.IOException
							      >	   * @throws TransformerException
							      >	   */
							      >	  public SerializationHandler createSerializationHandler(
							      >	        TransformerImpl transformer,
							      >	        FileOutputStream ostream,
							      >	        File file,
							      >	        OutputProperties format) 
							      >	        throws java.io.IOException, TransformerException
							      >	  {
							      >
							      >	      SerializationHandler serializer =
							      >	          transformer.createSerializationHandler(
							      >	              new StreamResult(ostream),
							      >	              format);
							      >	      return serializer;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/sql/ConnectionPoolManager.java xalan-j_2_7_0/src/org/apache/xalan/lib/sql/ConnectionPoolManager.java
 * $Id: ConnectionPoolManager.java,v 1.7 2004/02/11 17:56:35  |	 * $Id: ConnectionPoolManager.java,v 1.8 2004/12/15 17:35:30 
  static Hashtable m_poolTable = null;			      |	  private static Hashtable m_poolTable = null;
  /**							      <
   */							      <
  static boolean m_isInit = false;			      <
  public synchronized void init( )			      |	  private synchronized void init( )
    // Only do this process once			      |	    /**
    if (m_isInit == true) return;			      |	     * Only do this process once
							      |	     * Initialize the pool table
							      |	     */   
    //							      |	    if (m_poolTable == null)
    // Initialize the pool table			      |	            m_poolTable = new Hashtable();
    //							      <
    m_poolTable = new Hashtable();			      <
							      <
    m_isInit = true;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/sql/DefaultConnectionPool.java xalan-j_2_7_0/src/org/apache/xalan/lib/sql/DefaultConnectionPool.java
 * $Id: DefaultConnectionPool.java,v 1.20 2004/02/23 10:29:35 |	 * $Id: DefaultConnectionPool.java,v 1.22 2005/08/06 20:21:41
							      >	import java.util.Iterator;
    for ( int x = 0; x < m_pool.size(); x++ )		      |	    Iterator i = m_pool.iterator();
							      >	    while(i.hasNext())
							      <
							      <
        (PooledConnection) m_pool.elementAt(x);		      |	        (PooledConnection) i.next();
          System.err.println("Closing JDBC Connection " + x); |	          System.err.println("Closing JDBC Connection ");
							      |	        
							      >	        i.remove();        
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/sql/DTMDocument.java xalan-j_2_7_0/src/org/apache/xalan/lib/sql/DTMDocument.java
 * $Id: DTMDocument.java,v 1.15 2004/02/11 17:56:36 minchau E |	 * $Id: DTMDocument.java,v 1.17 2005/01/23 00:16:04 mcnamara 
      System.exit(-1);					      |	      throw new RuntimeException(ioe.getMessage());
   *							      <
   * @throws org.xml.sax.SAXException			      <
   *							      <
   * @throws org.xml.sax.SAXException			      <
只在 xalan-j_2_7_0/src/org/apache/xalan/lib/sql 存在：JNDIConnectionPool.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/sql/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/lib/sql/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:14:49 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:14:49
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 32734323
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/sql/SQLDocument.java xalan-j_2_7_0/src/org/apache/xalan/lib/sql/SQLDocument.java
 * $Id: SQLDocument.java,v 1.25 2004/02/11 17:56:36 minchau E |	 * $Id: SQLDocument.java,v 1.28 2005/01/23 00:16:04 mcnamara 
   * @param pool					      <
   * @param con						      <
   * @param stmt					      <
   * @param data					      <
   * @param streamingMode				      <
      addRowToDTMFromResultSet();			      |
							      >	      // We won't grab the first record in case the skip func
							      >	      // is applied prior to looking at the first record.
							      >	      // JCG Changed 9/15/04
							      >	      // addRowToDTMFromResultSet();
      if (! m_Statement.execute(m_QueryParser.getSQLQuery())) |	      m_ResultSet = m_Statement.executeQuery(m_QueryParser.ge
      {							      |
        throw new SQLException("Error in Query");	      |
      }							      <
							      >
							      >
							      >	      m_ResultSet = m_Statement.getResultSet();
      if (! stmt.execute()) throw new SQLException("Error in  |	      m_ResultSet = stmt.executeQuery();
    m_ResultSet = m_Statement.getResultSet();		      <
							      >	   * Push the record set forward value rows. Used to help in 
							      >	   * SQL pagination.
							      >	   * 
							      >	   * @param value
							      >	   */
							      >	  public void skip( int value )
							      >	  {
							      >	    try
							      >	    {
							      >	      if (m_ResultSet != null) m_ResultSet.relative(value);
							      >	    }
							      >	    catch(Exception origEx)
							      >	    {
							      >	      // For now let's assume that the relative method is not
							      >	      // So let's do it manually.
							      >	      try
							      >	      {
							      >	        for (int x=0; x<value; x++)
							      >	        {
							      >	          if (! m_ResultSet.next()) break;
							      >	        }
							      >	      }
							      >	      catch(Exception e)
							      >	      {
							      >	        // If we still fail, add in both exceptions
							      >	        m_XConnection.setError(origEx, this, checkWarnings())
							      >	        m_XConnection.setError(e, this, checkWarnings());
							      >	      }
							      >	    }
							      >	  }
							      >
							      >
							      >	  /**
  public void close( )					      |	  public void close(boolean flushConnPool )
							      >	//        if (flushConnPool)  m_ConnectionPool.freeUnused();
							      >	      
							      >	      // We need to prime the pump since we don't do it in ex
							      >	      if (m_FirstRowIdx == DTM.NULL)
							      >	      {
							      >	        addRowToDTMFromResultSet();
							      >	      }
							      >	      
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/lib/sql/XConnection.java xalan-j_2_7_0/src/org/apache/xalan/lib/sql/XConnection.java
 * $Id: XConnection.java,v 1.29 2004/02/11 17:56:36 minchau E |	 * $Id: XConnection.java,v 1.34 2005/07/28 00:26:16 johng Exp
import java.math.BigDecimal;				      <
import java.sql.Date;					      <
import java.sql.PreparedStatement;			      <
import java.sql.ResultSet;				      <
import java.sql.Statement;				      <
import java.sql.Time;					      <
import java.sql.Timestamp;				      <
import java.util.Enumeration;				      <
							      >	import javax.xml.transform.ErrorListener;
							      >	import javax.xml.transform.TransformerException;
							      >
							      >	import org.apache.xml.dtm.DTMIterator;
							      >	import org.apache.xml.dtm.ref.DTMNodeIterator;
							      >	import org.apache.xml.dtm.ref.DTMNodeProxy;
							      |	import org.apache.xpath.objects.XNodeSet;
import javax.xml.transform.ErrorListener;		      <
import javax.xml.transform.TransformerException;	      <
							      <
  // The original constructors will be kept around for backwa <
  // compatibility. Future Stylesheets should use the approai <
  // connect method to receive full error information.	      <
  //							      <
   * @param exprContext					      |	   * Constructs a new XConnection and attempts to connect to 
   * @param ConnPoolName				      |	   * defined in the
							      >	   * <code>connect(ExpressionContext exprContext, String conn
							      >	   * method.
							      >	   * <code>org.apache.xalan.lib.sql.ConnectionPool</code> or 
							      >	   *
							      >	   * @param exprContext Context automatically passed from the
							      >	   * @param name The name of the ConnectionPool or the JNDI D
							      >	   *
  public XConnection( ExpressionContext exprContext, String C |	  public XConnection( ExpressionContext exprContext, String c
    connect(exprContext, ConnPoolName);			      |	    connect(exprContext, connPoolName);
							      <
   * Create an XConnection using the name of an existing Conn |	    * Returns an XConnection from either a user created
   * @param exprContext					      |	    * <code>org.apache.xalan.lib.sql.ConnectionPool</code> or
   * @param ConnPoolName				      <
   *							      <
   */							      <
  public XBooleanStatic connect( ExpressionContext exprContex <
  {							      <
    try							      <
    {							      <
      m_ConnectionPool = m_PoolMgr.getPool(ConnPoolName);     <
      if (m_ConnectionPool == null)			      |	    * 
        throw new java.lang.IllegalArgumentException("Invalid |	    * This method first tries to resolve the passed name agai
							      >	    * <code>ConnectionPool</code>s registered with
							      >	    * <code>ConnectionPoolManager</code>.
							      >	    * If that fails, it attempts to find the name as a JNDI D
							      >	    *
							      >	    * @param exprContext Context automatically passed from th
							      >	    * @param name The name of the ConnectionPool or the JNDI 
							      >	    *
							      >	    */
							      >	   public XBooleanStatic connect( ExpressionContext exprConte
							      >	   {
							      >	     try
							      >	     {
							      >	       m_ConnectionPool = m_PoolMgr.getPool(name);
							      >
							      >	       if (m_ConnectionPool == null)
							      >	       {
							      >	         //Try to create a jndi source with the passed name
							      >	         ConnectionPool pool = new JNDIConnectionPool(name);
							      >	        
							      >	         if (pool.testConnection())
							      >	         {
							      >	          
							      >	           //JNDIConnectionPool seems good, so register it wi
							      >	           //Once registered, it will show up like other name
							      >	           //so the m_PoolMgr.getPool(name) method (above) wi
							      >	           m_PoolMgr.registerPool(name, pool);
							      >	           m_ConnectionPool = pool;
							      >	          
							      >	           m_IsDefaultPool = false;
							      >	           return new XBooleanStatic(true);
							      >	         }
							      >	         else
							      >	         {
							      >	           throw new IllegalArgumentException(
							      >	               "Invalid ConnectionPool name or JNDI Datasourc
							      >	         }
							      >	       }
							      >	       else
							      >	       {
							      >	         m_IsDefaultPool = false;
							      >	         return new XBooleanStatic(true);
							      >	       }
							      >	     }
							      >	     catch (Exception e)
							      >	     {
							      >	       setError(e, exprContext);
							      >	       return new XBooleanStatic(false);
							      >	     }
      m_IsDefaultPool = false;				      |	   }
      return new XBooleanStatic(true);			      <
    }							      <
    catch (Exception e)					      <
    {							      <
      setError(e, exprContext);				      <
      return new XBooleanStatic(false);			      <
    }							      <
  }							      <
        doc.close();					      |	        doc.close(m_IsDefaultPool);
        doc.close();					      |	        // If we are using the Default Connection Pool, then
							      >	        // force the connection pool to flush unused connecti
							      >	        doc.close(m_IsDefaultPool);
							      >	  /**
							      >	   * The purpose of this routine is to force the DB cursor to
							      >	   * N records. You should call this function after [p]query 
							      >	   * pagination. i.e. Perfrom your select, then skip forward 
							      >	   * you read previously.
							      >	   * 
							      >	   * @param exprContext
							      >	   * @param o
							      >	   * @param value
							      >	   */
							      >	  public void skipRec( ExpressionContext exprContext, Object 
							      >	  {
							      >	    SQLDocument sqldoc = null;
							      >	    DTMNodeIterator nodei = null;
							      >	      
							      >	    sqldoc = locateSQLDocument( exprContext, o);
							      >	    if (sqldoc != null) sqldoc.skip(value);
							      >	  }
							      >
							      >	  
							      >
        d.close();					      |	        // If we are using the Default Connection Pool, then
							      >	        // force the connection pool to flush unused connecti
							      >	        d.close(m_IsDefaultPool);
   * @param sqldoc					      <
  public void close( SQLDocument sqldoc )throws SQLException  |
							      >	  public void close(ExpressionContext exprContext, Object doc
      System.out.println("Entering XConnection.close(" + sqld |	        System.out.println("Entering XConnection.close(" + do
							      >
							      >	    SQLDocument sqlDoc = locateSQLDocument(exprContext, doc);
							      >	    if (sqlDoc != null)
							      >	    {
							      >	      // If we are using the Default Connection Pool, then
							      >	      // force the connection pool to flush unused connection
							      >	      sqlDoc.close(m_IsDefaultPool);
							      >	      m_OpenSQLDocuments.remove(sqlDoc);
							      >	    } 
							      >	  }
    int size = m_OpenSQLDocuments.size();		      <
    for(int x=0; x<size; x++)				      |	  /**
							      >	   * When an SQL Document is returned as a DTM object, the XS
							      >	   * assigned as a DTMIterator. This is a helper function tha
							      >	   * a reference to the original SQLDocument from the iterato
							      >	   * 
							      >	   * Original code submitted by 
							      >	   *  Moraine Didier mailto://didier.moraine@winterthur.be
							      >	   * @param doc
							      >	   * @return
							      >	   */
							      >	  private SQLDocument locateSQLDocument(ExpressionContext exp
							      >	  {
							      >	    try
      SQLDocument d = (SQLDocument) m_OpenSQLDocuments.elemen |	      if (doc instanceof DTMNodeIterator)
      if (d == sqldoc)					      <
        d.close();					      |	        DTMNodeIterator dtmIter = (DTMNodeIterator)doc;
        m_OpenSQLDocuments.removeElementAt(x);		      |	        try
							      >	        {
							      >	          DTMNodeProxy root = (DTMNodeProxy)dtmIter.getRoot()
							      >	          return (SQLDocument) root.getDTM();
							      >	        }
							      >	        catch (Exception e)
							      >	        {
							      >	          XNodeSet xNS = (XNodeSet)dtmIter.getDTMIterator();
							      >	          DTMIterator iter = (DTMIterator)xNS.getContainedIte
							      >	          DTM dtm = iter.getDTM(xNS.nextNode());
							      >	          return (SQLDocument)dtm;
							      >	        }
							      >
							      >	/*
							      >	      XNodeSet xNS = (XNodeSet)dtmIter.getDTMIterator();
							      >	      OneStepIterator iter = (OneStepIterator)xNS.getContaine
							      >	      DTMManager aDTMManager = (DTMManager)iter.getDTMManager
							      >	      return (SQLDocument)aDTMManager.getDTM(xNS.nextNode());
							      >	*/
							      >	      setError(new Exception("SQL Extension:close - Can Not I
							      >	      return null;  
							      >	    }
							      >	    catch(Exception e)
							      >	    {
							      >	      setError(e, exprContext);
							      >	      return null;
							      |	  
							      <
							      >	        
   * @param feature The name of the feature being set, curren <
   * @param setting The new setting for the specified feature <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorAttributeSet.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorAttributeSet.java
 * $Id: ProcessorAttributeSet.java,v 1.8 2004/02/11 18:15:51  |	 * $Id: ProcessorAttributeSet.java,v 1.9 2004/08/17 18:18:08 
							      >	    static final long serialVersionUID = -6473739251316787552
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorCharacters.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorCharacters.java
 * $Id: ProcessorCharacters.java,v 1.12 2004/02/11 18:15:51 m |	 * $Id: ProcessorCharacters.java,v 1.14 2005/01/23 00:20:46 m
							      >	    static final long serialVersionUID = 8632900007814162650L
   * @param atts The attributes attached to the element.  If  <
   *        there are no attributes, it shall be an empty     <
   *        Attributes object.				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorDecimalFormat.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorDecimalFormat.java
 * $Id: ProcessorDecimalFormat.java,v 1.11 2004/02/11 18:15:5 |	 * $Id: ProcessorDecimalFormat.java,v 1.12 2004/08/17 18:18:0
							      >	    static final long serialVersionUID = -5052904382662921627
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorExsltFuncResult.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorExsltFuncResult.java
 * $Id: ProcessorExsltFuncResult.java,v 1.6 2004/02/11 18:15: |	 * $Id: ProcessorExsltFuncResult.java,v 1.7 2004/08/17 18:18:
							      >	    static final long serialVersionUID = 6451230911473482423L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorExsltFunction.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorExsltFunction.java
 * $Id: ProcessorExsltFunction.java,v 1.9 2004/02/11 18:15:51 |	 * $Id: ProcessorExsltFunction.java,v 1.10 2004/08/17 18:18:0
							      >	    static final long serialVersionUID = 2411427965578315332L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorGlobalParamDecl.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorGlobalParamDecl.java
 * $Id: ProcessorGlobalParamDecl.java,v 1.8 2004/02/11 18:15: |	 * $Id: ProcessorGlobalParamDecl.java,v 1.9 2004/08/17 18:18:
							      >	    static final long serialVersionUID = 1900450872353587350L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorGlobalVariableDecl.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorGlobalVariableDecl.java
 * $Id: ProcessorGlobalVariableDecl.java,v 1.8 2004/02/11 18: |	 * $Id: ProcessorGlobalVariableDecl.java,v 1.9 2004/08/17 18:
							      >	    static final long serialVersionUID = -5954332402269819582
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorImport.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorImport.java
 * $Id: ProcessorImport.java,v 1.14 2004/02/11 18:15:50 minch |	 * $Id: ProcessorImport.java,v 1.16 2004/08/17 18:18:08 jycli
							      >	 * 
							      >	 * @xsl.usage internal
class ProcessorImport extends ProcessorInclude		      |	public class ProcessorImport extends ProcessorInclude
							      >	    static final long serialVersionUID = -8247537698214245237
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorInclude.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorInclude.java
 * $Id: ProcessorInclude.java,v 1.27 2004/02/11 18:15:51 minc |	 * $Id: ProcessorInclude.java,v 1.30 2005/06/07 15:35:52 mkwa
							      >	import javax.xml.XMLConstants;
							      >	 * 
							      >	 * @xsl.usage internal
class ProcessorInclude extends XSLTElementProcessor	      |	public class ProcessorInclude extends XSLTElementProcessor
							      >	    static final long serialVersionUID = -4570078731972673481
							      >	      // possible callback to a class that over-rides this me
							      >	      source = processSource(handler, source);
							      >	      
							      >	          
							      >	          if (handler.getStylesheetProcessor().isSecureProces
							      >	          {
							      >	            try
							      >	            {
							      >	              factory.setFeature(XMLConstants.FEATURE_SECURE_
							      >	            }
							      >	            catch (org.xml.sax.SAXException se) {}
							      >	          }
							      >	          
							      >	  }
							      >
							      >	  /**
							      >	   * This method does nothing, but a class that extends this 
							      >	   * over-ride it and do some processing of the source.
							      >	   * @param handler The calling StylesheetHandler/TemplatesBu
							      >	   * @param source The source of the included stylesheet.
							      >	   * @return the same or an equivalent source to what was pas
							      >	   */
							      >	  protected Source processSource(StylesheetHandler handler, S
							      >	  {
							      >	      return source;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorKey.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorKey.java
 * $Id: ProcessorKey.java,v 1.13 2004/02/11 18:15:51 minchau  |	 * $Id: ProcessorKey.java,v 1.14 2004/08/17 18:18:08 jycli Ex
							      >	    static final long serialVersionUID = 4285205417566822979L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorLRE.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorLRE.java
 * $Id: ProcessorLRE.java,v 1.24 2004/02/11 18:15:51 minchau  |	 * $Id: ProcessorLRE.java,v 1.29 2005/06/07 15:35:52 mkwan Ex
							      |	    static final long serialVersionUID = -1490218021772101404
          stylesheet = new StylesheetRoot(handler.getSchema() |	          stylesheet = getStylesheetRoot(handler);
							      >	        if (slocator != null)
							      >	            template.setLocaterInfo(slocator);
							      >	   * This method could be over-ridden by a class that extends
							      >	   * @param handler non-null reference to current StylesheetH
							      >	   * @return an object that represents the stylesheet element
							      >	   */
							      >	  protected Stylesheet getStylesheetRoot(StylesheetHandler ha
							      >	  {
							      >	    StylesheetRoot stylesheet;
							      >	    stylesheet = new StylesheetRoot(handler.getSchema(), hand
							      >	    if (handler.getStylesheetProcessor().isSecureProcessing()
							      >	      stylesheet.setSecureProcessing(true);
							      >	    
							      >	    return stylesheet;
							      >	  }
							      >	  
							      >
							      >	/**
   *							      <
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorNamespaceAlias.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorNamespaceAlias.java
 * $Id: ProcessorNamespaceAlias.java,v 1.11 2004/02/11 18:15: |	 * $Id: ProcessorNamespaceAlias.java,v 1.13 2004/10/06 20:06:
							      >	import org.apache.xalan.res.XSLTErrorResources;
							      >	    static final long serialVersionUID = -6309867839007018964
							      |	    final String resultNS;
							      >	      resultNS = handler.getNamespaceForPrefix(prefix);
							      >	      if(null == resultNS)
							      >	        handler.error(XSLTErrorResources.ER_INVALID_NAMESPACE
							      >	    }
							      >	    else
							      >	    {
							      >	        resultNS = handler.getNamespaceForPrefix(prefix);
							      >	        if(null == resultNS)
							      >	         handler.error(XSLTErrorResources.ER_INVALID_NAMESPAC
    String resultNS = handler.getNamespaceForPrefix(prefix);  |	   
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorOutputElem.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorOutputElem.java
 * $Id: ProcessorOutputElem.java,v 1.18 2004/02/11 18:15:50 m |	 * $Id: ProcessorOutputElem.java,v 1.19 2004/08/17 18:18:08 j
							      >	    static final long serialVersionUID = 3513742319582547590L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorPreserveSpace.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorPreserveSpace.java
 * $Id: ProcessorPreserveSpace.java,v 1.11 2004/02/11 18:15:5 |	 * $Id: ProcessorPreserveSpace.java,v 1.12 2004/08/17 18:18:0
							      >	    static final long serialVersionUID = -5552836470051177302
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorStripSpace.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorStripSpace.java
 * $Id: ProcessorStripSpace.java,v 1.11 2004/02/11 18:15:51 m |	 * $Id: ProcessorStripSpace.java,v 1.12 2004/08/17 18:18:08 j
							      >	    static final long serialVersionUID = -5594493198637899591
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorStylesheetDoc.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorStylesheetDoc.java
 * $Id: ProcessorStylesheetDoc.java,v 1.6 2004/02/11 18:15:50 |	 * $Id: ProcessorStylesheetDoc.java,v 1.7 2004/08/17 18:18:08
							      >	    static final long serialVersionUID = -1661497592836231844
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorStylesheetElement.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorStylesheetElement.java
 * $Id: ProcessorStylesheetElement.java,v 1.13 2004/02/11 18: |	 * $Id: ProcessorStylesheetElement.java,v 1.17 2005/06/07 15:
							      >	 * 
							      >	 * @xsl.usage internal
class ProcessorStylesheetElement extends XSLTElementProcessor |	public class ProcessorStylesheetElement extends XSLTElementPr
							      >	    static final long serialVersionUID = -877798927447840792L
          stylesheet = new StylesheetRoot(handler.getSchema() |	          stylesheet = getStylesheetRoot(handler);
							      >	   * This method can be over-ridden by a class that extends t
							      >	   * @param handler The calling StylesheetHandler/TemplatesBu
							      >	   */
							      >	  protected Stylesheet getStylesheetRoot(StylesheetHandler ha
							      >	  {
							      >	    StylesheetRoot stylesheet;
							      >	    stylesheet = new StylesheetRoot(handler.getSchema(), hand
							      >	    
							      >	    if (handler.getStylesheetProcessor().isSecureProcessing()
							      >	      stylesheet.setSecureProcessing(true);
							      >	    
							      >	    return stylesheet;
							      >	  }
							      >
							      >	/**
   *							      <
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorTemplateElem.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorTemplateElem.java
 * $Id: ProcessorTemplateElem.java,v 1.14 2004/02/11 18:15:51 |	 * $Id: ProcessorTemplateElem.java,v 1.16 2005/01/23 00:20:46
							      >	    static final long serialVersionUID = 8344994001943407235L
   * @param name The element type name.			      <
   *							      <
   *							      <
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorTemplate.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorTemplate.java
 * $Id: ProcessorTemplate.java,v 1.10 2004/02/11 18:15:50 min |	 * $Id: ProcessorTemplate.java,v 1.11 2004/08/17 18:18:08 jyc
							      >	    static final long serialVersionUID = -8457812845473603860
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorText.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorText.java
 * $Id: ProcessorText.java,v 1.8 2004/02/11 18:15:51 minchau  |	 * $Id: ProcessorText.java,v 1.10 2005/01/23 00:20:46 mcnamar
							      >	    static final long serialVersionUID = 5170229307201307523L
   *							      <
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/ProcessorUnknown.java xalan-j_2_7_0/src/org/apache/xalan/processor/ProcessorUnknown.java
 * $Id: ProcessorUnknown.java,v 1.9 2004/02/11 18:15:51 minch |	 * $Id: ProcessorUnknown.java,v 1.10 2004/08/17 18:18:09 jycl
							      >	    static final long serialVersionUID = 600521151487682248L;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/StylesheetHandler.java xalan-j_2_7_0/src/org/apache/xalan/processor/StylesheetHandler.java
 * $Id: StylesheetHandler.java,v 1.64 2004/02/17 22:10:49 min |	 * $Id: StylesheetHandler.java,v 1.70 2005/06/22 19:07:10 mkw
  static {						      |	  /**
      Function func = new org.apache.xalan.templates.FuncDocu |	   * The function table of XPath and XSLT;
							      |	   */
      FunctionTable.installFunction("document", func);	      |	  private FunctionTable m_funcTable = new FunctionTable();
							      |	  
      // func = new org.apache.xalan.templates.FuncKey();     |	  /**
      // FunctionTable.installFunction("key", func);	      |	   * The flag for the setting of the optimize feature;
      func = new org.apache.xalan.templates.FuncFormatNumb(); |	   */
							      |	  private boolean m_optimize = true;
      FunctionTable.installFunction("format-number", func);   |	  
							      |	  /**
  }							      |	   * The flag for the setting of the incremental feature;
							      >	   */
							      >	  private boolean m_incremental = false;
							      >	  
							      >	  /**
							      >	   * The flag for the setting of the source_location feature;
							      >	   */
							      >	  private boolean m_source_location = false;
							      >	  
							      >	    Class func = org.apache.xalan.templates.FuncDocument.clas
							      >	    m_funcTable.installFunction("document", func);
							      >	    // func = new org.apache.xalan.templates.FuncKey();
							      >	    // FunctionTable.installFunction("key", func);
							      >	    func = org.apache.xalan.templates.FuncFormatNumb.class;
							      >
							      >	    m_funcTable.installFunction("format-number", func);
							      >
							      >	    m_optimize =((Boolean) processor.getAttribute(
							      >	            TransformerFactoryImpl.FEATURE_OPTIMIZE)).boolean
							      >	    m_incremental = ((Boolean) processor.getAttribute(
							      >	            TransformerFactoryImpl.FEATURE_INCREMENTAL)).bool
							      >	    m_source_location = ((Boolean) processor.getAttribute(
							      >	            TransformerFactoryImpl.FEATURE_SOURCE_LOCATION)).
							      >	    
    XPath xpath = new XPath(str, owningTemplate, this, XPath. |	    XPath xpath = new XPath(str, owningTemplate, this, XPath.
							      >	            m_funcTable);
    XPath xpath = new XPath(str, owningTemplate, this, XPath. |	    XPath xpath = new XPath(str, owningTemplate, this, XPath.
							      >	        m_funcTable);
   * @param name The element type name.			      <
   *							      <
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
   *							      <
  TransformerFactoryImpl getStylesheetProcessor()	      |	  public TransformerFactoryImpl getStylesheetProcessor()
   * If {@link #getStylesheetType} returns this value, the cu |	   * If getStylesheetType returns this value, the current sty
							      >	   * @xsl.usage internal
  static final int STYPE_ROOT = 1;			      |	  public static final int STYPE_ROOT = 1;
   * If {@link #getStylesheetType} returns this value, the cu |	   * If getStylesheetType returns this value, the current sty
							      >	   * @xsl.usage internal
  static final int STYPE_INCLUDE = 2;			      |	  public static final int STYPE_INCLUDE = 2;
   * If {@link #getStylesheetType} returns this value, the cu |	   * If getStylesheetType returns this value, the current sty
							      >	   * @xsl.usage internal
  static final int STYPE_IMPORT = 3;			      |	  public static final int STYPE_IMPORT = 3;
							      >	    if (m_stylesheetRoot != null){
							      >	        m_stylesheetRoot.setOptimizer(m_optimize);
							      >	        m_stylesheetRoot.setIncremental(m_incremental);
							      >	        m_stylesheetRoot.setSource_location(m_source_location
							      >	    }
							      >	   * @xsl.usage internal
  XSLTSchema getSchema()				      |	  public XSLTSchema getSchema()
      version = Double.valueOf(elem.getVersion()).doubleValue |	      version = Double.valueOf(elem.getXmlVersion()).doubleVa
	/**						      |	    /**
	 * @see PrefixResolver#handlesNullPrefixes()	      |	     * @see PrefixResolver#handlesNullPrefixes()
	 */						      |	     */
	public boolean handlesNullPrefixes() {		      |	    public boolean handlesNullPrefixes() {
		return false;				      |	        return false;
	}						      |	    }
							      >
							      >	    /**
							      >	     * @return Optimization flag
							      >	     */
							      >	    public boolean getOptimize() {
							      >	        return m_optimize;
							      >	    }
							      >
							      >	    /**
							      >	     * @return Incremental flag
							      >	     */
							      >	    public boolean getIncremental() {
							      >	        return m_incremental;
							      >	    }
							      >
							      >	    /**
							      >	     * @return Source Location flag
							      >	     */
							      >	    public boolean getSource_location() {
							      >	        return m_source_location;
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/TransformerFactoryImpl.java xalan-j_2_7_0/src/org/apache/xalan/processor/TransformerFactoryImpl.java
 * $Id: TransformerFactoryImpl.java,v 1.56 2004/02/11 18:15:5 |	 * $Id: TransformerFactoryImpl.java,v 1.63 2005/07/24 21:08:4
							      >	import javax.xml.XMLConstants;
							      <
							      >	   * <p>State of secure processing feature.</p>
							      >	   */
							      >	  private boolean m_isSecureProcessing = false;
							      >
							      >	  /**
							      >	        catch (TransformerConfigurationException ex)
							      >	        {
							      >	          throw ex;
							      >	        }
							      >	      {
        throw new TransformerConfigurationException(XSLMessag |	        throw new TransformerConfigurationException(XSLMessag
                                                    //se);    |	        //"processFromNode failed", se);
							      >	      }
							      >	        catch (TransformerConfigurationException ex)
							      >	        {
							      >	          throw ex;
							      >	        }
							      |	      {
							      >	      }
							      >	          if (m_isSecureProcessing)
							      >	          {
							      >	            try
							      >	            {
							      >	              factory.setFeature(XMLConstants.FEATURE_SECURE_
							      >	            }
							      >	            catch (org.xml.sax.SAXException e) {}
							      >	          }
							      >
   * @param source An object that holds a URI, input stream,  <
   *							      <
							      >	   * <p>Set a feature for this <code>TransformerFactory</code
							      >	   * or <code>Template</code>s created by this factory.</p>
							      >	   * 
							      >	   * <p>
							      >	   * Feature names are fully qualified {@link java.net.URI}s.
							      >	   * Implementations may define their own features.
							      >	   * An {@link TransformerConfigurationException} is thrown i
							      >	   * <code>Transformer</code>s or <code>Template</code>s it c
							      >	   * It is possible for an <code>TransformerFactory</code> to
							      >	   * </p>
							      >	   * 
							      >	   * <p>See {@link javax.xml.transform.TransformerFactory} fo
							      >	   * 
							      >	   * @param name Feature name.
							      >	   * @param value Is feature state <code>true</code> or <code
							      >	   *  
							      >	   * @throws TransformerConfigurationException if this <code>
							      >	   *   or the <code>Transformer</code>s or <code>Template</co
							      >	   * @throws NullPointerException If the <code>name</code> pa
							      >	   */
							      >	  public void setFeature(String name, boolean value)
							      >		  throws TransformerConfigurationException {
							      >	  
							      >	  	// feature name cannot be null
							      >	  	if (name == null) {
							      >	  	    throw new NullPointerException(
							      >	                  XSLMessages.createMessage(
							      >	                      XSLTErrorResources.ER_SET_FEATURE_NULL_
							      >	  	}
							      >	  		
							      >	  	// secure processing?
							      >	  	if (name.equals(XMLConstants.FEATURE_SECURE_PROCESSIN
							      >	  	    m_isSecureProcessing = value;		
							      >	  	}
							      >	  	// This implementation does not support the setting o
							      >	  	// the secure processing feature.
							      >	  	else
							      >	    {
							      >	      throw new TransformerConfigurationException(
							      >	          XSLMessages.createMessage(
							      >	            XSLTErrorResources.ER_UNSUPPORTED_FEATURE, 
							      >	            new Object[] {name}));
							      >	    }
							      >	  }
							      >
							      >	  /**
   *							      <
  public boolean getFeature(String name)		      |	  public boolean getFeature(String name) {
  {							      |	  	
							      |	    // feature name cannot be null
							      >	    if (name == null) 
							      >	    {
							      >	    	throw new NullPointerException(
							      >	            XSLMessages.createMessage(
							      >	            XSLTErrorResources.ER_GET_FEATURE_NULL_NAME, null
							      >	    }
							      >		  	
      return true;					      |	      return true;	      
    else						      |	    // secure processing?
							      >	    else if (name.equals(XMLConstants.FEATURE_SECURE_PROCESSI
							      >	      return m_isSecureProcessing;
							      >	    else      
							      >	      // unknown feature
  public static boolean m_optimize = true;		      |	  /**
							      >	   * Flag set by FEATURE_OPTIMIZE.
							      >	   * This feature specifies whether to Optimize stylesheet pr
							      >	   * default it is set to true.
							      >	   */
							      >	  private boolean m_optimize = true;
  public static boolean m_source_location = false;	      |	  private boolean m_source_location = false;
							      >	  
							      >	  /**
							      >	   * Flag set by FEATURE_INCREMENTAL.
							      >	   * This feature specifies whether to produce output increme
							      >	   * waiting to finish parsing the input before generating an
							      >	   * default this attribute is set to false. 
							      >	   */
							      >	  private boolean m_incremental = false;
        org.apache.xml.dtm.DTMManager.setIncremental(((Boolea |	        m_incremental = ((Boolean)value).booleanValue();
        org.apache.xml.dtm.DTMManager.setIncremental((new Boo |	        m_incremental = (new Boolean((String)value)).booleanV
        // Pass the source location property to SAX2DTM, wher <
        SAX2DTM.setUseSourceLocation(m_source_location);      <
        SAX2DTM.setUseSourceLocation(m_source_location);      <
      return new Boolean(org.apache.xml.dtm.DTMManager.getInc |	      return new Boolean(m_incremental);            
   * @param src The source of the transformation instructions <
   *							      <
    try {						      |	    try 
							      >	    {
    } catch( TransformerConfigurationException ex ) {	      |	    } 
      if( m_errorListener != null) {			      |	    catch( TransformerConfigurationException ex ) 
        try {						      |	    {
							      >	      if( m_errorListener != null) 
							      >	      {
							      >	        try 
							      >	        {
        } catch( TransformerException ex1 ) {		      |	        } 
          new TransformerConfigurationException(ex1);	      |	        catch( TransformerConfigurationException ex1 ) 
							      >	        {
							      >	          throw ex1;
							      >	        }
							      >	        catch( TransformerException ex1 ) 
							      >	        {
							      >	          throw new TransformerConfigurationException(ex1);
    } catch( TransformerConfigurationException ex ) {	      |	    } 
      if( m_errorListener != null ) {			      |	    catch( TransformerConfigurationException ex ) 
        try {						      |	    {
							      >	      if( m_errorListener != null ) 
							      >	      {
							      >	        try 
							      >	        {
        } catch (TransformerException ex1 ) {		      |	        } 
          ex=new TransformerConfigurationException(ex1);      |	        catch (TransformerConfigurationException ex1 ) 
							      >	        {
							      >	          throw ex1;
							      >	        }
							      >	        catch (TransformerException ex1 ) 
							      >	        {
							      >	          throw new TransformerConfigurationException(ex1);
							      >	      
   * @param src The source of the transformation instructions <
   *							      <
    return new TransformerIdentityImpl();		      |	    return new TransformerIdentityImpl(m_isSecureProcessing);
    try {						      |	    try 
							      >	    {
    } catch( TransformerConfigurationException ex ) {	      |	    } 
      if( m_errorListener != null ) {			      |	    catch( TransformerConfigurationException ex ) 
        try {						      |	    {
							      >	      if( m_errorListener != null ) 
							      >	      {
							      >	        try 
							      >	        {
        } catch( TransformerException ex1 ) {		      |	        } 
          ex=new TransformerConfigurationException( ex1 );    |	        catch( TransformerConfigurationException ex1 ) 
							      >	        {
							      >	          throw ex1;
							      >	        }
							      >	        catch( TransformerException ex1 ) 
							      >	        {
							      >	          throw new TransformerConfigurationException( ex1 );
   * @param source An object that holds a URL, input stream,  <
   *							      <
      return new TransformerIdentityImpl();		      |	      return new TransformerIdentityImpl(m_isSecureProcessing
							      >	          if (m_isSecureProcessing)
							      >	          {
							      >	            try
							      >	            {
							      >	              factory.setFeature(XMLConstants.FEATURE_SECURE_
							      >	            }
							      >	            catch (org.xml.sax.SAXException se) {}
							      >	          }
							      >
							      >	        catch (TransformerConfigurationException ex1)
							      >	        {
							      >	          throw ex1;
							      >	        }
							      >	      {
							      >	      }
							      <
							      >	        catch (TransformerConfigurationException ex1)
							      >	        {
							      >	          throw ex1;
							      >	        }
							      >	      {
							      >	      }
  private ErrorListener m_errorListener = new DefaultErrorHan |	  private ErrorListener m_errorListener = new org.apache.xml.
							      >	  }
							      >	  
							      >	  /**
							      >	   * Return the state of the secure processing feature.
							      >	   * 
							      >	   * @return state of the secure processing feature.
							      >	   */
							      >	  public boolean isSecureProcessing()
							      >	  {
							      >	    return m_isSecureProcessing;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/WhitespaceInfoPaths.java xalan-j_2_7_0/src/org/apache/xalan/processor/WhitespaceInfoPaths.java
 * $Id: WhitespaceInfoPaths.java,v 1.5 2004/02/11 18:15:50 mi |	 * $Id: WhitespaceInfoPaths.java,v 1.6 2004/08/17 18:18:09 jy
							      >	    static final long serialVersionUID = 5954766719577516723L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/XSLProcessorVersion.java xalan-j_2_7_0/src/org/apache/xalan/processor/XSLProcessorVersion.java
 * $Id: XSLProcessorVersion.java,v 1.49 2004/02/26 04:00:47 z |	 * $Id: XSLProcessorVersion.src,v 1.1 2005/07/19 18:03:07 mcn
  public static final int RELEASE = 6;			      |	  public static final int RELEASE = 7;
   * Version String like <CODE>"<B>Xalan</B> <B>Language</B>  |	   * Version String like <CODE>"<B>Xalan</B> <B>Language</B>
                                   +(DEVELOPMENT > 0 ? ("D"+D |	                                   +(DEVELOPMENT > 0 ? ("D"+D
只在 xalan-j_2_7_0/src/org/apache/xalan/processor 存在：XSLProcessorVersion.src
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/XSLTAttributeDef.java xalan-j_2_7_0/src/org/apache/xalan/processor/XSLTAttributeDef.java
 * $Id: XSLTAttributeDef.java,v 1.32 2004/02/11 18:15:50 minc |	 * $Id: XSLTAttributeDef.java,v 1.34 2005/03/23 17:54:04 ytal
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
  static XSLTAttributeDef m_foreignAttr = new XSLTAttributeDe |	  static final XSLTAttributeDef m_foreignAttr = new XSLTAttri
  static String S_FOREIGNATTR_SETTER = "setForeignAttr";      |	  static final String S_FOREIGNATTR_SETTER = "setForeignAttr"
		  if ((avt.isSimple()) && (!XMLChar.isValidNm |			  if ((avt.isSimple()) && (!XML11Char.isXML11
  		if (!XMLChar.isValidNmtoken(value)) {	      |	  		if (!XML11Char.isXML11ValidNmtoken(value)) {
                  if (!XMLChar.isValidNCName(prefix))	      |	                  if (!XML11Char.isXML11ValidNCName(prefix))
                 (!XMLChar.isValidNCName(localName)))	      |	                 (!XML11Char.isXML11ValidNCName(localName)))
          if ((avt.isSimple()) &&  (!XMLChar.isValidNCName(va |	          if ((avt.isSimple()) &&  (!XML11Char.isXML11ValidNC
        if (!XMLChar.isValidNCName(value)) 		      |	        if (!XML11Char.isXML11ValidNCName(value)) 
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/XSLTElementDef.java xalan-j_2_7_0/src/org/apache/xalan/processor/XSLTElementDef.java
 * $Id: XSLTElementDef.java,v 1.18 2004/02/11 18:15:50 mincha |	 * $Id: XSLTElementDef.java,v 1.19 2004/03/04 20:42:41 mincha
							      >	   * @xsl.usage internal
  XSLTElementDef[] getElements()			      |	  public XSLTElementDef[] getElements()
							      >	   * @xsl.usage internal
  XSLTElementProcessor getElementProcessor()		      |	  public XSLTElementProcessor getElementProcessor()
							      >	   * @xsl.usage internal
  void setElementProcessor(XSLTElementProcessor handler)      |	  public void setElementProcessor(XSLTElementProcessor handle
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/processor/XSLTElementProcessor.java xalan-j_2_7_0/src/org/apache/xalan/processor/XSLTElementProcessor.java
 * $Id: XSLTElementProcessor.java,v 1.18 2004/02/11 18:15:50  |	 * $Id: XSLTElementProcessor.java,v 1.20 2005/01/23 00:20:46 
							      >	    static final long serialVersionUID = 5597421564955304421L
   * @param name The element type name.			      <
   *							      <
   *							      <
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLMessages.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLMessages.java
 * $Id: XSLMessages.java,v 1.15 2004/02/16 19:14:07 minchau E |	 * $Id: XSLMessages.java,v 1.16 2005/01/23 00:20:47 mcnamara 
   * @param errorCode The key for the message text.	      |	   * @param msgKey    The key for the message text.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_ca.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_ca.java
 * $Id: XSLTErrorResources_ca.java,v 1.2 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_ca.java,v 1.3 2004/12/15 17:35:31 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      |	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_cs.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_cs.java
 * $Id: XSLTErrorResources_cs.java,v 1.2 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_cs.java,v 1.3 2004/12/15 17:35:31 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      |	  }
							      <
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_de.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_de.java
 * $Id: XSLTErrorResources_de.java,v 1.8 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_de.java,v 1.9 2004/12/15 17:35:31 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_es.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_es.java
 * $Id: XSLTErrorResources_es.java,v 1.8 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_es.java,v 1.9 2004/12/15 17:35:31 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_fr.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_fr.java
 * $Id: XSLTErrorResources_fr.java,v 1.8 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_fr.java,v 1.9 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_hu.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_hu.java
 * $Id: XSLTErrorResources_hu.java,v 1.2 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_hu.java,v 1.3 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_it.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_it.java
 * $Id: XSLTErrorResources_it.java,v 1.8 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_it.java,v 1.9 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_ja.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_ja.java
 * $Id: XSLTErrorResources_ja.java,v 1.8 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_ja.java,v 1.9 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: XSLTErrorResources.java,v 1.44 2004/02/23 21:33:14 ig |	 * $Id: XSLTErrorResources.java,v 1.52 2005/07/08 21:45:12 jy
  /** Maximum error messages, this is needed to keep track of <
  public static final int MAX_CODE = 201;		      <
							      <
  /** Maximum warnings, this is needed to keep track of the n <
  public static final int MAX_WARNING = 29;		      <
							      <
  /** Maximum misc strings.   */			      <
  public static final int MAX_OTHERS = 55;		      <
							      <
  /** Maximum total warnings and error messages.          */  <
  public static final int MAX_MESSAGES = MAX_CODE + MAX_WARNI <
							      <
							      <
							      >	  public static final String ER_INVALID_NAMESPACE_URI_VALUE_F
							      >		"ER_INVALID_SET_NAMESPACE_URI_VALUE_FOR_RESULT_PREFIX
							      >		
							      >	  public static final String ER_INVALID_NAMESPACE_URI_VALUE_F
							      >		"ER_INVALID_NAMESPACE_URI_VALUE_FOR_RESULT_PREFIX_FOR
							      >	   
							      >	  public static final String ER_NAMESPACE_CONTEXT_NULL_NAMESP
							      >	  	 "ER_NAMESPACE_CONTEXT_NULL_NAMESPACE";
							      >	  public static final String ER_NAMESPACE_CONTEXT_NULL_PREFIX
							      >	 	 "ER_NAMESPACE_CONTEXT_NULL_PREFIX";
							      >	  public static final String ER_XPATH_RESOLVER_NULL_QNAME =
							      >		 "ER_XPATH_RESOLVER_NULL_QNAME";
							      >	  public static final String ER_XPATH_RESOLVER_NEGATIVE_ARITY
							      >		 "ER_XPATH_RESOLVER_NEGATIVE_ARITY";
							      >	  public static final String ER_SET_FEATURE_NULL_NAME =
							      >	  	"ER_SET_FEATURE_NULL_NAME";
							      >	  public static final String ER_GET_FEATURE_NULL_NAME =
							      >	  	"ER_GET_FEATURE_NULL_NAME";
							      >	  public static final String ER_UNSUPPORTED_FEATURE =
							      >	  	"ER_UNSUPPORTED_FEATURE";
							      >	  public static final String ER_EXTENSION_ELEMENT_NOT_ALLOWED
							      >	  	"ER_EXTENSION_ELEMENT_NOT_ALLOWED_IN_SECURE_PROCESSIN
							      >	  public static final String NO_MODIFICATION_ALLOWED_ERR = 
							      >	         "NO_MODIFICATION_ALLOWED_ERR";
							      <
//  public static final int ER_NO_CURLYBRACE = 1;	      <
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
 							      <
							      <
  /** ER_NO_CURLYBRACE          */			      <
 							      <
//  public static final int ER_NO_CURLYBRACE = 1;	      <
  /** ER_ILLEGAL_ATTRIBUTE          */			      <
// public static final int ER_ILLEGAL_ATTRIBUTE = 2;	      <
							      <
  /** ER_NULL_SOURCENODE_APPLYIMPORTS          */	      <
//  public static final int ER_NULL_SOURCENODE_APPLYIMPORTS = <
							      <
  /** ER_CANNOT_ADD          */				      <
 // public static final int ER_CANNOT_ADD = 4; 		      <
							      <
							      <
  /** ER_NULL_SOURCENODE_HANDLEAPPLYTEMPLATES          */     <
//  public static final int ER_NULL_SOURCENODE_HANDLEAPPLYTEM <
							      <
							      <
  /** ER_NO_NAME_ATTRIB          */			      <
//  public static final int ER_NO_NAME_ATTRIB = 6;	      <
							      <
							      <
  /** ER_TEMPLATE_NOT_FOUND          */			      <
  //public static final int ER_TEMPLATE_NOT_FOUND = 7;	      <
							      <
							      <
  /** ER_CANT_RESOLVE_NAME_AVT          */		      <
  // public static final int ER_CANT_RESOLVE_NAME_AVT = 8;    <
							      <
  /** ER_REQUIRES_ATTRIB          */			      <
  //public static final int ER_REQUIRES_ATTRIB = 9;	      <
							      <
							      <
  /** ER_MUST_HAVE_TEST_ATTRIB          */		      <
 // public static final int ER_MUST_HAVE_TEST_ATTRIB = 10;    <
							      <
							      <
  /** ER_BAD_VAL_ON_LEVEL_ATTRIB          */		      <
//  public static final int ER_BAD_VAL_ON_LEVEL_ATTRIB = 11;  <
							      <
							      <
  /** ER_PROCESSINGINSTRUCTION_NAME_CANT_BE_XML          */   <
//  public static final int ER_PROCESSINGINSTRUCTION_NAME_CAN <
							      <
							      <
  /** ER_PROCESSINGINSTRUCTION_NOTVALID_NCNAME          */    <
//  public static final int ER_PROCESSINGINSTRUCTION_NOTVALID <
							      <
							      <
  /** ER_NEED_MATCH_ATTRIB          */			      <
//  public static final int ER_NEED_MATCH_ATTRIB = 14;	      <
							      <
							      <
  /** ER_NEED_NAME_OR_MATCH_ATTRIB          */		      <
//  public static final int ER_NEED_NAME_OR_MATCH_ATTRIB = 15 <
							      <
							      <
  /** ER_CANT_RESOLVE_NSPREFIX          */		      <
//  public static final int ER_CANT_RESOLVE_NSPREFIX = 16;    <
							      <
							      <
  /** ER_ILLEGAL_VALUE          */			      <
//  public static final int ER_ILLEGAL_VALUE = 17;	      <
							      <
							      <
  /** ER_NO_OWNERDOC          */			      <
//  public static final int ER_NO_OWNERDOC = 18;	      <
							      <
							      <
  /** ER_ELEMTEMPLATEELEM_ERR          */		      <
//  public static final int ER_ELEMTEMPLATEELEM_ERR = 19;     <
							      <
							      <
  /** ER_NULL_CHILD          */				      <
//  public static final int ER_NULL_CHILD = 20;		      <
							      <
							      <
  /** ER_NEED_SELECT_ATTRIB          */			      <
//  public static final int ER_NEED_SELECT_ATTRIB = 21;	      <
							      <
							      <
  /** ER_NEED_TEST_ATTRIB          */			      <
//  public static final int ER_NEED_TEST_ATTRIB = 22;	      <
							      <
							      <
  /** ER_NEED_NAME_ATTRIB          */			      <
//  public static final int ER_NEED_NAME_ATTRIB = 23;	      <
							      <
							      <
  /** ER_NO_CONTEXT_OWNERDOC          */		      <
//  public static final int ER_NO_CONTEXT_OWNERDOC = 24;      <
							      <
							      <
  /** ER_COULD_NOT_CREATE_XML_PROC_LIAISON          */	      <
//  public static final int ER_COULD_NOT_CREATE_XML_PROC_LIAI <
							      <
							      <
  /** ER_PROCESS_NOT_SUCCESSFUL          */		      <
//  public static final int ER_PROCESS_NOT_SUCCESSFUL = 26;   <
							      <
							      <
  /** ER_NOT_SUCCESSFUL          */			      <
//  public static final int ER_NOT_SUCCESSFUL = 27;	      <
							      <
							      <
  /** ER_ENCODING_NOT_SUPPORTED          */		      <
//  public static final int ER_ENCODING_NOT_SUPPORTED = 28;   <
							      <
							      <
  /** ER_COULD_NOT_CREATE_TRACELISTENER          */	      <
//  public static final int ER_COULD_NOT_CREATE_TRACELISTENER <
							      <
							      <
  /** ER_KEY_REQUIRES_NAME_ATTRIB          */		      <
//  public static final int ER_KEY_REQUIRES_NAME_ATTRIB = 30; <
							      <
							      <
  /** ER_KEY_REQUIRES_MATCH_ATTRIB          */		      <
//  public static final int ER_KEY_REQUIRES_MATCH_ATTRIB = 31 <
							      <
							      <
  /** ER_KEY_REQUIRES_USE_ATTRIB          */		      <
//  public static final int ER_KEY_REQUIRES_USE_ATTRIB = 32;  <
							      <
							      <
  /** ER_REQUIRES_ELEMENTS_ATTRIB          */		      <
//  public static final int ER_REQUIRES_ELEMENTS_ATTRIB = 33; <
							      <
							      <
  /** ER_MISSING_PREFIX_ATTRIB          */		      <
//  public static final int ER_MISSING_PREFIX_ATTRIB = 34;    <
							      <
							      <
  /** ER_BAD_STYLESHEET_URL          */			      <
//  public static final int ER_BAD_STYLESHEET_URL = 35;	      <
							      <
							      <
  /** ER_FILE_NOT_FOUND          */			      <
//  public static final int ER_FILE_NOT_FOUND = 36;	      <
							      <
							      <
  /** ER_IOEXCEPTION          */			      <
//  public static final int ER_IOEXCEPTION = 37;	      <
							      <
							      <
  /** ER_NO_HREF_ATTRIB          */			      <
//  public static final int ER_NO_HREF_ATTRIB = 38;	      <
							      <
							      <
  /** ER_STYLESHEET_INCLUDES_ITSELF          */		      <
//  public static final int ER_STYLESHEET_INCLUDES_ITSELF = 3 <
							      <
							      <
  /** ER_PROCESSINCLUDE_ERROR          */		      <
//  public static final int ER_PROCESSINCLUDE_ERROR = 40;     <
							      <
							      <
  /** ER_MISSING_LANG_ATTRIB          */		      <
//  public static final int ER_MISSING_LANG_ATTRIB = 41;      <
							      <
							      <
  /** ER_MISSING_CONTAINER_ELEMENT_COMPONENT          */      <
//  public static final int ER_MISSING_CONTAINER_ELEMENT_COMP <
							      <
  /** ER_CAN_ONLY_OUTPUT_TO_ELEMENT          */		      <
//  public static final int ER_CAN_ONLY_OUTPUT_TO_ELEMENT = 4 <
							      <
  /** ER_PROCESS_ERROR          */			      <
//  public static final int ER_PROCESS_ERROR = 44;	      <
							      <
  /** ER_UNIMPLNODE_ERROR          */			      <
//  public static final int ER_UNIMPLNODE_ERROR = 45;	      <
							      <
  /** ER_NO_SELECT_EXPRESSION          */		      <
//  public static final int ER_NO_SELECT_EXPRESSION = 46;     <
							      <
  /** ER_CANNOT_SERIALIZE_XSLPROCESSOR          */	      <
//  public static final int ER_CANNOT_SERIALIZE_XSLPROCESSOR  <
							      <
  /** ER_NO_INPUT_STYLESHEET          */		      <
//  public static final int ER_NO_INPUT_STYLESHEET = 48;      <
							      <
  /** ER_FAILED_PROCESS_STYLESHEET          */		      <
//  public static final int ER_FAILED_PROCESS_STYLESHEET = 49 <
							      <
  /** ER_COULDNT_PARSE_DOC          */			      <
//  public static final int ER_COULDNT_PARSE_DOC = 50;	      <
							      <
  /** ER_COULDNT_FIND_FRAGMENT          */		      <
//  public static final int ER_COULDNT_FIND_FRAGMENT = 51;    <
							      <
  /** ER_NODE_NOT_ELEMENT          */			      <
 // public static final int ER_NODE_NOT_ELEMENT = 52;	      <
							      <
  /** ER_FOREACH_NEED_MATCH_OR_NAME_ATTRIB          */	      <
//  public static final int ER_FOREACH_NEED_MATCH_OR_NAME_ATT <
							      <
  /** ER_TEMPLATES_NEED_MATCH_OR_NAME_ATTRIB          */      <
//  public static final int ER_TEMPLATES_NEED_MATCH_OR_NAME_A <
							      <
  /** ER_NO_CLONE_OF_DOCUMENT_FRAG          */		      <
//  public static final int ER_NO_CLONE_OF_DOCUMENT_FRAG = 55 <
							      <
  /** ER_CANT_CREATE_ITEM          */			      <
//  public static final int ER_CANT_CREATE_ITEM = 56;	      <
							      <
  /** ER_XMLSPACE_ILLEGAL_VALUE          */		      <
//  public static final int ER_XMLSPACE_ILLEGAL_VALUE = 57;   <
							      <
  /** ER_NO_XSLKEY_DECLARATION          */		      <
//  public static final int ER_NO_XSLKEY_DECLARATION = 58;    <
							      <
  /** ER_CANT_CREATE_URL          */			      <
//  public static final int ER_CANT_CREATE_URL = 59;	      <
							      <
  /** ER_XSLFUNCTIONS_UNSUPPORTED          */		      <
//  public static final int ER_XSLFUNCTIONS_UNSUPPORTED = 60; <
							      <
  /** ER_PROCESSOR_ERROR          */			      <
//  public static final int ER_PROCESSOR_ERROR = 61;	      <
							      <
  /** ER_NOT_ALLOWED_INSIDE_STYLESHEET          */	      <
//  public static final int ER_NOT_ALLOWED_INSIDE_STYLESHEET  <
							      <
  /** ER_RESULTNS_NOT_SUPPORTED          */		      <
//  public static final int ER_RESULTNS_NOT_SUPPORTED = 63;   <
							      <
  /** ER_DEFAULTSPACE_NOT_SUPPORTED          */		      <
//  public static final int ER_DEFAULTSPACE_NOT_SUPPORTED = 6 <
							      <
  /** ER_INDENTRESULT_NOT_SUPPORTED          */		      <
//  public static final int ER_INDENTRESULT_NOT_SUPPORTED = 6 <
							      <
  /** ER_ILLEGAL_ATTRIB          */			      <
//  public static final int ER_ILLEGAL_ATTRIB = 66;	      <
							      <
  /** ER_UNKNOWN_XSL_ELEM          */			      <
//  public static final int ER_UNKNOWN_XSL_ELEM = 67;	      <
							      <
  /** ER_BAD_XSLSORT_USE          */			      <
//  public static final int ER_BAD_XSLSORT_USE = 68;	      <
							      <
  /** ER_MISPLACED_XSLWHEN          */			      <
//  public static final int ER_MISPLACED_XSLWHEN = 69;	      <
							      <
  /** ER_XSLWHEN_NOT_PARENTED_BY_XSLCHOOSE          */	      <
//  public static final int ER_XSLWHEN_NOT_PARENTED_BY_XSLCHO <
							      <
  /** ER_MISPLACED_XSLOTHERWISE          */		      <
//  public static final int ER_MISPLACED_XSLOTHERWISE = 71;   <
							      <
  /** ER_XSLOTHERWISE_NOT_PARENTED_BY_XSLCHOOSE          */   <
//  public static final int ER_XSLOTHERWISE_NOT_PARENTED_BY_X <
							      <
  /** ER_NOT_ALLOWED_INSIDE_TEMPLATE          */	      <
//  public static final int ER_NOT_ALLOWED_INSIDE_TEMPLATE =  <
							      <
  /** ER_UNKNOWN_EXT_NS_PREFIX          */		      <
//  public static final int ER_UNKNOWN_EXT_NS_PREFIX = 74;    <
							      <
  /** ER_IMPORTS_AS_FIRST_ELEM          */		      <
//  public static final int ER_IMPORTS_AS_FIRST_ELEM = 75;    <
							      <
  /** ER_IMPORTING_ITSELF          */			      <
//  public static final int ER_IMPORTING_ITSELF = 76;	      <
							      <
  /** ER_XMLSPACE_ILLEGAL_VAL          */		      <
//  public static final int ER_XMLSPACE_ILLEGAL_VAL = 77;     <
							      <
  /** ER_PROCESSSTYLESHEET_NOT_SUCCESSFUL          */	      <
//  public static final int ER_PROCESSSTYLESHEET_NOT_SUCCESSF <
							      <
  /** ER_SAX_EXCEPTION          */			      <
//  public static final int ER_SAX_EXCEPTION = 79;	      <
							      <
  /** ER_FUNCTION_NOT_SUPPORTED          */		      <
//  public static final int ER_FUNCTION_NOT_SUPPORTED = 80;   <
  /** ER_XSLT_ERROR          */				      <
//  public static final int ER_XSLT_ERROR = 81;		      <
							      <
  /** ER_CURRENCY_SIGN_ILLEGAL          */		      <
//  public static final int ER_CURRENCY_SIGN_ILLEGAL = 82;    <
							      <
  /** ER_DOCUMENT_FUNCTION_INVALID_IN_STYLESHEET_DOM          <
//  public static final int ER_DOCUMENT_FUNCTION_INVALID_IN_S <
							      <
  /** ER_CANT_RESOLVE_PREFIX_OF_NON_PREFIX_RESOLVER           <
//  public static final int ER_CANT_RESOLVE_PREFIX_OF_NON_PRE <
							      <
  /** ER_REDIRECT_COULDNT_GET_FILENAME          */	      <
//  public static final int ER_REDIRECT_COULDNT_GET_FILENAME  <
							      <
  /** ER_CANNOT_BUILD_FORMATTERLISTENER_IN_REDIRECT           <
//  public static final int ER_CANNOT_BUILD_FORMATTERLISTENER <
							      <
  /** ER_INVALID_PREFIX_IN_EXCLUDERESULTPREFIX          */    <
//  public static final int ER_INVALID_PREFIX_IN_EXCLUDERESUL <
							      <
  /** ER_MISSING_NS_URI          */			      <
//  public static final int ER_MISSING_NS_URI = 88;	      <
							      <
  /** ER_MISSING_ARG_FOR_OPTION          */		      <
//  public static final int ER_MISSING_ARG_FOR_OPTION = 89;   <
							      <
  /** ER_INVALID_OPTION          */			      <
//  public static final int ER_INVALID_OPTION = 90;	      <
							      <
  /** ER_MALFORMED_FORMAT_STRING          */		      <
//  public static final int ER_MALFORMED_FORMAT_STRING = 91;  <
							      <
  /** ER_STYLESHEET_REQUIRES_VERSION_ATTRIB          */	      <
//  public static final int ER_STYLESHEET_REQUIRES_VERSION_AT <
							      <
  /** ER_ILLEGAL_ATTRIBUTE_VALUE          */		      <
//  public static final int ER_ILLEGAL_ATTRIBUTE_VALUE = 93;  <
							      <
  /** ER_CHOOSE_REQUIRES_WHEN          */		      <
//  public static final int ER_CHOOSE_REQUIRES_WHEN = 94;     <
							      <
  /** ER_NO_APPLY_IMPORT_IN_FOR_EACH          */	      <
//  public static final int ER_NO_APPLY_IMPORT_IN_FOR_EACH =  <
							      <
  /** ER_CANT_USE_DTM_FOR_OUTPUT          */		      <
//  public static final int ER_CANT_USE_DTM_FOR_OUTPUT = 96;  <
							      <
  /** ER_CANT_USE_DTM_FOR_INPUT          */		      <
//  public static final int ER_CANT_USE_DTM_FOR_INPUT = 97;   <
							      <
  /** ER_CALL_TO_EXT_FAILED          */			      <
//  public static final int ER_CALL_TO_EXT_FAILED = 98;	      <
							      <
  /** ER_PREFIX_MUST_RESOLVE          */		      <
//  public static final int ER_PREFIX_MUST_RESOLVE = 99;      <
							      <
  /** ER_INVALID_UTF16_SURROGATE          */		      <
//  public static final int ER_INVALID_UTF16_SURROGATE = 100; <
							      <
  /** ER_XSLATTRSET_USED_ITSELF          */		      <
 // public static final int ER_XSLATTRSET_USED_ITSELF = 101;  <
							      <
  /** ER_CANNOT_MIX_XERCESDOM          */		      <
//  public static final int ER_CANNOT_MIX_XERCESDOM = 102;    <
							      <
  /** ER_TOO_MANY_LISTENERS          */			      <
//  public static final int ER_TOO_MANY_LISTENERS = 103;      <
							      <
  /** ER_IN_ELEMTEMPLATEELEM_READOBJECT          */	      <
//  public static final int ER_IN_ELEMTEMPLATEELEM_READOBJECT <
							      <
  /** ER_DUPLICATE_NAMED_TEMPLATE          */		      <
//  public static final int ER_DUPLICATE_NAMED_TEMPLATE = 105 <
							      <
  /** ER_INVALID_KEY_CALL          */			      <
//  public static final int ER_INVALID_KEY_CALL = 106;	      <
							      <
  /** Variable is referencing itself          */	      <
//  public static final int ER_REFERENCING_ITSELF = 107;      <
							      <
  /** Illegal DOMSource input          */		      <
//  public static final int ER_ILLEGAL_DOMSOURCE_INPUT = 108; <
							      <
	/** Class not found for option         */	      <
//  public static final int ER_CLASS_NOT_FOUND_FOR_OPTION = 1 <
							      <
	/** Required Element not found         */	      <
//  public static final int ER_REQUIRED_ELEM_NOT_FOUND = 110; <
							      <
  /** InputStream cannot be null         */		      <
//  public static final int ER_INPUT_CANNOT_BE_NULL = 111;    <
							      <
  /** URI cannot be null         */			      <
//  public static final int ER_URI_CANNOT_BE_NULL = 112;      <
							      <
  /** File cannot be null         */			      <
//  public static final int ER_FILE_CANNOT_BE_NULL = 113;     <
							      <
   /** InputSource cannot be null         */		      <
//  public static final int ER_SOURCE_CANNOT_BE_NULL = 114;   <
							      <
  /** Can't overwrite cause         */			      <
//  public static final int ER_CANNOT_OVERWRITE_CAUSE = 115;  <
							      <
    //{ ER_CANNOT_OVERWRITE_CAUSE,			      <
	//	"Cannot overwrite cause"},		      <
							      <
  /** Could not initialize BSF Manager        */	      <
//  public static final int ER_CANNOT_INIT_BSFMGR = 116;      <
							      <
  /** Could not compile extension       */		      <
//  public static final int ER_CANNOT_CMPL_EXTENSN = 117;     <
							      <
  /** Could not create extension       */		      <
//  public static final int ER_CANNOT_CREATE_EXTENSN = 118;   <
							      <
  /** Instance method call to method {0} requires an Object i <
//  public static final int ER_INSTANCE_MTHD_CALL_REQUIRES =  <
							      <
  /** Invalid element name specified       */		      <
//  public static final int ER_INVALID_ELEMENT_NAME = 120;    <
							      <
   /** Element name method must be static      */	      <
//  public static final int ER_ELEMENT_NAME_METHOD_STATIC = 1 <
							      <
   /** Extension function {0} : {1} is unknown      */	      <
//  public static final int ER_EXTENSION_FUNC_UNKNOWN = 122;  <
							      <
   /** More than one best match for constructor for       */  <
//  public static final int ER_MORE_MATCH_CONSTRUCTOR = 123;  <
							      <
   /** More than one best match for method      */	      <
//  public static final int ER_MORE_MATCH_METHOD = 124;	      <
							      <
   /** More than one best match for element method      */    <
//  public static final int ER_MORE_MATCH_ELEMENT = 125;      <
							      <
   /** Invalid context passed to evaluate       */	      <
//  public static final int ER_INVALID_CONTEXT_PASSED = 126;  <
							      <
   /** Pool already exists       */			      <
//  public static final int ER_POOL_EXISTS = 127;	      <
							      <
   /** No driver Name specified      */			      <
//  public static final int ER_NO_DRIVER_NAME = 128;	      <
							      <
   /** No URL specified     */				      <
//  public static final int ER_NO_URL = 129;		      <
							      <
   /** Pool size is less than one    */			      <
//  public static final int ER_POOL_SIZE_LESSTHAN_ONE = 130;  <
							      <
   /** Invalid driver name specified    */		      <
//  public static final int ER_INVALID_DRIVER = 131;	      <
							      <
   /** Did not find the stylesheet root    */		      <
//  public static final int ER_NO_STYLESHEETROOT = 132;	      <
							      <
   /** Illegal value for xml:space     */		      <
//  public static final int ER_ILLEGAL_XMLSPACE_VALUE = 133;  <
							      <
   /** processFromNode failed     */			      <
//  public static final int ER_PROCESSFROMNODE_FAILED = 134;  <
							      <
   /** The resource [] could not load:     */		      <
//  public static final int ER_RESOURCE_COULD_NOT_LOAD = 135; <
							      <
							      <
   /** Buffer size <=0     */				      <
//  public static final int ER_BUFFER_SIZE_LESSTHAN_ZERO = 13 <
							      <
   /** Unknown error when calling extension    */	      <
//  public static final int ER_UNKNOWN_ERROR_CALLING_EXTENSIO <
							      <
   /** Prefix {0} does not have a corresponding namespace dec <
//  public static final int ER_NO_NAMESPACE_DECL = 138;	      <
							      <
   /** Element content not allowed for lang=javaclass   */    <
//  public static final int ER_ELEM_CONTENT_NOT_ALLOWED = 139 <
							      <
   /** Stylesheet directed termination   */		      <
//  public static final int ER_STYLESHEET_DIRECTED_TERMINATIO <
							      <
   /** 1 or 2   */					      <
//  public static final int ER_ONE_OR_TWO = 141;	      <
							      <
   /** 2 or 3   */					      <
//  public static final int ER_TWO_OR_THREE = 142;	      <
							      <
   /** Could not load {0} (check CLASSPATH), now using just t <
//  public static final int ER_COULD_NOT_LOAD_RESOURCE = 143; <
							      <
   /** Cannot initialize default templates   */		      <
//  public static final int ER_CANNOT_INIT_DEFAULT_TEMPLATES  <
							      <
   /** Result should not be null   */			      <
//  public static final int ER_RESULT_NULL = 145;	      <
							      <
   /** Result could not be set   */			      <
//  public static final int ER_RESULT_COULD_NOT_BE_SET = 146; <
							      <
   /** No output specified   */				      <
//  public static final int ER_NO_OUTPUT_SPECIFIED = 147;     <
							      <
   /** Can't transform to a Result of type   */		      <
//  public static final int ER_CANNOT_TRANSFORM_TO_RESULT_TYP <
							      <
   /** Can't transform to a Source of type   */		      <
//  public static final int ER_CANNOT_TRANSFORM_SOURCE_TYPE = <
							      <
   /** Null content handler  */				      <
//  public static final int ER_NULL_CONTENT_HANDLER = 150;    <
							      <
   /** Null error handler  */				      <
//  public static final int ER_NULL_ERROR_HANDLER = 151;      <
   /** parse can not be called if the ContentHandler has not  <
//  public static final int ER_CANNOT_CALL_PARSE = 152;	      <
							      <
   /**  No parent for filter */				      <
//  public static final int ER_NO_PARENT_FOR_FILTER = 153;    <
							      <
							      <
   /**  No stylesheet found in: {0}, media */		      <
//  public static final int ER_NO_STYLESHEET_IN_MEDIA = 154;  <
							      <
   /**  No xml-stylesheet PI found in */		      <
//  public static final int ER_NO_STYLESHEET_PI = 155;	      <
							      <
   /**  No default implementation found */		      <
//  public static final int ER_NO_DEFAULT_IMPL = 156;	      <
							      <
    //{ ER_NO_DEFAULT_IMPL,				      <
     //    "No default implementation found "},		      <
							      <
   /**  ChunkedIntArray({0}) not currently supported */	      <
//  public static final int ER_CHUNKEDINTARRAY_NOT_SUPPORTED  <
							      <
    //{ ER_CHUNKEDINTARRAY_NOT_SUPPORTED,		      <
     //  "ChunkedIntArray({0}) not currently supported"},     <
							      <
   /**  Offset bigger than slot */			      <
//  public static final int ER_OFFSET_BIGGER_THAN_SLOT = 158; <
							      <
    //{ ER_OFFSET_BIGGER_THAN_SLOT,			      <
     //  "Offset bigger than slot"},			      <
							      <
   /**  Coroutine not available, id= */			      <
//  public static final int ER_COROUTINE_NOT_AVAIL = 159;     <
							      <
    //{ ER_COROUTINE_NOT_AVAIL,				      <
    //   "Coroutine not available, id={0}"},		      <
							      <
   /**  CoroutineManager recieved co_exit() request */	      <
//  public static final int ER_COROUTINE_CO_EXIT = 160;	      <
							      <
    //{ ER_COROUTINE_CO_EXIT,				      <
     //  "CoroutineManager received co_exit() request"},      <
							      <
   /**  co_joinCoroutineSet() failed */			      <
//  public static final int ER_COJOINROUTINESET_FAILED = 161; <
							      <
    //{ ER_COJOINROUTINESET_FAILED,			      <
    //   "co_joinCoroutineSet() failed"},		      <
							      <
   /**  Coroutine parameter error () */			      <
//  public static final int ER_COROUTINE_PARAM = 162;	      <
							      <
    //{ ER_COROUTINE_PARAM,				      <
    //   "Coroutine parameter error ({0})"},		      <
							      <
   /**  UNEXPECTED: Parser doTerminate answers  */	      <
//  public static final int ER_PARSER_DOTERMINATE_ANSWERS = 1 <
							      <
    //{ ER_PARSER_DOTERMINATE_ANSWERS,			      <
    //   "\nUNEXPECTED: Parser doTerminate answers {0}"},     <
							      <
   /**  parse may not be called while parsing */	      <
//  public static final int ER_NO_PARSE_CALL_WHILE_PARSING =  <
							      <
    //{ ER_NO_PARSE_CALL_WHILE_PARSING,			      <
    //   "parse may not be called while parsing"},	      <
							      <
   /**  Error: typed iterator for axis  {0} not implemented   <
//  public static final int ER_TYPED_ITERATOR_AXIS_NOT_IMPLEM <
							      <
    //{ ER_TYPED_ITERATOR_AXIS_NOT_IMPLEMENTED,		      <
     //  "Error: typed iterator for axis  {0} not implemented <
							      <
   /**  Error: iterator for axis {0} not implemented  */      <
//  public static final int ER_ITERATOR_AXIS_NOT_IMPLEMENTED  <
							      <
    //{ ER_ITERATOR_AXIS_NOT_IMPLEMENTED,		      <
    //   "Error: iterator for axis {0} not implemented "},    <
							      <
   /**  Iterator clone not supported  */		      <
//  public static final int ER_ITERATOR_CLONE_NOT_SUPPORTED = <
							      <
    //{ ER_ITERATOR_CLONE_NOT_SUPPORTED,		      <
     //  "Iterator clone not supported"},		      <
							      <
   /**  Unknown axis traversal type  */			      <
//  public static final int ER_UNKNOWN_AXIS_TYPE = 168;	      <
							      <
    //{ ER_UNKNOWN_AXIS_TYPE,				      <
    //   "Unknown axis traversal type: {0}"},		      <
							      <
   /**  Axis traverser not supported  */		      <
//  public static final int ER_AXIS_NOT_SUPPORTED = 169;      <
							      <
    //{ ER_AXIS_NOT_SUPPORTED,				      <
    //   "Axis traverser not supported: {0}"},		      <
							      <
   /**  No more DTM IDs are available  */		      <
//  public static final int ER_NO_DTMIDS_AVAIL = 170;	      <
							      <
    //{ ER_NO_DTMIDS_AVAIL,				      <
     //  "No more DTM IDs are available"},		      <
							      <
   /**  Not supported  */				      <
//  public static final int ER_NOT_SUPPORTED = 171;	      <
							      <
   /**  node must be non-null for getDTMHandleFromNode  */    <
//  public static final int ER_NODE_NON_NULL = 172;	      <
							      <
    //{ ER_NODE_NON_NULL,				      <
    //   "Node must be non-null for getDTMHandleFromNode"},   <
							      <
   /**  Could not resolve the node to a handle  */	      <
//  public static final int ER_COULD_NOT_RESOLVE_NODE = 173;  <
							      <
    //{ ER_COULD_NOT_RESOLVE_NODE,			      <
    //   "Could not resolve the node to a handle"},	      <
							      <
   /**  startParse may not be called while parsing */	      <
//  public static final int ER_STARTPARSE_WHILE_PARSING = 174 <
							      <
    //{ ER_STARTPARSE_WHILE_PARSING,			      <
     //  "startParse may not be called while parsing"},	      <
							      <
   /**  startParse needs a non-null SAXParser  */	      <
//  public static final int ER_STARTPARSE_NEEDS_SAXPARSER = 1 <
							      <
    //{ ER_STARTPARSE_NEEDS_SAXPARSER,			      <
    //   "startParse needs a non-null SAXParser"},	      <
							      <
   /**  could not initialize parser with */		      <
//  public static final int ER_COULD_NOT_INIT_PARSER = 176;   <
    //{ ER_COULD_NOT_INIT_PARSER,			      <
     //  "could not initialize parser with"},		      <
							      <
   /**  Value for property {0} should be a Boolean instance   <
//  public static final int ER_PROPERTY_VALUE_BOOLEAN = 177;  <
							      <
   /**  exception creating new instance for pool  */	      <
//  public static final int ER_EXCEPTION_CREATING_POOL = 178; <
							      <
    //{ ER_EXCEPTION_CREATING_POOL,			      <
    //   "exception creating new instance for pool"},	      <
							      <
   /**  Path contains invalid escape sequence  */	      <
//  public static final int ER_PATH_CONTAINS_INVALID_ESCAPE_S <
							      <
    //{ ER_PATH_CONTAINS_INVALID_ESCAPE_SEQUENCE,	      <
    //   "Path contains invalid escape sequence"},	      <
							      <
   /**  Scheme is required!  */				      <
//  public static final int ER_SCHEME_REQUIRED = 180;	      <
							      <
    //{ ER_SCHEME_REQUIRED,				      <
     //  "Scheme is required!"},			      <
							      <
   /**  No scheme found in URI  */			      <
//  public static final int ER_NO_SCHEME_IN_URI = 181;	      <
							      <
    //{ ER_NO_SCHEME_IN_URI,				      <
    //   "No scheme found in URI: {0}"},		      <
							      <
   /**  No scheme found in URI  */			      <
//  public static final int ER_NO_SCHEME_INURI = 182;	      <
							      <
    //{ ER_NO_SCHEME_INURI,				      <
    //   "No scheme found in URI"},			      <
							      <
   /**  Path contains invalid character:   */		      <
//  public static final int ER_PATH_INVALID_CHAR = 183;	      <
							      <
    //{ ER_PATH_INVALID_CHAR,				      <
    //   "Path contains invalid character: {0}"},	      <
							      <
   /**  Cannot set scheme from null string  */		      <
//  public static final int ER_SCHEME_FROM_NULL_STRING = 184; <
							      <
    //{ ER_SCHEME_FROM_NULL_STRING,			      <
    //   "Cannot set scheme from null string"},		      <
							      <
   /**  The scheme is not conformant. */		      <
//  public static final int ER_SCHEME_NOT_CONFORMANT = 185;   <
							      <
    //{ ER_SCHEME_NOT_CONFORMANT,			      <
    //   "The scheme is not conformant."},		      <
							      <
   /**  Host is not a well formed address  */		      <
//  public static final int ER_HOST_ADDRESS_NOT_WELLFORMED =  <
							      <
    //{ ER_HOST_ADDRESS_NOT_WELLFORMED,			      <
    //   "Host is not a well formed address"},		      <
							      <
   /**  Port cannot be set when host is null  */	      <
//  public static final int ER_PORT_WHEN_HOST_NULL = 187;     <
							      <
    //{ ER_PORT_WHEN_HOST_NULL,				      <
    //   "Port cannot be set when host is null"},	      <
							      <
   /**  Invalid port number  */				      <
//  public static final int ER_INVALID_PORT = 188;	      <
							      <
    //{ ER_INVALID_PORT,				      <
    //   "Invalid port number"},			      <
							      <
   /**  Fragment can only be set for a generic URI  */	      <
//  public static final int ER_FRAG_FOR_GENERIC_URI = 189;    <
							      <
    //{ ER_FRAG_FOR_GENERIC_URI,			      <
    //   "Fragment can only be set for a generic URI"},	      <
							      <
   /**  Fragment cannot be set when path is null  */	      <
//  public static final int ER_FRAG_WHEN_PATH_NULL = 190;     <
							      <
    //{ ER_FRAG_WHEN_PATH_NULL,				      <
    //   "Fragment cannot be set when path is null"},	      <
							      <
   /**  Fragment contains invalid character  */		      <
//  public static final int ER_FRAG_INVALID_CHAR = 191;	      <
							      <
    //{ ER_FRAG_INVALID_CHAR,				      <
    //   "Fragment contains invalid character"},	      <
							      <
							      <
							      <
   /** Parser is already in use  */			      <
//  public static final int ER_PARSER_IN_USE = 192;	      <
							      <
    //{ ER_PARSER_IN_USE,				      <
    //    "Parser is already in use"},			      <
							      <
   /** Parser is already in use  */			      <
//  public static final int ER_CANNOT_CHANGE_WHILE_PARSING =  <
							      <
    //{ ER_CANNOT_CHANGE_WHILE_PARSING,			      <
    //    "Cannot change {0} {1} while parsing"},	      <
							      <
   /** Self-causation not permitted  */			      <
//  public static final int ER_SELF_CAUSATION_NOT_PERMITTED = <
							      <
    //{ ER_SELF_CAUSATION_NOT_PERMITTED,		      <
     //   "Self-causation not permitted"},		      <
							      <
   /** src attribute not yet supported for  */		      <
//  public static final int ER_COULD_NOT_FIND_EXTERN_SCRIPT = <
							      <
  /** The resource [] could not be found     */		      <
//  public static final int ER_RESOURCE_COULD_NOT_FIND = 196; <
							      <
   /** output property not recognized:  */		      <
//  public static final int ER_OUTPUT_PROPERTY_NOT_RECOGNIZED <
							      <
   /** Userinfo may not be specified if host is not specified <
//  public static final int ER_NO_USERINFO_IF_NO_HOST = 198;  <
							      <
    //{ ER_NO_USERINFO_IF_NO_HOST,			      <
    //    "Userinfo may not be specified if host is not speci <
							      <
   /** Port may not be specified if host is not specified   * <
//  public static final int ER_NO_PORT_IF_NO_HOST = 199;      <
							      <
    //{ ER_NO_PORT_IF_NO_HOST,				      <
    //    "Port may not be specified if host is not specified <
							      <
   /** Query string cannot be specified in path and query str <
//  public static final int ER_NO_QUERY_STRING_IN_PATH = 200; <
							      <
    //{ ER_NO_QUERY_STRING_IN_PATH, 			      <
    //    "Query string cannot be specified in path and query <
							      <
   /** Fragment cannot be specified in both the path and frag <
//  public static final int ER_NO_FRAGMENT_STRING_IN_PATH = 2 <
							      <
    //{ ER_NO_FRAGMENT_STRING_IN_PATH,			      <
    //    "Fragment cannot be specified in both the path and  <
							      <
   /** Cannot initialize URI with empty parameters   */	      <
//  public static final int ER_CANNOT_INIT_URI_EMPTY_PARMS =  <
							      <
    //{ ER_CANNOT_INIT_URI_EMPTY_PARMS, 		      <
    //    "Cannot initialize URI with empty parameters"},     <
							      <
   /** Failed creating ElemLiteralResult instance   */	      <
//  public static final int ER_FAILED_CREATING_ELEMLITRSLT =  <
							      <
							      <
   /** Priority value does not contain a parsable number   */ <
//  public static final int ER_VALUE_SHOULD_BE_NUMBER = 204;  <
							      <
   /**  Value for {0} should equal 'yes' or 'no'   */	      <
//  public static final int ER_VALUE_SHOULD_EQUAL = 205;      <
							      <
   /**  Failed calling {0} method   */			      <
//  public static final int ER_FAILED_CALLING_METHOD = 206;   <
							      <
   /** Failed creating ElemLiteralResult instance   */	      <
//  public static final int ER_FAILED_CREATING_ELEMTMPL = 207 <
							      <
   /**  Characters are not allowed at this point in the docum <
//  public static final int ER_CHARS_NOT_ALLOWED = 208;	      <
							      <
  /**  attribute is not allowed on the element   */	      <
//  public static final int ER_ATTR_NOT_ALLOWED = 209;	      <
  /**  Method not yet supported    */			      <
//  public static final int ER_METHOD_NOT_SUPPORTED = 210;    <
							      <
    //{ ER_METHOD_NOT_SUPPORTED,			      <
     //   "Method not yet supported "},			      <
							      <
  /**  Bad value    */					      <
//  public static final int ER_BAD_VALUE = 211;		      <
							      <
  /**  attribute value not found   */			      <
//  public static final int ER_ATTRIB_VALUE_NOT_FOUND = 212;  <
							      <
  /**  attribute value not recognized    */		      <
//  public static final int ER_ATTRIB_VALUE_NOT_RECOGNIZED =  <
							      <
  /** IncrementalSAXSource_Filter not currently restartable   <
//  public static final int ER_INCRSAXSRCFILTER_NOT_RESTARTAB <
							      <
    //{ ER_INCRSAXSRCFILTER_NOT_RESTARTABLE,		      <
   //  "IncrementalSAXSource_Filter not currently restartable <
							      <
  /** IncrementalSAXSource_Filter not currently restartable   <
//  public static final int ER_XMLRDR_NOT_BEFORE_STARTPARSE = <
							      <
    //{ ER_XMLRDR_NOT_BEFORE_STARTPARSE,		      <
    // "XMLReader not before startParse request"},	      <
							      <
  /** Attempting to generate a namespace prefix with a null U <
//  public static final int ER_NULL_URI_NAMESPACE = 216;      <
							      <
  //New ERROR keys added in XALAN code base after Jdk 1.4 (Xa <
							      <
  /** Attempting to generate a namespace prefix with a null U <
//  public static final int ER_NUMBER_TOO_BIG = 217;	      <
							      <
//ER_CANNOT_FIND_SAX1_DRIVER				      <
							      <
//  public static final int  ER_CANNOT_FIND_SAX1_DRIVER = 218 <
							      <
//ER_SAX1_DRIVER_NOT_LOADED				      <
//  public static final int  ER_SAX1_DRIVER_NOT_LOADED = 219; <
							      <
//ER_SAX1_DRIVER_NOT_INSTANTIATED			      <
//  public static final int  ER_SAX1_DRIVER_NOT_INSTANTIATED  <
							      <
							      <
// ER_SAX1_DRIVER_NOT_IMPLEMENT_PARSER			      <
//  public static final int ER_SAX1_DRIVER_NOT_IMPLEMENT_PARS <
							      <
// ER_PARSER_PROPERTY_NOT_SPECIFIED			      <
//  public static final int  ER_PARSER_PROPERTY_NOT_SPECIFIED <
							      <
//ER_PARSER_ARG_CANNOT_BE_NULL				      <
//  public static final int  ER_PARSER_ARG_CANNOT_BE_NULL = 2 <
							      <
							      <
// ER_FEATURE						      <
//  public static final int  ER_FEATURE = 224;		      <
							      <
							      <
// ER_PROPERTY						      <
//  public static final int ER_PROPERTY = 225 ;		      <
							      <
// ER_NULL_ENTITY_RESOLVER				      <
//  public static final int ER_NULL_ENTITY_RESOLVER  = 226;   <
							      <
// ER_NULL_DTD_HANDLER					      <
//  public static final int  ER_NULL_DTD_HANDLER = 227 ;      <
							      <
// No Driver Name Specified!				      <
//  public static final int ER_NO_DRIVER_NAME_SPECIFIED = 228 <
							      <
// No URL Specified!					      <
//  public static final int ER_NO_URL_SPECIFIED = 229;	      <
							      <
// Pool size is less than 1!				      <
//  public static final int ER_POOLSIZE_LESS_THAN_ONE = 230;  <
							      <
// Invalid Driver Name Specified!			      <
//  public static final int ER_INVALID_DRIVER_NAME = 231;     <
							      <
							      <
// ErrorListener					      <
//  public static final int ER_ERRORLISTENER = 232;	      <
// Programmer's error! expr has no ElemTemplateElement parent <
//  public static final int ER_ASSERT_NO_TEMPLATE_PARENT = 23 <
// Programmer''s assertion in RedundentExprEliminator: {0}    <
//  public static final int ER_ASSERT_REDUNDENT_EXPR_ELIMINAT <
// Axis traverser not supported: {0}			      <
//  public static final int ER_AXIS_TRAVERSER_NOT_SUPPORTED = <
    //{ ER_AXIS_TRAVERSER_NOT_SUPPORTED,		      <
    // "Axis traverser not supported: {0}"},		      <
							      <
// ListingErrorHandler created with null PrintWriter!	      <
//  public static final int ER_ERRORHANDLER_CREATED_WITH_NULL <
    //{ ER_ERRORHANDLER_CREATED_WITH_NULL_PRINTWRITER,	      <
    // "ListingErrorHandler created with null PrintWriter!"}, <
							      <
  // {0}is not allowed in this position in the stylesheet!    <
//  public static final int ER_NOT_ALLOWED_IN_POSITION = 237; <
  // Non-whitespace text is not allowed in this position in t <
//  public static final int ER_NONWHITESPACE_NOT_ALLOWED_IN_P <
  // Illegal value: {1} used for CHAR attribute: {0}.  An att <
//  public static final int INVALID_TCHAR = 239;	      <
//  public static final int ER_SYSTEMID_UNKNOWN = 240;	      <
    //{ ER_SYSTEMID_UNKNOWN,				      <
    // "SystemId Unknown"},				      <
							      <
  // Location of error unknown				      <
//  public static final int ER_LOCATION_UNKNOWN = 241;	      <
    //{ ER_LOCATION_UNKNOWN,				      <
    // "Location of error unknown"},			      <
							      <
    // INVALID_QNAME					      <
							      <
  // Illegal value: {1} used for QNAME attribute: {0}	      <
//  public static final int INVALID_QNAME = 242;	      <
    // INVALID_ENUM					      <
							      <
  // Illegal value: {1} used for ENUM attribute: {0}.  Valid  <
//  public static final int INVALID_ENUM = 243;		      <
// INVALID_NMTOKEN					      <
							      <
  // Illegal value: {1} used for NMTOKEN attribute: {0}.      <
//  public static final int INVALID_NMTOKEN = 244;	      <
// INVALID_NCNAME					      <
							      <
  // Illegal value: {1} used for NCNAME attribute: {0}.	      <
//  public static final int INVALID_NCNAME = 245;	      <
// INVALID_BOOLEAN					      <
							      <
  // Illegal value: {1} used for boolean attribute: {0}.      <
//  public static final int INVALID_BOOLEAN = 246;	      <
							      <
// INVALID_NUMBER					      <
							      <
  // Illegal value: {1} used for number attribute: {0}.	      <
//  public static final int INVALID_NUMBER = 247;	      <
							      <
  // Argument to {0} in match pattern must be a literal.      <
//  public static final int ER_ARG_LITERAL             = 248; <
							      <
  // Duplicate global variable declaration.		      <
//  public static final int ER_DUPLICATE_GLOBAL_VAR    = 249; <
							      <
  // Duplicate variable declaration.			      <
//  public static final int ER_DUPLICATE_VAR           = 250; <
							      <
  // xsl:template must have a name or match attribute (or bot <
//  public static final int ER_TEMPLATE_NAME_MATCH     = 251; <
							      <
  // Prefix in exclude-result-prefixes is not valid: {0}      <
//  public static final int ER_INVALID_PREFIX          = 252; <
							      <
  // attribute-set named {0} does not exist		      <
//  public static final int ER_NO_ATTRIB_SET           = 253; <
//ER_FUNCTION_NOT_FOUND					      <
//  public static final int ER_FUNCTION_NOT_FOUND = 254;      <
							      <
//  ER_CANT_HAVE_CONTENT_AND_SELECT			      <
//  public static final int ER_CANT_HAVE_CONTENT_AND_SELECT = <
//  ER_INVALID_SET_PARAM_VALUE				      <
//  public static final int ER_INVALID_SET_PARAM_VALUE = 256; <
							      >	    { ER_INVALID_NAMESPACE_URI_VALUE_FOR_RESULT_PREFIX_FOR_DE
							      >	      "The result-prefix attribute of an xsl:namespace-alias 
							      >
							      >	    { ER_INVALID_NAMESPACE_URI_VALUE_FOR_RESULT_PREFIX,
							      >	      "The result-prefix attribute of an xsl:namespace-alias 
							      >
							      >	    { ER_SET_FEATURE_NULL_NAME,
							      >	      "The feature name cannot be null in TransformerFactory.
							      >	    
							      >	    { ER_GET_FEATURE_NULL_NAME,
							      >	      "The feature name cannot be null in TransformerFactory.
							      >	    
							      >	    { ER_UNSUPPORTED_FEATURE,
							      >	      "Cannot set the feature ''{0}'' on this TransformerFact
							      >	    
							      >	    { ER_EXTENSION_ELEMENT_NOT_ALLOWED_IN_SECURE_PROCESSING,
							      >	  	  "Use of the extension element ''{0}'' is not allowe
							      >	    
							      >	    { ER_NAMESPACE_CONTEXT_NULL_NAMESPACE, 		
							      >	      "Cannot get the prefix for a null namespace uri."},
							      >	    { ER_NAMESPACE_CONTEXT_NULL_PREFIX, 		
							      >	      "Cannot get the namespace uri for null prefix."},
							      >	    { ER_XPATH_RESOLVER_NULL_QNAME, 		
							      >	      "The function name cannot be null."},
							      >
							      >	    { ER_XPATH_RESOLVER_NEGATIVE_ARITY, 		
							      >	      "The arity cannot be negative."},
  /** WG_FOUND_CURLYBRACE          */			      <
//  public static final int WG_FOUND_CURLYBRACE = 1;	      <
  /** WG_COUNT_ATTRIB_MATCHES_NO_ANCESTOR          */	      <
//  public static final int WG_COUNT_ATTRIB_MATCHES_NO_ANCEST <
							      <
  /** WG_EXPR_ATTRIB_CHANGED_TO_SELECT          */	      <
//  public static final int WG_EXPR_ATTRIB_CHANGED_TO_SELECT  <
							      <
  /** WG_NO_LOCALE_IN_FORMATNUMBER          */		      <
//  public static final int WG_NO_LOCALE_IN_FORMATNUMBER = 4; <
							      <
  /** WG_LOCALE_NOT_FOUND          */			      <
//  public static final int WG_LOCALE_NOT_FOUND = 5;	      <
							      <
  /** WG_CANNOT_MAKE_URL_FROM          */		      <
//  public static final int WG_CANNOT_MAKE_URL_FROM = 6;      <
							      <
  /** WG_CANNOT_LOAD_REQUESTED_DOC          */		      <
//  public static final int WG_CANNOT_LOAD_REQUESTED_DOC = 7; <
							      <
  /** WG_CANNOT_FIND_COLLATOR          */		      <
//  public static final int WG_CANNOT_FIND_COLLATOR = 8;      <
  /** WG_FUNCTIONS_SHOULD_USE_URL          */		      <
//  public static final int WG_FUNCTIONS_SHOULD_USE_URL = 9;  <
							      <
  /** WG_ENCODING_NOT_SUPPORTED_USING_UTF8          */	      <
//  public static final int WG_ENCODING_NOT_SUPPORTED_USING_U <
							      <
  /** WG_ENCODING_NOT_SUPPORTED_USING_JAVA          */	      <
//  public static final int WG_ENCODING_NOT_SUPPORTED_USING_J <
							      <
  /** WG_SPECIFICITY_CONFLICTS          */		      <
//  public static final int WG_SPECIFICITY_CONFLICTS = 12;    <
							      <
  /** WG_PARSING_AND_PREPARING          */		      <
//  public static final int WG_PARSING_AND_PREPARING = 13;    <
							      <
  /** WG_ATTR_TEMPLATE          */			      <
//  public static final int WG_ATTR_TEMPLATE = 14;	      <
							      <
  /** WG_CONFLICT_BETWEEN_XSLSTRIPSPACE_AND_XSLPRESERVESPACE  <
//  public static final int WG_CONFLICT_BETWEEN_XSLSTRIPSPACE <
							      <
  /** WG_ATTRIB_NOT_HANDLED          */			      <
//  public static final int WG_ATTRIB_NOT_HANDLED = 16;	      <
							      <
  /** WG_NO_DECIMALFORMAT_DECLARATION          */	      <
//  public static final int WG_NO_DECIMALFORMAT_DECLARATION = <
							      <
  /** WG_OLD_XSLT_NS          */			      <
//  public static final int WG_OLD_XSLT_NS = 18;	      <
							      <
  /** WG_ONE_DEFAULT_XSLDECIMALFORMAT_ALLOWED          */     <
//  public static final int WG_ONE_DEFAULT_XSLDECIMALFORMAT_A <
							      <
  /** WG_XSLDECIMALFORMAT_NAMES_MUST_BE_UNIQUE          */    <
//  public static final int WG_XSLDECIMALFORMAT_NAMES_MUST_BE <
							      <
  /** WG_ILLEGAL_ATTRIBUTE          */			      <
  //public static final int WG_ILLEGAL_ATTRIBUTE = 21;	      <
							      <
  /** WG_COULD_NOT_RESOLVE_PREFIX          */		      <
//  public static final int WG_COULD_NOT_RESOLVE_PREFIX = 22; <
							      <
  /** WG_STYLESHEET_REQUIRES_VERSION_ATTRIB          */	      <
//  public static final int WG_STYLESHEET_REQUIRES_VERSION_AT <
  /** WG_ILLEGAL_ATTRIBUTE_NAME          */		      <
//  public static final int WG_ILLEGAL_ATTRIBUTE_NAME = 24;   <
							      <
  /** WG_ILLEGAL_ATTRIBUTE_VALUE          */		      <
//  public static final int WG_ILLEGAL_ATTRIBUTE_VALUE = 25;  <
  /** WG_EMPTY_SECOND_ARG          */			      <
//  public static final int WG_EMPTY_SECOND_ARG = 26;	      <
							      <
    // WG_PROCESSINGINSTRUCTION_NAME_CANT_BE_XML	      <
							      <
							      <
  /** WG_PROCESSINGINSTRUCTION_NAME_CANT_BE_XML          */   <
//  public static final int WG_PROCESSINGINSTRUCTION_NAME_CAN <
    // WG_PROCESSINGINSTRUCTION_NOTVALID_NCNAME		      <
							      <
  /** WG_PROCESSINGINSTRUCTION_NOTVALID_NCNAME          */    <
//  public static final int WG_PROCESSINGINSTRUCTION_NOTVALID <
      "The value of the 'name' attribute of xsl:processing-in |	      "The value of the ''name'' attribute of xsl:processing-
    // WG_ILLEGAL_ATTRIBUTE_POSITION			      <
							      <
  /** WG_ILLEGAL_ATTRIBUTE_POSITION         */		      <
//  public static final int WG_ILLEGAL_ATTRIBUTE_POSITION = 2 <
							      >	    { NO_MODIFICATION_ALLOWED_ERR,
							      >	      "An attempt is made to modify an object where modificat
							      >	    },
							      >
							      >	  { "optionSECUREPROCESSING", "   [-SECURE (set the secure pr
							      |	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_ko.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_ko.java
 * $Id: XSLTErrorResources_ko.java,v 1.8 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_ko.java,v 1.9 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_pl.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_pl.java
 * $Id: XSLTErrorResources_pl.java,v 1.2 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_pl.java,v 1.3 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_pt_BR.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_pt_BR.java
 * $Id: XSLTErrorResources_pt_BR.java,v 1.2 2004/02/16 19:14: |	 * $Id: XSLTErrorResources_pt_BR.java,v 1.3 2004/12/15 17:35:
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_ru.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_ru.java
 * $Id: XSLTErrorResources_ru.java,v 1.2 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_ru.java,v 1.3 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_sk.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_sk.java
 * $Id: XSLTErrorResources_sk.java,v 1.2 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_sk.java,v 1.3 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_sv.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_sv.java
 * $Id: XSLTErrorResources_sv.java,v 1.7 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_sv.java,v 1.8 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table. 				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_tr.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_tr.java
 * $Id: XSLTErrorResources_tr.java,v 1.2 2004/02/16 19:14:07  |	 * $Id: XSLTErrorResources_tr.java,v 1.3 2004/12/15 17:35:32 
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_zh_CN.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_zh_CN.java
 * $Id: XSLTErrorResources_zh_CN.java,v 1.8 2004/02/16 19:14: |	 * $Id: XSLTErrorResources_zh_CN.java,v 1.9 2004/12/15 17:35:
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/res/XSLTErrorResources_zh_TW.java xalan-j_2_7_0/src/org/apache/xalan/res/XSLTErrorResources_zh_TW.java
 * $Id: XSLTErrorResources_zh_TW.java,v 1.8 2004/02/16 19:14: |	 * $Id: XSLTErrorResources_zh_TW.java,v 1.9 2004/12/15 17:35:
  /** The lookup table for error messages.   */		      |	  /** Get the lookup table for error messages.   
  public static final Object[][] contents = {		      |	   *
							      >	   * @return The int to message lookup table.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      >	  }
  /**							      <
   * Get the lookup table.				      <
   *							      <
   * @return The int to message lookup table.		      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/serialize/SerializerFactory.java xalan-j_2_7_0/src/org/apache/xalan/serialize/SerializerFactory.java
 * $Id: SerializerFactory.java,v 1.10 2004/02/16 20:27:14 min |	 * $Id: SerializerFactory.java,v 1.11 2005/01/24 04:04:39 mcn
     * {@link Method}.					      |	     * {@link org.apache.xml.serializer.Method}.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/serialize/SerializerUtils.java xalan-j_2_7_0/src/org/apache/xalan/serialize/SerializerUtils.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: SerializerUtils.java,v 1.3 2004/02/16 20:27:14 mincha |	 * $Id: SerializerUtils.java,v 1.6 2005/02/11 06:18:14 mincha
                dtm.getNodeValue(attr));		      |	                dtm.getNodeValue(attr), false);
							      >
                if (dtm.getNamespaceURI(n) == null)	      |	                if (dtm.getNodeType(n) == DTM.ELEMENT_NODE
							      >	                        && dtm.getNamespaceURI(n) == null)
                // bjm - some changes here to get desturi     |	                // Brian M. - some changes here to get destur
     *							      <
     * @param ns Namespace URI of the element		      <
     * @param rawName Raw name of element (with prefix)	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/AVT.java xalan-j_2_7_0/src/org/apache/xalan/templates/AVT.java
 * $Id: AVT.java,v 1.22 2004/02/16 20:32:32 minchau Exp $     |	 * $Id: AVT.java,v 1.26 2005/01/23 00:27:29 mcnamara Exp $
							      |	    static final long serialVersionUID = 5167607155517042691L
							      >	  
							      >	  /**
							      >	    *We are not going to use the object pool if USE_OBJECT_PO
							      >	  */
							      >	  private final static boolean USE_OBJECT_POOL = false; 
							      >	  
							      >	  /**
							      >	    * INIT_BUFFER_CHUNK_BITS is used to set initial size of
							      >	    * of the char m_array in FastStringBuffer if USE_OBJECT_P
							      >	    * size = 2^ INIT_BUFFER_CHUNK_BITS, INIT_BUFFER_CHUNK_BIT
							      >	    * corresponds size = 256. 
							      >	  */
							      >	  private final static int INIT_BUFFER_CHUNK_BITS = 8; 
							      >	  
							      >	  /**
							      >	   * We are caching FastStringBuffer objects if if USE_OBJECT
							      >	   */
							      >	  private transient FastStringBuffer m_cachedBuf;
							      >	  
							      >	  
							      >	   
      FastStringBuffer buffer = StringBufferPool.get();	      |	      FastStringBuffer buffer = null;
      FastStringBuffer exprBuffer = StringBufferPool.get();   |	      FastStringBuffer exprBuffer = null;
							      |	      if(USE_OBJECT_POOL){
							      >	        buffer = StringBufferPool.get(); 
							      >	        exprBuffer = StringBufferPool.get();
							      >	      }else{
							      >	        buffer = new FastStringBuffer(6);
							      >	        exprBuffer = new FastStringBuffer(6);
							      >	      }
        StringBufferPool.free(buffer);			      |	        if(USE_OBJECT_POOL){
        StringBufferPool.free(exprBuffer);		      |	             StringBufferPool.free(buffer);
							      >	             StringBufferPool.free(exprBuffer);
							      >	         }else{
							      >	            buffer = null;
							      >	            exprBuffer = null;
							      >	         };
    if (null != m_simpleString)				      |	    if (null != m_simpleString){
    {							      <
    else if (null != m_parts)				      |	    else if (null != m_parts){
    {							      |	     final FastStringBuffer buf = getBuffer();
      FastStringBuffer buf = StringBufferPool.get();	      |	     String out = null;
      String s;						      |
							      |	    int n = m_parts.size();
      try						      |	    try{
      {							      |	      for (int i = 0; i < n; i++){
        buf.setLength(0);				      |	        AVTPart part = (AVTPart) m_parts.elementAt(i);
							      |	        buf.append(part.getSimpleString());
        int n = m_parts.size();				      <
							      <
        for (int i = 0; i < n; i++)			      <
        {						      <
          AVTPart part = (AVTPart) m_parts.elementAt(i);      <
							      <
          buf.append(part.getSimpleString());		      <
        }						      <
							      <
        s = buf.toString();				      <
      }							      <
      finally						      <
      {							      <
        StringBufferPool.free(buf);			      <
							      |	      out = buf.toString();
      return s;						      |	    }finally{
							      >	      if(USE_OBJECT_POOL){
							      >	         StringBufferPool.free(buf);
							      >	     }else{
							      >	        buf.setLength(0); 
							      >	     };
    else						      |	    return out;
    {							      |	  }else{
    }							      <
							      >	}
   * @param NodeList The current Context Node List.	      <
							      |	    if (null != m_simpleString){
    FastStringBuffer buf = StringBufferPool.get();	      <
							      <
    try							      <
    {							      <
      if (null != m_simpleString)			      <
      {							      <
      }							      |	    }else if (null != m_parts){
      else if (null != m_parts)				      |	      final FastStringBuffer buf =getBuffer();
      {							      |	      String out = null;
        buf.setLength(0);				      |	      int n = m_parts.size();
							      |	      try{
        int n = m_parts.size();				      |	        for (int i = 0; i < n; i++){
							      |	          AVTPart part = (AVTPart) m_parts.elementAt(i);  
        for (int i = 0; i < n; i++)			      <
        {						      <
          AVTPart part = (AVTPart) m_parts.elementAt(i);      <
							      <
							      |	       out = buf.toString();
        return buf.toString();				      |	      }finally{
      }							      |	          if(USE_OBJECT_POOL){
      else						      |	             StringBufferPool.free(buf);
      {							      |	         }else{
        return "";					      |	           buf.setLength(0); 
							      >	         }
    }							      |	     return out;
    finally						      |	    }else{
    {							      |	      return "";
      StringBufferPool.free(buf);			      <
							      >	  }
							      >	  
							      >	  private final FastStringBuffer getBuffer(){
							      >	    if(USE_OBJECT_POOL){
							      >	       return StringBufferPool.get();
							      >	    }else if(m_cachedBuf == null){
							      >	       m_cachedBuf = new FastStringBuffer(INIT_BUFFER_CHUNK_B
							      >	       return m_cachedBuf;
							      >	    }else if(m_cachedBuf.length() != 0){
							      >	      return new FastStringBuffer(INIT_BUFFER_CHUNK_BITS);
							      >	    }else{
							      >	       return m_cachedBuf;
							      >	     }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/AVTPart.java xalan-j_2_7_0/src/org/apache/xalan/templates/AVTPart.java
 * $Id: AVTPart.java,v 1.15 2004/02/16 20:32:32 minchau Exp $ |	 * $Id: AVTPart.java,v 1.17 2005/01/23 00:27:29 mcnamara Exp 
							      >	    static final long serialVersionUID = -1747749903613916025
   * @param NodeList The current Context Node List.	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/AVTPartSimple.java xalan-j_2_7_0/src/org/apache/xalan/templates/AVTPartSimple.java
 * $Id: AVTPartSimple.java,v 1.15 2004/02/16 20:32:33 minchau |	 * $Id: AVTPartSimple.java,v 1.17 2005/01/23 00:27:29 mcnamar
							      >	    static final long serialVersionUID = -3744957690598727913
   * @param NodeList The current Context Node List.	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/AVTPartXPath.java xalan-j_2_7_0/src/org/apache/xalan/templates/AVTPartXPath.java
 * $Id: AVTPartXPath.java,v 1.18 2004/02/16 20:32:32 minchau  |	 * $Id: AVTPartXPath.java,v 1.20 2005/01/23 00:27:29 mcnamara
							      >	    static final long serialVersionUID = -4460373807550527675
   * @param NodeList The current Context Node List.	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/DecimalFormatProperties.java xalan-j_2_7_0/src/org/apache/xalan/templates/DecimalFormatProperties.java
 * $Id: DecimalFormatProperties.java,v 1.15 2004/02/16 20:32: |	 * $Id: DecimalFormatProperties.java,v 1.16 2004/08/17 18:35:
							      >	    static final long serialVersionUID = -6559409339256269446
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemApplyImport.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemApplyImport.java
 * $Id: ElemApplyImport.java,v 1.14 2004/02/16 20:32:33 minch |	 * $Id: ElemApplyImport.java,v 1.18 2005/01/23 00:27:29 mcnam
							      >	    static final long serialVersionUID = 3764728663373024038L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
							      |	      // supply the current templated (matched, not named)   
      // This will have to change to current template, (which |	      ElemTemplate matchTemplate = transformer.getMatchedTemp
      // to be the top of a current template stack).	      |	      transformer.applyTemplateToNode(this, matchTemplate, so
      transformer.applyTemplateToNode(this, null, sourceNode) <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemApplyTemplates.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemApplyTemplates.java
 * $Id: ElemApplyTemplates.java,v 1.33 2004/02/16 20:32:32 mi |	 * $Id: ElemApplyTemplates.java,v 1.36 2005/01/23 00:27:29 mc
							      >	    static final long serialVersionUID = 2903125371542621004L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
   * @param template The owning template context.	      <
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
          if (TransformerImpl.S_DEBUG)			      |	          if (transformer.getDebug())
          if (TransformerImpl.S_DEBUG)			      |	          if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemAttribute.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemAttribute.java
 * $Id: ElemAttribute.java,v 1.27 2004/02/24 03:55:47 zongaro |	 * $Id: ElemAttribute.java,v 1.30 2005/03/23 17:54:04 ytalwar
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
							      >	    static final long serialVersionUID = 8817220961566919187L
      return XMLChar.isValidQName(nodeName);		      |	      return XML11Char.isXML11ValidQName(nodeName);
      if(prefix != null && prefix.length() > 0)		      |
      {							      |	      // Evaluate the value of this attribute
        try						      <
        {						      <
          rhandler.startPrefixMapping(prefix, nodeNamespace,  <
        }						      <
        catch(SAXException se)				      <
        {						      <
          throw new TransformerException(se);		      <
        }						      <
      }							      <
      String localName = QName.getLocalPart(nodeName);	      <
							      >	        // Let the result tree handler add the attribute and 
							      >	        String localName = QName.getLocalPart(nodeName);
            rhandler.addAttribute(nodeNamespace, localName, n |	            rhandler.addAttribute(nodeNamespace, localName, n
            rhandler.addAttribute("", localName, nodeName, "C |	            rhandler.addAttribute("", localName, nodeName, "C
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemAttributeSet.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemAttributeSet.java
 * $Id: ElemAttributeSet.java,v 1.14 2004/02/16 20:32:32 minc |	 * $Id: ElemAttributeSet.java,v 1.17 2005/01/23 00:27:29 mcna
							      >	    static final long serialVersionUID = -426740318278164496L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
	if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
	if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemCallTemplate.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemCallTemplate.java
 * $Id: ElemCallTemplate.java,v 1.27 2004/02/16 20:32:32 minc |	 * $Id: ElemCallTemplate.java,v 1.30 2005/01/23 00:27:29 mcna
							      >	    static final long serialVersionUID = 5009634612916030591L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
              if (TransformerImpl.S_DEBUG)		      |	              if (transformer.getDebug())
              if (TransformerImpl.S_DEBUG)		      |	              if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemChoose.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemChoose.java
 * $Id: ElemChoose.java,v 1.18 2004/02/16 20:32:32 minchau Ex |	 * $Id: ElemChoose.java,v 1.21 2005/01/23 00:27:29 mcnamara E
							      >	    static final long serialVersionUID = -3070117361903102033
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
          if (TransformerImpl.S_DEBUG)			      |	          if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemComment.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemComment.java
 * $Id: ElemComment.java,v 1.13 2004/02/16 20:32:33 minchau E |	 * $Id: ElemComment.java,v 1.16 2005/01/23 00:27:29 mcnamara 
							      >	    static final long serialVersionUID = -8813199122875770142
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemCopy.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemCopy.java
 * $Id: ElemCopy.java,v 1.20 2004/02/16 20:32:32 minchau Exp  |	 * $Id: ElemCopy.java,v 1.23 2005/01/23 00:27:29 mcnamara Exp
							      >	    static final long serialVersionUID = 5478580783896941384L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemCopyOf.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemCopyOf.java
 * $Id: ElemCopyOf.java,v 1.19 2004/02/16 20:32:32 minchau Ex |	 * $Id: ElemCopyOf.java,v 1.22 2005/01/23 00:27:29 mcnamara E
							      >	    static final long serialVersionUID = -7433828829497411127
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
      //  if (TransformerImpl.S_DEBUG)			      |	      //  if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemElement.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemElement.java
 * $Id: ElemElement.java,v 1.36 2004/02/24 03:55:47 zongaro E |	 * $Id: ElemElement.java,v 1.39 2005/03/23 17:54:04 ytalwar E
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
							      >	    static final long serialVersionUID = -324619535592435183L
       if (TransformerImpl.S_DEBUG)			      |	       if (transformer.getDebug())
    if ((nodeName != null) && (!m_name_avt.isSimple()) && (!X |	    if ((nodeName != null) && (!m_name_avt.isSimple()) && (!X
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemEmpty.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemEmpty.java
 * $Id: ElemEmpty.java,v 1.7 2004/02/16 20:32:32 minchau Exp  |	 * $Id: ElemEmpty.java,v 1.8 2004/08/17 18:35:32 jycli Exp $
							      >	    static final long serialVersionUID = 7544753713671472252L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemExsltFuncResult.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemExsltFuncResult.java
 * $Id: ElemExsltFuncResult.java,v 1.9 2004/02/16 20:32:32 mi |	 * $Id: ElemExsltFuncResult.java,v 1.11 2004/12/15 17:35:34 j
							      >	    static final long serialVersionUID = -3478311949388304563
							      >	    /*
							      >	     * To keep the binary compatibility put those three priva
							      >	     * variables back, although they are never used in this v
							      >	     */
							      >	    // A flag indicating whether the return result is set
							      >	    private boolean m_isResultSet = false;
							      >	  
							      >	    // The return result
							      >	    private XObject m_result = null;
							      >	  
							      >	    // The frame size of the current caller
							      >	    private int m_callerFrameSize = 0;
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemExsltFunction.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemExsltFunction.java
 * $Id: ElemExsltFunction.java,v 1.9 2004/02/16 20:32:32 minc |	 * $Id: ElemExsltFunction.java,v 1.13 2005/01/23 00:27:29 mcn
							      >	    static final long serialVersionUID = 272154954793534771L;
   * @see org.apache.xalan.templates.Constants.		      |	   * @see org.apache.xalan.templates.Constants
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
  							      |	        
    String handlerClass = "org.apache.xalan.extensions.Extens |	    String handlerClass = sroot.getExtensionHandlerClass();
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemExtensionCall.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemExtensionCall.java
 * $Id: ElemExtensionCall.java,v 1.38 2004/02/16 20:32:32 min |	 * $Id: ElemExtensionCall.java,v 1.43 2005/06/07 15:35:52 mkw
							      >	    static final long serialVersionUID = 3171339708500216920L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
							      |	    if (transformer.getStylesheet().isSecureProcessing())
	if (TransformerImpl.S_DEBUG)			      |	      throw new TransformerException(
							      >	        XSLMessages.createMessage(
							      >	          XSLTErrorResources.ER_EXTENSION_ELEMENT_NOT_ALLOWED
							      >	          new Object[] {getRawName()}));
							      >	          
							      >	    if (transformer.getDebug())
	if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
  }							      <
							      <
  /**							      <
   * Return the raw value of the attribute.		      <
   *							      <
   * @param rawName Raw name of the attribute to get	      <
   *							      <
   * @return the raw value of the attribute or null if not fo <
   */							      <
  public String getAttribute(String rawName)		      <
  {							      <
							      <
    AVT avt = getLiteralResultAttribute(rawName);	      <
							      <
    if ((null != avt) && avt.getRawName().equals(rawName))    <
    {							      <
      return avt.getSimpleString();			      <
    }							      <
							      <
    return null;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemExtensionDecl.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemExtensionDecl.java
 * $Id: ElemExtensionDecl.java,v 1.21 2004/02/16 20:32:33 min |	 * $Id: ElemExtensionDecl.java,v 1.22 2004/08/17 18:35:32 jyc
							      >	    static final long serialVersionUID = -4692738885172766789
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemExtensionScript.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemExtensionScript.java
 * $Id: ElemExtensionScript.java,v 1.8 2004/02/16 20:32:32 mi |	 * $Id: ElemExtensionScript.java,v 1.9 2004/08/17 18:35:32 jy
							      >	    static final long serialVersionUID = -6995978265966057744
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemFallback.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemFallback.java
 * $Id: ElemFallback.java,v 1.17 2004/02/16 20:32:33 minchau  |	 * $Id: ElemFallback.java,v 1.20 2005/01/23 00:27:29 mcnamara
							      >	    static final long serialVersionUID = 1782962139867340703L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemForEach.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemForEach.java
 * $Id: ElemForEach.java,v 1.38 2004/02/18 15:47:39 minchau E |	 * $Id: ElemForEach.java,v 1.41 2005/01/23 00:27:29 mcnamara 
							      >	import java.io.ObjectInputStream;
							      >	import java.io.IOException;
							      >
							      >	    static final long serialVersionUID = 6018140636363583690L
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
   * @param template The owning template context.	      <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
							      >	  /*
							      >	   * to keep the binary compatibility, assign a default value
							      >	   * globel varialbe m_xpath during deserialization of an obj
							      >	   * serialized using an older version
							      >	   */
							      >	   private void readObject(ObjectInputStream os) throws 
							      >	        IOException, ClassNotFoundException {
							      >	           os.defaultReadObject();
							      >	           m_xpath = null;
							      >	   }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemIf.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemIf.java
 * $Id: ElemIf.java,v 1.17 2004/02/16 20:32:32 minchau Exp $  |	 * $Id: ElemIf.java,v 1.20 2005/01/23 00:27:29 mcnamara Exp $
							      >	    static final long serialVersionUID = 2158774632427453022L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
      //  if (TransformerImpl.S_DEBUG)			      |	      //  if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemLiteralResult.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemLiteralResult.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: ElemLiteralResult.java,v 1.42 2004/02/16 20:32:33 min |	 * $Id: ElemLiteralResult.java,v 1.49 2005/05/17 17:22:14 mkw
							      >	import org.apache.xalan.res.XSLMessages;
							      >	import org.apache.xalan.res.XSLTErrorResources;
							      >	import org.apache.xml.utils.UnImplNode;
							      >	import org.w3c.dom.NamedNodeMap;
							      >	import org.w3c.dom.Attr;
							      >	import org.w3c.dom.Document;
							      >	import org.w3c.dom.Element;
							      >	import org.w3c.dom.Node;
							      >	import org.w3c.dom.NodeList;
							      >	import org.w3c.dom.DOMException;
							      >	import org.w3c.dom.TypeInfo;
							      >	import org.w3c.dom.UserDataHandler;
							      >	    static final long serialVersionUID = -8703409074421657260
							      >
							      >	    /** The return value as Empty String. */
							      >	    private static final String EMPTYSTRING = "";
   * @param v  Enumerated value, either Constants.ATTRVAL_PRE |	   * @param avt  Enumerated value, either Constants.ATTRVAL_P
							      <
   * @param name Name of literal result attribute to get      |	   * @param namespaceURI Namespace URI of attribute node to g
							      >	   * @param localName Local part of qualified name of attribu
  public AVT getLiteralResultAttribute(String name)	      |	  public AVT getLiteralResultAttributeNS(String namespaceURI,
        if (avt.getRawName().equals(name))		      |	        if (avt.getName().equals(localName) && 
							      >	                avt.getURI().equals(namespaceURI))
							      >	        {
							      >	          return avt;
							      >	        }
							      >	      }  // end for
							      >	    }
							      >
							      >	    return null;
							      >	  }
							      >
							      >	  /**
							      >	   * Return the raw value of the attribute.
							      >	   *
							      >	   * @param namespaceURI Namespace URI of attribute node to g
							      >	   * @param localName Local part of qualified name of attribu
							      >	   *
							      >	   * @return The Attr value as a string, or the empty string 
							      >	   * does not have a specified or default value
							      >	   */
							      >	  public String getAttributeNS(String namespaceURI, String lo
							      >	  {
							      >
							      >	    AVT avt = getLiteralResultAttributeNS(namespaceURI, local
							      >
							      >	    if ((null != avt))
							      >	    {
							      >	      return avt.getSimpleString();
							      >	    }
							      >
							      >	    return EMPTYSTRING;
							      >	  }
							      >
							      >	  /**
							      >	   * Get a literal result attribute by name. The name is name
							      >	   * if namespace is not null.
							      >	   *
							      >	   * @param name Name of literal result attribute to get
							      >	   *
							      >	   * @return literal result attribute (AVT)
							      >	   */
							      >	  public AVT getLiteralResultAttribute(String name)
							      >	  {
							      >
							      >	    if (null != m_avts)
							      >	    {
							      >	      int nAttrs = m_avts.size();
							      >	      String namespace = null;
							      >	      for (int i = (nAttrs - 1); i >= 0; i--)
							      >	      {
							      >	        AVT avt = (AVT) m_avts.elementAt(i);
							      >	        namespace = avt.getURI();
							      >	        
							      >	        if ((namespace != null && (!namespace.equals("")) && 
							      >	                +":"+avt.getName()).equals(name))|| ((namespa
							      >	                namespace.equals(""))&& avt.getRawName().equa
							      >	   * Return the raw value of the attribute.
							      >	   *
							      >	   * @param namespaceURI:localName or localName if the namesp
							      >	   * the attribute to get
							      >	   *
							      >	   * @return The Attr value as a string, or the empty string 
							      >	   * does not have a specified or default value
							      >	   */
							      >	  public String getAttribute(String rawName)
							      >	  {
							      >
							      >	    AVT avt = getLiteralResultAttribute(rawName);
							      >
							      >	    if ((null != avt))
							      >	    {
							      >	      return avt.getSimpleString();
							      >	    }
							      >
							      >	    return EMPTYSTRING;
							      >	  }
							      >	  
							      >	  /**
							      >	   * @see org.w3c.dom.Node
							      >	   *
							      >	   * @return NamedNodeMap
							      >	   */
							      >	  public NamedNodeMap getAttributes()
							      >	  {
							      >	        return new LiteralElementAttributes();
							      >	  }
							      >
							      >	  public class LiteralElementAttributes implements NamedNodeM
							      >	          private int m_count = -1;
							      >	          
							      >	          /**
							      >	           * Construct a NameNodeMap.
							      >	           *
							      >	           */
							      >	          public LiteralElementAttributes(){         
							      >	          }
							      >	          
							      >	          /**
							      >	           * Return the number of Attributes on this Element
							      >	           *
							      >	           * @return The number of nodes in this map. The ran
							      >	           * node indices is <code>0</code> to <code>length-1
							      >	           */
							      >	          public int getLength()
							      >	          {
							      >	            if (m_count == -1)
							      >	            {
							      >	               if (null != m_avts) m_count = m_avts.size();
							      >	               else m_count = 0;
							      >	            }
							      >	            return m_count;
							      >	          }
							      >
							      >	          /**
							      >	           * Retrieves a node specified by name.
							      >	           * @param name The <code>nodeName</code> of a node 
							      >	           * @return A <code>Node</code> (of any type) with t
							      >	           *   <code>nodeName</code>, or <code>null</code> if
							      >	           *   identify any node in this map.
							      >	           */
							      >	          public Node getNamedItem(String name)
							      >	          {
							      >	                if (getLength() == 0) return null;
							      >	                String uri = null;
							      >	                String localName = name; 
							      >	                int index = name.indexOf(":"); 
							      >	                if (-1 != index){
							      >	                         uri = name.substring(0, index);
							      >	                         localName = name.substring(index+1);
							      >	                }
							      >	                Node retNode = null;
							      >	                Enumeration eum = m_avts.elements();
							      >	                while (eum.hasMoreElements()){
							      >	                        AVT avt = (AVT) eum.nextElement();
							      >	                        if (localName.equals(avt.getName()))
							      >	                        {
							      >	                          String nsURI = avt.getURI(); 
							      >	                          if ((uri == null && nsURI == null)
							      >	                            || (uri != null && uri.equals(nsU
							      >	                          {
							      >	                            retNode = new Attribute(avt, Elem
							      >	                            break;
							      >	                          }
							      >	                        }
							      >	                }
							      >	                return retNode;
							      >	          }
							      >
							      >	          /**
							      >	           * Retrieves a node specified by local name and nam
							      >	           * @param namespaceURI Namespace URI of attribute n
							      >	           * @param localName Local part of qualified name of
							      >	           * get
							      >	           * @return A <code>Node</code> (of any type) with t
							      >	           *   <code>nodeName</code>, or <code>null</code> if
							      >	           *   identify any node in this map.
							      >	           */
							      >	          public Node getNamedItemNS(String namespaceURI, Str
							      >	          {
							      >	                  if (getLength() == 0) return null;
							      >	                  Node retNode = null;
							      >	                  Enumeration eum = m_avts.elements();
							      >	                  while (eum.hasMoreElements())
							      >	                  {
							      >	                    AVT avt = (AVT) eum.nextElement();      
							      >	                    if (localName.equals(avt.getName()))
							      >	                    {
							      >	                      String nsURI = avt.getURI(); 
							      >	                      if ((namespaceURI == null && nsURI == n
							      >	                        || (namespaceURI != null && namespace
							      >	                      {
							      >	                        retNode = new Attribute(avt, ElemLite
							      >	                        break;
							      >	                      }
							      >	                    }
							      >	                  }
							      >	                  return retNode;
							      >	          }
							      >	          
							      >	          /**
							      >	           * Returns the <code>index</code>th item in the map
							      >	           * </code> is greater than or equal to the number o
							      >	           * map, this returns <code>null</code>.
							      >	           * @param i The index of the requested item.
							      >	           * @return The node at the <code>index</code>th pos
							      >	           *   or <code>null</code> if that is not a valid in
							      >	           */
							      >	          public Node item(int i)
							      >	          {
							      >	                if (getLength() == 0 || i >= m_avts.size()) r
							      >	                else return 
							      >	                    new Attribute(((AVT)m_avts.elementAt(i)),
							      >	                        ElemLiteralResult.this);
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.NamedNodeMap
							      >	           *
							      >	           * @param name of the node to remove
							      >	           * 
							      >	           * @return The node removed from this map if a node
							      >	           * a name exists. 
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node removeNamedItem(String name) throws DOM
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.NamedNodeMap
							      >	           *
							      >	           * @param namespaceURI Namespace URI of the node to
							      >	           * @param localName Local part of qualified name of
							      >	           * 
							      >	           * @return The node removed from this map if a node
							      >	           *  name and namespace URI exists
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node removeNamedItemNS(String namespaceURI, 
							      >	                throws DOMException
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          } 
							      >	          
							      >	          /**
							      >	           * Unimplemented. See org.w3c.dom.NamedNodeMap
							      >	           *
							      >	           * @param A node to store in this map
							      >	           * 
							      >	           * @return If the new Node replaces an existing nod
							      >	           * Node is returned, otherwise null is returned
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node setNamedItem(Node arg) throws DOMExcept
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          }
							      >	          
							      >	          /**
							      >	           * Unimplemented. See org.w3c.dom.NamedNodeMap
							      >	           *
							      >	           * @param A node to store in this map
							      >	           * 
							      >	           * @return If the new Node replaces an existing nod
							      >	           * Node is returned, otherwise null is returned
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node setNamedItemNS(Node arg) throws DOMExce
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          }                                                  
							      >	  }
							      >
							      >	  public class Attribute implements Attr{
							      >	          private AVT m_attribute;
							      >	          private Element m_owner = null;
							      >	          /**
							      >	           * Construct a Attr.
							      >	           *
							      >	           */
							      >	          public Attribute(AVT avt, Element elem){
							      >	                m_attribute = avt;
							      >	                m_owner = elem;
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @param newChild New node to append to the list o
							      >	           * children
							      >	           *
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node appendChild(Node newChild) throws DOMEx
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @param deep Flag indicating whether to clone dee
							      >	           * (clone member variables)
							      >	           *
							      >	           * @return Returns a duplicate of this node
							      >	           */
							      >	          public Node cloneNode(boolean deep)
							      >	          {
							      >	                  return new Attribute(m_attribute, m_owner);
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return null
							      >	           */
							      >	          public NamedNodeMap getAttributes()
							      >	          {
							      >	            return null;
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return a NodeList containing no nodes. 
							      >	           */
							      >	          public NodeList getChildNodes()
							      >	          {
							      >	                  return new NodeList(){
							      >	                          public int getLength(){
							      >	                                  return 0;
							      >	                          }
							      >	                          public Node item(int index){
							      >	                                  return null;
							      >	                          }
							      >	                  };
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return null
							      >	           */
							      >	          public Node getFirstChild()
							      >	          {
							      >	                  return null;
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return null
							      >	           */
							      >	          public Node getLastChild()
							      >	          {
							      >	                  return null;
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return the local part of the qualified name of 
							      >	           */
							      >	          public String getLocalName()
							      >	          {
							      >	                  return m_attribute.getName();
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return The namespace URI of this node, or null 
							      >	           * unspecified
							      >	           */
							      >	          public String getNamespaceURI()
							      >	          {
							      >	                  String uri = m_attribute.getURI();
							      >	                  return (uri.equals(""))?null:uri;
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return null
							      >	           */
							      >	          public Node getNextSibling()
							      >	          {
							      >	                return null;
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return The name of the attribute
							      >	           */
							      >	          public String getNodeName()
							      >	          {
							      >	                  String uri = m_attribute.getURI();
							      >	                  String localName = getLocalName();
							      >	                  return (uri.equals(""))?localName:uri+":"+l
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return The node is an Attr
							      >	           */
							      >	          public short getNodeType()
							      >	          {
							      >	                  return ATTRIBUTE_NODE;
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return The value of the attribute
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public String getNodeValue() throws DOMException
							      >	          {
							      >	                  return m_attribute.getSimpleString();
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return null
							      >	           */
							      >	          public Document getOwnerDocument()
							      >	          {
							      >	            return m_owner.getOwnerDocument();
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return the containing element node
							      >	           */
							      >	          public Node getParentNode()
							      >	          {
							      >	                  return m_owner;
							      >	          }
							      >	                    
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return The namespace prefix of this node, or nu
							      >	           * unspecified
							      >	           */
							      >	          public String getPrefix()
							      >	          {
							      >	                  String uri = m_attribute.getURI();
							      >	                  String rawName = m_attribute.getRawName();
							      >	                  return (uri.equals(""))? 
							      >	                        null:rawName.substring(0, rawName.ind
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return null
							      >	           */
							      >	          public Node getPreviousSibling()
							      >	          {
							      >	                  return null;
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return false
							      >	           */
							      >	          public boolean hasAttributes()
							      >	          {
							      >	                  return false;
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return false
							      >	           */
							      >	          public boolean hasChildNodes()
							      >	          {
							      >	                  return false;
							      >	          }                    
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @param newChild New child node to insert
							      >	           * @param refChild Insert in front of this child
							      >	           *
							      >	           * @return null
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node insertBefore(Node newChild, Node refChi
							      >	                throws DOMException
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @return Returns <code>false</code>
							      >	           * @since DOM Level 2
							      >	           */
							      >	          public boolean isSupported(String feature, String v
							      >	          {
							      >	            return false;
							      >	          }
							      >
							      >	          /** @see org.w3c.dom.Node */
							      >	          public void normalize(){}
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @param oldChild Child to be removed
							      >	           *
							      >	           * @return null
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node removeChild(Node oldChild) throws DOMEx
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          }         
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @param newChild Replace existing child with this
							      >	           * @param oldChild Existing child to be replaced
							      >	           *
							      >	           * @return null
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public Node replaceChild(Node newChild, Node oldChi
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	                  return null;
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @param nodeValue Value to set this node to
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public void setNodeValue(String nodeValue) throws D
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	          }
							      >
							      >	          /**
							      >	           * @see org.w3c.dom.Node
							      >	           *
							      >	           * @param prefix Prefix to set for this node
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public void setPrefix(String prefix) throws DOMExce
							      >	          {
							      >	                  throwDOMException(DOMException.NO_MODIFICAT
							      >	                      XSLTErrorResources.NO_MODIFICATION_ALLO
							      >	          }
							      >	                                                             
							      >	          /**
							      >	           *
							      >	           * @return The name of this attribute
							      >	           */          
							      >	          public String getName(){
							      >	                  return m_attribute.getName();              
							      >	          }
							      >
							      >	          /**
							      >	           *
							      >	           * @return The value of this attribute returned as 
							      >	           */          
							      >	          public String getValue(){
							      >	                  return m_attribute.getSimpleString();      
							      >	          }
							      >	          
							      >	          /**
							      >	           *
							      >	           * @return The Element node this attribute is attac
							      >	           * or null if this attribute is not in use
							      >	           */                    
							      >	          public Element getOwnerElement(){
							      >	                  return m_owner;
							      >	          }
							      >	          
							      >	          /**
							      >	           *
							      >	           * @return true
							      >	           */          
							      >	          public boolean getSpecified(){
							      >	                  return true;
							      >	          }
							      >	          
							      >	          /**
							      >	           * @see org.w3c.dom.Attr
							      >	           *
							      >	           * @param value Value to set this node to
							      >	           *
							      >	           * @throws DOMException
							      >	           */
							      >	          public void setValue(String value) throws DOMExcept
							      >	          {
							      >	            throwDOMException(DOMException.NO_MODIFICATION_AL
							      >	                XSLTErrorResources.NO_MODIFICATION_ALLOWED_ER
							      >	          }
							      >
							      >	 	  public TypeInfo getSchemaTypeInfo() { return null; 
							      >	    
							      >	  	  public boolean isId( ) { return false; }
							      >
							      >	  	  public Object setUserData(String key,
							      >	                                    Object data,
							      >	                                    UserDataHandler handler) 
							      >	        	return getOwnerDocument().setUserData( key, d
							      >	  	  }
							      >
							      >	  	  public Object getUserData(String key) {
							      >	        	return getOwnerDocument().getUserData( key);
							      >	  	  } 
							      >
							      >	  	  public Object getFeature(String feature, String ver
							      >	        	return isSupported(feature, version) ? this :
							      >	   	  }
							      >	          
							      >	          public boolean isEqualNode(Node arg) {
							      >	          	return arg == this;
							      >	          }
							      >	          
							      >	          public String lookupNamespaceURI(String specifiedPr
							      >	             	return null;
							      >	          }
							      >	          
							      >	          public boolean isDefaultNamespace(String namespaceU
							      >	            	return false;
							      >	          }
							      >
							      >		  public String lookupPrefix(String namespaceURI) {
							      >		    	return null;
							      >		  }
							      >		  
							      >	  	  public boolean isSameNode(Node other) {
							      >	        	// we do not use any wrapper so the answer is
							      >	        	return this == other;
							      >	  	  }
							      >	          
							      >	  	  public void setTextContent(String textContent)
							      >	        	throws DOMException {
							      >	        	setNodeValue(textContent);
							      >	  	  }
							      >
							      >	  	  public String getTextContent() throws DOMException 
							      >	            	return getNodeValue();  // overriden in some 
							      >	   	  }
							      >
							      >	    	  public short compareDocumentPosition(Node other) th
							      >	            	return 0;
							      >	    	  }
							      >
							      >	          public String getBaseURI() {
							      >	            	return null;
							      >	    	  }
							      >	  }        
							      >	  
							      >	  /**
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
            if (TransformerImpl.S_DEBUG) {		      |	            if (transformer.getDebug()) {
                            stringedValue);		      |	                            stringedValue, false);
            if (TransformerImpl.S_DEBUG) {		      |	            if (transformer.getDebug()) {
							      >	    }
							      >
							      >	    /**
							      >	     * Throw a DOMException
							      >	     *
							      >	     * @param msg key of the error that occured.
							      >	     */
							      >	    public void throwDOMException(short code, String msg)
							      >	    {
							      >
							      >	      String themsg = XSLMessages.createMessage(msg, null);
							      >
							      >	      throw new DOMException(code, themsg);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemMessage.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemMessage.java
 * $Id: ElemMessage.java,v 1.17 2004/02/16 20:32:33 minchau E |	 * $Id: ElemMessage.java,v 1.20 2005/01/23 00:27:29 mcnamara 
							      >	    static final long serialVersionUID = 1530472462155060023L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemNumber.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemNumber.java
 * $Id: ElemNumber.java,v 1.32 2004/02/16 20:32:32 minchau Ex |	 * $Id: ElemNumber.java,v 1.37 2005/04/01 19:28:07 ytalwar Ex
							      >	import org.apache.xml.utils.res.CharArrayWrapper;
							      >	import org.apache.xml.utils.res.IntArrayWrapper;
							      >	import org.apache.xml.utils.res.LongArrayWrapper;
							      >	import org.apache.xml.utils.res.StringArrayWrapper;
							      >	    static final long serialVersionUID = 8118472298274407610L
							      >	    /**
							      >	     * Chars for converting integers into alpha counts.
							      >	     * @see TransformerImpl#int2alphaCount
							      >	     */
							      >	    private CharArrayWrapper m_alphaCountTable = null;
							      >	    
							      <
  /**							      <
   * Chars for converting integers into alpha counts.	      <
   * @see TransformerImpl#int2alphaCount		      <
   */							      <
  private static char[] m_alphaCountTable = null;	      <
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
     if (TransformerImpl.S_DEBUG)			      |	     if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
      long count = (long)java.lang.Math.floor(countObj.num()+ |	      //According to Errata E24
							      |	      double d_count = java.lang.Math.floor(countObj.num()+ 0
      list = new long[1];				      |	      if (Double.isNaN(d_count)) return "NaN";
      list[0] = count;					      |	      else if (d_count < 0 && Double.isInfinite(d_count)) ret
							      >	      else if (Double.isInfinite(d_count)) return "Infinity";
							      >	      else if (d_count == 0) return "0";
							      >	      else{
							      >	              long count = (long)d_count;
							      >	              list = new long[1];
							      >	              list[0] = count;              
							      >	      }
   * @param patterns if non-null, count only nodes	      <
   * that match this pattern, if null count all ancestors.    <
   * @param xslNumberElement Element that takes %conversion-a <
							      >	    /**
							      >	     * Wrapper of Chars for converting integers into alpha co
							      >	     */
							      >	    CharArrayWrapper alphaCountTable = null;
							      >	    
							      >	    XResourceBundle thisBundle = null;
							      >	     
      if (m_alphaCountTable == null)			      |	        if (null == m_alphaCountTable){
      {							      |	                thisBundle =
        XResourceBundle thisBundle;			      |	                  (XResourceBundle) XResourceBundle.loadResou
							      |	                    org.apache.xml.utils.res.XResourceBundle.
        thisBundle =					      |	                m_alphaCountTable = (CharArrayWrapper) thisBu
          (XResourceBundle) XResourceBundle.loadResourceBundl |	        }
            org.apache.xml.utils.res.XResourceBundle.LANG_BUN <
							      <
        char[] alphabet;				      <
							      <
        alphabet = (char[]) thisBundle.getObject(org.apache.x <
        m_alphaCountTable = alphabet;			      <
      }							      <
							      <
      if (m_alphaCountTable == null)			      |	        if (null == m_alphaCountTable){
      {							      |	                thisBundle =
        XResourceBundle thisBundle;			      |	                  (XResourceBundle) XResourceBundle.loadResou
							      |	                    org.apache.xml.utils.res.XResourceBundle.
        thisBundle =					      |	                m_alphaCountTable = (CharArrayWrapper) thisBu
          (XResourceBundle) XResourceBundle.loadResourceBundl |	        }
            org.apache.xml.utils.res.XResourceBundle.LANG_BUN <
							      <
        char[] alphabet;				      <
							      <
        alphabet = (char[]) thisBundle.getObject(org.apache.x <
        m_alphaCountTable = alphabet;			      <
      }							      <
							      <
      XResourceBundle thisBundle;			      <
            (char[]) thisBundle.getObject(org.apache.xml.util |	            (CharArrayWrapper) thisBundle.getObject(org.apach
      XResourceBundle thisBundle;			      <
            (char[]) thisBundle.getObject(org.apache.xml.util |	            (CharArrayWrapper) thisBundle.getObject(org.apach
      XResourceBundle thisBundle;			      <
            (char[]) thisBundle.getObject(org.apache.xml.util |	            (CharArrayWrapper) thisBundle.getObject(org.apach
      XResourceBundle thisBundle;			      <
            (char[]) thisBundle.getObject(org.apache.xml.util |	            (CharArrayWrapper) thisBundle.getObject(org.apach
      XResourceBundle thisBundle;			      <
                       (char[]) thisBundle.getObject(org.apac |	                       (CharArrayWrapper) thisBundle.getObjec
      XResourceBundle thisBundle;			      <
                       (char[]) thisBundle.getObject(org.apac |	                       (CharArrayWrapper) thisBundle.getObjec
      XResourceBundle thisBundle;			      <
                       (char[]) thisBundle.getObject(org.apac |	                       (CharArrayWrapper) thisBundle.getObjec
      XResourceBundle thisBundle;			      <
                       (char[]) thisBundle.getObject(org.apac |	                       (CharArrayWrapper) thisBundle.getObjec
      XResourceBundle thisBundle;			      <
                       (char[]) thisBundle.getObject(org.apac |	                       (CharArrayWrapper) thisBundle.getObjec
      XResourceBundle thisBundle;			      <
                       (char[]) thisBundle.getObject(org.apac |	                       (CharArrayWrapper) thisBundle.getObjec
      XResourceBundle thisBundle;			      <
                       (char[]) thisBundle.getObject(org.apac |	                       (CharArrayWrapper) thisBundle.getObjec
  protected String int2singlealphaCount(long val, char[] tabl |	  protected String int2singlealphaCount(long val, CharArrayWr
    int radix = table.length;				      |	    int radix = table.getLength();
      return (new Character(table[(int)val - 1])).toString(); |	      return (new Character(table.getChar((int)val - 1))).toS
  protected void int2alphaCount(long val, char[] aTable,      |	  protected void int2alphaCount(long val, CharArrayWrapper aT
    int radix = aTable.length;				      |	    int radix = aTable.getLength();
    char[] table = new char[aTable.length];		      |	    char[] table = new char[radix];
    for (i = 0; i < aTable.length - 1; i++)		      |	    for (i = 0; i < radix - 1; i++)
      table[i + 1] = aTable[i];				      |	      table[i + 1] = aTable.getChar(i);
    table[0] = aTable[i];				      |	    table[0] = aTable.getChar(i);
   * @param table a table containing one character for each d <
    int[] groups = (int[]) thisBundle.getObject(org.apache.xm |	    IntArrayWrapper groups = (IntArrayWrapper) thisBundle.get
    String[] tables =					      |	    StringArrayWrapper tables =
      (String[]) (thisBundle.getObject(org.apache.xml.utils.r |	      (StringArrayWrapper) (thisBundle.getObject(org.apache.x
      long[] multiplier =				      |	      LongArrayWrapper multiplier =
        (long[]) (thisBundle.getObject(org.apache.xml.utils.r |	        (LongArrayWrapper) (thisBundle.getObject(org.apache.x
      char[] zeroChar = (char[]) thisBundle.getObject("zero") |	      CharArrayWrapper zeroChar = (CharArrayWrapper) thisBund
      while (i < multiplier.length && val < multiplier[i])    |	      while (i < multiplier.getLength() && val < multiplier.g
        if (i >= multiplier.length)			      |	        if (i >= multiplier.getLength())
        if (val < multiplier[i])			      |	        if (val < multiplier.getLong(i))
          if (zeroChar.length == 0)			      |	          if (zeroChar.getLength() == 0)
            if (buf[charPos - 1] != zeroChar[0])	      |	            if (buf[charPos - 1] != zeroChar.getChar(0))
              buf[charPos++] = zeroChar[0];		      |	              buf[charPos++] = zeroChar.getChar(0);
        else if (val >= multiplier[i])			      |	        else if (val >= multiplier.getLong(i))
          long mult = val / multiplier[i];		      |	          long mult = val / multiplier.getLong(i);
          val = val % multiplier[i];  // save this.	      |	          val = val % multiplier.getLong(i);  // save this.
          while (k < groups.length)			      |	          while (k < groups.getLength())
            if (mult / groups[k] <= 0)  // look for right tab |	            if (mult / groups.getInt(k) <= 0)  // look for ri
              char[] THEletters = (char[]) thisBundle.getObje |	              CharArrayWrapper THEletters = (CharArrayWrapper
              table = new char[THEletters.length + 1];	      |	              table = new char[THEletters.getLength() + 1];
              for (j = 0; j < THEletters.length; j++)	      |	              for (j = 0; j < THEletters.getLength(); j++)
                table[j + 1] = THEletters[j];		      |	                table[j + 1] = THEletters.getChar(j);
              table[0] = THEletters[j - 1];  // don't need th |	              table[0] = THEletters.getChar(j - 1);  // don't
              lookupIndex = (int)mult / groups[k];	      |	              lookupIndex = (int)mult / groups.getInt(k);
              char multiplierChar = ((char[]) (thisBundle.get |	              char multiplierChar = ((CharArrayWrapper) (this
                org.apache.xml.utils.res.XResourceBundle.LANG |	                org.apache.xml.utils.res.XResourceBundle.LANG
                  if (lookupIndex == 1 && i == multiplier.len |	                  if (lookupIndex == 1 && i == multiplier.get
      while (i < multiplier.length);			      |	      while (i < multiplier.getLength());
    while (count < groups.length)			      |	    while (count < groups.getLength())
      if (val / groups[count] <= 0)  // look for correct tabl |	      if (val / groups.getInt(count) <= 0)  // look for corre
        char[] theletters = (char[]) thisBundle.getObject(tab |	        CharArrayWrapper theletters = (CharArrayWrapper) this
        table = new char[theletters.length + 1];	      |	        table = new char[theletters.getLength() + 1];
        for (j = 0; j < theletters.length; j++)		      |	        for (j = 0; j < theletters.getLength(); j++)
          table[j + 1] = theletters[j];			      |	          table[j + 1] = theletters.getChar(j);
        table[0] = theletters[j - 1];  // don't need this     |	        table[0] = theletters.getChar(j - 1);  // don't need 
        lookupIndex = (int)val / groups[count];		      |	        lookupIndex = (int)val / groups.getInt(count);
        val = val % groups[count];			      |	        val = val % groups.getInt(count);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemOtherwise.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemOtherwise.java
 * $Id: ElemOtherwise.java,v 1.8 2004/02/16 20:32:32 minchau  |	 * $Id: ElemOtherwise.java,v 1.9 2004/08/17 18:35:33 jycli Ex
							      >	    static final long serialVersionUID = 1863944560970181395L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemParam.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemParam.java
 * $Id: ElemParam.java,v 1.17 2004/02/16 20:32:32 minchau Exp |	 * $Id: ElemParam.java,v 1.20 2005/01/23 00:27:29 mcnamara Ex
							      >	    static final long serialVersionUID = -1131781475589006431
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemPI.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemPI.java
 * $Id: ElemPI.java,v 1.19 2004/02/24 03:55:47 zongaro Exp $  |	 * $Id: ElemPI.java,v 1.23 2005/03/23 17:54:04 ytalwar Exp $
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
							      >	    static final long serialVersionUID = 5621976448020889825L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
    else if ((!m_name_atv.isSimple()) && (!XMLChar.isValidNCN |	    else if ((!m_name_atv.isSimple()) && (!XML11Char.isXML11V
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemSort.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemSort.java
 * $Id: ElemSort.java,v 1.11 2004/02/16 20:32:32 minchau Exp  |	 * $Id: ElemSort.java,v 1.12 2004/08/17 18:35:33 jycli Exp $
							      >	    static final long serialVersionUID = -4991510257335851938
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemTemplateElement.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemTemplateElement.java
 * $Id: ElemTemplateElement.java,v 1.65 2004/02/24 03:55:47 z |	 * $Id: ElemTemplateElement.java,v 1.67 2005/01/23 00:27:29 m
							      >	    static final long serialVersionUID = 4440018597841834447L
   * @param transformer The XSLT TransformerFactory.	      <
   * @param stylesheetTree The owning stylesheet.	      <
   * @param name The name of the element.		      <
   * @param atts The element attributes.		      <
   * @param lineNumber The line in the XSLT file that the ele <
   * @param columnNumber The column index in the XSLT file th <
   * @param sourceNode The current context node.	      <
   * @param mode The current mode.			      <
   * @param newChild Child to be added to child list	      |	   * @param elem Child to be added to child list
   * @param newChild New child to replace with		      |	   * @param newChildElem New child to replace with
   * @param oldChild Old child to be replaced		      |	   * @param oldChildElem Old child to be replaced
   * @param kIndex Index of this child.			      |	   * @param i Index of this child.
   * @param parent This node's parent as an ElemTemplateEleme |	   * @param p This node's parent as an ElemTemplateElement
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemTemplate.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemTemplate.java
 * $Id: ElemTemplate.java,v 1.20 2004/02/16 20:32:32 minchau  |	 * $Id: ElemTemplate.java,v 1.23 2005/01/23 00:27:29 mcnamara
							      >	    static final long serialVersionUID = -5283056789965384058
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemText.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemText.java
 * $Id: ElemText.java,v 1.9 2004/02/16 20:32:32 minchau Exp $ |	 * $Id: ElemText.java,v 1.10 2004/08/17 18:35:33 jycli Exp $
							      >	    static final long serialVersionUID = 1383140876182316711L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemTextLiteral.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemTextLiteral.java
 * $Id: ElemTextLiteral.java,v 1.16 2004/02/16 20:32:32 minch |	 * $Id: ElemTextLiteral.java,v 1.19 2005/01/23 00:27:29 mcnam
							      >	    static final long serialVersionUID = -7872620006767660088
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
      if (TransformerImpl.S_DEBUG) {			      |	      if (transformer.getDebug()) {
      if (TransformerImpl.S_DEBUG) {			      |	      if (transformer.getDebug()) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemUnknown.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemUnknown.java
 * $Id: ElemUnknown.java,v 1.11 2004/02/16 20:32:33 minchau E |	 * $Id: ElemUnknown.java,v 1.14 2005/01/23 00:27:29 mcnamara 
							      >	    static final long serialVersionUID = -4573981712648730168
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
	if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
	if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemUse.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemUse.java
 * $Id: ElemUse.java,v 1.19 2004/02/16 20:32:32 minchau Exp $ |	 * $Id: ElemUse.java,v 1.21 2005/01/23 00:27:29 mcnamara Exp 
							      >	    static final long serialVersionUID = 5830057200289299736L
   * @param attributeSetsNames List of attribute sets names t <
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemValueOf.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemValueOf.java
 * $Id: ElemValueOf.java,v 1.24 2004/02/16 20:32:33 minchau E |	 * $Id: ElemValueOf.java,v 1.27 2005/01/23 00:27:29 mcnamara 
							      >	    static final long serialVersionUID = 3490728458007586786L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
      if (false && m_isDot && !TransformerImpl.S_DEBUG)	      |	      if (false && m_isDot && !transformer.getDebug())
          if (TransformerImpl.S_DEBUG)			      |	          if (transformer.getDebug())
      if (TransformerImpl.S_DEBUG)			      |	      if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemVariable.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemVariable.java
 * $Id: ElemVariable.java,v 1.26 2004/02/16 20:32:33 minchau  |	 * $Id: ElemVariable.java,v 1.29 2005/01/23 00:27:29 mcnamara
							      >	    static final long serialVersionUID = 9111131075322790061L
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
    if (TransformerImpl.S_DEBUG)			      |	    if (transformer.getDebug())
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
       && org.apache.xalan.processor.TransformerFactoryImpl.m |	       && sroot.getOptimizer())
   * @param parent This node's parent as an ElemTemplateEleme |	   * @param p This node's parent as an ElemTemplateElement
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemVariablePsuedo.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemVariablePsuedo.java
 * $Id: ElemVariablePsuedo.java,v 1.5 2004/02/16 20:32:32 min |	 * $Id: ElemVariablePsuedo.java,v 1.7 2005/01/23 00:27:29 mcn
							      >	    static final long serialVersionUID = 692295692732588486L;
   * @param sourceNode non-null reference to the <a href="htt <
   * @param mode reference, which may be null, to the <a href <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemWhen.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemWhen.java
 * $Id: ElemWhen.java,v 1.11 2004/02/16 20:32:32 minchau Exp  |	 * $Id: ElemWhen.java,v 1.12 2004/08/17 18:35:33 jycli Exp $
							      >	    static final long serialVersionUID = 5984065730262071360L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/ElemWithParam.java xalan-j_2_7_0/src/org/apache/xalan/templates/ElemWithParam.java
 * $Id: ElemWithParam.java,v 1.14 2004/02/16 20:32:33 minchau |	 * $Id: ElemWithParam.java,v 1.17 2005/01/23 00:27:29 mcnamar
							      >	    static final long serialVersionUID = -1070355175864326257
       && org.apache.xalan.processor.TransformerFactoryImpl.m |	       && sroot.getOptimizer())
   * @param parent This node's parent as an ElemTemplateEleme |	   * @param p This node's parent as an ElemTemplateElement
        if (TransformerImpl.S_DEBUG)			      |	        if (transformer.getDebug())
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/FuncDocument.java xalan-j_2_7_0/src/org/apache/xalan/templates/FuncDocument.java
 * $Id: FuncDocument.java,v 1.35 2004/02/16 20:32:32 minchau  |	 * $Id: FuncDocument.java,v 1.36 2004/08/17 18:35:33 jycli Ex
							      >	    static final long serialVersionUID = 2483304325971281424L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/FuncFormatNumb.java xalan-j_2_7_0/src/org/apache/xalan/templates/FuncFormatNumb.java
 * $Id: FuncFormatNumb.java,v 1.23 2004/02/16 20:32:33 mincha |	 * $Id: FuncFormatNumb.java,v 1.24 2004/08/17 18:35:33 jycli 
							      >	    static final long serialVersionUID = -8869935264870858636
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/FuncKey.java xalan-j_2_7_0/src/org/apache/xalan/templates/FuncKey.java
 * $Id: FuncKey.java,v 1.19 2004/02/16 20:32:33 minchau Exp $ |	 * $Id: FuncKey.java,v 1.20 2004/08/17 18:35:33 jycli Exp $
							      >	    static final long serialVersionUID = 9089293100115347340L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/KeyDeclaration.java xalan-j_2_7_0/src/org/apache/xalan/templates/KeyDeclaration.java
 * $Id: KeyDeclaration.java,v 1.13 2004/02/16 20:32:33 mincha |	 * $Id: KeyDeclaration.java,v 1.14 2004/08/17 18:35:33 jycli 
							      >	    static final long serialVersionUID = 7724030248631137918L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/NamespaceAlias.java xalan-j_2_7_0/src/org/apache/xalan/templates/NamespaceAlias.java
 * $Id: NamespaceAlias.java,v 1.9 2004/02/16 20:32:32 minchau |	 * $Id: NamespaceAlias.java,v 1.10 2004/08/17 18:35:33 jycli 
							      >	    static final long serialVersionUID = 456173966637810718L;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/OutputProperties.java xalan-j_2_7_0/src/org/apache/xalan/templates/OutputProperties.java
 * $Id: OutputProperties.java,v 1.33 2004/02/16 20:32:32 minc |	 * $Id: OutputProperties.java,v 1.34 2004/08/17 18:35:33 jycl
							      |	    static final long serialVersionUID = -6975274363881785488
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/RedundentExprEliminator.java xalan-j_2_7_0/src/org/apache/xalan/templates/RedundentExprEliminator.java
 * $Id: RedundentExprEliminator.java,v 1.9 2004/02/16 20:32:3 |	 * $Id: RedundentExprEliminator.java,v 1.11 2005/01/23 00:27:
  static int m_uniquePsuedoVarID = 1;			      |	  private static int m_uniquePseudoVarID = 1;
  public static boolean DEBUG = false;			      |	  public static final boolean DEBUG = false;
  public static boolean DIAGNOSE_NUM_PATHS_REDUCED = false;   |	  public static final boolean DIAGNOSE_NUM_PATHS_REDUCED = fa
  public static boolean DIAGNOSE_MULTISTEPLIST = false;	      |	  public static final boolean DIAGNOSE_MULTISTEPLIST = false;
   * 							      <
   * @param absPathsList Vector to which absolute paths will  <
   * be inserted.  The vector may be null, if the caller does <
   * not wish to collect absolute paths.		      <
   * @param psuedoVarRecipient The recipient of the psuedo va <
   * variables will be inserted as first children of the elem <
   * any existing variables.				      <
		ElemVariable var = createPsuedoVarDecl(root,  |			ElemVariable var = createPseudoVarDecl(root, 
   * @param uniquePsuedoVarName The name of the variable refe |	   * @param uniquePseudoVarName The name of the variable refe
  protected LocPathIterator changePartToRef(final QName uniqu |	  protected LocPathIterator changePartToRef(final QName uniqu
  	var.setQName(uniquePsuedoVarName);		      |	  	var.setQName(uniquePseudoVarName);
   * @param targetIndex The position of firstOccuranceOwner.  |	   * @param firstOccuranceIndex The position of firstOccuranc
		ElemVariable var = createPsuedoVarDecl(root,  |			ElemVariable var = createPseudoVarDecl(root, 
		QName uniquePsuedoVarName = var.getName();    |			QName uniquePseudoVarName = var.getName();
			changeToVarRef(uniquePsuedoVarName, o |				changeToVarRef(uniquePseudoVarName, o
	QName uniquePsuedoVarName = null;		      |		QName uniquePseudoVarName = null;
				    ElemVariable var = create |					    ElemVariable var = create
				    uniquePsuedoVarName = var |					    uniquePseudoVarName = var
					changeToVarRef(unique |						changeToVarRef(unique
				changeToVarRef(uniquePsuedoVa |					changeToVarRef(uniquePseudoVa
      ElemVariable var = createPsuedoVarDecl(psuedoVarRecipie |	      ElemVariable var = createPseudoVarDecl(psuedoVarRecipie
	  uniquePsuedoVarName = var.getName();		      |		  uniquePseudoVarName = var.getName();
      changeToVarRef(uniquePsuedoVarName, firstOccuranceOwner |	      changeToVarRef(uniquePseudoVarName, firstOccuranceOwner
							      |	   
							      >	  private synchronized static int getPseudoVarID(){
							      >	      return m_uniquePseudoVarID++; 
							      >	  }
							      >	  
  protected ElemVariable createPsuedoVarDecl(		      |	  protected ElemVariable createPseudoVarDecl(
    QName uniquePsuedoVarName = new QName (PSUEDOVARNAMESPACE |	    QName uniquePseudoVarName = new QName (PSUEDOVARNAMESPACE
    m_uniquePsuedoVarID++;				      <
  	  return createGlobalPsuedoVarDecl(uniquePsuedoVarNam |	  	  return createGlobalPseudoVarDecl(uniquePseudoVarNam
      return createLocalPsuedoVarDecl(uniquePsuedoVarName, ps |	      return createLocalPseudoVarDecl(uniquePseudoVarName, ps
   * @param uniquePsuedoVarName The name of the new variable. |	   * @param uniquePseudoVarName The name of the new variable.
   * @return null if the decl was not created, otherwise the  |	   * @return null if the decl was not created, otherwise the 
  protected ElemVariable createGlobalPsuedoVarDecl(QName uniq |	  protected ElemVariable createGlobalPseudoVarDecl(QName uniq
	psuedoVar.setName(uniquePsuedoVarName);		      |		psuedoVar.setName(uniquePseudoVarName);
   * @param uniquePsuedoVarName The name of the new variable. |	   * @param uniquePseudoVarName The name of the new variable.
   * @param addToContext true if the decl should be added to  |	   * @return null if the decl was not created, otherwise the 
   * @return null if the decl was not created, otherwise the  <
  protected ElemVariable createLocalPsuedoVarDecl(QName uniqu |	  protected ElemVariable createLocalPseudoVarDecl(QName uniqu
		psuedoVar.setName(uniquePsuedoVarName);	      |			psuedoVar.setName(uniquePseudoVarName);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/StylesheetComposed.java xalan-j_2_7_0/src/org/apache/xalan/templates/StylesheetComposed.java
 * $Id: StylesheetComposed.java,v 1.29 2004/02/16 20:32:32 mi |	 * $Id: StylesheetComposed.java,v 1.30 2004/08/17 18:35:34 jy
							      >	    static final long serialVersionUID = -3444072247410233923
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/Stylesheet.java xalan-j_2_7_0/src/org/apache/xalan/templates/Stylesheet.java
 * $Id: Stylesheet.java,v 1.30 2004/02/16 20:32:32 minchau Ex |	 * $Id: Stylesheet.java,v 1.31 2004/08/17 18:35:34 jycli Exp 
							      >	    static final long serialVersionUID = 2085337282743043776L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/StylesheetRoot.java xalan-j_2_7_0/src/org/apache/xalan/templates/StylesheetRoot.java
 * $Id: StylesheetRoot.java,v 1.54 2004/02/16 20:32:32 mincha |	 * $Id: StylesheetRoot.java,v 1.58 2005/06/07 15:35:52 mkwan 
							      >	    static final long serialVersionUID = 3875353123529147855L
							      >	    
							      >	    /**
							      >	     * The flag for the setting of the optimize feature;
							      >	     */    
							      >	    private boolean m_optimizer = true;
							      >
							      >	    /**
							      >	     * The flag for the setting of the incremental feature;
							      >	     */    
							      >	    private boolean m_incremental = false;
							      >
							      >	    /**
							      >	     * The flag for the setting of the source_location featur
							      >	     */  
							      >	    private boolean m_source_location = false;
							      >
							      >	    /**
							      >	     * State of the secure processing feature.
							      >	     */
							      >	    private boolean m_isSecureProcessing = false;
							      >	   * Set the state of the secure processing feature.
							      >	   */
							      >	  public void setSecureProcessing(boolean flag)
							      >	  {
							      >	    m_isSecureProcessing = flag;
							      >	  }
							      >	  
							      >	  /**
							      >	   * Return the state of the secure processing feature.
							      >	   */
							      >	  public boolean isSecureProcessing()
							      >	  {
							      >	    return m_isSecureProcessing;
							      >	  }
							      >
							      >	  /**
  private ExtensionNamespacesManager m_extNsMgr = null;	      |	  private transient ExtensionNamespacesManager m_extNsMgr = n
    private ComposeState m_composeState;		      |	    private transient ComposeState m_composeState;
							      >
							      >	    private String m_extensionHandlerClass = 
							      >	        "org.apache.xalan.extensions.ExtensionHandlerExsltFun
							      >	     * This internal method allows the setting of the java cl
							      >	     * to handle the extension function (if other than the de
							      >	     * 
							      >	     * @xsl.usage internal
							      >	     */
							      >	    public String setExtensionHandlerClass(String handlerClas
							      >	        String oldvalue = m_extensionHandlerClass;
							      >	        m_extensionHandlerClass = handlerClassName;
							      >	        return oldvalue;
							      >	    } 
							      >	    /**
							      >	     * 
							      >	     * @xsl.usage internal
							      >	     */
							      >	    public String getExtensionHandlerClass() {
							      >	        return m_extensionHandlerClass;
							      >	    }
							      >	        
							      >	    /**
							      >	    
							      >	    /**
							      >	     * @return Optimization flag
							      >	     */
							      >	    public boolean getOptimizer() {
							      >	        return m_optimizer;
							      >	    }
							      >
							      >	    /**
							      >	     * @param b Optimization flag
							      >	     */
							      >	    public void setOptimizer(boolean b) {
							      >	        m_optimizer = b;
							      >	    }
							      >
							      >	    /**
							      >	     * @return Incremental flag
							      >	     */
							      >	    public boolean getIncremental() {
							      >	        return m_incremental;
							      >	    }
							      >
							      >	    /**
							      >	     * @return source location flag
							      >	     */
							      >	    public boolean getSource_location() {
							      >	        return m_source_location;
							      >	    }
							      >
							      >	    /**
							      >	     * @param b Incremental flag
							      >	     */
							      >	    public void setIncremental(boolean b) {
							      >	        m_incremental = b;
							      >	    }
							      >
							      >	    /**
							      >	     * @param b Source location flag
							      >	     */
							      >	    public void setSource_location(boolean b) {
							      >	        m_source_location = b;
							      >	    }
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/TemplateList.java xalan-j_2_7_0/src/org/apache/xalan/templates/TemplateList.java
 * $Id: TemplateList.java,v 1.38 2004/02/16 20:32:33 minchau  |	 * $Id: TemplateList.java,v 1.41 2005/01/23 00:27:29 mcnamara
							      >	    static final long serialVersionUID = 5803675288911728791L
  static boolean DEBUG = false;				      |	  final static boolean DEBUG = false;
   * @param maxEndImportLevel The count of composed imports   |	   * @param endImportLevel The count of composed imports
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/TemplateSubPatternAssociation.java xalan-j_2_7_0/src/org/apache/xalan/templates/TemplateSubPatternAssociation.java
 * $Id: TemplateSubPatternAssociation.java,v 1.13 2004/02/16  |	 * $Id: TemplateSubPatternAssociation.java,v 1.14 2004/08/17 
							      >	    static final long serialVersionUID = -8902606755229903350
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/WhiteSpaceInfo.java xalan-j_2_7_0/src/org/apache/xalan/templates/WhiteSpaceInfo.java
 * $Id: WhiteSpaceInfo.java,v 1.10 2004/02/16 20:32:33 mincha |	 * $Id: WhiteSpaceInfo.java,v 1.12 2005/01/23 00:27:29 mcnama
							      >	    static final long serialVersionUID = 6389208261999943836L
   *							      <
   *							      <
   * @param matchPattern Match pattern			      <
   * @param shouldStripSpace Flag indicating whether or not   <
   * to strip whitespaces				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/XMLNSDecl.java xalan-j_2_7_0/src/org/apache/xalan/templates/XMLNSDecl.java
 * $Id: XMLNSDecl.java,v 1.7 2004/02/16 20:32:33 minchau Exp  |	 * $Id: XMLNSDecl.java,v 1.8 2004/08/17 18:35:34 jycli Exp $
							      >	    static final long serialVersionUID = 6710237366877605097L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/XSLTVisitor.java xalan-j_2_7_0/src/org/apache/xalan/templates/XSLTVisitor.java
 * $Id: XSLTVisitor.java,v 1.7 2004/02/16 20:32:32 minchau Ex |	 * $Id: XSLTVisitor.java,v 1.8 2005/01/23 00:27:29 mcnamara E
	 * @param owner The owner of the expression, to which <
	 *              be reset if rewriting takes place.    <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/XUnresolvedVariable.java xalan-j_2_7_0/src/org/apache/xalan/templates/XUnresolvedVariable.java
 * $Id: XUnresolvedVariable.java,v 1.10 2004/02/16 20:32:32 m |	 * $Id: XUnresolvedVariable.java,v 1.12 2005/01/23 00:27:29 m
							      >	    static final long serialVersionUID = -256779804767950188L
   * @param The point at which the search should terminate, n |	   * @param bottom The point at which the search should termi
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/templates/XUnresolvedVariableSimple.java xalan-j_2_7_0/src/org/apache/xalan/templates/XUnresolvedVariableSimple.java
 * $Id: XUnresolvedVariableSimple.java,v 1.5 2004/02/16 20:32 |	 * $Id: XUnresolvedVariableSimple.java,v 1.6 2004/08/17 18:35
							      >	    static final long serialVersionUID = -1224413807443958985
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/trace/EndSelectionEvent.java xalan-j_2_7_0/src/org/apache/xalan/trace/EndSelectionEvent.java
 * $Id: EndSelectionEvent.java,v 1.6 2004/02/16 23:00:27 minc |	 * $Id: EndSelectionEvent.java,v 1.7 2005/01/23 00:37:16 mcna
   * @param mode The current mode.			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/trace/GenerateEvent.java xalan-j_2_7_0/src/org/apache/xalan/trace/GenerateEvent.java
 * $Id: GenerateEvent.java,v 1.11 2004/02/16 23:00:27 minchau |	 * $Id: GenerateEvent.java,v 1.12 2005/02/04 22:20:38 mcnamar
 * @see org.apache.xalan.serialize.SerializerToHTML	      |	 * @see org.apache.xml.serializer.ToHTMLStream
 * @see org.apache.xalan.serialize.SerializerToText	      |	 * @see org.apache.xml.serializer.ToTextStream
 * @see org.apache.xalan.serialize.SerializerToXML	      |	 * @see org.apache.xml.serializer.ToXMLStream
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/trace/SelectionEvent.java xalan-j_2_7_0/src/org/apache/xalan/trace/SelectionEvent.java
 * $Id: SelectionEvent.java,v 1.9 2004/02/16 23:00:27 minchau |	 * $Id: SelectionEvent.java,v 1.10 2005/01/23 00:37:16 mcnama
   * @param mode The current mode.			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/trace/TraceListenerEx3.java xalan-j_2_7_0/src/org/apache/xalan/trace/TraceListenerEx3.java
 * $Id: TraceListenerEx3.java,v 1.3 2004/02/16 23:00:27 minch |	 * $Id: TraceListenerEx3.java,v 1.4 2005/01/23 00:37:16 mcnam
	 * @param ev the extension event.		      |		 * @param ee the extension event.
	 * @param ev the extension event.		      |		 * @param ee the extension event.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/trace/TraceManager.java xalan-j_2_7_0/src/org/apache/xalan/trace/TraceManager.java
 * $Id: TraceManager.java,v 1.16 2004/02/16 23:00:27 minchau  |	 * $Id: TraceManager.java,v 1.19 2005/01/23 00:37:16 mcnamara
    TransformerImpl.S_DEBUG = true;			      |	    m_transformer.setDebug(true);
   * @param sourceNode Current source node		      <
   * @param mode Template mode				      <
      Node source = m_transformer.getXPathContext().getDTM(   |	      Node source = getDOMNodeFromDTM(sourceNode);
        sourceNode).getNode(sourceNode);		      <
   * @param sourceNode Current source node		      <
   * @param mode Template mode				      <
      Node source = m_transformer.getXPathContext().getDTM(   |	      Node source = getDOMNodeFromDTM(sourceNode);
        sourceNode).getNode(sourceNode);		      <
      Node source = m_transformer.getXPathContext().getDTM(   |	      Node source = getDOMNodeFromDTM(sourceNode);
        sourceNode).getNode(sourceNode);		      <
      Node source = m_transformer.getXPathContext().getDTM(   |	      Node source = getDOMNodeFromDTM(sourceNode);
        sourceNode).getNode(sourceNode);		      <
							      >	  }
							      >	  
							      >	  /**
							      >	   * Get the DOM Node of the current XPath context, which is 
							      >	   * @param sourceNode the handle on the node used by a DTM.
							      >	   */
							      >	  private Node getDOMNodeFromDTM(int sourceNode) {
							      >	    org.apache.xml.dtm.DTM dtm = m_transformer.getXPathContex
							      >	    final Node source = (dtm == null) ? null : dtm.getNode(so
							      >	    return source;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/trace/TracerEvent.java xalan-j_2_7_0/src/org/apache/xalan/trace/TracerEvent.java
 * $Id: TracerEvent.java,v 1.9 2004/02/16 23:00:27 minchau Ex |	 * $Id: TracerEvent.java,v 1.10 2005/01/23 00:37:16 mcnamara 
   * @param m_styleNode node in the style tree reference for  <
   * Should not be null.  That is not enforced.		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/CountersTable.java xalan-j_2_7_0/src/org/apache/xalan/transformer/CountersTable.java
 * $Id: CountersTable.java,v 1.13 2004/02/16 20:41:30 minchau |	 * $Id: CountersTable.java,v 1.14 2004/08/17 18:37:32 jycli E
							      >	    static final long serialVersionUID = 2159100770924179875L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/KeyIterator.java xalan-j_2_7_0/src/org/apache/xalan/transformer/KeyIterator.java
 * $Id: KeyIterator.java,v 1.16 2004/02/16 20:41:30 minchau E |	 * $Id: KeyIterator.java,v 1.18 2005/01/23 00:37:17 mcnamara 
							      >	    static final long serialVersionUID = -1349109910100249661
    * @param compiler A reference to the Compiler that contai <
    * @param opPos The position within the op map, which cont <
    * location path expression for this itterator.	      <
    *							      <
   * @param testnode  The node to check to see if it passes t |	   * @param testNode  The node to check to see if it passes t
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/KeyRefIterator.java xalan-j_2_7_0/src/org/apache/xalan/transformer/KeyRefIterator.java
 * $Id: KeyRefIterator.java,v 1.17 2004/02/16 20:41:29 mincha |	 * $Id: KeyRefIterator.java,v 1.19 2005/01/23 00:37:17 mcnama
							      >	    static final long serialVersionUID = 3837456451659435102L
   * @param testnode  The node to check to see if it passes t |	   * @param testNode  The node to check to see if it passes t
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/KeyTable.java xalan-j_2_7_0/src/org/apache/xalan/transformer/KeyTable.java
 * $Id: KeyTable.java,v 1.17 2004/02/16 20:41:29 minchau Exp  |	 * $Id: KeyTable.java,v 1.19 2005/01/23 00:37:17 mcnamara Exp
   * @param xmlLiaison The parser liaison for support of getN <
   * @return key declaration for the key associated to this K |	   * @return key declarations for the key associated to this 
  private KeyDeclaration getKeyDeclaration() {		      |	  private Vector getKeyDeclarations() {
							      >	    Vector keyDecls = new Vector(nDeclarations);
      // Only continue if the name on this key declaration    |	      // Add the declaration if the name on this key declarat
      if (kd.getName().equals(getKeyTableName()))	      |	      if (kd.getName().equals(getKeyTableName())) {
      {							      |	        keyDecls.add(kd);
        return kd;					      <
    // should never happen				      |	    return keyDecls;
    return null;					      <
    if (m_refsTable == null)				      |	    if (m_refsTable == null) {
    {							      |	      // initial capacity set to a prime number to improve ha
      m_refsTable = new Hashtable(89);  // initial capacity s |	      m_refsTable = new Hashtable(89);
      KeyDeclaration keyDeclaration = getKeyDeclaration();    |	      Vector keyDecls = getKeyDeclarations();
							      >	      int nKeyDecls = keyDecls.size();
          XObject xuse = keyDeclaration.getUse().execute(xctx |	          for (int keyDeclIdx = 0; keyDeclIdx < nKeyDecls; ke
							      >	            KeyDeclaration keyDeclaration =
							      >	                (KeyDeclaration) keyDecls.elementAt(keyDeclId
							      >	            XObject xuse =
							      >	                keyDeclaration.getUse().execute(xctxt,
							      >	                                                currentNode,
							      >	                                                ki.getPrefixR
          if (xuse.getType() != xuse.CLASS_NODESET)	      |	            if (xuse.getType() != xuse.CLASS_NODESET) {
          {						      |	              XMLString exprResult = xuse.xstr();
            XMLString exprResult = xuse.xstr();		      <
            addValueInRefsTable(xctxt, exprResult, currentNod <
          }						      <
          else						      <
          {						      <
            DTMIterator i = ((XNodeSet)xuse).iterRaw();	      <
            int currentNodeInUseClause;			      <
							      <
            while (DTM.NULL != (currentNodeInUseClause = i.ne <
            {						      <
              DTM dtm = xctxt.getDTM(currentNodeInUseClause); <
              XMLString exprResult = dtm.getStringValue(curre <
							      >	            } else {
							      >	              DTMIterator i = ((XNodeSet)xuse).iterRaw();
							      >	              int currentNodeInUseClause;
							      >
							      >	              while (DTM.NULL != (currentNodeInUseClause = i.
							      >	                DTM dtm = xctxt.getDTM(currentNodeInUseClause
							      >	                XMLString exprResult =
							      >	                    dtm.getStringValue(currentNodeInUseClause
							      >	                addValueInRefsTable(xctxt, exprResult, curren
							      >	              }
        }						      |	        } catch (TransformerException te) {
        catch (TransformerException te)			      <
        {						      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/StackGuard.java xalan-j_2_7_0/src/org/apache/xalan/transformer/StackGuard.java
 * $Id: StackGuard.java,v 1.12 2004/02/16 20:41:29 minchau Ex |	 * $Id: StackGuard.java,v 1.14 2005/01/23 00:37:17 mcnamara E
  public static int m_recursionLimit = -1;		      |	  private int m_recursionLimit = -1;
   *							      <
   * @param xslTemplate Current template node		      <
   * @param sourceXML Source Node			      <
   *							      <
   * @param obj StackGuard object to compare		      <
   *							      <
   * @return True if the given object matches this StackGuard <
   *							      <
   *							      <
   * @param guard Current StackGuard object (matching current <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/TransformerHandlerImpl.java xalan-j_2_7_0/src/org/apache/xalan/transformer/TransformerHandlerImpl.java
 * $Id: TransformerHandlerImpl.java,v 1.19 2004/02/16 20:41:2 |	 * $Id: TransformerHandlerImpl.java,v 1.20 2004/12/15 17:35:3
							      >	    /**
							      >	     * The flag for the setting of the optimize feature;
							      >	     */    
							      >	    private final boolean m_optimizer;
							      >
							      >	    /**
							      >	     * The flag for the setting of the incremental feature;
							      >	     */    
							      >	    private final boolean m_incremental;
							      >
							      >	    /**
							      >	     * The flag for the setting of the source_location featur
							      >	     */  
							      >	    private final boolean m_source_location;
							      >	    m_incremental = transformer.getIncremental();
							      >	    m_optimizer = transformer.getOptimize();
							      >	    m_source_location = transformer.getSource_location();
      if(DTMManager.getIncremental())			      |	      if(m_incremental)
    if(DTMManager.getIncremental())			      |	    if(m_incremental)
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/TransformerIdentityImpl.java xalan-j_2_7_0/src/org/apache/xalan/transformer/TransformerIdentityImpl.java
 * $Id: TransformerIdentityImpl.java,v 1.31 2004/02/23 21:33: |	 * $Id: TransformerIdentityImpl.java,v 1.37 2005/07/05 17:55:
							      >	import javax.xml.XMLConstants;
import org.apache.xml.utils.TreeWalker;			      <
  public TransformerIdentityImpl()			      |	  public TransformerIdentityImpl(boolean isSecureProcessing)
							      >	    m_isSecureProcessing = isSecureProcessing;
							      >	  }
							      >
							      >	  /**
							      >	   * Constructor TransformerIdentityImpl creates an identity 
							      >	   *
							      >	   */
							      >	  public TransformerIdentityImpl()
							      >	  {
							      >	    this(false);
							      >	   * Reset the status of the transformer.
							      >	   */
							      >	  public void reset()
							      >	  {
							      >	    m_flushedStartDoc = false;
							      >	    m_foundFirstElement = false;
							      >	    m_outputStream = null;
							      >	    m_params.clear();
							      >	    m_result = null;
							      >	    m_resultContentHandler = null;
							      >	    m_resultDeclHandler = null;
							      >	    m_resultDTDHandler = null;
							      >	    m_resultLexicalHandler = null;
							      >	    m_serializer = null;
							      >	    m_systemID = null;
							      >	    m_URIResolver = null;
							      >	    m_outputFormat = new OutputProperties(Method.XML);
							      >	  }
							      >
							      >	  /**
							      >	      Node nextSibling = domResult.getNextSibling();
							      >	          if (m_isSecureProcessing)
							      >	          {
							      >	            try
							      >	            {
							      >	              dbf.setFeature(XMLConstants.FEATURE_SECURE_PROC
							      >	            }
							      >	            catch (ParserConfigurationException pce) {}
							      >	          }
							      >
      m_resultContentHandler =				      |	      DOMBuilder domBuilder =
      m_resultLexicalHandler = (LexicalHandler) m_resultConte |	      
							      >	      if (nextSibling != null)
							      >	        domBuilder.setNextSibling(nextSibling);
							      >	      
							      >	      m_resultContentHandler = domBuilder;
							      >	      m_resultLexicalHandler = domBuilder;
          if (fileURL.startsWith("file:///"))		      |	          if (fileURL.startsWith("file:///")) {
          {						      |	            if (fileURL.substring(8).indexOf(":") >0) {
            if (fileURL.substring(8).indexOf(":") >0)	      <
            else 					      |	            } else  {
							      >	            }
							      >	          } else if (fileURL.startsWith("file:/")) {
							      >	            if (fileURL.substring(6).indexOf(":") >0) {
							      >	              fileURL = fileURL.substring(6);
							      >	            } else {
							      >	              fileURL = fileURL.substring(5);
							      >	            }
              {						      |	              { 
                TreeWalker walker = new TreeWalker(this, new  |	                org.apache.xml.serializer.TreeWalker walker;
							      >	                walker = new org.apache.xml.serializer.TreeWa
   * @param attributes The specified or defaulted attributes. <
    new org.apache.xml.utils.DefaultErrorHandler();	      |	    new org.apache.xml.utils.DefaultErrorHandler(false);
							      >	  
							      >	  /**
							      >	   * State of the secure processing feature.
							      >	   */
							      >	  private boolean m_isSecureProcessing = false;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/TransformerImpl.java xalan-j_2_7_0/src/org/apache/xalan/transformer/TransformerImpl.java
 * $Id: TransformerImpl.java,v 1.158 2004/02/23 21:33:14 igor |	 * $Id: TransformerImpl.java,v 1.167 2005/07/15 22:21:30 mcna
							      >	   * The flag for the setting of the optimize feature;
							      >	   * This flag should have the same value as the FEATURE_OPTI
							      >	   * which is set by the TransformerFactory.setAttribut() met
							      >	   * Transformer is created
							      >	   */    
							      >	  private boolean m_optimizer = true;
							      >
							      >	  /**
							      >	   * The flag for the setting of the incremental feature;
							      >	   * This flag should have the same value as the FEATURE_INCR
							      >	   * which is set by the TransformerFactory.setAttribut() met
							      >	   * Transformer is created
							      >	   */    
							      >	  private boolean m_incremental = false;
							      >
							      >	  /**
							      >	   * The flag for the setting of the source_location feature;
							      >	   * This flag should have the same value as the FEATURE_SOUR
							      >	   * which is set by the TransformerFactory.setAttribut() met
							      >	   * Transformer is created
							      >	   */  
							      >	  private boolean m_source_location = false;
							      >	    
							      >	  /**
  public static boolean S_DEBUG = false;		      |	  private boolean m_debug = false;
    new org.apache.xml.utils.DefaultErrorHandler();	      |	    new org.apache.xml.utils.DefaultErrorHandler(false);
							      >	    m_optimizer = stylesheet.getOptimizer();
							      >	    m_incremental = stylesheet.getIncremental();
							      >	    m_source_location = stylesheet.getSource_location();  
    setXPathContext(new XPathContext(this));		      |	    XPathContext xPath = new XPathContext(this);
							      >	    xPath.setIncremental(m_incremental);
							      >	    xPath.getDTMManager().setIncremental(m_incremental);
							      >	    xPath.setSource_location(m_source_location);
							      >	    xPath.getDTMManager().setSource_location(m_source_locatio
							      >	    
							      >	    if (stylesheet.isSecureProcessing())
							      >	      xPath.setSecureProcessing(true);
							      >	    
							      >	    setXPathContext(xPath);
    m_stackGuard = new StackGuard(this);		      |	    m_stackGuard = new StackGuard(this);    
   * @param name A non-null String that specifies an output   <
   * property name, which may be namespace qualified.	      <
   *							      <
   * @param name The property name, which is a fully-qualifie <
   *							      <
   * Set the value of a property.  Recognized properties are: |	   * This method is used to set or override the value
   *							      |	   * of the effective xsl:output attribute values
   * <p>"http://xml.apache.org/xslt/sourcebase" - the base UR |	   * specified in the stylesheet.
   * source, which is needed when pure SAX ContentHandler tra |	   * <p>
   * is to be done.</p>					      |	   * The recognized standard output properties are:
							      >	   * <ul>
							      >	   * <li>cdata-section-elements
							      >	   * <li>doctype-system
							      >	   * <li>doctype-public
							      >	   * <li>indent
							      >	   * <li>media-type
							      >	   * <li>method
							      >	   * <li>omit-xml-declaration
							      >	   * <li>standalone
							      >	   * <li>version
							      >	   * </ul>
							      >	   * <p>
							      >	   * For example:
							      >	   * <pre>
							      >	   *   tran.setOutputProperty("standalone", "yes");
							      >	   * </pre>
							      >	   * <p>
							      >	   * In the case of the cdata-section-elements property,
							      >	   * the value should be a whitespace separated list of
							      >	   * element names.  The element name is the local name
							      >	   * of the element, if it is in no namespace, or, the URI
							      >	   * in braces followed immediately by the local name
							      >	   * if the element is in that namespace. For example: 
							      >	   * <pre>
							      >	   * tran.setOutputProperty(
							      >	   *   "cdata-section-elements", 
							      >	   *   "elem1 {http://example.uri}elem2 elem3");
							      >	   * </pre>
							      >	   * <p>
							      >	   * The recognized Xalan extension elements are: 
							      >	   * <ul>
							      >	   * <li>content-handler
							      >	   * <li>entities
							      >	   * <li>indent-amount
							      >	   * <li>line-separator
							      >	   * <li>omit-meta-tag
							      >	   * <li>use-url-escaping
							      >	   * </ul>
							      >	   * <p>
							      >	   * These must be in the extension namespace of
							      >	   * "http://xml.apache.org/xalan".  This is accomplished
							      >	   * by putting the namespace URI in braces before the 
							      >	   * property name, for example:
							      >	   * <pre>
							      >	   *   tran.setOutputProperty(
							      >	   *     "{http://xml.apache.org/xalan}line-separator" ,
							      >	   *     "\n");
							      >	   * </pre> 
   * @param name The property name, which is a fully-qualifie |	   * @param name The property name.
							      >	        org.w3c.dom.Node nextSibling = ((DOMResult)outputTarg
          doc = org.apache.xml.utils.DOMHelper.createDocument |	          boolean isSecureProcessing = m_stylesheetRoot.isSec
							      >	          doc = org.apache.xml.utils.DOMHelper.createDocument
        ContentHandler handler =			      |	        DOMBuilder handler =
							      >	        
							      >	        if (nextSibling != null)
							      >	          handler.setNextSibling(nextSibling);
							      >	        
							      >	            else if (fileURL.startsWith("file:/"))
							      >	            {
							      >	                if (fileURL.substring(6).indexOf(":") >0)
							      >	                    fileURL = fileURL.substring(6);
							      >	                  else
							      >	                    fileURL = fileURL.substring(5);          
							      >	            }
   * @param outputTarget The output source target.	      <
   * @param name The name of the parameter,		      <
   *             which may have a namespace URI.	      <
   * @param value The value object.  This can be any valid Ja <
   * -- it's up to the processor to provide the proper	      <
   * coersion to the object, or simply pass it on for use     <
   * in extensions.					      <
   *							      <
   * @param resolver The new content handler.		      <
   *							      <
   * @param transformer The XSLT transformer instance.	      <
   * @param sourceNode The current source node context.	      <
   * @param mode The current xslt mode.			      <
    if(elem.hasTextLitOnly() && org.apache.xalan.processor.Tr |	    if(elem.hasTextLitOnly() && m_optimizer)
   * @param template The template to use if xsl:for-each, or  |	   * @param template The template to use if xsl:for-each, cur
   * @param mode The current mode, may be null.		      <
    boolean isApplyImports = false;    			      |	    boolean isApplyImports = false;
							      >	    
							      >	    isApplyImports = ((xslInstruction == null)
							      >	                                ? false
							      >	                                : xslInstruction.getXSLToken(
							      >	                                  == Constants.ELEMNAME_APPLY
    if (null == template)				      |	    if (null == template || isApplyImports)
      isApplyImports = ((xslInstruction == null)	      <
                                ? false			      <
                                : xslInstruction.getXSLToken( <
                                  == Constants.ELEMNAME_APPLY <
          xslInstruction.getStylesheetComposed().getImportCou |	          template.getStylesheetComposed().getImportCountComp
          xslInstruction.getStylesheetComposed().getEndImport |	          template.getStylesheetComposed().getEndImportCountC
        if (TransformerImpl.S_DEBUG)			      |	        if (m_debug)
        if (TransformerImpl.S_DEBUG)			      |	        if (m_debug)
          popCurrentMatched();				      <
							      >	      popCurrentMatched();
							      >	      
   * @param sourceNode The current context node.	      <
   * @param transformer The XSLT transformer instance.	      <
   *							      <
   * @param sourceNode The current context node.	      <
   * @param mode The current mode.			      <
    if(elem.hasTextLitOnly() && org.apache.xalan.processor.Tr |	    if(elem.hasTextLitOnly() && m_optimizer)
      if (TransformerImpl.S_DEBUG)			      |	      if (m_debug)
      if (TransformerImpl.S_DEBUG)			      |	      if (m_debug)
	/**						      |	    /**
	 * @see org.apache.xml.serializer.SerializerTrace#has |	     * @see org.apache.xml.serializer.SerializerTrace#hasTrac
	 */						      |	     */
	public boolean hasTraceListeners() {		      |	    public boolean hasTraceListeners() {
		return m_traceManager.hasTraceListeners();    |	        return m_traceManager.hasTraceListeners();
	}						      |	    }
							      >
							      >	    public boolean getDebug() {
							      >	        return m_debug;
							      >	    }
							      >
							      >	    public void setDebug(boolean b) {
							      >	        m_debug = b;
							      >	    }
							      >
							      >	    /**
							      >	     * @return Incremental flag
							      >	     */
							      >	    public boolean getIncremental() {
							      >	        return m_incremental;
							      >	    }
							      >
							      >	    /**
							      >	     * @return Optimization flag
							      >	     */
							      >	    public boolean getOptimize() {
							      >	        return m_optimizer;
							      >	    }
							      >
							      >	    /**
							      >	     * @return Source location flag
							      >	     */
							      >	    public boolean getSource_location() {
							      >	        return m_source_location;
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/transformer/TrAXFilter.java xalan-j_2_7_0/src/org/apache/xalan/transformer/TrAXFilter.java
 * $Id: TrAXFilter.java,v 1.15 2004/02/23 17:09:48 jycli Exp  |	 * $Id: TrAXFilter.java,v 1.17 2005/06/07 15:35:52 mkwan Exp 
							      >	import javax.xml.XMLConstants;
							      >	          
							      >	          if (m_transformer.getStylesheet().isSecureProcessin
							      >	              try {
							      >	                  factory.setFeature(XMLConstants.FEATURE_SEC
							      >	              }
							      >	              catch (org.xml.sax.SAXException se) {}
							      >	          }
							      >	          
   * @param resolver The new content handler.		      |	   * @param handler The new content handler.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/Version.java xalan-j_2_7_0/src/org/apache/xalan/Version.java
 * Copyright 2003-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2004 The Apache Software Foundation.
 * $Id: Version.java,v 1.12 2004/02/26 04:00:47 zongaro Exp $ |	 * $Id$
 * <meta name="usage" content="general"/>		      <
							      >	 * @xsl.usage general
    return 6;						      |	    return 7;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/Version.src xalan-j_2_7_0/src/org/apache/xalan/Version.src
 * Copyright 2003-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2004 The Apache Software Foundation.
 * <meta name="usage" content="general"/>		      <
							      >	 * @xsl.usage general
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xslt/EnvironmentCheck.java xalan-j_2_7_0/src/org/apache/xalan/xslt/EnvironmentCheck.java
 * $Id: EnvironmentCheck.java,v 1.26 2004/02/26 04:00:47 zong |	 * $Id: EnvironmentCheck.java,v 1.29 2005/07/27 19:21:04 mcna
 * @version $Id: EnvironmentCheck.java,v 1.26 2004/02/26 04:0 |	 * @version $Id: EnvironmentCheck.java,v 1.29 2005/07/27 19:2
      "#---- BEGIN writeEnvironmentReport($Revision: 1.26 $): |	      "#---- BEGIN writeEnvironmentReport($Revision: 1.29 $):
							      >	    "serializer.jar",   // Serializer (shared between Xalan &
      envCheckNode.setAttribute("version", "$Revision: 1.26 $ |	      envCheckNode.setAttribute("version", "$Revision: 1.29 $
  protected static Hashtable jarVersions = new Hashtable();   |	  private static Hashtable jarVersions = new Hashtable();
							      >	    jarVersions.put(new Long(194205), "xml-apis.jar from head
    jarVersions.put(new Long(1010806), "xercesImpl.jar from X |	    jarVersions.put(new Long(1010806), "xercesImpl.jar from X
							      >	    jarVersions.put(new Long(1203860), "xercesImpl.jar from X
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xslt/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/xslt/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:38:33 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:38:33
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 22760827
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xslt/Process.java xalan-j_2_7_0/src/org/apache/xalan/xslt/Process.java
 * $Id: Process.java,v 1.62 2004/02/23 10:29:35 aruny Exp $   |	 * $Id: Process.java,v 1.64 2005/06/07 15:35:52 mkwan Exp $
							      >	import javax.xml.XMLConstants;
							      >	import javax.xml.parsers.ParserConfigurationException;
							      >	import javax.xml.transform.TransformerConfigurationException;
							      >	    System.out.println(resbundle.getString("optionSECUREPROCE
    System.out.println(resbundle.getString("optionXD"));      <
							      >	    System.out.println(resbundle.getString("optionXD"));
							      >	    String msg = null;
							      >	    boolean isSecureProcessing = false;
							      >	        tfactory.setErrorListener(new DefaultErrorHandler());
        diagnosticsWriter.println(			      |	//      "XSL Process was not successful.");
          XSLMessages.createMessage(			      |	        msg = XSLMessages.createMessage(
            XSLTErrorResources.ER_NOT_SUCCESSFUL, null));  // |	            XSLTErrorResources.ER_NOT_SUCCESSFUL, null);
							      >	        diagnosticsWriter.println(msg);  
        doExit(-1);					      |	        doExit(msg);
              System.err.println(			      |	                msg = XSLMessages.createMessage(
                XSLMessages.createMessage(		      |	                    XSLTErrorResources.ER_CLASS_NOT_FOUND_FOR
                  XSLTErrorResources.ER_CLASS_NOT_FOUND_FOR_O |	                    new Object[]{ "-URIResolver" });
                  new Object[]{ "-URIResolver" }));	      |	              System.err.println(msg);
              doExit(-1);				      |	              doExit(msg);
            System.err.println(				      |	            msg = XSLMessages.createMessage(
              XSLMessages.createMessage(		      |	                    XSLTErrorResources.ER_MISSING_ARG_FOR_OPT
                XSLTErrorResources.ER_MISSING_ARG_FOR_OPTION, |	                    new Object[]{ "-URIResolver" });  //"Miss
                new Object[]{ "-URIResolver" }));  //"Missing |	            System.err.println(msg);
            doExit(-1);					      |	            doExit(msg);
              System.err.println(			      |	                msg = XSLMessages.createMessage(
                XSLMessages.createMessage(		      |	                    XSLTErrorResources.ER_CLASS_NOT_FOUND_FOR
                  XSLTErrorResources.ER_CLASS_NOT_FOUND_FOR_O |	                    new Object[]{ "-EntityResolver" });
                  new Object[]{ "-EntityResolver" }));	      |	              System.err.println(msg);
              doExit(-1);				      |	              doExit(msg);
            System.err.println(				      |	//            "Missing argument for);
              XSLMessages.createMessage(		      |	              msg = XSLMessages.createMessage(
                XSLTErrorResources.ER_MISSING_ARG_FOR_OPTION, |	                    XSLTErrorResources.ER_MISSING_ARG_FOR_OPT
                new Object[]{ "-EntityResolver" }));  //"Miss |	                    new Object[]{ "-EntityResolver" });
            doExit(-1);					      |	            System.err.println(msg);  
							      >	            doExit(msg);
              System.err.println(			      |	                msg = XSLMessages.createMessage(
                XSLMessages.createMessage(		      |	                    XSLTErrorResources.ER_CLASS_NOT_FOUND_FOR
                  XSLTErrorResources.ER_CLASS_NOT_FOUND_FOR_O |	                    new Object[]{ "-ContentHandler" });
                  new Object[]{ "-ContentHandler" }));	      |	              System.err.println(msg);
              doExit(-1);				      |	              doExit(msg);
            System.err.println(				      |	//            "Missing argument for);
              XSLMessages.createMessage(		      |	              msg = XSLMessages.createMessage(
                XSLTErrorResources.ER_MISSING_ARG_FOR_OPTION, |	                    XSLTErrorResources.ER_MISSING_ARG_FOR_OPT
                new Object[]{ "-ContentHandler" }));  //"Miss |	                    new Object[]{ "-ContentHandler" });
            doExit(-1);					      |	            System.err.println(msg);  
							      >	            doExit(msg);
            useSourceLocation = true;			      |	            tfactory.setAttribute(XalanProperties.SOURCE_LOCA
							      >	        else if ("-SECURE".equalsIgnoreCase(argv[i]))
							      >	        {
							      >	          isSecureProcessing = true;
							      >	          try
							      >	          {
							      >	            tfactory.setFeature(XMLConstants.FEATURE_SECURE_P
							      >	          }
							      >	          catch (TransformerConfigurationException e) {}
							      >	        }
        System.err.println(resbundle.getString("xslProc_no_in |	          msg = resbundle.getString("xslProc_no_input");
        doExit(-1);					      |	        System.err.println(msg);
							      >	        doExit(msg);
							      >	            if (isSecureProcessing)
							      >	            {
							      >	              try
							      >	              {
							      >	                dfactory.setFeature(XMLConstants.FEATURE_SECU
							      >	              }
							      >	              catch (ParserConfigurationException pce) {}
							      >	            }
							      >
							      >	          transformer.setErrorListener(new DefaultErrorHandle
							      >	              if (isSecureProcessing)
							      >	              {
							      >	                try
							      >	                {
							      >	                  dfactory.setFeature(XMLConstants.FEATURE_SE
							      >	                }
							      >	                catch (ParserConfigurationException pce) {}
							      >	              }
							      >
							      >	              serializer.setErrorListener(new DefaultErrorHan
							      >	              
							      >	                if (isSecureProcessing)
							      >	                {
							      >	                  try
							      >	                  {
							      >	                    factory.setFeature(XMLConstants.FEATURE_S
							      >	                  }
							      >	                  catch (org.xml.sax.SAXException se) {}
							      >	                }
							      >
							      >	                  if (isSecureProcessing)
							      >	                  {
							      >	                    try
							      >	                    {
							      >	                      factory.setFeature(XMLConstants.FEATURE
							      >	                    }
							      >	                    catch (org.xml.sax.SAXException se) {}
							      >	                  }
							      >
          diagnosticsWriter.println(			      |	//          "XSL Process was not successful.");
            XSLMessages.createMessage(			      |	            msg = XSLMessages.createMessage(
              XSLTErrorResources.ER_NOT_SUCCESSFUL, null));   |	                XSLTErrorResources.ER_NOT_SUCCESSFUL, null);
          doExit(-1);					      |	          diagnosticsWriter.println(msg);  
							      >	          doExit(msg);
        	String msg = XSLMessages.createMessage("diagT |	            msg = XSLMessages.createMessage("diagTiming", msg
        doExit(-1);					      |	        doExit(throwable.getMessage());
  static void doExit(int i)				      |	  static void doExit(String msg)
    System.exit(i);					      |	    throw new RuntimeException(msg);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/cmdline/Compile.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/cmdline/Compile.java
 * $Id: Compile.java,v 1.17 2004/02/16 21:07:51 minchau Exp $ |	 * $Id: Compile.java,v 1.18 2004/12/15 17:35:38 jycli Exp $
    // This variable should be set to false to prevent any me <
    // class from calling System.exit(). As this is a command <
    // calling System.exit() is normally OK, but we also want <
    // this class being used in other ways as well.	      <
    private static boolean _allowExit = true;		      <
							      <
	if (_allowExit) System.exit(-1);		      <
		case 's':				      <
		    _allowExit = false;			      <
		    break;				      <
		    if (_allowExit) System.exit(-1);	      <
		if (_allowExit) System.exit(0);		      <
		if (_allowExit) System.exit(-1);	      <
	    if (_allowExit) System.exit(-1);		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/cmdline/getopt/GetOpt.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/cmdline/getopt/GetOpt.java
 * $Id: GetOpt.java,v 1.5 2004/02/16 21:21:06 minchau Exp $   |	 * $Id: GetOpt.java,v 1.6 2005/01/23 00:37:17 mcnamara Exp $
    * @param none					      <
    * @param none					      <
    * @params none					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/cmdline/getopt/GetOptsException.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/cmdline/getopt/GetOptsException.java
 * $Id: GetOptsException.java,v 1.3 2004/02/16 21:21:06 minch |	 * $Id: GetOptsException.java,v 1.4 2004/08/17 18:48:35 jycli
							      >	    static final long serialVersionUID = 8736874967183039804L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/cmdline/getopt/IllegalArgumentException.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/cmdline/getopt/IllegalArgumentException.java
 * $Id: IllegalArgumentException.java,v 1.4 2004/02/16 21:21: |	 * $Id: IllegalArgumentException.java,v 1.5 2004/08/17 18:48:
							      >	    static final long serialVersionUID = 8642122427294793651L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/cmdline/getopt/MissingOptArgException.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/cmdline/getopt/MissingOptArgException.java
 * $Id: MissingOptArgException.java,v 1.4 2004/02/16 21:21:06 |	 * $Id: MissingOptArgException.java,v 1.5 2004/08/17 18:48:35
							      >	    static final long serialVersionUID = -1972471465394544822
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/cmdline/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/cmdline/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = -6072257
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/cmdline/Transform.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/cmdline/Transform.java
 * $Id: Transform.java,v 1.32 2004/02/23 10:29:35 aruny Exp $ |	 * $Id: Transform.java,v 1.33 2004/12/15 17:35:38 jycli Exp $
    private static boolean _allowExit = true;		      <
							      <
			       e.getMessage());		      |	                   e.getMessage());	    
	    if (_allowExit) System.exit(-1);	    	      <
	    if (_allowExit) System.exit(-1);		      <
	    if (_allowExit) System.exit(-1);		      <
	    if (_allowExit) System.exit(-1);		      <
	    if (_allowExit) System.exit(-1);		      <
	    if (_allowExit) System.exit(-1);		      <
	    if (_allowExit) System.exit(-1);		      <
	    if (_allowExit) System.exit(-1);		      <
	if (_allowExit) System.exit(-1);		      <
		    else if (args[i].equals("-s")) {	      <
			_allowExit = false;		      <
		    }					      <
		    if (_allowExit) System.exit(0);	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/AbsoluteLocationPath.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/AbsoluteLocationPath.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: AbsoluteLocationPath.java,v 1.8 2004/02/16 22:24:29 m |	 * $Id: AbsoluteLocationPath.java,v 1.9 2005/06/30 21:04:16 z
							      >	import org.apache.bcel.generic.ALOAD;
							      >	import org.apache.bcel.generic.ASTORE;
							      >	import org.apache.bcel.generic.LocalVariableGen;
							      >	import org.apache.xalan.xsltc.compiler.util.Util;
	    // Create new AbsoluteIterator		      <
	    il.append(new NEW(cpg.addClass(ABSOLUTE_ITERATOR) <
	    il.append(DUP);				      <
							      >	            //
							      >	            // Backwards branches are prohibited if an uninit
							      >	            // on the stack by section 4.9.4 of the JVM Speci
							      >	            // We don't know whether this code might contain 
							      >	            // so we mustn't create the new object until afte
							      >	            // this argument to its constructor.  Instead we 
							      >	            // value of the argument to the constructor first
							      >	            // a temporary variable, create the object and re
							      >	            // from the temporary to avoid the problem.
							      >	            LocalVariableGen relPathIterator
							      >	                    = methodGen.addLocalVariable("abs_locatio
							      >	                                       Util.getJCRefType(NODE
							      >	                                       il.getEnd(), null);
							      >	            il.append(new ASTORE(relPathIterator.getIndex()))
							      >
							      >		    // Create new AbsoluteIterator
							      >		    il.append(new NEW(cpg.addClass(ABSOLUTE_ITERATOR)
							      >		    il.append(DUP);
							      >	            il.append(new ALOAD(relPathIterator.getIndex()));
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/ApplyImports.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/ApplyImports.java
 * $Id: ApplyImports.java,v 1.13 2004/02/16 22:24:29 minchau  |	 * $Id: ApplyImports.java,v 1.15 2005/02/09 22:45:15 ytalwar 
/**							      <
 * @author Morten Jorgensen				      <
 */							      <
    private String     _functionName;			      <
	Stylesheet stylesheet = getStylesheet();	      |	        // Move to root of include tree
	Stylesheet root = getParser().getTopLevelStylesheet() |	        Stylesheet includeRoot = getStylesheet();
							      |	        while (includeRoot._includedFrom != null) {
	int min = max;					      |	            includeRoot = includeRoot._includedFrom;
							      >	        }
	Enumeration templates = root.getContents().elements() |	        return includeRoot.getMinimumDescendantPrecedence();
	while (templates.hasMoreElements()) {		      <
	    SyntaxTreeNode child = (SyntaxTreeNode)templates. <
	    if (child instanceof Template) {		      <
		Stylesheet curr = child.getStylesheet();      <
		while ((curr != null) && (curr != stylesheet) <
		    if (curr._importedFrom != null)	      <
			curr = curr._importedFrom;	      <
		    else if (curr._includedFrom != null)      <
			curr = curr._includedFrom;	      <
		    else				      <
			curr = null;			      <
		}					      <
		if (curr == stylesheet) {		      <
		    int prec = child.getStylesheet().getImpor <
		    if (prec < min) min = prec;		      <
		}					      <
	    }						      <
	}						      <
	return (min);					      <
	// Get the [min,max> precedence of all templates impo <
	// current stylesheet				      <
	final int maxPrecedence = _precedence;		      <
	final int minPrecedence = getMinPrecedence(maxPrecede <
	final Mode mode = stylesheet.getMode(_modeName);      <
	_functionName = mode.functionName(minPrecedence, maxP <
							      <
	// Wrap the current node inside an iterator	      |	    il.append(methodGen.loadIterator());
	int init = cpg.addMethodref(SINGLETON_ITERATOR,	      <
				    "<init>", "("+NODE_SIG+") <
	il.append(new NEW(cpg.addClass(SINGLETON_ITERATOR))); <
	il.append(DUP);					      <
	il.append(methodGen.loadCurrentNode());		      <
	il.append(new INVOKESPECIAL(init));		      <
							      <
							      >	    il.append(methodGen.loadCurrentNode());
							      >
							      >	        // Push a new parameter frame in case imported templa
							      >	        // parameters.  The apply-imports has nothing that it
							      >	        if (stylesheet.hasLocalParams()) {
							      >	            il.append(classGen.loadTranslet());
							      >	            final int pushFrame = cpg.addMethodref(TRANSLET_C
							      >	                                                   PUSH_PARAM
							      >	                                                   PUSH_PARAM
							      >	            il.append(new INVOKEVIRTUAL(pushFrame));
							      >	        }
							      >
							      >		// Get the [min,max> precedence of all templates impo
							      >		// current stylesheet
							      >		final int maxPrecedence = _precedence;
							      >		final int minPrecedence = getMinPrecedence(maxPrecede
							      >		final Mode mode = stylesheet.getMode(_modeName);
							      >
							      >	        // Get name of appropriate apply-templates function f
							      >	        // xsl:apply-imports instruction
							      >		String functionName = mode.functionName(minPrecedence
	final String signature = classGen.getApplyTemplatesSi |		final String signature = classGen.getApplyTemplatesSi
						    _function |							    functionN
							      >
							      >	        // Pop any parameter frame that was pushed above.
							      >	        if (stylesheet.hasLocalParams()) {
							      >	            il.append(classGen.loadTranslet());
							      >	            final int pushFrame = cpg.addMethodref(TRANSLET_C
							      >	                                                   POP_PARAM_
							      >	                                                   POP_PARAM_
							      >	            il.append(new INVOKEVIRTUAL(pushFrame));
							      >	        }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/ApplyTemplates.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/ApplyTemplates.java
 * $Id: ApplyTemplates.java,v 1.21 2004/02/24 03:55:47 zongar |	 * $Id: ApplyTemplates.java,v 1.22 2005/03/23 17:54:04 ytalwa
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(mode)) {		      |	            if (!XML11Char.isXML11ValidQName(mode)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/AttributeSet.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/AttributeSet.java
 * $Id: AttributeSet.java,v 1.17 2004/02/24 03:55:47 zongaro  |	 * $Id: AttributeSet.java,v 1.18 2005/03/23 17:54:04 ytalwar 
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
        if (!XMLChar.isValidQName(name)) {		      |	        if (!XML11Char.isXML11ValidQName(name)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/AttributeValueTemplate.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/AttributeValueTemplate.java
 * $Id: AttributeValueTemplate.java,v 1.10 2004/02/16 22:24:2 |	 * $Id: AttributeValueTemplate.java,v 1.11 2004/05/21 20:27:5
							      >	import java.util.StringTokenizer;
							      >	import java.util.NoSuchElementException;
							      >	    
							      >	    final static int OUT_EXPR = 0;
							      >	    final static int IN_EXPR  = 1;
							      >	    final static int IN_EXPR_SQUOTES = 2;
							      >	    final static int IN_EXPR_DQUOTES = 3;
							      >	    final static String DELIMITER = "\uFFFE";      // A Unico
	if (check(value, parser)) {			      |	        
	    parseAVTemplate(0, value, parser);		      |	        try {
	}						      |	            parseAVTemplate(value, parser);
    }							      |	        }
							      |	        catch (NoSuchElementException e) {
    private void parseAVTemplate(final int start, String text |	            reportError(parent, parser,
	String str;					      |	                        ErrorMsg.ATTR_VAL_TEMPLATE_ERR, value
							      |	        }
	if (text == null) return;			      |	    }
							      |
	// Get first single opening braces		      |	    /**
	int open = start - 2;				      |	     * Two-pass parsing of ATVs. In the first pass, double cu
	do {						      |	     * replaced by one, and expressions are delimited using D
	    open = text.indexOf('{', open+2);		      |	     * second pass splits up the resulting buffer into litera
	} while ((open != -1) && 			      |	     * expressions. Errors are reported during the first pass
		 (open < (text.length()-1)) && 		      |	     */
		 (text.charAt(open+1) == '{'));		      |	    private void parseAVTemplate(String text, Parser parser) 
							      |	        StringTokenizer tokenizer = 
	if (open != -1) {				      |	            new StringTokenizer(text, "{}\"\'", true);
	    // Get first single closing braces		      |	        
	    int close = open - 2;			      |	        /*
	    do {					      |	          * First pass: replace double curly braces and delim
		close = text.indexOf('}', close+2);	      |	          * Simple automaton to parse ATVs, delimit expressio
	    } while ((close != -1) && 			      |	          * errors.
		     (close < (text.length()-1)) && 	      |	          */
		     (text.charAt(close+1) == '}'));	      |	        String t = null;
	    						      |	        String lookahead = null;
	    // Add literal expressiong before AVT	      |	        StringBuffer buffer = new StringBuffer();
	    if (open > start) {				      |	        int state = OUT_EXPR;
		str = removeDuplicateBraces(text.substring(st |	        
		addElement(new LiteralExpr(str));	      |	        while (tokenizer.hasMoreTokens()) {            
	    }						      |	            // Use lookahead if available
	    // Add the AVT itself			      |	            if (lookahead != null) {
	    if (close > open + 1) {			      |	                t = lookahead;
		str = text.substring(open + 1, close);	      |	                lookahead = null;
		str = removeDuplicateBraces(text.substring(op |	            }
		addElement(parser.parseExpression(this, str)) |	            else {
	    }						      |	                t = tokenizer.nextToken();
	    // Parse rest of string			      |	            }
	    parseAVTemplate(close + 1, text, parser);	      |	            
	    						      |	            if (t.length() == 1) {
	}						      |	                switch (t.charAt(0)) {
	else if (start < text.length()) {		      |	                    case '{':
	    // Add literal expression following AVT	      |	                        switch (state) {
	    str = removeDuplicateBraces(text.substring(start) |	                            case OUT_EXPR:
	    addElement(new LiteralExpr(str));		      |	                                lookahead = tokenizer.nextTok
	}						      |	                                if (lookahead.equals("{")) {
    }							      |	                                    buffer.append(lookahead);
							      |	                                    lookahead = null;
    public String removeDuplicateBraces(String orig) {	      |	                                }
	String result = orig;				      |	                                else {
	int index;					      |	                                    buffer.append(DELIMITER);
							      |	                                    state = IN_EXPR;         
	while ((index = result.indexOf("{{")) != -1) {	      |	                                }
	    result = result.substring(0,index) + 	      |	                                break;
		result.substring(index+1,result.length());    |	                            case IN_EXPR:
	}						      |	                            case IN_EXPR_SQUOTES:
							      |	                            case IN_EXPR_DQUOTES:
	while ((index = result.indexOf("}}")) != -1) {	      |	                                reportError(getParent(), pars
	    result = result.substring(0,index) + 	      |	                                            ErrorMsg.ATTR_VAL
		result.substring(index+1,result.length());    |	                                break;
	}						      |	                        }                                    
							      |	                        break;
	return(result);					      |	                    case '}':
							      >	                        switch (state) {
							      >	                            case OUT_EXPR:
							      >	                                lookahead = tokenizer.nextTok
							      >	                                if (lookahead.equals("}")) {
							      >	                                    buffer.append(lookahead);
							      >	                                    lookahead = null;
							      >	                                }
							      >	                                else {
							      >	                                    reportError(getParent(), 
							      >	                                            ErrorMsg.ATTR_VAL
							      >	                                }
							      >	                                break;
							      >	                            case IN_EXPR:
							      >	                                buffer.append(DELIMITER);
							      >	                                state = OUT_EXPR;
							      >	                                break;
							      >	                            case IN_EXPR_SQUOTES:
							      >	                            case IN_EXPR_DQUOTES:
							      >	                                buffer.append(t);
							      >	                                break;
							      >	                        }
							      >	                        break;
							      >	                    case '\'':
							      >	                        switch (state) {
							      >	                            case IN_EXPR:
							      >	                                state = IN_EXPR_SQUOTES;
							      >	                                break;
							      >	                            case IN_EXPR_SQUOTES:
							      >	                                state = IN_EXPR;
							      >	                                break;
							      >	                            case OUT_EXPR:
							      >	                            case IN_EXPR_DQUOTES:
							      >	                                break;
							      >	                        }
							      >	                        buffer.append(t);
							      >	                        break;
							      >	                    case '\"':
							      >	                        switch (state) {
							      >	                            case IN_EXPR:
							      >	                                state = IN_EXPR_DQUOTES;
							      >	                                break;
							      >	                            case IN_EXPR_DQUOTES:
							      >	                                state = IN_EXPR;
							      >	                                break;
							      >	                            case OUT_EXPR:
							      >	                            case IN_EXPR_SQUOTES:
							      >	                                break;
							      >	                        }
							      >	                        buffer.append(t);
							      >	                        break;
							      >	                    default:
							      >	                        buffer.append(t);
							      >	                        break;
							      >	                }
							      >	            }
							      >	            else {
							      >	                buffer.append(t);
							      >	            }
							      >	        }
							      >
							      >	        // Must be in OUT_EXPR at the end of parsing
							      >	        if (state != OUT_EXPR) {
							      >	            reportError(getParent(), parser,
							      >	                        ErrorMsg.ATTR_VAL_TEMPLATE_ERR, text)
							      >	        }
							      >	        
							      >	        /*
							      >	          * Second pass: split up buffer into literal and non
							      >	          */
							      >	        tokenizer = new StringTokenizer(buffer.toString(), DE
							      >	        
							      >	        while (tokenizer.hasMoreTokens()) {
							      >	            t = tokenizer.nextToken();
							      >	            
							      >	            if (t.equals(DELIMITER)) {
							      >			addElement(parser.parseExpression(this, token
							      >	                tokenizer.nextToken();      // consume other 
							      >	            }
							      >	            else {
							      >			addElement(new LiteralExpr(t)); 
							      >	            }
							      >	        }        
    }							      <
							      <
    private boolean check(String value, Parser parser) {      <
	// !!! how about quoted/escaped braces?		      <
	if (value == null) return true;			      <
							      <
	final char[] chars = value.toCharArray();	      <
	int level = 0;					      <
	for (int i = 0; i < chars.length; i++) {	      <
	    switch (chars[i]) {				      <
	    case '{':					      <
		if (((i+1) == (chars.length)) || (chars[i+1]  <
		    ++level;				      <
		else					      <
		    i++;				      <
		break;					      <
	    case '}':					      <
		if (((i+1) == (chars.length)) || (chars[i+1]  <
		    --level;				      <
		else					      <
		    i++;				      <
		break;					      <
	    default:					      <
		continue;				      <
	    }						      <
	    switch (level) {				      <
	    case 0:					      <
	    case 1:					      <
		continue;				      <
	    default:					      <
		reportError(getParent(), parser,	      <
			    ErrorMsg.ATTR_VAL_TEMPLATE_ERR, v <
		return false;				      <
	    }						      <
	}						      <
	if (level != 0) {				      <
	    reportError(getParent(), parser,		      <
			ErrorMsg.ATTR_VAL_TEMPLATE_ERR, value <
	    return false;				      <
	}						      <
	return true;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/CallTemplate.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/CallTemplate.java
 * $Id: CallTemplate.java,v 1.18 2004/02/24 02:57:28 zongaro  |	 * $Id: CallTemplate.java,v 1.20 2005/03/23 17:54:04 ytalwar 
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(name)) {		      |	            if (!XML11Char.isXML11ValidQName(name)) {
    	Stylesheet stylesheet = getXSLTC().getStylesheet();   |	    	Template foundTemplate
    	Vector templates = stylesheet.getAllValidTemplates(); |	            = getXSLTC().getParser().getSymbolTable().lookupT
        						      |
    	int size = templates.size();			      |	        return foundTemplate.isSimpleNamedTemplate() ? foundT
    	for (int i = 0; i < size; i++) {		      <
    	    Template t = (Template)templates.elementAt(i);    <
    	    if (t.getName() == _name && t.isSimpleNamedTempla <
    	    	return t;				      <
    	    }						      <
    	}						      <
    	return null;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/CastExpr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/CastExpr.java
 * $Id: CastExpr.java,v 1.21 2004/02/16 22:24:29 minchau Exp  |	 * $Id: CastExpr.java,v 1.23 2004/12/15 17:35:38 jycli Exp $
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
        InternalTypeMap.put(Type.String, Type.ObjectString);  <
	InternalTypeMap.put(Type.ObjectString, Type.String);  <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/CompilerException.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/CompilerException.java
 * $Id: CompilerException.java,v 1.3 2004/02/16 22:24:29 minc |	 * $Id: CompilerException.java,v 1.4 2004/08/17 18:48:35 jycl
							      >	    static final long serialVersionUID = 1732939618562742663L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/DecimalFormatting.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/DecimalFormatting.java
 * $Id: DecimalFormatting.java,v 1.14 2004/02/24 03:55:47 zon |	 * $Id: DecimalFormatting.java,v 1.15 2005/03/23 17:54:04 yta
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(name)){		      |	            if (!XML11Char.isXML11ValidQName(name)){
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/EqualityExpr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/EqualityExpr.java
 * $Id: EqualityExpr.java,v 1.14 2004/02/16 22:24:29 minchau  |	 * $Id: EqualityExpr.java,v 1.15 2004/12/15 17:35:38 jycli Ex
final class EqualityExpr extends Expression implements Operat |	final class EqualityExpr extends Expression {
							      >
	return Operators.names[_op] + '(' + _left + ", " + _r |	        return Operators.getOpNames(_op) + '(' + _left + ", "
	return (_op != Operators.NE);			      |	        return (_op != Operators.NE);
	    _falseList.add(il.append(_op == Operators.EQ ?    |	        _falseList.add(il.append(_op == Operators.EQ ? 
		_falseList.add(il.append(_op == Operators.EQ  |	        _falseList.add(il.append(_op == Operators.EQ ? 
		_falseList.add(il.append(_op == Operators.EQ  |	            _falseList.add(il.append(_op == Operators.EQ ? 
	    if (_op == Operators.NE) {			      |	        if (_op == Operators.NE) {
		if (_op == Operators.NE) {		      |	        if (_op == Operators.NE) {
		falsec = il.append(_op == Operators.EQ ?      |	        falsec = il.append(_op == Operators.EQ ? 
	    if (_op == Operators.NE) {			      |	        if (_op == Operators.NE) {
	    if (_op == EQ) {				      |	        if (_op == Operators.EQ) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/FilteredAbsoluteLocationPath.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/FilteredAbsoluteLocationPath.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: FilteredAbsoluteLocationPath.java,v 1.6 2004/02/16 22 |	 * $Id: FilteredAbsoluteLocationPath.java,v 1.7 2005/06/30 21
							      >	import org.apache.bcel.generic.ALOAD;
							      >	import org.apache.bcel.generic.ASTORE;
							      >	import org.apache.bcel.generic.LocalVariableGen;
							      >	import org.apache.xalan.xsltc.compiler.util.Util;
	    // Create new Dup Filter Iterator		      |
	    il.append(new NEW(cpg.addClass(DUP_FILTERED_ITERA |	            // Backwards branches are prohibited if an uninit
	    il.append(DUP);				      |	            // on the stack by section 4.9.4 of the JVM Speci
							      >	            // We don't know whether this code might contain 
							      >	            // so we mustn't create the new object until afte
							      >	            // the suspect arguments to its constructor.  Ins
							      >	            // the values of the arguments to the constructor
							      >	            // in temporary variables, create the object and 
							      >	            // arguments from the temporaries to avoid the pr
							      >	            LocalVariableGen pathTemp =
							      >	               methodGen.addLocalVariable("filtered_absolute_
							      >	                                          Util.getJCRefType(N
							      >	                                          il.getEnd(), null);
							      >	            il.append(new ASTORE(pathTemp.getIndex()));
							      >
							      >		    // Create new Dup Filter Iterator
							      >		    il.append(new NEW(cpg.addClass(DUP_FILTERED_ITERA
							      >		    il.append(DUP);
							      >	            il.append(new ALOAD(pathTemp.getIndex()));
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/FilterExpr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/FilterExpr.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: FilterExpr.java,v 1.11 2004/02/16 22:24:29 minchau Ex |	 * $Id: FilterExpr.java,v 1.12 2005/06/30 21:04:16 zongaro Ex
							      >	import org.apache.bcel.generic.ALOAD;
							      >	import org.apache.bcel.generic.ASTORE;
							      >	import org.apache.bcel.generic.NEW;
							      >	import org.apache.bcel.generic.LocalVariableGen;
							      >	import org.apache.xalan.xsltc.compiler.util.Util;
	    Predicate predicate = (Predicate)_predicates.last |	            // Backwards branches are prohibited if an uninit
	    _predicates.remove(predicate);		      |	            // on the stack by section 4.9.4 of the JVM Speci
							      >	            // We don't know whether this code might contain 
							      >	            // so we mustn't create the new object until afte
							      >	            // the suspect arguments to its constructor.  Ins
							      >	            // the values of the arguments to the constructor
							      >	            // in temporary variables, create the object and 
							      >	            // arguments from the temporaries to avoid the pr
							      >
							      >	            // Remove the next predicate to be translated
							      >	            Predicate predicate = (Predicate)_predicates.last
							      >	            _predicates.remove(predicate);
							      >
							      >	            // Translate the rest of the predicates from righ
							      >	            translatePredicates(classGen, methodGen);
							      >
							      >	            LocalVariableGen nodeIteratorTemp =
							      >	                methodGen.addLocalVariable("filter_expr_tmp1"
							      >	                                           Util.getJCRefType(
							      >	                                           il.getEnd(), null)
							      >	            il.append(new ASTORE(nodeIteratorTemp.getIndex())
							      >
							      >	            predicate.translate(classGen, methodGen);
							      >	            LocalVariableGen filterTemp =
							      >	                methodGen.addLocalVariable("filter_expr_tmp2"
							      >	                              Util.getJCRefType(CURRENT_NODE_
							      >	                              il.getEnd(), null);
							      >	            il.append(new ASTORE(filterTemp.getIndex()));
            // Translate the rest of the predicates from righ <
            translatePredicates(classGen, methodGen);	      <
            						      <
							      >	            il.append(new ALOAD(nodeIteratorTemp.getIndex()))
            predicate.translate(classGen, methodGen);	      |	            il.append(new ALOAD(filterTemp.getIndex()));
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/FilterParentPath.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/FilterParentPath.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: FilterParentPath.java,v 1.13 2004/02/16 22:24:29 minc |	 * $Id: FilterParentPath.java,v 1.14 2005/06/30 21:04:16 zong
							      >	import org.apache.bcel.generic.ALOAD;
							      >	import org.apache.bcel.generic.ASTORE;
							      >	import org.apache.bcel.generic.LocalVariableGen;
							      >	import org.apache.xalan.xsltc.compiler.util.Util;
	il.append(new NEW(cpg.addClass(STEP_ITERATOR_CLASS))) |
	il.append(DUP);					      |	        // Backwards branches are prohibited if an uninitiali
							      >	        // on the stack by section 4.9.4 of the JVM Specifica
							      >	        // We don't know whether this code might contain back
							      >	        // so we mustn't create the new object until after we
							      >	        // the suspect arguments to its constructor.  Instead
							      >	        // the values of the arguments to the constructor fir
							      >	        // in temporary variables, create the object and relo
							      >	        // arguments from the temporaries to avoid the proble
							      >	        LocalVariableGen filterTemp =
							      >	                methodGen.addLocalVariable("filter_parent_pat
							      >	                                           Util.getJCRefType(
							      >	                                           il.getEnd(), null)
							      >	        il.append(new ASTORE(filterTemp.getIndex()));
							      >
							      >	        LocalVariableGen pathTemp =
							      >	                methodGen.addLocalVariable("filter_parent_pat
							      >	                                           Util.getJCRefType(
							      >	                                           il.getEnd(), null)
							      >	        il.append(new ASTORE(pathTemp.getIndex()));
							      >
							      >		il.append(new NEW(cpg.addClass(STEP_ITERATOR_CLASS)))
							      >		il.append(DUP);
							      >	        il.append(new ALOAD(filterTemp.getIndex()));
							      >	        il.append(new ALOAD(pathTemp.getIndex()));
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/FunctionCall.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/FunctionCall.java
 * $Id: FunctionCall.java,v 1.38 2004/02/23 17:29:35 aruny Ex |	 * $Id: FunctionCall.java,v 1.41 2005/06/30 21:04:16 zongaro 
							      >	import org.apache.bcel.generic.LocalVariableGen;
import org.apache.bcel.generic.LocalVariableGen;	      <
import org.apache.bcel.generic.ASTORE;			      <
import org.apache.bcel.generic.ANEWARRAY;		      <
import org.apache.bcel.generic.ALOAD;			      <
import org.apache.bcel.generic.ACONST_NULL;		      <
							      <
							      <
    // If unable to resolve statically then resolve dynamical <
    private boolean  resolveDynamic = false;		      <
    							      <
           return _type;				      |		    return _type;
        else{						      <
          resolveDynamic = true;			      <
        }  						      <
        return  _type = (_clazz != null) ? Type.newObjectType |		throw new TypeCheckError(ErrorMsg.ARGUMENT_CONVERSION
                    : Type.newObjectType(_className);	      <
                else if(firstArgType instanceof ReferenceType <
                    resolveDynamic = true;		      <
              	    typeCheckArgs(stable);		      <
                    return Type.String;			      <
                }					      <
							      >		final boolean isSecureProcessing = classGen.getParser
							      >		    if (isSecureProcessing)
							      >		        translateUnallowedExtension(cpg, il);
							      >		    
	    						      |	            LocalVariableGen[] paramTemp = new LocalVariableG
	    il.append(new NEW(cpg.addClass(_className)));     |
	    il.append(InstructionConstants.DUP);	      |	            // Backwards branches are prohibited if an uninit
							      >	            // on the stack by section 4.9.4 of the JVM Speci
							      >	            // We don't know whether this code might contain 
							      >	            // so we mustn't create the new object until afte
							      >	            // the suspect arguments to its constructor.  Ins
							      >	            // the values of the arguments to the constructor
							      >	            // in temporary variables, create the object and 
							      >	            // arguments from the temporaries to avoid the pr
							      >	                Type expType = exp.getType();
		exp.getType().translateTo(classGen, methodGen |			expType.translateTo(classGen, methodGen, para
							      >	                paramTemp[i] =
							      >	                    methodGen.addLocalVariable("function_call
							      >	                                               expType.toJCTy
							      >	                                               il.getEnd(), n
							      >	                il.append(expType.STORE(paramTemp[i].getIndex
							      >		    il.append(new NEW(cpg.addClass(_className)));
							      >		    il.append(InstructionConstants.DUP);
							      >
							      >	            for (int i = 0; i < n; i++) {
							      >	                final Expression arg = argument(i);
							      >	                il.append(arg.getType().LOAD(paramTemp[i].get
							      >	            }
							      >
	else if(resolveDynamic) {			      <
							      <
          final LocalVariableGen _local = methodGen.addLocalV <
              org.apache.bcel.generic.Type.OBJECT, il.getEnd( <
							      <
          //Create the Object[].			      <
          il.append(new PUSH(cpg, n + 1));		      <
          il.append(new ANEWARRAY(cpg.addClass(OBJECT_CLASS)) <
							      <
          // Push "this" if it is an instance method	      <
          il.append(DUP);				      <
          if (_thisArgument != null) {			      <
            il.append(new PUSH(cpg, 0));		      <
            _thisArgument.translate(classGen, methodGen);     <
          }						      <
          //else add null to the Object array		      <
          else {					      <
            il.append(new PUSH(cpg, 0));		      <
            il.append(ACONST_NULL);			      <
          }						      <
          il.append(AASTORE);				      <
							      <
          //Add the parameters to Object[]		      <
          for (int i = 0; i < n; i++) {			      <
            il.append(DUP);				      <
            il.append(new PUSH(cpg, i + 1));		      <
            Expression exp = argument(i);		      <
            exp.translate(classGen, methodGen);		      <
            exp.startIterator(classGen, methodGen);	      <
            exp.getType().translateTo(classGen, methodGen, Ty <
            il.append(AASTORE);				      <
          }						      <
          il.append(new ASTORE(_local.getIndex()));	      <
							      <
          //call invoke parameter			      <
          String methodName = null;			      <
          if (_chosenMethod != null)			      <
            methodName = _chosenMethod.getName();	      <
          else						      <
            methodName = _fname.getLocalPart();		      <
							      <
          il.append(new PUSH(cpg, _className));		      <
          il.append(new PUSH(cpg, methodName));		      <
          il.append(new ALOAD(_local.getIndex()));	      <
							      <
          index = cpg.addMethodref(CALL_FUNCTION_CLASS, INVOK <
              "(Ljava/lang/String;Ljava/lang/String;[Ljava/la <
          il.append(new INVOKESTATIC(index));		      <
							      <
        }						      <
							      >		    if (isSecureProcessing)
							      >		        translateUnallowedExtension(cpg, il);
							      >		    
							      >	    /**
							      >	     * Translate code to call the BasisLibrary.unallowed_exte
							      >	     * method.
							      >	     */
							      >	    private void translateUnallowedExtension(ConstantPoolGen 
							      >	                                             InstructionList 
							      >		int index = cpg.addMethodref(BASIS_LIBRARY_CLASS,
							      >					     "unallowed_extension_fun
							      >					     "(Ljava/lang/String;)V")
							      >		il.append(new PUSH(cpg, _fname.toString()));
							      >		il.append(new INVOKESTATIC(index));   
							      >	    } 	 
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/IllegalCharException.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/IllegalCharException.java
 * $Id: IllegalCharException.java,v 1.3 2004/02/16 22:24:29 m |	 * $Id: IllegalCharException.java,v 1.4 2004/08/17 18:48:35 j
							      >	    static final long serialVersionUID = -667236676706226266L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Import.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Import.java
 * $Id: Import.java,v 1.24 2004/02/16 22:24:29 minchau Exp $  |	 * $Id: Import.java,v 1.25 2004/12/13 20:29:27 joannet Exp $
							      >	        _imported.setTemplateInlining(context.getTemplateInli
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/KeyCall.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/KeyCall.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: KeyCall.java,v 1.15 2004/02/16 22:24:29 minchau Exp $ |	 * $Id: KeyCall.java,v 1.16 2005/06/30 21:04:16 zongaro Exp $
					     		      |
							      >
							      >	        // Backwards branches are prohibited if an uninitiali
							      >	        // on the stack by section 4.9.4 of the JVM Specifica
							      >	        // We don't know whether this code might contain back
							      >	        // so we mustn't create the new object until after we
							      >	        // the suspect arguments to its constructor.  Instead
							      >	        // the values of the arguments to the constructor fir
							      >	        // in temporary variables, create the object and relo
							      >	        // arguments from the temporaries to avoid the proble
							      >
							      >		LocalVariableGen keyIterator = translateCall(classGen
							      >
	translateCall(classGen, methodGen);		      |	        il.append(new ALOAD(keyIterator.getIndex()));
							      <
     * Translate the actual index lookup - leaves KeyIndex (i |	     * Translate the actual index lookup - leaves KeyIndex (i
							      >	     * in a temporary that the caller will need to load.
							      >	     * @return A <code>org.apache.bcel.generic.LocalVariableG
							      >	     *         object that will contain the iterator for the 
    private void translateCall(ClassGenerator classGen,	      |	    private LocalVariableGen translateCall(ClassGenerator cla
			      MethodGenerator methodGen) {    |				                   MethodGenerator me
							      <
	    // Return with the an iterator for all resulting  <
	    il.append(new ALOAD(returnIndex.getIndex()));     <
							      >
							      >		    il.append(new ASTORE(returnIndex.getIndex()));
							      >
							      >	        return returnIndex;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Key.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Key.java
 * $Id: Key.java,v 1.18 2004/02/24 03:55:47 zongaro Exp $     |	 * $Id: Key.java,v 1.20 2005/03/23 17:54:04 ytalwar Exp $
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
        if (!XMLChar.isValidQName(name)){		      |	        if (!XML11Char.isXML11ValidQName(name)){
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/LiteralAttribute.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/LiteralAttribute.java
 * $Id: LiteralAttribute.java,v 1.8 2004/02/16 22:24:29 minch |	 * $Id: LiteralAttribute.java,v 1.9 2004/05/21 20:29:28 santi
    public LiteralAttribute(String name, String value, Parser |	    public LiteralAttribute(String name, String value, Parser
							      >	        SyntaxTreeNode parent) 
							      >	    {
							      >	        setParent(parent);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/LiteralElement.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/LiteralElement.java
 * $Id: LiteralElement.java,v 1.25 2004/02/24 03:55:47 zongar |	 * $Id: LiteralElement.java,v 1.27 2004/06/10 22:26:03 santia
    private LiteralElement _literalElemParent;		      |	    private LiteralElement _literalElemParent = null;
	if (_accessedPrefixes == null)			      |	        if (_literalElemParent != null) {
	    return(null);				      |	            String result = _literalElemParent.accessedNamesp
	else						      |	            if (result != null) {
	    return((String)_accessedPrefixes.get(prefix));    |	                return result;
							      >	            }
							      >	        }       
							      >	        return _accessedPrefixes != null ? 
							      >	            (String) _accessedPrefixes.get(prefix) : null;
	    if (parentUri == null) {			      |		    if (parentUri != null && parentUri.equals(uri)) {
		_literalElemParent.registerNamespace(prefix,  |	                return;
		return;					      |	            }
	    }						      <
	    if (parentUri.equals(uri)) return;		      <
	// Find the closest literal element ancestor (if ther |		// Check if in a literal element context
	SyntaxTreeNode _literalElemParent = getParent();      |		SyntaxTreeNode parent = getParent();
	while (_literalElemParent != null && !(_literalElemPa |	        if (parent != null && parent instanceof LiteralElemen
	    _literalElemParent = _literalElemParent.getParent |	            _literalElemParent = (LiteralElement) parent;
	}						      <
							      <
	if (!(_literalElemParent instanceof LiteralElement))  <
	    _literalElemParent = null;			      <
		LiteralAttribute attr = new LiteralAttribute( |			LiteralAttribute attr = new LiteralAttribute(
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/LocationPathPattern.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/LocationPathPattern.java
 * $Id: LocationPathPattern.java,v 1.6 2004/02/16 22:24:29 mi |	 * $Id: LocationPathPattern.java,v 1.7 2004/12/15 17:35:38 jy
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Mode.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Mode.java
 * $Id: Mode.java,v 1.31 2004/02/16 22:24:29 minchau Exp $    |	 * $Id: Mode.java,v 1.36 2005/02/17 19:08:02 ytalwar Exp $
							      >	import org.apache.bcel.generic.Instruction;
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
    /**							      |	    
     * A mapping between patterns and instruction lists used  <
     * test sequences to avoid compiling the same pattern mul <
     * times. Note that patterns whose kernels are "*", "node <
     * and "@*" can between shared by test sequences.	      <
     */							      <
    private Hashtable _preCompiled = new Hashtable();	      <
							      <
     * Add a pre-compiled pattern to this mode. 	      <
     */							      <
    public void addInstructionList(Pattern pattern, 	      <
	InstructionList ilist) 				      <
    {							      <
	_preCompiled.put(pattern, ilist);		      <
    }							      <
							      <
    /**							      <
     * Get the instruction list for a pre-compiled pattern. U <
     * test sequences to avoid compiling patterns more than o <
     */							      <
    public InstructionList getInstructionList(Pattern pattern <
	return (InstructionList) _preCompiled.get(pattern);   <
    }							      <
							      <
    /**							      <
	    new org.apache.bcel.generic.Type[3];	      |		    new org.apache.bcel.generic.Type[4];
							      >		argTypes[3] = org.apache.bcel.generic.Type.INT;
	final String[] argNames = new String[3];	      |		final String[] argNames = new String[4];
							      >		argNames[3] = NODE_PNAME;
							      >	    mainIL.append(new ILOAD(methodGen.getLocalIndex(NODE_PNAM
							      >	    mainIL.append(new ISTORE(_currentIndex));
							      >	    
	ilLoop.append(methodGen.loadIterator());	      |	    ilLoop.append(RETURN);
	ilLoop.append(methodGen.nextNode());		      <
	ilLoop.append(DUP);				      <
	ilLoop.append(new ISTORE(_currentIndex));	      <
							      <
	// The body of this code can get very large - large t <
	// by a single IFNE(body.getStart()) instruction - ne <
        final BranchHandle ifeq = ilLoop.append(new IFLT(null <
	final BranchHandle loop = ilLoop.append(new GOTO_W(nu <
	ifeq.setTarget(ilLoop.append(RETURN)); // applyTempla <
	    loop.setTarget(_idxTestSeq.compile(classGen, meth <
	else {						      <
	    loop.setTarget(body.getStart());		      <
	}						      <
	mainIL.append(new GOTO_W(ihLoop));		      <
     * Peephole optimization: Remove sequences of [ALOAD, POP |	      * Peephole optimization.
     */							      |	      */
    InstructionList il = methodGen.getInstructionList();      |	        InstructionList il = methodGen.getInstructionList();
    InstructionFinder find = new InstructionFinder(il);	      |	        InstructionFinder find = new InstructionFinder(il);
	// Remove seqences of ALOAD, POP (GTM)		      |		// LoadInstruction, POP => (removed)
	pattern = "`ALOAD'`POP'`Instruction'";		      |		pattern = "LoadInstruction POP";
	for(Iterator iter=find.search(pattern); iter.hasNext( |		for (Iterator iter = find.search(pattern); iter.hasNe
	    InstructionHandle[] match = (InstructionHandle[]) |		    InstructionHandle[] match = (InstructionHandle[])
		if ((!match[0].hasTargeters()) && (!match[1]. |			if (!match[0].hasTargeters() && !match[1].has
	// Replace sequences of ILOAD_?, ALOAD_?, SWAP with A |	        
	pattern = "`ILOAD'`ALOAD'`SWAP'`Instruction'";	      |		// ILOAD_N, ILOAD_N, SWAP, ISTORE_N => ILOAD_N
	for(Iterator iter=find.search(pattern); iter.hasNext( |		pattern = "ILOAD ILOAD SWAP ISTORE";
							      >		for (Iterator iter = find.search(pattern); iter.hasNe
							      >	            InstructionHandle[] match = (InstructionHandle[])
							      >	            try {              
							      >	                org.apache.bcel.generic.ILOAD iload1 = 
							      >	                    (org.apache.bcel.generic.ILOAD) match[0].
							      >	                org.apache.bcel.generic.ILOAD iload2 = 
							      >	                    (org.apache.bcel.generic.ILOAD) match[1].
							      >	                org.apache.bcel.generic.ISTORE istore = 
							      >	                    (org.apache.bcel.generic.ISTORE) match[3]
							      >	                
							      >	                if (!match[1].hasTargeters() &&
							      >	                    !match[2].hasTargeters() &&
							      >	                    !match[3].hasTargeters() &&
							      >	                    iload1.getIndex() == iload2.getIndex() &&
							      >	                    iload2.getIndex() == istore.getIndex())
							      >	                {
							      >	                    il.delete(match[1], match[3]);
							      >	                }
							      >	            }
							      >	            catch (TargetLostException e) {
							      >	                // TODO: move target down into the list
							      >	            }
							      >	        }
							      >
							      >	        // LoadInstruction_N, LoadInstruction_M, SWAP => Load
							      >		pattern = "LoadInstruction LoadInstruction SWAP";
							      >		for (Iterator iter = find.search(pattern); iter.hasNe
                org.apache.bcel.generic.Instruction iload;    |	                if (!match[0].hasTargeters() &&
                org.apache.bcel.generic.Instruction aload;    |	                    !match[1].hasTargeters() &&
                if ((!match[0].hasTargeters()) &&	      |	                    !match[2].hasTargeters()) 
                    (!match[1].hasTargeters()) &&	      |	                {
                    (!match[2].hasTargeters())) {	      |	                    Instruction load_m = match[1].getInstruct
                    iload = match[0].getInstruction();	      |	                    il.insert(match[0], load_m);
                    aload = match[1].getInstruction();	      |	                    il.delete(match[1], match[2]);
                    il.insert(match[0], aload);		      <
                    il.insert(match[0], iload);		      <
                    il.delete(match[0], match[2]);	      <
        						      |	                
        // Replace sequences of ALOAD_1, ALOAD_1 with ALOAD_1 |	        // ALOAD_N ALOAD_N => ALOAD_N DUP
	pattern = "`ALOAD_1'`ALOAD_1'`Instruction'";	      |		pattern = "ALOAD ALOAD";
        for(Iterator iter=find.search(pattern); iter.hasNext( |	        for (Iterator iter = find.search(pattern); iter.hasNe
	        org.apache.bcel.generic.Instruction iload;    |	                if (!match[1].hasTargeters()) {
                org.apache.bcel.generic.Instruction aload;    |	                    org.apache.bcel.generic.ALOAD aload1 = 
                if ((!match[0].hasTargeters()) && (!match[1]. |	                        (org.apache.bcel.generic.ALOAD) match
                    il.insert(match[1], new DUP());	      |	                    org.apache.bcel.generic.ALOAD aload2 = 
                    il.delete(match[1]);		      |	                        (org.apache.bcel.generic.ALOAD) match
							      >	                    
							      >	                    if (aload1.getIndex() == aload2.getIndex(
							      >	                        il.insert(match[1], new DUP());
							      >	                        il.delete(match[1]);
							      >	                    }
        						      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Number.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Number.java
 * $Id: Number.java,v 1.14 2004/02/24 02:58:42 zongaro Exp $  |	 * $Id: Number.java,v 1.15 2005/02/04 18:26:12 jycli Exp $
import org.apache.bcel.generic.L2I;			      |	import org.apache.bcel.generic.D2I;
	    // Round the number to the nearest integer	      |		    // Using java.lang.Math.floor(number + 0.5) to re
	    index = cpg.addMethodref(MATH_CLASS, "round", "(D |	            il.append(new PUSH(cpg, 0.5));
							      >	            il.append(DADD);
							      >		    index = cpg.addMethodref(MATH_CLASS, "floor", "(D
	    il.append(new L2I());			      <
				     "(I)" + NODE_COUNTER_SIG |					     "(D)" + NODE_COUNTER_SIG
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 33268436
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Output.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Output.java
 * $Id: Output.java,v 1.25 2004/02/24 03:55:48 zongaro Exp $  |	 * $Id: Output.java,v 1.28 2005/03/23 17:54:04 ytalwar Exp $
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
    private String  _cdataToMerge;			      |	    private String _indentamount;
							      |	    
    public void mergeCdata(String cdata) {		      |	    private void transferAttribute(Output previous, String qn
	_cdataToMerge = cdata;				      |	        if (!hasAttribute(qname) && previous.hasAttribute(qna
							      >	            addAttribute(qname, previous.getAttribute(qname))
							      >	        }        
							      >	    }
							      >	    
							      >	    public void mergeOutput(Output previous) {
							      >	        // Transfer attributes from previous xsl:output
							      >	        transferAttribute(previous, "version");
							      >	        transferAttribute(previous, "method");
							      >	        transferAttribute(previous, "encoding");
							      >	        transferAttribute(previous, "doctype-system");
							      >	        transferAttribute(previous, "doctype-public");      
							      >	        transferAttribute(previous, "media-type");
							      >	        transferAttribute(previous, "indent");        
							      >	        transferAttribute(previous, "omit-xml-declaration");
							      >	        transferAttribute(previous, "standalone");
							      >	        
							      >	        // Merge cdata-section-elements
							      >	        if (previous.hasAttribute("cdata-section-elements")) 
							      >	            // addAttribute works as a setter if it already e
							      >	            addAttribute("cdata-section-elements",
							      >	                previous.getAttribute("cdata-section-elements
							      >	                getAttribute("cdata-section-elements"));
							      >	        }
							      >
							      >	        // Transfer non-standard attributes as well
							      >	        String prefix = lookupPrefix("http://xml.apache.org/x
							      >	        if (prefix != null) {
							      >	            transferAttribute(previous, prefix + ':' + "inden
							      >	        }
							      >	        prefix = lookupPrefix("http://xml.apache.org/xslt");
							      >	        if (prefix != null) {
							      >	            transferAttribute(previous, prefix + ':' + "inden
							      >	        }                
	if (_version == null || _version.equals(Constants.EMP |		if (_version.equals(Constants.EMPTYSTRING)) {
                ((XMLChar.isValidQName(_method)&&(_method.ind |	                ((XML11Char.isXML11ValidQName(_method)&&(_met
        String canonicalEncoding;			      |	                String canonicalEncoding;
        canonicalEncoding = Encodings.convertMime2JavaEncodin |	                canonicalEncoding = Encodings.convertMime2Jav
	if (attrib != null && !attrib.equals(Constants.EMPTYS |		if (!attrib.equals(Constants.EMPTYSTRING)) {
	if (_cdata != null && _cdata.equals(Constants.EMPTYST |		if (_cdata.equals(Constants.EMPTYSTRING)) {
                if (!XMLChar.isValidQName(qname)) {	      |	                if (!XML11Char.isXML11ValidQName(qname)) {
	    if (_cdataToMerge != null) {		      <
		_cdata = _cdata + _cdataToMerge;	      <
	    }						      <
	if (attrib != null && !attrib.equals(EMPTYSTRING)) {  |		if (!attrib.equals(EMPTYSTRING)) {
							      |		
							      >	        // indent-amount: extension attribute of xsl:output
							      >	        _indentamount = getAttribute(
							      >	            lookupPrefix("http://xml.apache.org/xalan"), "ind
							      >	        //  Hack for supporting Old Namespace URI.
							      >	        if (_indentamount.equals(EMPTYSTRING)){
							      >	            _indentamount = getAttribute(
							      >	                lookupPrefix("http://xml.apache.org/xslt"), "
							      >	        }
							      >	        if (!_indentamount.equals(EMPTYSTRING)) {
							      >	            outputProperties.setProperty("indent_amount", _in
							      >	        }
							      >	        
							      >	        //Compile code to set indent amount.
							      >	        if(_indentamount != null && !_indentamount.equals(EMP
							      >	            field = cpg.addFieldref(TRANSLET_CLASS, "_indenta
							      >		    il.append(DUP);
							      >		    il.append(new PUSH(cpg, Integer.parseInt(_indenta
							      >		    il.append(new PUTFIELD(field));
							      >	        }
							      >	        
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/ParentLocationPath.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/ParentLocationPath.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: ParentLocationPath.java,v 1.23 2004/02/16 22:24:29 mi |	 * $Id: ParentLocationPath.java,v 1.25 2005/06/30 21:04:16 zo
							      >	import org.apache.bcel.generic.ALOAD;
							      >	import org.apache.bcel.generic.ASTORE;
							      >	import org.apache.bcel.generic.LocalVariableGen;
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xalan.xsltc.compiler.util.Util;
							      >	import org.apache.xml.dtm.Axis;
							      >	        // Backwards branches are prohibited if an uninitiali
							      >	        // on the stack by section 4.9.4 of the JVM Specifica
							      >	        // We don't know whether this code might contain back
							      >	        // so we mustn't create the new object until after we
							      >	        // the suspect arguments to its constructor.  Instead
							      >	        // the values of the arguments to the constructor fir
							      >	        // in temporary variables, create the object and relo
							      >	        // arguments from the temporaries to avoid the proble
							      >
							      >		// Compile path iterator
							      >		_path.translate(classGen, methodGen); // iterator on 
							      >	        LocalVariableGen pathTemp
							      >	                = methodGen.addLocalVariable("parent_location
							      >	                                         Util.getJCRefType(NO
							      >	                                         il.getEnd(), null);
							      >	        il.append(new ASTORE(pathTemp.getIndex()));
							      >
							      >		_step.translate(classGen, methodGen);
							      >	        LocalVariableGen stepTemp
							      >	                = methodGen.addLocalVariable("parent_location
							      >	                                         Util.getJCRefType(NO
							      >	                                         il.getEnd(), null);
							      >	        il.append(new ASTORE(stepTemp.getIndex()));
							      >
	// Compile path iterator			      |	        il.append(new ALOAD(pathTemp.getIndex()));
	_path.translate(classGen, methodGen); // iterator on  |	        il.append(new ALOAD(stepTemp.getIndex()));
	_step.translate(classGen, methodGen);		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Parser.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Parser.java
 * $Id: Parser.java,v 1.64 2004/02/23 10:29:35 aruny Exp $    |	 * $Id: Parser.java,v 1.70 2005/07/15 16:50:24 minchau Exp $
							      >	import javax.xml.XMLConstants;
		output.mergeCdata(cdata);		      |	                output.mergeOutput(_output);
		    final int line = _locator.getLineNumber() |			    final int line = getLineNumber();
		stylesheet.setAttributes(element.getAttribute |			stylesheet.setAttributes((AttributeList) elem
			final int l = _locator.getLineNumber( |				final int l = getLineNumber();
							      >		    
							      >		    if (_xsltc.isSecureProcessing()) {
							      >		        try {
							      >		            factory.setFeature(XMLConstants.FEATURE_S
							      >		        }
							      >		        catch (SAXException e) {}
							      >		    }
							      >		    
		    node.setLineNumber(_locator.getLineNumber |			    node.setLineNumber(getLineNumber());
						_locator.getL |							getLineNumber
						_locator.getL |							getLineNumber
					     _locator.getLine |						     getLineNumber(),
	    if (node == null) node = new LiteralElement();    |		    if (node == null) {
							      >	                node = new LiteralElement();
							      >	                node.setLineNumber(getLineNumber());
							      >	            }
							      >			    // Workaround for the TCK failure ErrorLi
							      >		            err.setWarningError(true);
     *  @parent - XSL element where the expression occured    |	     *  @param parent - XSL element where the expression occu
     *  @exp    - textual representation of the expression    |	     *  @param exp    - textual representation of the express
     *  @parent - XSL element where the expression occured    |	     *  @param parent - XSL element where the expression occu
     *  @attr   - name of this element's attribute to get exp |	     *  @param attr   - name of this element's attribute to g
     *  @def    - default expression (if the attribute was no |	     *  @param def    - default expression (if the attribute 
     *  @parent - XSL element where the pattern occured	      |	     *  @param parent  - XSL element where the pattern occure
     *  @exp    - textual representation of the pattern	      |	     *  @param pattern - textual representation of the patter
     *  @parent - XSL element where the pattern occured	      |	     *  @param parent - XSL element where the pattern occured
     *  @attr   - name of this element's attribute to get pat |	     *  @param attr   - name of this element's attribute to g
     *  @def    - default pattern (if the attribute was not f |	     *  @param def    - default pattern (if the attribute was
	int line = 0;					      |		int line = getLineNumber();
	if (_locator != null) line = _locator.getLineNumber() <
	element.setAttributes((Attributes)new AttributeList(a |		element.setAttributes(new AttributeList(attributes));
							      >	    }
							      >	    
							      >	    /**
							      >	     * Get the line number, or zero
							      >	     * if there is no _locator.
							      >	     */
							      >	    private int getLineNumber() {
							      >	    	int line = 0;
							      >	    	if (_locator != null)
							      >	    		line = _locator.getLineNumber();
							      >	    	return line;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Pattern.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Pattern.java
 * $Id: Pattern.java,v 1.4 2004/02/16 22:24:29 minchau Exp $  |	 * $Id: Pattern.java,v 1.5 2005/01/23 00:37:17 mcnamara Exp $
     * {@link org.apache.xalan.xsltc.compiler.AlternativePatt |	     * {@link org.apache.xalan.xsltc.compiler.AlternativePatt
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Predicate.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Predicate.java
 * $Id: Predicate.java,v 1.34 2004/02/24 02:58:42 zongaro Exp |	 * $Id: Predicate.java,v 1.35 2004/12/15 17:35:38 jycli Exp $
							      >	import org.apache.xalan.xsltc.runtime.Operators;
           _exp = new EqualityExpr(EqualityExpr.EQ, positionC |	           _exp = new EqualityExpr(Operators.EQ, positionCall
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/ProcessingInstruction.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/ProcessingInstruction.java
 * $Id: ProcessingInstruction.java,v 1.11 2004/02/24 03:55:48 |	 * $Id: ProcessingInstruction.java,v 1.12 2005/03/23 17:54:04
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
                if (!XMLChar.isValidNCName(name)) {	      |	                if (!XML11Char.isXML11ValidNCName(name)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/ProcessingInstructionPattern.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/ProcessingInstructionPattern.java
 * $Id: ProcessingInstructionPattern.java,v 1.7 2004/02/16 22 |	 * $Id: ProcessingInstructionPattern.java,v 1.8 2004/12/15 17
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/RelationalExpr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/RelationalExpr.java
 * $Id: RelationalExpr.java,v 1.19 2004/02/16 22:24:28 mincha |	 * $Id: RelationalExpr.java,v 1.20 2004/12/15 17:35:38 jycli 
final class RelationalExpr extends Expression implements Oper |	final class RelationalExpr extends Expression {
							      >
							      |
		_op = (_op == Operators.GT) ? Operators.LT :  |	        _op = (_op == Operators.GT) ? Operators.LT :
		    (_op == Operators.LT) ? Operators.GT :    |	            (_op == Operators.LT) ? Operators.GT :
		    (_op == Operators.GE) ? Operators.LE : Op |	            (_op == Operators.GE) ? Operators.LE : Operators.
	MethodType ptype = lookupPrimop(stable, Operators.nam |	    MethodType ptype = lookupPrimop(stable, Operators.getOpNa
					new MethodType(Type.V |	                new MethodType(Type.Void, tleft, tright)); 
						       tleft, <
		il.append(tleft.CMP(_op == LT || _op == LE)); |	        il.append(tleft.CMP(_op == Operators.LT || _op == Ope
	    case LT:					      |	        case Operators.LT:
	    case GT:					      |	        case Operators.GT:
	    case LE:					      |	        case Operators.LE:
	    case GE:					      |	        case Operators.GE:
	return Operators.names[_op] + '(' + _left + ", " + _r |	        return Operators.getOpNames(_op) + '(' + _left + ", "
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Sort.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Sort.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: Sort.java,v 1.23 2004/02/24 02:58:42 zongaro Exp $    |	 * $Id: Sort.java,v 1.25 2005/06/30 21:04:16 zongaro Exp $
							      >	import org.apache.bcel.generic.ASTORE;
							      >	import org.apache.bcel.generic.LocalVariableGen;
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
	il.append(new NEW(cpg.addClass(SORT_ITERATOR)));      |	        // Backwards branches are prohibited if an uninitiali
	il.append(DUP);					      |	        // on the stack by section 4.9.4 of the JVM Specifica
							      >	        // We don't know whether this code might contain back
							      >	        // so we mustn't create the new object until after we
							      >	        // the suspect arguments to its constructor.  Instead
							      >	        // the values of the arguments to the constructor fir
							      >	        // in temporary variables, create the object and relo
							      >	        // arguments from the temporaries to avoid the proble
							      >
							      >	        LocalVariableGen nodesTemp =
							      >	            methodGen.addLocalVariable("sort_tmp1",
							      >	                                       Util.getJCRefType(NODE
							      >	                                       il.getEnd(), null);
							      >
							      >	        LocalVariableGen sortRecordFactoryTemp =
							      >	            methodGen.addLocalVariable("sort_tmp2",
							      >	                                      Util.getJCRefType(NODE_
							      >	                                      il.getEnd(), null);
							      >
							      >	        il.append(new ASTORE(nodesTemp.getIndex()));
							      >	        il.append(new ASTORE(sortRecordFactoryTemp.getIndex()
							      >
							      >		il.append(new NEW(cpg.addClass(SORT_ITERATOR)));
							      >		il.append(DUP);
							      >	        il.append(new ALOAD(nodesTemp.getIndex()));
							      >	        il.append(new ALOAD(sortRecordFactoryTemp.getIndex())
							      |
	il.append(new NEW(cpg.addClass(sortRecordFactoryClass |	        // Backwards branches are prohibited if an uninitiali
	il.append(DUP);					      |	        // on the stack by section 4.9.4 of the JVM Specifica
	il.append(methodGen.loadDOM());			      |	        // We don't know whether this code might contain back
	il.append(new PUSH(cpg, sortRecordClass));	      |	        // so we mustn't create the new object until after we
	il.append(classGen.loadTranslet());		      |	        // the suspect arguments to its constructor.  Instead
							      >	        // the values of the arguments to the constructor fir
							      >	        // in temporary variables, create the object and relo
							      >	        // arguments from the temporaries to avoid the proble
							      >	        LocalVariableGen sortOrderTemp
							      >	                 = methodGen.addLocalVariable("sort_order_tmp
							      >	                                      Util.getJCRefType("[" +
							      >	                                      il.getEnd(), null);
							      >	        il.append(new ASTORE(sortOrderTemp.getIndex()));
							      >	        LocalVariableGen sortTypeTemp
							      >	                 = methodGen.addLocalVariable("sort_type_tmp"
							      >	                                      Util.getJCRefType("[" +
							      >	                                      il.getEnd(), null);
  							      |	        il.append(new ASTORE(sortTypeTemp.getIndex()));
  il.append(new PUSH(cpg, nsorts));			      |
  il.append(new ANEWARRAY(cpg.addClass(STRING)));	      |	        LocalVariableGen sortLangTemp
  for (int level = 0; level < nsorts; level++) {	      |	                 = methodGen.addLocalVariable("sort_lang_tmp"
        final Sort sort = (Sort)sortObjects.elementAt(level); |	                                      Util.getJCRefType("[" +
        il.append(DUP);					      |	                                      il.getEnd(), null);
        il.append(new PUSH(cpg, level));		      |	        il.append(new PUSH(cpg, nsorts));
        sort.translateLang(classGen, methodGen);	      |	        il.append(new ANEWARRAY(cpg.addClass(STRING)));
        il.append(AASTORE);				      |	        for (int level = 0; level < nsorts; level++) {
   }							      |	              final Sort sort = (Sort)sortObjects.elementAt(l
 							      |	              il.append(DUP);
   il.append(new PUSH(cpg, nsorts));			      |	              il.append(new PUSH(cpg, level));
   il.append(new ANEWARRAY(cpg.addClass(STRING)));	      |	              sort.translateLang(classGen, methodGen);
   for (int level = 0; level < nsorts; level++) {	      |	              il.append(AASTORE);
        final Sort sort = (Sort)sortObjects.elementAt(level); |	        }
        il.append(DUP);					      |	        il.append(new ASTORE(sortLangTemp.getIndex()));
        il.append(new PUSH(cpg, level));		      |
        sort.translateCaseOrder(classGen, methodGen);	      |	        LocalVariableGen sortCaseOrderTemp
        il.append(AASTORE);				      |	                 = methodGen.addLocalVariable("sort_case_orde
  }							      |	                                      Util.getJCRefType("[" +
							      >	                                      il.getEnd(), null);
							      >	        il.append(new PUSH(cpg, nsorts));
							      >	        il.append(new ANEWARRAY(cpg.addClass(STRING)));
							      >	        for (int level = 0; level < nsorts; level++) {
							      >	            final Sort sort = (Sort)sortObjects.elementAt(lev
							      >	            il.append(DUP);
							      >	            il.append(new PUSH(cpg, level));
							      >	            sort.translateCaseOrder(classGen, methodGen);
							      >	            il.append(AASTORE);
							      >	        }
							      >	        il.append(new ASTORE(sortCaseOrderTemp.getIndex()));
							      >		
							      >		il.append(new NEW(cpg.addClass(sortRecordFactoryClass
							      >		il.append(DUP);
							      >		il.append(methodGen.loadDOM());
							      >		il.append(new PUSH(cpg, sortRecordClass));
							      >		il.append(classGen.loadTranslet());
							      >
							      >	        il.append(new ALOAD(sortOrderTemp.getIndex()));
							      >	        il.append(new ALOAD(sortTypeTemp.getIndex()));
							      >	        il.append(new ALOAD(sortLangTemp.getIndex()));
							      >	        il.append(new ALOAD(sortCaseOrderTemp.getIndex()));
        + "[" + STRING_SIG				      |	                    + "[" + STRING_SIG
        + "[" + STRING_SIG				      |	                    + "[" + STRING_SIG
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Step.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Step.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: Step.java,v 1.46 2004/02/24 04:21:22 zongaro Exp $    |	 * $Id: Step.java,v 1.49 2005/06/30 21:04:16 zongaro Exp $
							      >	import org.apache.bcel.generic.ALOAD;
							      >	import org.apache.bcel.generic.ASTORE;
							      >	import org.apache.bcel.generic.ILOAD;
							      >	import org.apache.bcel.generic.ISTORE;
							      >	import org.apache.bcel.generic.LocalVariableGen;
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xalan.xsltc.compiler.util.Util;
							      >	import org.apache.xml.dtm.Axis;
							      >		    SyntaxTreeNode parent = getParent();
		    // Wrap the context node in a singleton i |			    if (parent instanceof ParentLocationPath)
		    int init = cpg.addMethodref(SINGLETON_ITE |				// Wrap the context node in a singlet
						"<init>", "(" |				int init = cpg.addMethodref(SINGLETON
		    il.append(new NEW(cpg.addClass(SINGLETON_ |							    "<init>",
		    il.append(DUP);			      |							    "("+NODE_
		    il.append(methodGen.loadContextNode());   |				il.append(new NEW(cpg.addClass(SINGLE
		    il.append(new INVOKESPECIAL(init));	      |				il.append(DUP);
							      >				il.append(methodGen.loadContextNode()
							      >				il.append(new INVOKESPECIAL(init));
							      >			    } else {
							      >				// DOM.getAxisIterator(int axis);
							      >				int git = cpg.addInterfaceMethodref(D
							      >							"getAxisItera
							      >							"(I)"+NODE_IT
							      >				il.append(methodGen.loadDOM());
							      >				il.append(new PUSH(cpg, _axis));
							      >				il.append(new INVOKEINTERFACE(git, 2)
							      >			    }
	    SyntaxTreeNode parent = getParent();	      <
		il.append(new NEW(cpg.addClass(NTH_ITERATOR_C |
		il.append(DUP);				      |	                // Backwards branches are prohibited if an un
							      >	                // is on the stack by section 4.9.4 of the JV
							      >	                // 2nd Ed.  We don't know whether this code m
							      >	                // backwards branches, so we mustn't create t
							      >	                // after we've created the suspect arguments 
							      >	                // Instead we calculate the values of the arg
							      >	                // constructor first, store them in temporary
							      >	                // the object and reload the arguments from t
							      >	                // avoid the problem.
							      >	                LocalVariableGen iteratorTemp
							      >	                        = methodGen.addLocalVariable("step_tm
							      >	                                         Util.getJCRefType(NO
							      >	                                         il.getEnd(), null);
							      >	                il.append(new ASTORE(iteratorTemp.getIndex())
							      >
							      >	                LocalVariableGen predicateValueTemp
							      >	                        = methodGen.addLocalVariable("step_tm
							      >	                                         Util.getJCRefType("I
							      >	                                         il.getEnd(), null);
							      >	                il.append(new ISTORE(predicateValueTemp.getIn
							      >
							      >			il.append(new NEW(cpg.addClass(NTH_ITERATOR_C
							      >			il.append(DUP);
							      >	                il.append(new ALOAD(iteratorTemp.getIndex()))
							      >	                il.append(new ILOAD(predicateValueTemp.getInd
							      >
							      >	                // Backwards branches are prohibited if an un
							      >	                // is on the stack by section 4.9.4 of the JV
							      >	                // 2nd Ed.  We don't know whether this code m
							      >	                // backwards branches, so we mustn't create t
							      >	                // after we've created the suspect arguments 
							      >	                // Instead we calculate the values of the arg
							      >	                // constructor first, store them in temporary
							      >	                // the object and reload the arguments from t
							      >	                // avoid the problem.
							      >			translatePredicates(classGen, methodGen); // 
							      >	                LocalVariableGen iteratorTemp
							      >	                        = methodGen.addLocalVariable("step_tm
							      >	                                         Util.getJCRefType(NO
							      >	                                         il.getEnd(), null);
							      >	                il.append(new ASTORE(iteratorTemp.getIndex())
							      >
							      >			predicate.translateFilter(classGen, methodGen
							      >	                LocalVariableGen filterTemp
							      >	                        = methodGen.addLocalVariable("step_tm
							      >	                              Util.getJCRefType(CURRENT_NODE_
							      >	                              il.getEnd(), null);
							      >	                il.append(new ASTORE(filterTemp.getIndex()));
							      >
		translatePredicates(classGen, methodGen); //  |
		predicate.translateFilter(classGen, methodGen |	                il.append(new ALOAD(iteratorTemp.getIndex()))
							      >	                il.append(new ALOAD(filterTemp.getIndex()));
	buffer.append(Axis.names[_axis]).append("\", ").appen |	    buffer.append(Axis.getNames(_axis)).append("\", ").append
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/StepPattern.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/StepPattern.java
 * $Id: StepPattern.java,v 1.24 2004/02/16 22:24:29 minchau E |	 * $Id: StepPattern.java,v 1.26 2005/06/30 21:04:16 zongaro E
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
	buffer.append(Axis.names[_axis])		      |	    buffer.append(Axis.getNames(_axis))
							      >
							      >	        // Backwards branches are prohibited if an uninitiali
							      >	        // on the stack by section 4.9.4 of the JVM Specifica
							      >	        // We don't know whether this code might contain back
							      >	        // so we mustn't create the new object until after we
							      >	        // the suspect arguments to its constructor.  Instead
							      >	        // the values of the arguments to the constructor fir
							      >	        // in temporary variables, create the object and relo
							      >	        // arguments from the temporaries to avoid the proble
							      >
							      >		_step.translate(classGen, methodGen);
							      >	        LocalVariableGen stepIteratorTemp =
							      >	                methodGen.addLocalVariable("step_pattern_tmp2
							      >	                                           Util.getJCRefType(
							      >	                                           il.getEnd(), null)
							      >	        il.append(new ASTORE(stepIteratorTemp.getIndex()));
							      >
	_step.translate(classGen, methodGen);		      |	        il.append(new ALOAD(stepIteratorTemp.getIndex()));
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Stylesheet.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Stylesheet.java
 * $Id: Stylesheet.java,v 1.59 2004/02/16 22:24:29 minchau Ex |	 * $Id: Stylesheet.java,v 1.61 2004/05/26 21:33:08 jycli Exp 
/**							      <
 * @author Jacek Ambroziak				      <
 * @author Santiago Pericas-Geertsen			      <
 * @author Morten Jorgensen				      <
 */							      <
    							      |
							      >	    /**
							      >	     * Minimum precendence of any descendant stylesheet by in
							      >	     * importation.
							      >	     */
							      >	    private int _minimumDescendantPrecedence = -1;
							      >
							      >	    /**
							      >	     * Get the minimum of the precedence of this stylesheet, 
							      >	     * imported by this stylesheet and any include/import des
							      >	     * stylesheet.
							      >	     */
							      >	    public int getMinimumDescendantPrecedence() {
							      >	        if (_minimumDescendantPrecedence == -1) {
							      >	            // Start with precedence of current stylesheet as
							      >	            int min = getImportPrecedence();
							      >
							      >	            // Recursively examine all imported/included styl
							      >	            final int inclImpCount = (_includedStylesheets !=
							      >	                                          ? _includedStyleshe
							      >	                                          : 0;
							      >
							      >	            for (int i = 0; i < inclImpCount; i++) {
							      >	                int prec = ((Stylesheet)_includedStylesheets.
							      >	                                              .getMinimumDesc
							      >
							      >	                if (prec < min) {
							      >	                    min = prec;
							      >	                }
							      >	            }
							      >
							      >	            _minimumDescendantPrecedence = min;
							      >	        }
							      >	        return _minimumDescendantPrecedence;
							      >	    }
							      >
	final String pattern = "`ALOAD'`POP'`Instruction'";   |		final String pattern = "`aload'`pop'`instruction'";
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/sym.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/sym.java
// Fri Feb 27 14:42:39 EST 2004				      |	// Sat Aug 06 17:03:22 EDT 2005
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/SyntaxTreeNode.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/SyntaxTreeNode.java
 * $Id: SyntaxTreeNode.java,v 1.29 2004/02/16 22:25:10 mincha |	 * $Id: SyntaxTreeNode.java,v 1.32 2004/12/15 17:35:39 jycli 
							      >	import org.apache.xalan.xsltc.runtime.AttributeList;
							      >
    protected Attributes _attributes = null;   // Attributes  |	    protected AttributeList _attributes = null;   // Attribut
    protected static final SyntaxTreeNode Dummy = new Absolut |	    static final SyntaxTreeNode Dummy = new AbsolutePathPatte
     * Get the source file line number for this element	      |	     * Get the source file line number for this element. If u
							      >	     * in ancestors.
							      >	     *
	return _line;					      |	        if (_line > 0) return _line;
							      >	        SyntaxTreeNode parent = getParent();
							      >	        return (parent != null) ? parent.getLineNumber() : 0;
    protected void setAttributes(Attributes attributes) {     |	    protected void setAttributes(AttributeList attributes) {
							      >	    
							      >	    protected String getAttribute(String prefix, String local
							      >	        return getAttribute(prefix + ':' + localName);
							      >	    }
							      >	    }
							      >	    
							      >	    protected void addAttribute(String qname, String value) {
							      >	        _attributes.add(qname, value);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Template.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Template.java
 * $Id: Template.java,v 1.25 2004/02/24 03:55:48 zongaro Exp  |	 * $Id: Template.java,v 1.26 2005/03/23 17:54:04 ytalwar Exp 
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(name)) {		      |	            if (!XML11Char.isXML11ValidQName(name)) {
            if (!XMLChar.isValidQName(mode)) {		      |	            if (!XML11Char.isXML11ValidQName(mode)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/TestSeq.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/TestSeq.java
 * $Id: TestSeq.java,v 1.11 2004/02/16 22:25:10 minchau Exp $ |	 * $Id: TestSeq.java,v 1.12 2005/02/17 19:08:03 ytalwar Exp $
	    InstructionList ilist = _mode.getInstructionList( |		    InstructionList ilist = methodGen.getInstructionL
		_mode.addInstructionList(pattern, ilist);     |			methodGen.addInstructionList(pattern, ilist);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Text.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Text.java
 * $Id: Text.java,v 1.17 2004/02/16 22:25:10 minchau Exp $    |	 * $Id: Text.java,v 1.18 2005/03/16 23:24:47 ytalwar Exp $
		if (_text.trim().length() == 0) _ignore = tru |	        {
							      >	            int i;
							      >	            final int textLength = _text.length();
							      >	            for (i = 0; i < textLength; i++) {
							      >	                char c = _text.charAt(i);
							      >	                if (!isWhitespace(c))
							      >	                    break;
							      >	            }
							      >	            if (i == textLength)
							      >	                _ignore = true;
							      >	        }
	    if (_text.trim().length() == 0) _ignore = true;   |	        int i;
							      >	        final int textLength = _text.length();
							      >	        for (i = 0; i < textLength; i++) 
							      >	        {
							      >	            char c = _text.charAt(i);
							      >	            if (!isWhitespace(c))
							      >	                break;
							      >	        }
							      >	        if (i == textLength)
							      >	            _ignore = true;
							      |	 
							      >	    private static boolean isWhitespace(char c)
							      >	    {
							      >	    	return (c == 0x20 || c == 0x09 || c == 0x0A || c == 0
							      >	    }
							      >	 
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/TransletOutput.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/TransletOutput.java
 * $Id: TransletOutput.java,v 1.12 2004/02/16 22:25:10 mincha |	 * $Id: TransletOutput.java,v 1.13 2005/06/08 13:10:08 mkwan 
							      >	import org.apache.bcel.generic.INVOKESTATIC;
							      >		final boolean isSecureProcessing = classGen.getParser
							      >		                                   .isSecureProcessin
							      >
							      >		if (isSecureProcessing) {
							      >		    int index = cpg.addMethodref(BASIS_LIBRARY_CLASS,
							      >					         "unallowed_extension
							      >					         "(Ljava/lang/String;
							      >		    il.append(new PUSH(cpg, "redirect"));
							      >		    il.append(new INVOKESTATIC(index));
							      >		    return; 	
							      >		}
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/UnionPathExpr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/UnionPathExpr.java
 * $Id: UnionPathExpr.java,v 1.10 2004/02/16 22:25:10 minchau |	 * $Id: UnionPathExpr.java,v 1.11 2004/12/15 17:35:39 jycli E
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
		if (Axis.isReverse[axis]) _reverse = true;    |	        if (Axis.isReverse(axis)) _reverse = true;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ClassGenerator.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ClassGenerator.java
 * $Id: ClassGenerator.java,v 1.7 2004/02/16 22:26:44 minchau |	 * $Id: ClassGenerator.java,v 1.9 2005/02/09 22:45:15 ytalwar
    protected static int TRANSLET_INDEX = 0;		      |	    protected final static int TRANSLET_INDEX = 0;
    protected static int INVALID_INDEX  = -1;		      <
							      |		private final String _applyTemplatesSigForImport;
							      >	    
	    + ")V"; 					      |		    + ")V";
							      >
							      >	    _applyTemplatesSigForImport = "(" 
							      >	        + Constants.DOM_INTF_SIG
							      >	        + Constants.NODE_ITERATOR_SIG
							      >	        + Constants.TRANSLET_OUTPUT_SIG
							      >	        + Constants.NODE_FIELD_SIG
							      >	        + ")V";  
							      >	    }
							      >	    
							      >	    public final String getApplyTemplatesSigForImport() {
							      >	    return _applyTemplatesSigForImport;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ca.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ca.java
 * $Id: ErrorMessages_ca.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_ca.java,v 1.3 2004/12/15 17:35:41 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_cs.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_cs.java
 * $Id: ErrorMessages_cs.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_cs.java,v 1.3 2004/12/15 17:35:41 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_de.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_de.java
 * $Id: ErrorMessages_de.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_de.java,v 1.3 2004/12/15 17:35:41 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_es.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_es.java
 * $Id: ErrorMessages_es.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_es.java,v 1.3 2004/12/15 17:35:41 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_fr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_fr.java
 * $Id: ErrorMessages_fr.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_fr.java,v 1.3 2004/12/15 17:35:41 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_hu.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_hu.java
 * $Id: ErrorMessages_hu.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_hu.java,v 1.3 2004/12/15 17:35:41 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_it.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_it.java
 * $Id: ErrorMessages_it.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_it.java,v 1.3 2004/12/15 17:35:42 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ja.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ja.java
 * $Id: ErrorMessages_ja.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_ja.java,v 1.3 2004/12/15 17:35:42 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages.java
 * $Id: ErrorMessages.java,v 1.24 2004/02/24 17:35:00 igorh E |	 * $Id: ErrorMessages.java,v 1.27 2005/07/08 21:45:12 jycli E
    private static final String[][] m_errorMessages = {       |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] { 
        "      [-n] [-x] [-s] [-u] [-v] [-h] { <stylesheet> | |	        "      [-n] [-x] [-u] [-v] [-h] { <stylesheet> | -i }
        "   -s             disables calling System.exit\n"+   <
        "      [-x] [-s] [-n <iterations>] {-u <document_url> |	        "      [-x] [-n <iterations>] {-u <document_url> | <d
        "   -s              disables calling System.exit\n"+  <
        "The method attribute of an <xsl:output> element had  |	        "The method attribute of an <xsl:output> element had 
    };							      |	        
							      >	        {ErrorMsg.JAXP_GET_FEATURE_NULL_NAME,
							      >	        "The feature name cannot be null in TransformerFactor
							      >	        
							      >	        {ErrorMsg.JAXP_SET_FEATURE_NULL_NAME,
							      >	        "The feature name cannot be null in TransformerFactor
							      >	        {ErrorMsg.JAXP_UNSUPPORTED_FEATURE,
							      >	        "Cannot set the feature ''{0}'' on this TransformerFa
    public Object[][] getContents() {			      |	    };
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ko.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ko.java
 * $Id: ErrorMessages_ko.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_ko.java,v 1.3 2004/12/15 17:35:42 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_no.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_no.java
 * $Id: ErrorMessages_no.java,v 1.10 2004/02/16 22:26:44 minc |	 * $Id: ErrorMessages_no.java,v 1.11 2004/12/15 17:35:42 jycl
    private static final String m_errorMessages[][] = {       |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] { 
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_pl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_pl.java
 * $Id: ErrorMessages_pl.java,v 1.2 2004/02/16 22:26:45 minch |	 * $Id: ErrorMessages_pl.java,v 1.3 2004/12/15 17:35:42 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_pt_BR.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_pt_BR.java
 * $Id: ErrorMessages_pt_BR.java,v 1.2 2004/02/16 22:26:44 mi |	 * $Id: ErrorMessages_pt_BR.java,v 1.3 2004/12/15 17:35:42 jy
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ru.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_ru.java
 * $Id: ErrorMessages_ru.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_ru.java,v 1.3 2004/12/15 17:35:42 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_sk.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_sk.java
 * $Id: ErrorMessages_sk.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_sk.java,v 1.3 2004/12/15 17:35:42 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_tr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_tr.java
 * $Id: ErrorMessages_tr.java,v 1.2 2004/02/16 22:26:44 minch |	 * $Id: ErrorMessages_tr.java,v 1.3 2004/12/15 17:35:42 jycli
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_zh_CN.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_zh_CN.java
 * $Id: ErrorMessages_zh_CN.java,v 1.2 2004/02/16 22:26:44 mi |	 * $Id: ErrorMessages_zh_CN.java,v 1.3 2004/12/15 17:35:42 jy
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_zh_TW.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMessages_zh_TW.java
 * $Id: ErrorMessages_zh_TW.java,v 1.2 2004/02/16 22:26:44 mi |	 * $Id: ErrorMessages_zh_TW.java,v 1.3 2004/12/15 17:35:42 jy
    private static final String[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMsg.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ErrorMsg.java
 * $Id: ErrorMsg.java,v 1.25 2004/02/24 03:55:48 zongaro Exp  |	 * $Id: ErrorMsg.java,v 1.27 2005/06/03 15:52:45 mkwan Exp $
							      >	    private boolean _isWarningError;
							      >	    public static final String JAXP_SET_FEATURE_NULL_NAME = "
							      >	    public static final String JAXP_GET_FEATURE_NULL_NAME = "
							      >	    public static final String JAXP_UNSUPPORTED_FEATURE = "JA
							      >	    }
							      >	    
							      >	    // If the _isWarningError flag is true, the error is trea
							      >	    // a warning by the compiler, but should be reported as a
							      >	    // to the ErrorListener. This is a workaround for the TCK
							      >	    // ErrorListener.errorTests.error001.
							      >	    public void setWarningError(boolean flag) {
							      >	    	_isWarningError = flag;
							      >	}
							      >
							      >	    public boolean isWarningError() {
							      >	        return _isWarningError;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/MethodGenerator.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/MethodGenerator.java
 * $Id: MethodGenerator.java,v 1.15 2004/02/16 22:26:44 minch |	 * $Id: MethodGenerator.java,v 1.16 2005/02/17 19:08:03 ytalw
							      >	import java.util.Hashtable;
							      >
							      >	import org.apache.xalan.xsltc.compiler.Pattern;
							      >		/**
							      >			 * A mapping between patterns and instruction
							      >			 * test sequences to avoid compiling the same
							      >			 * times. Note that patterns whose kernels ar
							      >			 * and "@*" can between shared by test sequen
							      >			 */
							      >		private Hashtable _preCompiled = new Hashtable();
							      >
							      >
							      >		/**
							      >		 * Add a pre-compiled pattern to this mode. 
							      >		 */
							      >		public void addInstructionList(Pattern pattern, 
							      >		InstructionList ilist) 
							      >		{
							      >		_preCompiled.put(pattern, ilist);
							      >		}
							      >
							      >		/**
							      >		 * Get the instruction list for a pre-compiled patter
							      >		 * test sequences to avoid compiling patterns more th
							      >		 */
							      >		public InstructionList getInstructionList(Pattern pat
							      >		return (InstructionList) _preCompiled.get(pattern);
							      >		}
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/MultiHashtable.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/MultiHashtable.java
 * $Id: MultiHashtable.java,v 1.6 2004/02/16 22:26:44 minchau |	 * $Id: MultiHashtable.java,v 1.7 2004/08/17 18:48:35 jycli E
							      >	    static final long serialVersionUID = -6151608290510033572
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/NamedMethodGenerator.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/NamedMethodGenerator.java
 * $Id: NamedMethodGenerator.java,v 1.7 2004/02/16 22:26:44 m |	 * $Id: NamedMethodGenerator.java,v 1.8 2004/12/15 17:35:42 j
    protected static int CURRENT_INDEX  = 4;		      |	    protected static final int CURRENT_INDEX  = 4;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = -4417969
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ObjectType.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ObjectType.java
 * $Id: ObjectType.java,v 1.9 2004/02/23 10:29:35 aruny Exp $ |	 * $Id: ObjectType.java,v 1.10 2004/06/24 16:13:55 santiagopg
							      |	    
							      >	    /**
							      >	     * Must return the same value for all ObjectType instance
							      >	     * needed in CastExpr to ensure the mapping table is used
							      >	     */
        return toString().hashCode();			      |	        return java.lang.Object.class.hashCode();
							      |	    
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/ResultTreeType.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/ResultTreeType.java
 * $Id: ResultTreeType.java,v 1.21 2004/02/16 22:26:44 mincha |	 * $Id: ResultTreeType.java,v 1.22 2005/01/24 04:04:40 mcnama
     * @param type An reference to the Class to translate to  |	     * @param clazz An reference to the Class to translate to
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/StringStack.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/StringStack.java
 * $Id: StringStack.java,v 1.3 2004/02/16 22:26:44 minchau Ex |	 * $Id: StringStack.java,v 1.4 2004/08/17 18:48:35 jycli Exp 
							      >	    static final long serialVersionUID = -1506910875640317898
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/StringType.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/StringType.java
 * $Id: StringType.java,v 1.12 2004/02/16 22:26:45 minchau Ex |	 * $Id: StringType.java,v 1.13 2004/06/24 16:13:55 santiagopg
        else if (type == Type.ObjectString) {		      <
            // NOP -> same representation		      <
        }						      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/TypeCheckError.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/TypeCheckError.java
 * $Id: TypeCheckError.java,v 1.7 2004/02/16 22:26:44 minchau |	 * $Id: TypeCheckError.java,v 1.8 2004/08/17 18:48:35 jycli E
							      >	    static final long serialVersionUID = 3246224233917854640L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/Type.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/Type.java
 * $Id: Type.java,v 1.15 2004/02/16 22:26:44 minchau Exp $    |	 * $Id: Type.java,v 1.16 2004/06/24 16:13:55 santiagopg Exp $
    public static final Type Void       = new VoidType();     |	    public static final Type Void       = new VoidType();    
    							      |	    public static final Type Object     = new ObjectType(java
    public static final Type Object       = new ObjectType(ja <
    public static final Type ObjectString = new ObjectType(ja <
            return Type.ObjectString;			      |	            return Type.String;
        }						      |	        } 
            return Type.ObjectString;			      |	            return Type.String;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/util/Util.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/util/Util.java
 * $Id: Util.java,v 1.15 2004/02/24 03:55:48 zongaro Exp $    |	 * $Id: Util.java,v 1.16 2005/03/23 17:54:05 ytalwar Exp $
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
                if (!XMLChar.isValidQName(tokens.nextToken()) |	                if (!XML11Char.isXML11ValidQName(tokens.nextT
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/VariableBase.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/VariableBase.java
 * $Id: VariableBase.java,v 1.23 2004/02/24 02:57:28 zongaro  |	 * $Id: VariableBase.java,v 1.24 2005/03/23 17:54:04 ytalwar 
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(name)) {		      |	            if (!XML11Char.isXML11ValidQName(name)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/Variable.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/Variable.java
 * $Id: Variable.java,v 1.27 2004/02/24 02:58:42 zongaro Exp  |	 * $Id: Variable.java,v 1.28 2004/09/24 22:18:56 zongaro Exp 
/**							      <
 * @author Jacek Ambroziak				      <
 * @author Santiago Pericas-Geertsen			      <
 * @author Morten Jorgensen				      <
 * @author Erwin Bolwidt <ejb@klomp.org>		      <
 * @author John Howard <JohnH@schemasoft.com>		      <
 */							      <
	final String name = getEscapedName();		      |	        // Don't generate code for unreferenced variables
							      >	        if (_refs.isEmpty()) {
							      >	            _ignore = true;
							      >	        }
							      >		final String name = getEscapedName();
							      >
	    if (_refs.isEmpty()) { // Remove it if nobody use |		    if (_local == null) {
		il.append(_type.POP());			      |	                mapRegister(methodGen);
		_local = null;				      |	            }
	    }						      |		    il.append(_type.STORE(_local.getIndex()));
	    else {		   // Store in local var slot <
		if (_local == null) mapRegister(methodGen);   <
		il.append(_type.STORE(_local.getIndex()));    <
	    }						      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/WithParam.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/WithParam.java
 * $Id: WithParam.java,v 1.17 2004/02/24 02:57:28 zongaro Exp |	 * $Id: WithParam.java,v 1.18 2005/03/23 17:54:04 ytalwar Exp
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(name)) {		      |	            if (!XML11Char.isXML11ValidQName(name)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/xpath.cup xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/xpath.cup
 * $Id: xpath.cup,v 1.50 2004/02/24 19:15:03 minchau Exp $    |	 * $Id: xpath.cup,v 1.51 2004/12/15 17:35:39 jycli Exp $
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/xpath.lex xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/xpath.lex
 * $Id: xpath.lex,v 1.10 2004/02/24 19:15:03 minchau Exp $    |	 * $Id: xpath.lex,v 1.12 2005/08/02 02:59:03 mcnamara Exp $
							      >	%{
							      >	        int last;
							      >
							      >	        void initialize() {
							      >	            last = -1;
							      >	        }
							      >
							      >	        static boolean isWhitespace(int c) {
							      >	            return (c == ' ' || c == '\t' || c == '\r' || c =
							      >	        }
							      >
							      >	        /**
							      >	         * If symbol is not followed by '::' or '(', then tre
							      >	         * name instead of an axis or function (Jira-1912).
							      >	         */ 
							      >	        Symbol disambiguateAxisOrFunction(int ss) throws Exce
							      >	            // Peek in the input buffer without changing the 
							      >	            int index = yy_buffer_index;
							      >
							      >	            // Skip whitespace
							      >	            while (index < yy_buffer_read && isWhitespace(yy_
							      >	                index++;
							      >	            }
							      >
							      >	            // If end of buffer, can't disambiguate :(
							      >	            if (index >= yy_buffer_read) {
							      >	                // Can't disambiguate, so return as symbol
							      >	                return new Symbol(ss);
							      >	            }
							      >
							      >	            // Return symbol if next token is '::' or '('
							      >	            return (yy_buffer[index] == ':' && yy_buffer[inde
							      >	                    yy_buffer[index] == '(') ?
							      >	                    newSymbol(ss) : newSymbol(sym.QNAME, yyte
							      >	        }
							      >
							      >	        /**
							      >	         * If symbol is first token or if it follows any of t
							      >	         * listed in http://www.w3.org/TR/xpath#exprlex then 
							      >	         * name instead of a keyword (Jira-1912).
							      >	         */ 
							      >	        Symbol disambiguateOperator(int ss) throws Exception 
							      >	            switch (last) {
							      >	            case -1:    // first token
							      >	            case sym.ATSIGN:
							      >	            case sym.DCOLON:
							      >	            case sym.LPAREN:
							      >	            case sym.LBRACK:
							      >	            case sym.COMMA:
							      >	            case sym.AND:
							      >	            case sym.OR:
							      >	            case sym.MOD:
							      >	            case sym.DIV:
							      >	            case sym.STAR:
							      >	            case sym.SLASH:
							      >	            case sym.DSLASH:
							      >	            case sym.VBAR:
							      >	            case sym.PLUS:
							      >	            case sym.MINUS:
							      >	            case sym.EQ:
							      >	            case sym.NE:
							      >	            case sym.LT:
							      >	            case sym.LE:
							      >	            case sym.GT:
							      >	            case sym.GE:
							      >	                return newSymbol(sym.QNAME, yytext());
							      >	            }
							      >	            return newSymbol(ss);
							      >	        }
							      >
							      >	        Symbol newSymbol(int ss) {
							      >	            last = ss;
							      >	            return new Symbol(ss);
							      >	        }
							      >
							      >	        Symbol newSymbol(int ss, String value) {
							      >	            last = ss;
							      >	            return new Symbol(ss, value);
							      >	        }
							      >
							      >	        Symbol newSymbol(int ss, Long value) {
							      >	            last = ss;
							      >	            return new Symbol(ss, value);
							      >	        }
							      >
							      >	        Symbol newSymbol(int ss, Double value) {
							      >	            last = ss;
							      >	            return new Symbol(ss, value);
							      >	        }
							      >	%}
							      >
return new Symbol(sym.EOF);				      |	return newSymbol(sym.EOF);
NCName=({Letter}|"_")({NCNameChar})*			      |	NCName=({Letter}|"_"|{NCNameStartChar})({NCNameChar})*
							      >
							      >	NCNameChar={Letter}|{Digit}|"."|"-"|"_"|{CombiningChar}|{Exte
							      >
							      >	NCNameStartChar=[\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D
							      >
							      >	HighSurrogate=[\uD800-\uDBFF]
NCNameChar={Letter}|{Digit}|"."|"-"|"_"|{CombiningChar}|{Exte |	LowSurrogate=[\uDC00-\uDFFF]
"*"                      { return new Symbol(sym.STAR); }     |	"*"                      { return newSymbol(sym.STAR); }
"/"                      { return new Symbol(sym.SLASH); }    |	"/"                      { return newSymbol(sym.SLASH); } 
"+"                      { return new Symbol(sym.PLUS); }     |	"+"                      { return newSymbol(sym.PLUS); }
"-"                      { return new Symbol(sym.MINUS); }    |	"-"                      { return newSymbol(sym.MINUS); }
"div"                    { return new Symbol(sym.DIV); }      |	"div"                    { return disambiguateOperator(sym.DI
"mod"                    { return new Symbol(sym.MOD); }      |	"mod"                    { return disambiguateOperator(sym.MO
"::"                     { return new Symbol(sym.DCOLON); }   |	"::"                     { return newSymbol(sym.DCOLON); }
","                      { return new Symbol(sym.COMMA); }    |	","                      { return newSymbol(sym.COMMA); }
"@"                      { return new Symbol(sym.ATSIGN); }   |	"@"                      { return newSymbol(sym.ATSIGN); }
".."                     { return new Symbol(sym.DDOT); }     |	".."                     { return newSymbol(sym.DDOT); }
"|"                      { return new Symbol(sym.VBAR); }     |	"|"                      { return newSymbol(sym.VBAR); }
"$"                      { return new Symbol(sym.DOLLAR); }   |	"$"                      { return newSymbol(sym.DOLLAR); }
"//"                     { return new Symbol(sym.DSLASH); }   |	"//"                     { return newSymbol(sym.DSLASH); }
"="                      { return new Symbol(sym.EQ); }	      |	"="                      { return newSymbol(sym.EQ); }
"!="                     { return new Symbol(sym.NE); }	      |	"!="                     { return newSymbol(sym.NE); }
"<"                      { return new Symbol(sym.LT); }       |	"<"                      { return newSymbol(sym.LT); } 
">"                      { return new Symbol(sym.GT); }	      |	">"                      { return newSymbol(sym.GT); }
"<="                     { return new Symbol(sym.LE); }	      |	"<="                     { return newSymbol(sym.LE); }
">="                     { return new Symbol(sym.GE); }	      |	">="                     { return newSymbol(sym.GE); }
"id"                     { return new Symbol(sym.ID); }	      |	"id"                     { return disambiguateAxisOrFunction(
"key"                    { return new Symbol(sym.KEY); }      |	"key"                    { return disambiguateAxisOrFunction(
"text()"                 { return new Symbol(sym.TEXT); }     |	"text()"                 { return newSymbol(sym.TEXT); }
"text"+[ \t\r\n\f]+"()"  { return new Symbol(sym.TEXT); }     |	"text"+[ \t\r\n\f]+"()"  { return newSymbol(sym.TEXT); }
"node()"                 { return new Symbol(sym.NODE); }     |	"node()"                 { return newSymbol(sym.NODE); }
"node"+[ \t\r\n\f]+"()"  { return new Symbol(sym.NODE); }     |	"node"+[ \t\r\n\f]+"()"  { return newSymbol(sym.NODE); }
"comment()"                 { return new Symbol(sym.COMMENT); |	"comment()"                 { return newSymbol(sym.COMMENT); 
"comment"+[ \t\r\n\f]+"()"  { return new Symbol(sym.COMMENT); |	"comment"+[ \t\r\n\f]+"()"  { return newSymbol(sym.COMMENT); 
"processing-instruction" { return new Symbol(sym.PIPARAM); }  |	"processing-instruction" { return disambiguateAxisOrFunction(
"processing-instruction()"                { return new Symbol |	"processing-instruction()"                { return newSymbol(
"processing-instruction"+[ \t\r\n\f]+"()" { return new Symbol |	"processing-instruction"+[ \t\r\n\f]+"()" { return newSymbol(
"or"                     { return new Symbol(sym.OR); }	      |	"or"                     { return disambiguateOperator(sym.OR
"and"                    { return new Symbol(sym.AND); }      |	"and"                    { return disambiguateOperator(sym.AN
"child"                  { return new Symbol(sym.CHILD); }    |	"child"                  { return disambiguateAxisOrFunction(
"attribute"              { return new Symbol(sym.ATTRIBUTE);  |	"attribute"              { return disambiguateAxisOrFunction(
"ancestor"               { return new Symbol(sym.ANCESTOR); } |	"ancestor"               { return disambiguateAxisOrFunction(
"ancestor-or-self"       { return new Symbol(sym.ANCESTORORSE |	"ancestor-or-self"       { return disambiguateAxisOrFunction(
"descendant"             { return new Symbol(sym.DESCENDANT); |	"descendant"             { return disambiguateAxisOrFunction(
"descendant-or-self"     { return new Symbol(sym.DESCENDANTOR |	"descendant-or-self"     { return disambiguateAxisOrFunction(
"following"              { return new Symbol(sym.FOLLOWING);  |	"following"              { return disambiguateAxisOrFunction(
"following-sibling"      { return new Symbol(sym.FOLLOWINGSIB |	"following-sibling"      { return disambiguateAxisOrFunction(
"namespace"              { return new Symbol(sym.NAMESPACE);  |	"namespace"              { return disambiguateAxisOrFunction(
"parent"                 { return new Symbol(sym.PARENT); }   |	"parent"                 { return disambiguateAxisOrFunction(
"preceding"              { return new Symbol(sym.PRECEDING);  |	"preceding"              { return disambiguateAxisOrFunction(
"preceding-sibling"      { return new Symbol(sym.PRECEDINGSIB |	"preceding-sibling"      { return disambiguateAxisOrFunction(
"self"                   { return new Symbol(sym.SELF); }     |	"self"                   { return disambiguateAxisOrFunction(
"["                      { return new Symbol(sym.LBRACK); }   |	"["                      { return newSymbol(sym.LBRACK); }
"]"                      { return new Symbol(sym.RBRACK); }   |	"]"                      { return newSymbol(sym.RBRACK); }
"("                      { return new Symbol(sym.LPAREN); }   |	"("                      { return newSymbol(sym.LPAREN); }
")"                      { return new Symbol(sym.RPAREN); }   |	")"                      { return newSymbol(sym.RPAREN); }
"<PATTERN>"              { return new Symbol(sym.PATTERN); }  |	"<PATTERN>"              { initialize(); return new Symbol(sy
"<EXPRESSION>"           { return new Symbol(sym.EXPRESSION); |	"<EXPRESSION>"           { initialize(); return new Symbol(sy
\"[^\"]*\"               { return new Symbol(sym.Literal,     |	\"[^\"]*\"               { return newSymbol(sym.Literal,
\'[^\']*\'               { return new Symbol(sym.Literal,     |	\'[^\']*\'               { return newSymbol(sym.Literal,
{Digit}+               	 { return new Symbol(sym.INT, new Lon |	{Digit}+               	 { return newSymbol(sym.INT, new Long
{Digit}+("."{Digit}*)? 	 { return new Symbol(sym.REAL, new Do |	{Digit}+("."{Digit}*)? 	 { return newSymbol(sym.REAL, new Dou
"."{Digit}+            	 { return new Symbol(sym.REAL, new Do |	"."{Digit}+            	 { return newSymbol(sym.REAL, new Dou
"."                      { return new Symbol(sym.DOT); }      |	"."                      { return newSymbol(sym.DOT); }
({NCName}":")?{NCName}   { return new Symbol(sym.QNAME, yytex |	({NCName}":")?{NCName}   { return newSymbol(sym.QNAME, yytext
({NCName}":")?"*"        { return new Symbol(sym.QNAME, yytex |	({NCName}":")?"*"        { return newSymbol(sym.QNAME, yytext
({NCName}":")?"@*"       { return new Symbol(sym.QNAME, yytex |	({NCName}":")?"@*"       { return newSymbol(sym.QNAME, yytext
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/XPathLexer.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/XPathLexer.java
 * $Id: xpath.lex,v 1.10 2004/02/24 19:15:03 minchau Exp $    |	 * $Id: xpath.lex,v 1.12 2005/08/02 02:59:03 mcnamara Exp $
							      >
							      >	        int last;
							      >	        void initialize() {
							      >	            last = -1;
							      >	        }
							      >	        static boolean isWhitespace(int c) {
							      >	            return (c == ' ' || c == '\t' || c == '\r' || c =
							      >	        }
							      >	        /**
							      >	         * If symbol is not followed by '::' or '(', then tre
							      >	         * name instead of an axis or function (Jira-1912).
							      >	         */ 
							      >	        Symbol disambiguateAxisOrFunction(int ss) throws Exce
							      >	            // Peek in the input buffer without changing the 
							      >	            int index = yy_buffer_index;
							      >	            // Skip whitespace
							      >	            while (index < yy_buffer_read && isWhitespace(yy_
							      >	                index++;
							      >	            }
							      >	            // If end of buffer, can't disambiguate :(
							      >	            if (index >= yy_buffer_read) {
							      >	                // Can't disambiguate, so return as symbol
							      >	                return new Symbol(ss);
							      >	            }
							      >	            // Return symbol if next token is '::' or '('
							      >	            return (yy_buffer[index] == ':' && yy_buffer[inde
							      >	                    yy_buffer[index] == '(') ?
							      >	                    newSymbol(ss) : newSymbol(sym.QNAME, yyte
							      >	        }
							      >	        /**
							      >	         * If symbol is first token or if it follows any of t
							      >	         * listed in http://www.w3.org/TR/xpath#exprlex then 
							      >	         * name instead of a keyword (Jira-1912).
							      >	         */ 
							      >	        Symbol disambiguateOperator(int ss) throws Exception 
							      >	            switch (last) {
							      >	            case -1:    // first token
							      >	            case sym.ATSIGN:
							      >	            case sym.DCOLON:
							      >	            case sym.LPAREN:
							      >	            case sym.LBRACK:
							      >	            case sym.COMMA:
							      >	            case sym.AND:
							      >	            case sym.OR:
							      >	            case sym.MOD:
							      >	            case sym.DIV:
							      >	            case sym.STAR:
							      >	            case sym.SLASH:
							      >	            case sym.DSLASH:
							      >	            case sym.VBAR:
							      >	            case sym.PLUS:
							      >	            case sym.MINUS:
							      >	            case sym.EQ:
							      >	            case sym.NE:
							      >	            case sym.LT:
							      >	            case sym.LE:
							      >	            case sym.GT:
							      >	            case sym.GE:
							      >	                return newSymbol(sym.QNAME, yytext());
							      >	            }
							      >	            return newSymbol(ss);
							      >	        }
							      >	        Symbol newSymbol(int ss) {
							      >	            last = ss;
							      >	            return new Symbol(ss);
							      >	        }
							      >	        Symbol newSymbol(int ss, String value) {
							      >	            last = ss;
							      >	            return new Symbol(ss, value);
							      >	        }
							      >	        Symbol newSymbol(int ss, Long value) {
							      >	            last = ss;
							      >	            return new Symbol(ss, value);
							      >	        }
							      >	        Symbol newSymbol(int ss, Double value) {
							      >	            last = ss;
							      >	            return new Symbol(ss, value);
							      >	        }
		/* 67 */ YY_NOT_ACCEPT,			      |			/* 67 */ YY_NO_ANCHOR,
		/* 69 */ YY_NO_ANCHOR,			      |			/* 69 */ YY_NOT_ACCEPT,
		/* 70 */ YY_NOT_ACCEPT,			      |			/* 70 */ YY_NO_ANCHOR,
		/* 72 */ YY_NO_ANCHOR,			      |			/* 72 */ YY_NOT_ACCEPT,
		/* 73 */ YY_NOT_ACCEPT,			      |			/* 73 */ YY_NO_ANCHOR,
		/* 75 */ YY_NO_ANCHOR,			      |			/* 75 */ YY_NOT_ACCEPT,
		/* 76 */ YY_NOT_ACCEPT,			      |			/* 76 */ YY_NO_ANCHOR,
		/* 126 */ YY_NO_ANCHOR,			      |			/* 126 */ YY_NOT_ACCEPT,
		/* 183 */ YY_NOT_ACCEPT,		      |			/* 183 */ YY_NO_ANCHOR,
		/* 184 */ YY_NOT_ACCEPT,		      |			/* 184 */ YY_NO_ANCHOR,
		/* 185 */ YY_NO_ANCHOR,			      |			/* 185 */ YY_NOT_ACCEPT,
		/* 190 */ YY_NO_ANCHOR,			      |			/* 190 */ YY_NOT_ACCEPT,
		/* 231 */ YY_NO_ANCHOR			      |			/* 231 */ YY_NO_ANCHOR,
							      >			/* 232 */ YY_NO_ANCHOR,
							      >			/* 233 */ YY_NO_ANCHOR
",34,7,40,24,22,57,54,14,54:58,59,54:8,57:23,54,57:31,54,57:5 |	",34,7,40,24,22,57,54,14,54:58,60,54:8,57:23,54,57:31,54,57:5
":2,57:8,54,57:53,54,57:68,54:9,57:36,54:3,57:2,54:4,57:30,54 |	":2,57:8,58,57:53,58,57:68,58:9,57:36,58:3,57:2,58:4,57:30,58
",57:7,54:14,59:2,54:46,59:70,54:26,59:2,54:36,57,59,57:3,54, |	",57:7,58:62,60:70,54:26,60:2,54:14,58:14,54,58:7,57,58,57:3,
"57:44,54,57:7,54:3,57,54,57,54,57,54,57,54,57:18,54:13,57:12 |	"58,57:44,58,57:7,58:3,57,58,57,58,57,58,57,58,57:18,58:13,57
":12,54,57:36,54,59:4,54:9,57:53,54:2,57:2,54:2,57:2,54:3,57: |	",57:12,58,57:36,58:14,57:53,58:2,57:2,58:2,57:2,58:3,57:28,5
":2,57:2,54:55,57:38,54:2,57,54:7,57:38,54:10,59:17,54,59:23, |	"7:2,58:55,57:38,58:2,57,58:7,57:38,58:73,57:27,58:5,57:3,58:
"4,59:2,54,59,54:11,57:27,54:5,57:3,54:46,57:26,54:5,59,57:10 |	"7:10,58:21,59:10,58:7,57:71,58:2,57:5,58,57:15,58,57:4,58,57
"10,54:6,59,57:71,54:2,57:5,54,57:15,54,57:4,54,57,59:15,57:2 |	"9,59:10,58:523,57:53,58:3,57,58:26,57:10,58:4,59:10,58:21,57
"4:2,56:10,54:519,59:3,54,57:53,54:2,59,57,59:16,54:3,59:4,54 |	":2,57:22,58,57:7,58,57,58:3,57:4,58:34,57:2,58,57:3,58:4,59:
"4:2,56:10,54:17,59:3,54,57:8,54:2,57:2,54:2,57:22,54,57:7,54 |	"7:6,58:4,57:2,58:2,57:22,58,57:7,58,57:2,58,57:2,58,57:2,58:
"4:2,59,54,59:7,54:2,59:2,54:2,59:3,54:9,59,54:4,57:2,54,57:3 |	"8:7,59:10,58:2,57:3,58:16,57:7,58,57,58,57:3,58,57:22,58,57:
"0,57:2,54:16,59,54:2,57:6,54:4,57:2,54:2,57:22,54,57:7,54,57 |	":5,58:3,57,58:34,57,58:5,59:10,58:21,57:8,58:2,57:2,58:2,57:
"7:2,54:2,59,54,59:5,54:4,59:2,54:2,59:3,54:11,57:4,54,57,54: |	"7:2,58:2,57:4,58:3,57,58:30,57:2,58,57:3,58:4,59:10,58:21,57
":3,54:12,59:3,54,57:7,54,57,54,57:3,54,57:22,54,57:7,54,57:2 |	",57:4,58:3,57:2,58,57,58,57:2,58:3,57:2,58:3,57:3,58:3,57:8,
"9,57,59:8,54,59:3,54,59:3,54:18,57,54:5,56:10,54:17,59:3,54, |	"9:9,58:21,57:8,58,57:3,58,57:23,58,57:10,58,57:5,58:38,57:2,
"54:2,57:22,54,57:7,54,57:2,54:2,57:4,54:2,59,57,59:6,54:3,59 |	"1,57:8,58,57:3,58,57:23,58,57:10,58,57:5,58:36,57,58,57:2,58
":8,59:2,54:4,57:2,54,57:3,54:4,56:10,54:18,59:2,54,57:6,54:3 |	"57:8,58,57:3,58,57:23,58,57:16,58:38,57:2,58:4,59:10,58:145,
"4:3,57:2,54,57,54,57:2,54:3,57:2,54:3,57:3,54:3,57:8,54,57:3 |	"57:2,58:12,57:6,58:10,59:10,58:39,57:2,58,57,58:2,57:2,58,57
",59:3,54,59:4,54:9,59,54:15,56:9,54:17,59:3,54,57:8,54,57:3, |	"7:4,58,57:7,58,57:3,58,57,58,57,58:2,57:2,58,57:2,58,57,58,5
"10,54,57:5,54:4,59:7,54,59:3,54,59:4,54:7,59:2,54:9,57:2,54: |	"2,57:5,58:11,59:10,58:70,59:10,58:22,57:8,58,57:33,58:310,57
"9:2,54,57:8,54,57:3,54,57:23,54,57:10,54,57:5,54:4,59:7,54,5 |	",58:9,57,58,57:2,58,57:3,58,57,58,57:2,58,57:5,58:41,57,58,5
"7,59:2,54:7,57,54,57:2,54:4,56:10,54:18,59:2,54,57:8,54,57:3 |	"7,58,57,58,57,58:3,57:2,58:3,57,58:5,57:3,58,57,58,57,58,57,
":16,54:4,59:6,54:2,59:3,54,59:4,54:9,59,54:8,57:2,54:4,56:10 |	",58:3,57:2,58,57,58:40,57,58:9,57,58:2,57,58:2,57:2,58:7,57:
"4,57,59,57:2,59:7,54:5,57:6,59:9,54,56:10,54:39,57:2,54,57,5 |	",58:40,57,58:4,57,58:8,57,58:3078,57:156,58:4,57:90,58:6,57:
"54:2,57,54:6,57:4,54,57:7,54,57:3,54,57,54,57,54:2,57:2,54,5 |	":2,57:38,58:2,57:6,58:2,57:8,58,57,58,57,58,57,58,57:31,58:2
":2,59:6,54,59:2,57,54:2,57:5,54,59,54,59:6,54:2,56:10,54:62, |	"58,57,58:3,57:3,58,57:7,58:3,57:4,58:2,57:6,58:4,57:13,58:5,
",54:11,59,54,59,54,59,54:4,59:2,57:8,54,57:33,54:7,59:20,54, |	":3,54:12,58:2,54:98,58:182,57,58:3,57:2,58:2,57,58:81,57:3,5
"54,59,54,59:21,54:3,59:7,54,59,54:230,57:38,54:10,57:39,54:9 |	":1008,54:17,58:64,57:84,58:12,57:90,58:10,57:40,58:31443,57:
"57:3,54,57,54,57:2,54,57:5,54:41,57,54,57,54,57,54:11,57,54, |	"8448,58:1232,54:32,58:526,54:2,0:2")[0];
"7:2,54:3,57,54:5,57:3,54,57,54,57,54,57,54,57,54:3,57:2,54:3 <
"40,57,54:9,57,54:2,57,54:2,57:2,54:7,57:2,54,57,54,57:7,54:4 <
":8,57,54:3078,57:156,54:4,57:90,54:6,57:22,54:2,57:6,54:2,57 <
"4:2,57:8,54,57,54,57,54,57,54,57:31,54:2,57:53,54,57:7,54,57 <
"7:7,54:3,57:4,54:2,57:6,54:4,57:13,54:5,57:3,54,57:7,54:211, <
"4:68,57,54:3,57:2,54:2,57,54:81,57:3,54:3714,59,54,58,54:25, <
":5,54:11,57:84,54:4,59:2,54:2,59:2,54:2,57:90,54,59:3,54:6,5 <
":20902,54:3162,57:11172,54:10332,0:2")[0];		      <
	static private int yy_rmap[] = unpackFromString(1,232 |		static private int yy_rmap[] = unpackFromString(1,234
":2,13,1,10,1,14,10,15,16,1:2,10:4,17,1:2,18,19,20,21,22,23,2 |	":2,13,1,10,1,14,10,15,16,1:2,10:4,17,1:2,18,19,20,21,22,23,2
":2,27,5,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,4 |	",10,28:2,29,5,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,4
"119,120,121,122,123,124,125,126,127,128,129,130,10,131,132,1 |	"119,120,121,122,123,124,125,126,127,128,129,130,131,132,10,1
"4,175,176,177,178,179")[0];				      |	"4,175,176,177,178,179,180,181")[0];
	static private int yy_nxt[][] = unpackFromString(180, |		static private int yy_nxt[][] = unpackFromString(182,
"1,2,3,4,5,6,65,182,202,68,7,8,9,10,11,12,13,66,14,15,209,182 |	"1,2,3,4,5,6,65,184,204,70,7,8,9,10,11,12,13,66,14,15,211,184
"7,18,216,218,219,182,220,182:2,221,182:3,222,182,19,20,182:1 |	"7,18,218,220,221,184,222,184:2,223,184:3,224,184,19,20,184:1
"82:2,72,-1:62,22,-1:61,182:2,71,182:3,64,-1:2,74,-1:6,182,77 |	"84:2,67,74,-1:63,22,-1:62,184:2,73,184:3,64,-1:2,76,-1:6,184
":13,-1:2,182:10,-1:3,74,182,74:2,-1:10,25,-1:50,26,-1:71,27, |	"184:13,-1:2,184:10,-1:3,76,184,76:3,-1:10,25,-1:51,26,-1:72,
"30,-1:26,67,-1:2,70,-1:29,31,-1:56,34,-1:42,21,-1:7,182:6,64 |	"2,28,-1:17,30,-1:26,69,-1:2,72,-1:30,31,-1:57,34,-1:42,21,-1
"82:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:56,28,-1:59 |	"6,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,
"2:5,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,18 |	"1:2,28,-1:57,34,-1:2,34,-1:5,155,184:5,64,-1:2,76,-1:6,184:5
",182:5,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74 |	":2,184:10,-1:3,76,184,76:3,-1:4,209,184:5,64,-1:2,76,-1:6,18
"231,182:5,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3 |	",-1:2,184:10,-1:3,76,184,76:3,-1:4,233,184:5,64,-1:2,76,-1:6
":4,156,182:5,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,- |	":13,-1:2,184:10,-1:3,76,184,76:3,-1:4,158,184:5,64,-1:2,76,-
",-1:4,182:6,64,-1:2,74,-1:6,182:5,120,-1,122,181,182:12,-1:2 |	"184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1
",182,74:2,-1,36,-1:3,101:5,-1:2,78,-1:7,101:5,-1:3,101:13,-1 |	",124,183,184:12,-1:2,184:10,-1:3,76,184,76:3,-1,36,-1:3,103:
"101:2,-1:5,182,23,182:4,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1 |	"103:5,-1:3,103:13,-1:2,103:10,-1:4,103:3,-1:5,184,23,184:4,6
"74,182,74:2,-1:16,29,-1:87,80,-1:19,182:6,64,-1:2,74,-1:6,18 |	"184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:16,29,-1:4
"24,182:9,-1:2,182:10,-1:3,74,182,74:2,-1,73:52,32,73:6,-1:49 |	",68,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,67,184,76,67,76,
",35,182:2,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3 |	"1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,68,184,76,68,
",76:54,33,76:4,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:4,1 |	"20,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:3,24,184:9,-1:2,184:
"82:10,-1:3,74,182,74:2,-1:4,182,37,182:4,64,-1:2,74,-1:6,182 |	"76:3,-1,75:52,32,75:7,-1:49,84,-1:15,184:3,35,184:2,64,-1:2,
"-1:2,182:10,-1:3,74,182,74:2,-1:45,183,-1:18,182:6,64,-1:2,7 |	"1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1,78:54,33,78:5,-1:
",182:2,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:43,84,-1: |	",76,-1:6,184:5,-1:3,184:4,105,184:8,-1:2,184:10,-1:3,76,184,
"2,74,-1:6,182:4,189,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2 |	"7,184:4,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,7
"6,182,105,182:4,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:1 |	"5,185,-1:19,184:6,64,-1:2,76,-1:6,184:2,38,184:2,-1:3,184:13
"4:2,-1:46,94,-1:17,182:4,191,182,64,-1:2,74,-1:6,182:5,-1:3, |	":3,76,184,76:3,-1:43,86,-1:21,184:6,64,-1:2,76,-1:6,184:4,19
":10,-1:3,74,182,74:2,-1:26,42,-1:37,182:2,203,182:3,64,-1:2, |	"1:2,184:10,-1:3,76,184,76:3,-1:47,186,-1:17,184,107,184:4,64
"1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:25,98,-1,90,-1:36 |	"84:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:46,96,-1:18
"1:2,74,-1:6,182,226,182:3,-1:3,182:13,-1:2,182:10,-1:3,74,18 |	"64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76
",-1:37,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:3,204,182:9,-1:2 |	"38,184:2,205,184:3,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,18
",182,74:2,-1:47,102,-1:16,182:6,64,-1:2,74,-1:6,182:5,-1:3,1 |	"4,76:3,-1:25,100,-1,92,-1:37,184:5,192,64,-1:2,76,-1:6,184,2
"-1:2,182:10,-1:3,74,182,74:2,-1:50,188,-1:13,182:6,64,-1:2,7 |	"84:13,-1:2,184:10,-1:3,76,184,76:3,-1:26,43,-1:38,184:6,64,-
"1,182,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:26,45,-1:3 |	":5,-1:3,184:3,206,184:9,-1:2,184:10,-1:3,76,184,76:3,-1:47,1
"64,-1:2,74,-1:6,182:5,-1:3,182,210,182:11,-1:2,182:10,-1:3,7 |	"64,-1:2,76,-1:6,184:5,-1:3,184:9,111,184:3,-1:2,184:10,-1:3,
"6,46,-1:37,101:6,-1:3,101,-1:6,101:5,-1:3,101:13,-1:2,101:10 |	"50,190,-1:14,184:6,64,-1:2,76,-1:6,184:3,113,184,-1:3,184:13
"48,104,-1:15,182:6,64,-1:2,74,-1:6,182:5,-1:3,182,214,182:11 |	":3,76,184,76:3,-1:26,45,-1:38,184,39,184:4,64,-1:2,76,-1:6,1
":3,74,182,74:2,-1:19,48,-1:44,182:6,64,-1:2,74,-1:6,182,117, |	"12,184:11,-1:2,184:10,-1:3,76,184,76:3,-1:26,46,-1:38,103:6,
"13,-1:2,182:10,-1:3,74,182,74:2,-1:51,112,-1:12,182:4,121,18 |	"03:5,-1:3,103:13,-1:2,103:10,-1:3,103:5,-1:48,106,-1:16,184:
":6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:26,50,- |	":6,184:5,-1:3,184,216,184:11,-1:2,184:10,-1:3,76,184,76:3,-1
"1:2,74,-1:6,182:5,-1:3,182:11,40,182,-1:2,182:10,-1:3,74,182 |	"4:6,64,-1:2,76,-1:6,184,119,184:3,-1:3,184:13,-1:2,184:10,-1
",-1,110,-1:36,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:3,126,182 |	"-1:51,114,-1:13,184:4,123,184,64,-1:2,76,-1:6,184:5,-1:3,184
"-1:3,74,182,74:2,-1:52,116,-1:11,182:6,64,-1:2,74,-1:6,182:5 |	",-1:3,76,184,76:3,-1:26,50,-1:38,184:6,64,-1:2,76,-1:6,184:5
",182:3,-1:2,182:10,-1:3,74,182,74:2,-1:26,55,-1:37,182:6,64, |	",184,-1:2,184:10,-1:3,76,184,76:3,-1:25,116,-1,112,-1:37,184
"2:3,128,182,88,-1,90,182:13,-1:2,182:10,-1:3,74,182,74:2,-1: |	"1:6,184:5,-1:3,184:3,128,184:9,-1:2,184:10,-1:3,76,184,76:3,
"2:6,64,-1:2,74,-1:6,182,129,182:3,92,-1,186,182:13,-1:2,182: |	",184:6,64,-1:2,76,-1:6,184:5,-1:3,184:9,129,184:3,-1:2,184:1
"74:2,-1:19,56,-1:44,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:4,1 |	"6:3,-1:26,55,-1:38,184:6,64,-1:2,76,-1:6,184:3,130,184,90,-1
"82:10,-1:3,74,182,74:2,-1:26,62,-1:37,182:6,64,-1:2,74,-1:6, |	",184:10,-1:3,76,184,76:3,-1:48,120,-1:16,184:6,64,-1:2,76,-1
"1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:25,124,-1,122,-1: |	"3,94,-1,188,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:19,56,-1:
",64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,7 |	"2,76,-1:6,184:5,-1:3,184:4,132,184:8,-1:2,184:10,-1:3,76,184
":37,182:6,64,-1:2,74,-1:6,182:5,-1:3,133,182:12,-1:2,182:10, |	"-1:38,184:6,64,-1:2,76,-1:6,184,208,184:3,-1:3,184:13,-1:2,1
"2,-1:4,182:2,134,182:3,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1: |	"84,76:3,-1:25,126,-1,124,-1:37,184,41,184:4,64,-1:2,76,-1:6,
"4,182,74:2,-1:4,182:5,136,64,-1:2,74,-1:6,182:5,-1:3,182:13, |	"13,-1:2,184:10,-1:3,76,184,76:3,-1:26,63,-1:38,184:6,64,-1:2
"3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:3,128,182,-1:2, |	"-1:3,135,184:12,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:2,136,
"182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182,129,1 |	"6,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,1
"82:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1: |	"2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:
"2:2,137,182:10,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1 |	",76,-1:6,184:3,130,184,-1:2,92,184:13,-1:2,184:10,-1:3,76,18
"5,-1:3,182:4,195,182:8,-1:2,182:10,-1:3,74,182,74:2,-1:4,182 |	":6,64,-1:2,76,-1:6,184,131,184:3,-1:2,188,184:13,-1:2,184:10
"1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,- |	":3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:2,139,184:10,-1
":2,74,-1:6,182:3,44,182,-1:3,182:13,-1:2,182:10,-1:3,74,182, |	"76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:4,197,
",64,-1:2,74,-1:6,182:5,-1:3,182:10,139,182:2,-1:2,182:10,-1: |	"10,-1:3,76,184,76:3,-1:4,184,140,184:4,64,-1:2,76,-1:6,184:5
"1:4,182:6,64,-1:2,74,-1:6,182:3,140,182,-1:3,182:13,-1:2,182 |	":2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:3,
",74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:12,223,-1:2, |	":13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,
"182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:7,141,182 |	"10,141,184:2,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2
"-1:3,74,182,74:2,-1:4,182:2,143,182:3,64,-1:2,74,-1:6,182:5, |	"142,184,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,
"2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,- |	",184:5,-1:3,184:12,225,-1:2,184:10,-1:3,76,184,76:3,-1:4,184
"82:6,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:5,145,64,-1:2,74, |	"1:6,184:5,-1:3,184:7,143,184:5,-1:2,184:10,-1:3,76,184,76:3,
",182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,- |	"184:3,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,
"182,146,182:11,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1 |	"84:6,64,-1:2,76,-1:6,184:5,-1:3,184:6,146,184:6,-1:2,184:10,
"3,147,182,108,-1,110,182:13,-1:2,182:10,-1:3,74,182,74:2,-1: |	"3,-1:4,184:5,147,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:
",74,-1:6,182:5,-1:3,148,182:12,-1:2,182:10,-1:3,74,182,74:2, |	"76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184,148,184:11,-1
"1:2,74,-1:6,182:3,149,182,-1:3,182:13,-1:2,182:10,-1:3,74,18 |	"76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:3,149,184,110,-1,
":6,64,-1:2,74,-1:6,182:5,-1:3,182:3,47,182:9,-1:2,182:10,-1: |	",184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1
"1:4,182:6,64,-1:2,74,-1:6,182,49,182:3,-1:3,182:13,-1:2,182: |	"1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:3
"74:2,-1:4,182:6,64,-1:2,74,-1:6,182:3,147,182,-1:2,110,182:1 |	"84:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:
"1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:5, |	"4:3,47,184:9,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2
"82:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182,52,182 |	",184:3,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,6
"-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182: |	"184:3,149,184,-1:2,112,184:13,-1:2,184:10,-1:3,76,184,76:3,-
",182:7,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1 |	":2,76,-1:6,184:5,-1:3,184:5,51,184:7,-1:2,184:10,-1:3,76,184
",-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2 |	"6,64,-1:2,76,-1:6,184,52,184:3,-1:3,184:13,-1:2,184:10,-1:3,
"-1:3,182:5,154,182:7,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:5 |	"4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:5,53,184:7,-1:2,184:1
",-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,15 |	"6:3,-1:4,184:6,64,-1:2,76,-1:6,184:3,54,184,-1:3,184:13,-1:2
",74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4 |	",184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:5,156,18
"74,-1:6,182:5,-1:3,182:3,158,182:9,-1:2,182:10,-1:3,74,182,7 |	",-1:3,76,184,76:3,-1:4,184:5,157,64,-1:2,76,-1:6,184:5,-1:3,
"159,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,18 |	":10,-1:3,76,184,76:3,-1:4,159,184:5,64,-1:2,76,-1:6,184:5,-1
":2,160,182:3,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,- |	"184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:
",-1:4,211,182:5,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:1 |	":9,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:5,161,64,-1:2,76,-1
"4:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:3,224,182:9,-1 |	"84:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:2,162,184:3,64,-
"74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,215,182:12 |	":5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,213,184:5,6
":3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:10, |	"184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64
"182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1: |	"84:5,-1:3,184:3,226,184:9,-1:2,184:10,-1:3,76,184,76:3,-1:4,
":3,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,1 |	"6,-1:6,184:5,-1:3,217,184:12,-1:2,184:10,-1:3,76,184,76:3,-1
":3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74 |	"2,76,-1:6,184:5,-1:3,184:10,164,184:2,-1:2,184:10,-1:3,76,18
",182,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:2,169 |	":6,64,-1:2,76,-1:6,184:5,-1:3,184:9,167,184:3,-1:2,184:10,-1
"74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4, |	"-1:4,184:6,64,-1:2,76,-1:6,184,168,184:3,-1:3,184:13,-1:2,18
"4,-1:6,182:5,-1:3,182:9,170,182:3,-1:2,182:10,-1:3,74,182,74 |	"4,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:3,170,184,-1:3,184:13,
"4,-1:2,74,-1:6,182,171,182:3,-1:3,182:13,-1:2,182:10,-1:3,74 |	"3,76,184,76:3,-1:4,184:2,171,184:3,64,-1:2,76,-1:6,184:5,-1:
"182:6,64,-1:2,74,-1:6,182:5,-1:3,182:3,172,182:9,-1:2,182:10 |	"84:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3
":2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,173,182:12,-1:2,182 |	"3,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,18
",74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:11,57,182,-1 |	"3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,
"74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:9,175, |	",184:3,174,184:9,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,
"10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,18 |	"4:5,-1:3,175,184:12,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,
"1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5 |	",184:5,-1:3,184:11,57,184,-1:2,184:10,-1:3,76,184,76:3,-1:4,
"182:7,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1: |	"6,-1:6,184:5,-1:3,184:9,177,184:3,-1:2,184:10,-1:3,76,184,76
"2:5,59,182:7,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2 |	"4,-1:2,76,-1:6,184:5,-1:3,184:6,178,184:6,-1:2,184:10,-1:3,7
"-1:3,182:11,60,182,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,6 |	",184:6,64,-1:2,76,-1:6,184:5,-1:3,184:5,58,184:7,-1:2,184:10
"182:5,-1:3,182,177,182:11,-1:2,182:10,-1:3,74,182,74:2,-1:4, |	":3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:5,59,184:7,-1:2
"4,-1:6,182:3,178,182,-1:3,182:13,-1:2,182:10,-1:3,74,182,74: |	",184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:11,60,18
"9,182:3,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,7 |	"1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184,17
",182:5,180,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1: |	"84:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:3,180,
"1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,61,182:12,-1:2,182:10,- |	",-1:2,184:10,-1:3,76,184,76:3,-1:4,184:2,181,184:3,64,-1:2,7
",-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:2,122,181,182:12,-1:2,1 |	":3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:5,182,64,-1:
"82,74:2,-1:45,86,-1:60,96,-1:17,182:4,107,182,64,-1:2,74,-1: |	",-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2
"2:13,-1:2,182:10,-1:3,74,182,74:2,-1:25,100,-1,186,-1:36,182 |	"-1:3,61,184:12,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1
"1:6,182:5,-1:3,182:9,113,182:3,-1:2,182:10,-1:3,74,182,74:2, |	"5,-1:2,124,183,184:12,-1:2,184:10,-1:3,76,184,76:3,-1:45,88,
",182:6,64,-1:2,74,-1:6,182:3,115,182,-1:3,182:13,-1:2,182:10 |	"184:4,109,184,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,
":2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182,193,182:11,-1:2 |	"3,-1:25,102,-1,188,-1:37,184:6,64,-1:2,76,-1:6,184:5,-1:3,18
",182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182,119,182:3,-1:3,182: |	"1:2,184:10,-1:3,76,184,76:3,-1:50,108,-1:14,184:6,64,-1:2,76
"-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:4 |	",184,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,
",182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182,131, |	"4:5,-1:3,184,195,184:11,-1:2,184:10,-1:3,76,184,76:3,-1:4,18
"13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,1 |	"-1:6,184,121,184:3,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,
"82:12,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1: |	"1:2,76,-1:6,184:5,-1:3,184:4,137,184:8,-1:2,184:10,-1:3,76,1
"2:4,227,182:8,-1:2,182:10,-1:3,74,182,74:2,-1:4,182,198,182: |	"4:6,64,-1:2,76,-1:6,184,133,184:3,-1:3,184:13,-1:2,184:10,-1
":6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6 |	"-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,198,184:12,-1:2,184:10
"6,182:3,142,182,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1: |	":3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:4,229,184:8,-1:
",74,-1:6,182:5,-1:3,182:7,208,182:5,-1:2,182:10,-1:3,74,182, |	"6,184,76:3,-1:4,184,200,184:4,64,-1:2,76,-1:6,184:5,-1:3,184
",64,-1:2,74,-1:6,182:5,-1:3,150,182:12,-1:2,182:10,-1:3,74,1 |	",-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:3,144,184,-
"2:2,161,182:3,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10, |	",184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1
"2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,174,182:12,-1:2,182: |	"4:5,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,
"74:2,-1:4,182:5,79,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,18 |	"184:12,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:2,163,184:3,64,
"2,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:9,123,182:3 |	"4:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-
":3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182,125,182:3,-1:3 |	":5,-1:3,176,184:12,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:5,8
"2:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182,132,182 |	":6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6
"-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182: |	"6,184:5,-1:3,184:9,125,184:3,-1:2,184:10,-1:3,76,184,76:3,-1
"12,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,1 |	"2,76,-1:6,184,127,184:3,-1:3,184:13,-1:2,184:10,-1:3,76,184,
",200,182:8,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,7 |	",64,-1:2,76,-1:6,184,134,184:3,-1:3,184:13,-1:2,184:10,-1:3,
":3,151,182:12,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1: |	"4,184:6,64,-1:2,76,-1:6,184:5,-1:3,199,184:12,-1:2,184:10,-1
"1,182:3,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6, |	"-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:4,202,184:8,-1:2,1
",182,192,182:3,-1:3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4 |	"84,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,153,184:12,-1:
"74,-1:6,182:5,-1:3,182:4,163,182:8,-1:2,182:10,-1:3,74,182,7 |	"6,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184,83,184:3,-1:3,184:
"64,-1:2,74,-1:6,182:5,-1:3,152,182:12,-1:2,182:10,-1:3,74,18 |	"-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184,194,184:3,-1
":6,64,-1:2,74,-1:6,182,83,182:3,-1:3,182:13,-1:2,182:10,-1:3 |	"184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:
":4,182:6,64,-1:2,74,-1:6,182,194,182:3,-1:3,182:13,-1:2,182: |	":8,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,1
"74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3,182:4,164,182:8,- |	"84:12,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:
",74,182,74:2,-1:4,182:5,85,64,-1:2,74,-1:6,182:5,-1:3,182:7, |	"-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,
"82:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3 |	",184:3,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,6
"8,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:5,185,64,-1:2,74,-1: |	"184:5,-1:3,184:4,166,184:8,-1:2,184:10,-1:3,76,184,76:3,-1:4
"2:8,89,182:4,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2 |	":2,76,-1:6,184:5,-1:3,184:7,89,184:5,-1:2,184:10,-1:3,76,184
"-1:3,182:3,91,182:3,93,182:5,-1:2,182:10,-1:3,74,182,74:2,-1 |	"6,64,-1:2,76,-1:6,184:5,-1:3,184:4,169,184:8,-1:2,184:10,-1:
"2,74,-1:6,182,95,182:3,-1:3,182:13,-1:2,182:10,-1:3,74,182,7 |	"1:4,184:5,187,64,-1:2,76,-1:6,184:5,-1:3,184:8,91,184:4,-1:2
"64,-1:2,74,-1:6,182:3,97,182,-1:3,99,182:12,-1:2,182:10,-1:3 |	",184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:3,93,184
":4,182:5,187,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,- |	"2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184,97,
",-1:4,182:2,199,182:3,64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2 |	"13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,1
",182,74:2,-1:4,217,182:5,64,-1:2,74,-1:6,182:5,-1:3,182:13,- |	"3,101,184:12,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:5,189,64,
",74,182,74:2,-1:4,182:2,201,182:3,64,-1:2,74,-1:6,182:5,-1:3 |	"4:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:2,201,
"2:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74,-1:6,182:5,-1:3, |	"6,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:4,2
"-1:2,182:10,-1:3,74,182,74:2,-1:4,182:2,212,182:3,64,-1:2,74 |	"2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184,76:3,-1:
"3,182:13,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64,-1:2,74, |	":3,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,184:10,-1:3,76,184
",182:9,225,182:3,-1:2,182:10,-1:3,74,182,74:2,-1:4,182:6,64, |	"6,64,-1:2,76,-1:6,184:5,-1:3,184,207,184:11,-1:2,184:10,-1:3
"2:5,-1:3,182:10,228,182:2,-1:2,182:10,-1:3,74,182,74:2,-1:4, |	":4,184:2,214,184:3,64,-1:2,76,-1:6,184:5,-1:3,184:13,-1:2,18
",64,-1:2,74,-1:6,182:5,-1:3,182:13,-1:2,182:10,-1:3,74,182,7 |	"4,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:9,227,184:3
"64,-1:2,74,-1:6,182:5,-1:3,182:4,230,182:8,-1:2,182:10,-1:3, |	":3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,184:5,-1:3,184:10,
							      >	"184:10,-1:3,76,184,76:3,-1:4,184:2,231,184:3,64,-1:2,76,-1:6
							      >	":13,-1:2,184:10,-1:3,76,184,76:3,-1:4,184:6,64,-1:2,76,-1:6,
							      >	"4,232,184:8,-1:2,184:10,-1:3,76,184,76:3");
return new Symbol(sym.EOF);				      |	return newSymbol(sym.EOF);
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return disa
						{ return new  |							{ return newS
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return disa
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return disa
						{ return new  |							{ initialize(
						{ return new  |							{ return disa
						{ return new  |							{ return newS
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return newS
						{ return new  |							{ initialize(
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return disa
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
					case 68:	      |						case 67:
						{ return new  |							{ return newS
					case 69:	      |						case 68:
						{ throw new E |							{ return newS
					case 71:	      |						case 70:
						{ return new  |							{ return newS
					case 72:	      |						case 71:
					case 74:	      |						case 73:
						{ return new  |							{ return newS
					case 75:	      |						case 74:
					case 77:	      |						case 76:
						{ return new  |							{ return newS
					case 79:	      |						case 77:
						{ return new  |							{ throw new E
					case 81:	      |						case 79:
						{ return new  |							{ return newS
					case 83:	      |						case 81:
						{ return new  |							{ return newS
					case 85:	      |						case 83:
						{ return new  |							{ return newS
					case 87:	      |						case 85:
						{ return new  |							{ return newS
					case 89:	      |						case 87:
						{ return new  |							{ return newS
					case 91:	      |						case 89:
						{ return new  |							{ return newS
					case 93:	      |						case 91:
						{ return new  |							{ return newS
					case 95:	      |						case 93:
						{ return new  |							{ return newS
					case 97:	      |						case 95:
						{ return new  |							{ return newS
					case 99:	      |						case 97:
						{ return new  |							{ return newS
					case 101:	      |						case 99:
						{ return new  |							{ return newS
					case 103:	      |						case 101:
						{ return new  |							{ return newS
					case 105:	      |						case 103:
						{ return new  |							{ return newS
					case 107:	      |						case 105:
						{ return new  |							{ return newS
					case 109:	      |						case 107:
						{ return new  |							{ return newS
					case 111:	      |						case 109:
						{ return new  |							{ return newS
					case 113:	      |						case 111:
						{ return new  |							{ return newS
					case 115:	      |						case 113:
						{ return new  |							{ return newS
					case 117:	      |						case 115:
						{ return new  |							{ return newS
					case 119:	      |						case 117:
						{ return new  |							{ return newS
					case 121:	      |						case 119:
						{ return new  |							{ return newS
					case 123:	      |						case 121:
						{ return new  |							{ return newS
					case 125:	      |						case 123:
						{ return new  |							{ return newS
					case 126:	      |						case 125:
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
					case 185:	      |						case 183:
						{ return new  |							{ return newS
					case 187:	      |						case 184:
						{ return new  |							{ return newS
					case 189:	      |						case 187:
						{ return new  |							{ return newS
					case 190:	      |						case 189:
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
						{ return new  |							{ return newS
							      >							break;
							      >						case 232:
							      >							{ return newS
							      >						case -200:
							      >							break;
							      >						case 233:
							      >							{ return newS
							      >						case -201:
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/XPathParser.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/XPathParser.java
// Fri Feb 27 14:42:39 EST 2004				      |	// Sat Aug 06 17:03:22 EDT 2005
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
  * @version Fri Feb 27 14:42:39 EST 2004		      |	  * @version Sat Aug 06 17:03:22 EDT 2005
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/XslAttribute.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/XslAttribute.java
 * $Id: XslAttribute.java,v 1.24 2004/02/24 03:55:48 zongaro  |	 * $Id: XslAttribute.java,v 1.25 2005/03/23 17:54:04 ytalwar 
import org.apache.xml.utils.XMLChar;			      <
							      >	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(name)) {		      |	            if (!XML11Char.isXML11ValidQName(name)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/XslElement.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/XslElement.java
 * $Id: XslElement.java,v 1.23 2004/02/24 03:55:48 zongaro Ex |	 * $Id: XslElement.java,v 1.24 2005/03/23 17:54:04 ytalwar Ex
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
            if (!XMLChar.isValidQName(name)) {		      |	            if (!XML11Char.isXML11ValidQName(name)) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/compiler/XSLTC.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/compiler/XSLTC.java
 * $Id: XSLTC.java,v 1.57 2004/02/16 22:25:33 minchau Exp $   |	 * $Id: XSLTC.java,v 1.59 2005/06/08 13:10:08 mkwan Exp $
							      >	     * State of the secure processing feature.
							      >	     */
							      >	    private boolean _isSecureProcessing = false;
							      >
							      >	    /**
							      >	    
							      >	    /**
							      >	     * Set the state of the secure processing feature.
							      >	     */
							      >	    public void setSecureProcessing(boolean flag) {
							      >	        _isSecureProcessing = flag;
							      >	    }
							      >	    
							      >	    /**
							      >	     * Return the state of the secure processing feature.
							      >	     */
							      >	    public boolean isSecureProcessing() {
							      >	        return _isSecureProcessing;
							      >	    }
     * @param input An InputStream that will pass in the styl |	     * @param stream An InputStream that will pass in the sty
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/AnyNodeCounter.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/AnyNodeCounter.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: AnyNodeCounter.java,v 1.4 2004/02/16 22:54:59 minchau |	 * $Id: AnyNodeCounter.java,v 1.6 2005/03/11 23:26:09 jycli E
	    result = _value;				      |	            //See Errata E24
							      >	            if (_value == 0) return "0";
							      >	            else if (Double.isNaN(_value)) return "NaN";
							      >	            else if (_value < 0 && Double.isInfinite(_value))
							      >	            else if (Double.isInfinite(_value)) return "Infin
							      >	            else return formatNumbers((int)_value);
		result = _value;			      |	                    //See Errata E24
							      >	                    if (_value == 0) return "0";
							      >	                    else if (Double.isNaN(_value)) return "Na
							      >	                    else if (_value < 0 && Double.isInfinite(
							      >	                    else if (Double.isInfinite(_value)) retur
							      >	                    else result = (int) _value;
只在 xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom 存在：Axis.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/BitArray.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/BitArray.java
 * $Id: BitArray.java,v 1.7 2004/02/16 22:54:59 minchau Exp $ |	 * $Id: BitArray.java,v 1.8 2004/08/17 18:48:35 jycli Exp $
							      >	    static final long serialVersionUID = -4876019880708377663
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/DocumentCache.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/DocumentCache.java
 * $Id: DocumentCache.java,v 1.15 2004/02/16 22:54:59 minchau |	 * $Id: DocumentCache.java,v 1.16 2004/12/15 17:35:44 jycli E
	    System.exit(-1);				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/DOMAdapter.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/DOMAdapter.java
 * $Id: DOMAdapter.java,v 1.23 2004/02/16 22:54:59 minchau Ex |	 * $Id: DOMAdapter.java,v 1.24 2004/07/22 22:46:31 minchau Ex
							      >	    	final short[] mapping = getMapping();
							      >	    	final int type;
            return getMapping()[_enhancedDOM.getExpandedTypeI |	            type = mapping[_enhancedDOM.getExpandedTypeID2(no
            return getMapping()[_dom.getExpandedTypeID(node)] |	        	if(null != mapping)
							      >	        	{
							      >	            	type = mapping[_dom.getExpandedTypeID(node)];
							      >	        	}
							      >	        	else
							      >	        	{
							      >	        		type = _dom.getExpandedTypeID(node);
							      >	        	}
							      >	        return type;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/DOMWSFilter.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/DOMWSFilter.java
 * $Id: DOMWSFilter.java,v 1.5 2004/02/16 22:54:59 minchau Ex |	 * $Id: DOMWSFilter.java,v 1.6 2005/01/23 00:37:17 mcnamara E
 * DOM {@link org.apache.xsltc.StripFilter StripFilter} inter |	 * DOM {@link org.apache.xalan.xsltc.StripFilter StripFilter}
     * @see org.apache.xsltc.StripFilter		      |	     * @see org.apache.xalan.xsltc.StripFilter
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/KeyIndex.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/KeyIndex.java
 * $Id: KeyIndex.java,v 1.13 2004/02/16 22:54:59 minchau Exp  |	 * $Id: KeyIndex.java,v 1.15 2005/06/08 17:59:49 zongaro Exp 
	IntegerArray nodes;				      |	        IntegerArray nodes = (IntegerArray) _index.get(value)
	if ((nodes = (IntegerArray) _index.get(value)) == nul |	        if (nodes == null) {
	    _index.put(value, nodes = new IntegerArray());    |	             nodes = new IntegerArray();
	}						      |	            _index.put(value, nodes);
	nodes.add(node);				      |	        }
							      >	        nodes.add(node);
		_nodes = other._nodes;			      |			_nodes = (IntegerArray)other._nodes.clone();
							      >			 nodes = (IntegerArray)nodes.clone();
	_nodes = (IntegerArray) _index.get(value);	      |	        IntegerArray nodes = (IntegerArray) _index.get(value)
	_position = 0;					      |	        _nodes = (nodes != null) ? (IntegerArray) nodes.clone
							      >	        _position = 0;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/LoadDocument.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/LoadDocument.java
 * $Id: LoadDocument.java,v 1.25 2004/02/16 22:54:59 minchau  |	 * $Id: LoadDocument.java,v 1.26 2004/03/10 00:15:46 bhakti E
							      >	                if (xslURI == null )
							      >	                    xslURI = "";
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/MultiDOM.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/MultiDOM.java
 * $Id: MultiDOM.java,v 1.31 2004/02/16 22:54:59 minchau Exp  |	 * $Id: MultiDOM.java,v 1.32 2004/12/15 17:35:44 jycli Exp $
							      >	import org.apache.xml.dtm.Axis;
	    return Axis.isReverse[_axis];		      |	            return Axis.isReverse(_axis);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/MultipleNodeCounter.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/MultipleNodeCounter.java
 * $Id: MultipleNodeCounter.java,v 1.4 2004/02/16 22:54:59 mi |	 * $Id: MultipleNodeCounter.java,v 1.6 2005/02/04 18:26:12 jy
							      >	import org.apache.xml.dtm.Axis;
	_precSiblings = _document.getAxisIterator(PRECEDINGSI |	    _precSiblings = _document.getAxisIterator(Axis.PRECEDINGS
	    return formatNumbers(_value);		      |	            //See Errata E24
							      >	            if (_value == 0) return "0";
							      >	            else if (Double.isNaN(_value)) return "NaN";
							      >	            else if (_value < 0 && Double.isInfinite(_value))
							      >	            else if (Double.isInfinite(_value)) return "Infin
							      >		    else return formatNumbers((int)_value);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/NodeCounter.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/NodeCounter.java
 * $Id: NodeCounter.java,v 1.10 2004/02/16 22:54:59 minchau E |	 * $Id: NodeCounter.java,v 1.14 2005/02/04 18:26:12 jycli Exp
							      >	import org.apache.xml.dtm.Axis;
public abstract class NodeCounter implements Axis {	      |	public abstract class NodeCounter {
    protected int _value = Integer.MIN_VALUE;		      |	    protected double _value = Integer.MIN_VALUE;
    private boolean separFirst = true;			      |	    private boolean _separFirst = true;
    private boolean separLast = false;			      |	    private boolean _separLast = false;
    private Vector separToks = null;			      |	    private Vector _separToks = new Vector();
    private Vector formatToks = null;			      |	    private Vector _formatToks = new Vector();
    private int nSepars  = 0;				      |	    private int _nSepars  = 0;
    private int nFormats = 0;				      |	    private int _nFormats = 0;
    private static String[] Thousands = 		      |	    private final static String[] Thousands = 
    private static String[] Hundreds = 			      |	    private final static String[] Hundreds = 
	{"", "c", "cc", "ccc", "cd", "d", "dc", "dcc", "dccc" |	    {"", "c", "cc", "ccc", "cd", "d", "dc", "dcc", "dccc", "c
    private static String[] Tens = 			      |	    private final static String[] Tens = 
	{"", "x", "xx", "xxx", "xl", "l", "lx", "lxx", "lxxx" |	    {"", "x", "xx", "xxx", "xl", "l", "lx", "lxx", "lxxx", "x
    private static String[] Ones = 			      |	    private final static String[] Ones = 
	{"", "i", "ii", "iii", "iv", "v", "vi", "vii", "viii" |	    {"", "i", "ii", "iii", "iv", "v", "vi", "vii", "viii", "i
							      |	  
							      >	  private StringBuffer _tempBuffer = new StringBuffer();
							      >	    
			  DOM document, DTMAxisIterator itera |	              DOM document, DTMAxisIterator iterator) {
	_translet = translet;				      |	    _translet = translet;
	_document = document;				      |	    _document = document;
	_iterator = iterator;				      |	    _iterator = iterator;
    public NodeCounter setValue(int value) {		      |	    public NodeCounter setValue(double value) {
	_value = value;					      |	    _value = value;
	return this;					      |	    return this;
				 String groupSep, String grou |	                 String groupSep, String groupSize) {
	_lang = lang;					      |	    _lang = lang;
	_format = format;				      |	    _groupSep = groupSep;
	_groupSep = groupSep;				      |	    _letterValue = letterValue;
	_letterValue = letterValue;			      |
							      |	    try {
	try {						      |	        _groupSize = Integer.parseInt(groupSize);
	    _groupSize = Integer.parseInt(groupSize);	      |	    }
	}						      |	    catch (NumberFormatException e) {
	catch (NumberFormatException e) {		      |	       _groupSize = 0;
	    _groupSize = 0;				      |	    }
	}						      |	    setTokens(format);
							      |
	final int length = _format.length();		      |	 }
	boolean isFirst = true;				      |	  
	separFirst = true;				      |	  // format == null assumed here 
	separLast = false;				      |	 private final void setTokens(final String format){
							      |	     if( (_format!=null) &&(format.equals(_format)) ){// has 
        separToks = new Vector();			      |	        return;
        formatToks = new Vector();			      |	     }
							      |	     _format = format;
	/* 						      |	     // reset
	 * Tokenize the format string into alphanumeric and n |	     final int length = _format.length();
	 * tokens as described in M. Kay page 241.	      |	     boolean isFirst = true;
	 */						      |	     _separFirst = true;
	for (int j = 0, i = 0; i < length;) {		      |	     _separLast = false;
            char c = _format.charAt(i);			      |	     _nSepars  = 0;
            for (j = i; Character.isLetterOrDigit(c);) {      |	     _nFormats = 0;
                if (++i == length) break;		      |	     _separToks.clear() ;
		c = _format.charAt(i);			      |	     _formatToks.clear();
            }						      |
            if (i > j) {				      |	         /* 
                if (isFirst) {				      |	          * Tokenize the format string into alphanumeric and 
                    separToks.addElement(".");		      |	          * tokens as described in M. Kay page 241.
                    isFirst = separFirst = false;	      |	          */
                }					      |	         for (int j = 0, i = 0; i < length;) {
                formatToks.addElement(_format.substring(j, i) |	                 char c = format.charAt(i);
            }						      |	                 for (j = i; Character.isLetterOrDigit(c);) {
							      |	                     if (++i == length) break;
            if (i == length) break;			      |	             c = format.charAt(i);
							      |	                 }
            c = _format.charAt(i);			      |	                 if (i > j) {
            for (j = i; !Character.isLetterOrDigit(c);) {     |	                     if (isFirst) {
                if (++i == length) break;		      |	                         _separToks.addElement(".");
                c = _format.charAt(i);			      |	                         isFirst = _separFirst = false;
                isFirst = false;			      |	                     }
            }						      |	                     _formatToks.addElement(format.substring(
            if (i > j) {				      |	                 }
                separToks.addElement(_format.substring(j, i)) |
            }						      |	                 if (i == length) break;
        }						      |
							      |	                 c = format.charAt(i);
	nSepars = separToks.size();			      |	                 for (j = i; !Character.isLetterOrDigit(c);) 
	nFormats = formatToks.size(); 			      |	                     if (++i == length) break;
	if (nSepars > nFormats) separLast = true;	      |	                     c = format.charAt(i);
							      |	                     isFirst = false;
	if (separFirst) nSepars--;			      |	                 }
	if (separLast) nSepars--;			      |	                 if (i > j) {
	if (nSepars == 0) {				      |	                     _separToks.addElement(format.substring(j
	    separToks.insertElementAt(".", 1);		      |	                 }
 	    nSepars++;					      |	             }
	}						      |
	if (separFirst) nSepars ++;			      |	         _nSepars = _separToks.size();
    }							      |	         _nFormats = _formatToks.size(); 
							      |	         if (_nSepars > _nFormats) _separLast = true;
							      >
							      >	         if (_separFirst) _nSepars--;
							      >	         if (_separLast) _nSepars--;
							      >	         if (_nSepars == 0) {
							      >	             _separToks.insertElementAt(".", 1);
							      >	             _nSepars++;
							      >	         }
							      >	         if (_separFirst) _nSepars ++;
							      >	 
							      >	 }
	setFormatting("1", "en", "alphabetic", null, null);   |	    setFormatting("1", "en", "alphabetic", null, null);
	return this;					      |	    return this;
			     String groupSep, String groupSiz |	                String groupSep, String groupSize) {
	setFormatting(format, lang, letterValue, groupSep, gr |	    setFormatting(format, lang, letterValue, groupSep, groupS
	return getCounter();				      |	    return getCounter();
	return _nodeType == _document.getExpandedTypeID(node) |	    return _nodeType == _document.getExpandedTypeID(node);
	return false;					      |	    return false;
	return formatNumbers(new int[] { value });	      |	    return formatNumbers(new int[] { value });
	final int nValues = values.length;		      |	    final int nValues = values.length;
	final int length = _format.length();		      |	    final int length = _format.length();
	boolean isEmpty = true;				      |	    boolean isEmpty = true;
	for (int i = 0; i < nValues; i++)		      |	    for (int i = 0; i < nValues; i++)
	    if (values[i] != Integer.MIN_VALUE)		      |	        if (values[i] != Integer.MIN_VALUE)
		isEmpty = false;			      |	        isEmpty = false;
	if (isEmpty) return("");			      |	    if (isEmpty) return("");
							      |
	// Format the output string using the values array an |	    // Format the output string using the values array and th
	boolean isFirst = true;				      |	    boolean isFirst = true;
	int t = 0, n = 0, s = 1;			      |	    int t = 0, n = 0, s = 1;
	final StringBuffer buffer = new StringBuffer();	      |	  _tempBuffer.setLength(0);
							      |	    final StringBuffer buffer = _tempBuffer;
	// Append separation token before first digit/letter/ |
	if (separFirst) buffer.append((String)separToks.eleme |	    // Append separation token before first digit/letter/nume
							      |	    if (_separFirst) buffer.append((String)_separToks.element
	// Append next digit/letter/numeral and separation to |
	while (n < nValues) {				      |	    // Append next digit/letter/numeral and separation token
	    final int value = values[n];		      |	    while (n < nValues) {
	    if (value != Integer.MIN_VALUE) {		      |	        final int value = values[n];
		if (!isFirst) buffer.append((String) separTok |	        if (value != Integer.MIN_VALUE) {
		formatValue(value, (String)formatToks.element |	        if (!isFirst) buffer.append((String) _separToks.eleme
		if (t == nFormats) t--;			      |	        formatValue(value, (String)_formatToks.elementAt(t++)
		if (s >= nSepars) s--;			      |	        if (t == _nFormats) t--;
		isFirst = false;			      |	        if (s >= _nSepars) s--;
	    }						      |	        isFirst = false;
	    n++;					      |	        }
	}						      |	        n++;
							      |	    }
	// Append separation token after last digit/letter/nu |
	if (separLast) buffer.append((String)separToks.lastEl |	    // Append separation token after last digit/letter/numera
	return buffer.toString();			      |	    if (_separLast) buffer.append((String)_separToks.lastElem
							      >	    return buffer.toString();
	else if (c == 'i' && !_letterValue.equals("alphabetic |	    else if (c == 'i' && !_letterValue.equals("alphabetic")) 
	else if (c == 'I' && !_letterValue.equals("alphabetic |	    else if (c == 'I' && !_letterValue.equals("alphabetic")) 
	else {						      |	    else {
	    int min = (int) c;				      |	        int min = (int) c;
	    int max = (int) c;				      |	        int max = (int) c;
							      |
	    // Special case for Greek alphabet 		      |	        // Special case for Greek alphabet 
	    if (c >= 0x3b1 && c <= 0x3c9) {		      |	        if (c >= 0x3b1 && c <= 0x3c9) {
		max = 0x3c9;	// omega		      |	        max = 0x3c9;    // omega
	    }						      |	        }
	    else {					      |	        else {
		// General case: search for end of group      |	        // General case: search for end of group
		while (Character.isLetterOrDigit((char) (max  |	        while (Character.isLetterOrDigit((char) (max + 1))) {
		    max++;				      |	            max++;
		}					      |	        }
	    }						      |	        }
	    return "" + value;				      |	        return "" + value;
	}						      |	    }
	else {						      |	    else {
	    return "" + n;				      |	        return "" + n;
	}						      |	    }
	    Thousands[n / 1000] +			      |	        Thousands[n / 1000] +
	    Hundreds[(n / 100) % 10] +			      |	        Hundreds[(n / 100) % 10] +
	    Tens[(n/10) % 10] +				      |	        Tens[(n/10) % 10] +
	    Ones[n % 10];				      |	        Ones[n % 10];
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:35 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:35
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = -5948733
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/SAXImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/SAXImpl.java
 * $Id: SAXImpl.java,v 1.19 2004/02/24 04:21:50 zongaro Exp $ |	 * $Id: SAXImpl.java,v 1.20 2004/12/15 17:35:44 jycli Exp $
							      >	import org.apache.xml.dtm.Axis;
                BasisLibrary.runTimeError(BasisLibrary.AXIS_S |	                BasisLibrary.runTimeError(BasisLibrary.AXIS_S
							      >	                        Axis.getNames(axis));
                BasisLibrary.runTimeError(BasisLibrary.TYPED_ |	                BasisLibrary.runTimeError(BasisLibrary.TYPED_
							      >	                        Axis.getNames(axis));
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/SimpleResultTreeImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/SimpleResultTreeImpl.java
 * $Id: SimpleResultTreeImpl.java,v 1.7 2004/02/16 22:54:59 m |	 * $Id: SimpleResultTreeImpl.java,v 1.8 2004/12/15 17:35:44 j
							      >	import org.apache.xml.dtm.Axis;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/dom/SingleNodeCounter.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/dom/SingleNodeCounter.java
 * Copyright 2001-2004 The Apache Software Foundation.	      |	 * Copyright 2001-2005 The Apache Software Foundation.
 * $Id: SingleNodeCounter.java,v 1.5 2004/02/16 22:54:59 minc |	 * $Id: SingleNodeCounter.java,v 1.8 2005/03/11 23:26:09 jycl
							      >	import org.apache.xml.dtm.Axis;
							      >
	_countSiblings = _document.getAxisIterator(PRECEDINGS |	    _countSiblings = _document.getAxisIterator(Axis.PRECEDING
	    result = _value;				      |	                //See Errata E24
							      >	                if (_value == 0) return "0";
							      >	                else if (Double.isNaN(_value)) return "NaN";
							      >	                else if (_value < 0 && Double.isInfinite(_val
							      >	                else if (Double.isInfinite(_value)) return "I
							      >	                else result = (int) _value;
		_document.getTypedAxisIterator(PRECEDINGSIBLI |	        _document.getTypedAxisIterator(Axis.PRECEDINGSIBLING,
		result = _value;			      |	                //See Errata E24
							      >	                if (_value == 0) return "0";
							      >	                else if (Double.isNaN(_value)) return "NaN";
							      >	                else if (_value < 0 && Double.isInfinite(_val
							      >	                else if (Double.isInfinite(_value)) return "I
							      >	                else result = (int) _value;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/AbstractTranslet.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/AbstractTranslet.java
 * $Id: AbstractTranslet.java,v 1.52 2004/02/16 22:55:55 minc |	 * $Id: AbstractTranslet.java,v 1.58 2005/07/11 13:18:28 zong
							      >	import java.io.File;
							      >	import javax.xml.parsers.DocumentBuilderFactory;
							      >	import org.w3c.dom.Document;
							      >	import org.w3c.dom.DOMImplementation;
							      >	import javax.xml.parsers.ParserConfigurationException;
							      >	    public int _indentamount = -1;
     *   @name is the name of the index (the key or ##id)     |	     *   @param name is the name of the index (the key or ##i
     *   @node is the node id of the node to insert	      |	     *   @param node is the node id of the node to insert
     *   @value is the value that will look up the node in th |	     *   @param value is the value that will look up the node
     *   @name is the name of the index (the key or ##id)     |	     *   @param name is the name of the index (the key or ##i
     *   @node is the DOM				      |	     *   @param dom is the DOM
							      >	            String dirStr = new File(filename).getParent();
							      >	            if ((null != dirStr) && (dirStr.length() > 0)) {
							      >	               File dir = new File(dirStr);
							      >	               dir.mkdirs();
							      >	            }
							      >
	transform(document, document.getIterator(), handler); |	        try {
							      >	            transform(document, document.getIterator(), handl
							      >	        } finally {
							      >	            _keyIndexes = null;
							      >	        }
							      >			handler.setIndentAmount(_indentamount);
							      >	    
							      >	    /********************************************************
							      >	     * DOMImplementation caching for basis library
							      >	     ********************************************************
							      >	    protected DOMImplementation _domImplementation = null;
							      >	    
							      >	    public Document newDocument(String uri, String qname) 
							      >	        throws ParserConfigurationException 
							      >	    {
							      >	        if (_domImplementation == null) {
							      >	            _domImplementation = DocumentBuilderFactory.newIn
							      >	                .newDocumentBuilder().getDOMImplementation();
							      >	        }
							      >	        return _domImplementation.createDocument(uri, qname, 
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/BasisLibrary.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/BasisLibrary.java
 * $Id: BasisLibrary.java,v 1.76 2004/02/27 01:59:31 zongaro  |	 * $Id: BasisLibrary.java,v 1.83 2005/07/13 04:43:27 minchau 
import javax.xml.parsers.DocumentBuilder;		      <
import javax.xml.parsers.DocumentBuilderFactory;	      <
import org.apache.xalan.xsltc.dom.Axis;			      |	import org.apache.xml.dtm.Axis;
import org.apache.xml.utils.XMLChar;			      |	import org.apache.xml.utils.XML11Char;
public final class BasisLibrary implements Operators {	      |	public final class BasisLibrary {
	    runTimeError(INVALID_ARGUMENT_ERR, className, "nu |		    runTimeError(INVALID_ARGUMENT_ERR, className, "bo
							      >	     * Utility function to throw a runtime error on the use o
							      >	     * function when the secure processing feature is set to 
							      >	     */
							      >	    public static void unallowed_extension_functionF(String n
							      >	        runTimeError(UNALLOWED_EXTENSION_FUNCTION_ERR, name);
							      >	    }
							      >
							      >	    /**
							      >	     * Utility function to throw a runtime error on the use o
							      >	     * element when the secure processing feature is set to t
							      >	     */
							      >	    public static void unallowed_extension_elementF(String na
							      >	        runTimeError(UNALLOWED_EXTENSION_ELEMENT_ERR, name);
							      >	    }
							      >
							      >	    /**
	case EQ:					      |	    case Operators.EQ:
	case NE:					      |	    case Operators.NE:
	case GT:					      |	    case Operators.GT:
	case LT:					      |	    case Operators.LT:
	case GE:					      |	    case Operators.GE:
							      |	        
	case LE:					      |	    case Operators.LE:
                    if (op == EQ) {			      |	                    if (op == Operators.EQ) {
                    } else if (op == NE) {		      |	                    } else if (op == Operators.NE) {
	case EQ:					      |	    case Operators.EQ:
	case NE:					      |	    case Operators.NE:
	case LT:					      |	    case Operators.LT:
	case GT:					      |	    case Operators.GT:
	case EQ:					      |	    case Operators.EQ:
	case NE:					      |	    case Operators.NE:
	case GT:					      |	    case Operators.GT:
	case LT:					      |	    case Operators.LT:
	case GE:					      |	    case Operators.GE:
	case LE:					      |	    case Operators.LE:
	if (op != EQ && op != NE) {			      |	    if (op != Operators.EQ && op != Operators.NE) {
		case GT:				      |	        case Operators.GT:
		case LT:				      |	        case Operators.LT:
		case GE:				      |	        case Operators.GE:
		case LE:				      |	        case Operators.LE:
		default:				      |	        default:
		// swap operands			      |			// swap operands and operator
							      >	                op = Operators.swapOp(op);
	DocumentBuilderFactory dfac = DocumentBuilderFactory. |		Document doc = null;
	DocumentBuilder docbldr = null;			      <
	    docbldr = dfac.newDocumentBuilder();	      |		    doc = ((AbstractTranslet) translet).newDocument("
	} catch (javax.xml.parsers.ParserConfigurationExcepti |		} 
							      >	        catch (javax.xml.parsers.ParserConfigurationException
							      <
	// create new w3c DOM				      |	        
	Document doc = docbldr.newDocument();		      <
        org.w3c.dom.Node topElementNode = 		      <
            doc.appendChild(doc.createElementNS("", "__top__" <
							      <
        copyNodes(nodeList, doc, topElementNode);	      |	        copyNodes(nodeList, doc, doc.getDocumentElement());
                if (!XMLChar.isValidNCName(oriPrefix)) {      |	                if (!XML11Char.isXML11ValidNCName(oriPrefix))
            if (!XMLChar.isValidNCName(newPrefix)) {	      |	            if (!XML11Char.isXML11ValidNCName(newPrefix)) {
        if ((!XMLChar.isValidNCName(localName))||(localName.e |	        if ((!XML11Char.isXML11ValidNCName(localName))||(loca
        if (!XMLChar.isValidNCName(name)) {		      |	        if (!XML11Char.isXML11ValidNCName(name)) {
        if (!XMLChar.isValidQName(name)) {		      |	        if (!XML11Char.isXML11ValidQName(name)) {
							      >	    public static final String UNALLOWED_EXTENSION_FUNCTION_E
							      >	    public static final String UNALLOWED_EXTENSION_ELEMENT_ER
    protected static ResourceBundle m_bundle;		      |	    private static ResourceBundle m_bundle;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ca.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ca.java
 * $Id: ErrorMessages_ca.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_ca.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_cs.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_cs.java
 * $Id: ErrorMessages_cs.java,v 1.2 2004/02/16 22:55:55 minch |	 * $Id: ErrorMessages_cs.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_de.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_de.java
 * $Id: ErrorMessages_de.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_de.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_es.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_es.java
 * $Id: ErrorMessages_es.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_es.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_fr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_fr.java
 * $Id: ErrorMessages_fr.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_fr.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_hu.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_hu.java
 * $Id: ErrorMessages_hu.java,v 1.2 2004/02/16 22:55:55 minch |	 * $Id: ErrorMessages_hu.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_it.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_it.java
 * $Id: ErrorMessages_it.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_it.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ja.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ja.java
 * $Id: ErrorMessages_ja.java,v 1.2 2004/02/16 22:55:55 minch |	 * $Id: ErrorMessages_ja.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages.java
 * $Id: ErrorMessages.java,v 1.10 2004/02/24 03:55:48 zongaro |	 * $Id: ErrorMessages.java,v 1.12 2005/06/08 13:10:08 mkwan E
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
    };							      |	        
							      >	        {BasisLibrary.UNALLOWED_EXTENSION_FUNCTION_ERR,
							      >	        "Use of the extension function ''{0}'' is not allowed
    public Object[][] getContents() {			      |	        {BasisLibrary.UNALLOWED_EXTENSION_ELEMENT_ERR,
        return m_errorMessages;				      |	        "Use of the extension element ''{0}'' is not allowed 
							      >	    };
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ko.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ko.java
 * $Id: ErrorMessages_ko.java,v 1.2 2004/02/16 22:55:55 minch |	 * $Id: ErrorMessages_ko.java,v 1.3 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_no.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_no.java
 * $Id: ErrorMessages_no.java,v 1.5 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_no.java,v 1.6 2004/12/15 17:35:45 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
	{BasisLibrary.RUN_TIME_INTERNAL_ERR,		      |	     *
	"Intern programfeil i ''{0}''"},		      |	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      >	    {BasisLibrary.RUN_TIME_INTERNAL_ERR,
							      >	    "Intern programfeil i ''{0}''"},
	{BasisLibrary.RUN_TIME_COPY_ERR,		      |	    {BasisLibrary.RUN_TIME_COPY_ERR,
	"Programfeil under utf\u00f8ing av <xsl:copy>."},     |	    "Programfeil under utf\u00f8ing av <xsl:copy>."},
	{BasisLibrary.DATA_CONVERSION_ERR,		      |	    {BasisLibrary.DATA_CONVERSION_ERR,
	"Ugyldig konvertering av ''{0}'' fra ''{1}''."},      |	    "Ugyldig konvertering av ''{0}'' fra ''{1}''."},
	{BasisLibrary.EXTERNAL_FUNC_ERR,		      |	    {BasisLibrary.EXTERNAL_FUNC_ERR,
	"Ekstern funksjon ''{0}'' er ikke st\u00f8ttet av XSL |	    "Ekstern funksjon ''{0}'' er ikke st\u00f8ttet av XSLTC."
	{BasisLibrary.EQUALITY_EXPR_ERR,		      |	    {BasisLibrary.EQUALITY_EXPR_ERR,
	"Ugyldig argument i EQUALITY uttrykk."},	      |	    "Ugyldig argument i EQUALITY uttrykk."},
	{BasisLibrary.INVALID_ARGUMENT_ERR,		      |	    {BasisLibrary.INVALID_ARGUMENT_ERR,
	"Ugyldig argument ''{0}'' i kall til ''{1}''"},	      |	    "Ugyldig argument ''{0}'' i kall til ''{1}''"},
	{BasisLibrary.FORMAT_NUMBER_ERR,		      |	    {BasisLibrary.FORMAT_NUMBER_ERR,
	"Fors\u00f8k p\u00e5 \u00e5 formattere nummer ''{0}'' |	    "Fors\u00f8k p\u00e5 \u00e5 formattere nummer ''{0}'' med
	{BasisLibrary.ITERATOR_CLONE_ERR,		      |	    {BasisLibrary.ITERATOR_CLONE_ERR,
	"Kan ikke klone iterator ''{0}''."},		      |	    "Kan ikke klone iterator ''{0}''."},
	{BasisLibrary.AXIS_SUPPORT_ERR,			      |	    {BasisLibrary.AXIS_SUPPORT_ERR,
	"Iterator for axis ''{0}'' er ikke st\u00e8ttet."},   |	    "Iterator for axis ''{0}'' er ikke st\u00e8ttet."},
	{BasisLibrary.TYPED_AXIS_SUPPORT_ERR,		      |	    {BasisLibrary.TYPED_AXIS_SUPPORT_ERR,
	"Iterator for typet axis ''{0}'' er ikke st\u00e8ttet |	    "Iterator for typet axis ''{0}'' er ikke st\u00e8ttet."},
	{BasisLibrary.STRAY_ATTRIBUTE_ERR,		      |	    {BasisLibrary.STRAY_ATTRIBUTE_ERR,
	"Attributt ''{0}'' utenfor element."},		      |	    "Attributt ''{0}'' utenfor element."},
	{BasisLibrary.STRAY_NAMESPACE_ERR,		      |	    {BasisLibrary.STRAY_NAMESPACE_ERR,
	"Navnedeklarasjon ''{0}''=''{1}'' utenfor element."}, |	    "Navnedeklarasjon ''{0}''=''{1}'' utenfor element."},
	{BasisLibrary.NAMESPACE_PREFIX_ERR,		      |	    {BasisLibrary.NAMESPACE_PREFIX_ERR,
	"Prefix ''{0}'' er ikke deklartert."},		      |	    "Prefix ''{0}'' er ikke deklartert."},
	{BasisLibrary.DOM_ADAPTER_INIT_ERR,		      |	    {BasisLibrary.DOM_ADAPTER_INIT_ERR,
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_pl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_pl.java
 * $Id: ErrorMessages_pl.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_pl.java,v 1.3 2004/12/15 17:35:46 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_pt_BR.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_pt_BR.java
 * $Id: ErrorMessages_pt_BR.java,v 1.2 2004/02/16 22:55:55 mi |	 * $Id: ErrorMessages_pt_BR.java,v 1.3 2004/12/15 17:35:46 jy
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ru.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_ru.java
 * $Id: ErrorMessages_ru.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_ru.java,v 1.3 2004/12/15 17:35:46 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_sk.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_sk.java
 * $Id: ErrorMessages_sk.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_sk.java,v 1.3 2004/12/15 17:35:46 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_tr.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_tr.java
 * $Id: ErrorMessages_tr.java,v 1.2 2004/02/16 22:55:54 minch |	 * $Id: ErrorMessages_tr.java,v 1.3 2004/12/15 17:35:46 jycli
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_zh_CN.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_zh_CN.java
 * $Id: ErrorMessages_zh_CN.java,v 1.2 2004/02/16 22:55:54 mi |	 * $Id: ErrorMessages_zh_CN.java,v 1.3 2004/12/15 17:35:46 jy
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_zh_TW.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ErrorMessages_zh_TW.java
 * $Id: ErrorMessages_zh_TW.java,v 1.2 2004/02/16 22:55:54 mi |	 * $Id: ErrorMessages_zh_TW.java,v 1.3 2004/12/15 17:35:46 jy
    private static final Object[][] m_errorMessages = {	      |	    /** Get the lookup table for error messages.   
							      >	     *
							      >	     * @return The message lookup table.
							      >	     */
							      >	    public Object[][] getContents()
							      >	    {
							      >	      return new Object[][] {
							      <
    public Object[][] getContents() {			      <
        return m_errorMessages;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.1 2004/02/23 17:29:35 aruny Ex |	 * $Id: ObjectFactory.java,v 1.4 2004/08/17 18:48:36 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.1 2004/02/23 17:29:35 |	 * @version $Id: ObjectFactory.java,v 1.4 2004/08/17 18:48:36
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = -2293620
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/Operators.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/Operators.java
 * $Id: Operators.java,v 1.3 2004/02/16 22:55:54 minchau Exp  |	 * $Id: Operators.java,v 1.6 2004/12/15 17:35:46 jycli Exp $
public interface Operators {				      |	public final class Operators {
							      |
    public static final String[] names = {		      |	    private static final String[] names = {
	"=", "!=", ">", "<", ">=", "<="			      |	    "=", "!=", ">", "<", ">=", "<="
							      >	    };
							      >	    
							      >	    public static final String getOpNames(int operator) {
							      >	          return names[operator];
							      >	    }
							      >	    
							      >	//  Swap operator array
							      >	    private static final int[] swapOpArray = {
							      >	        EQ,     // EQ
							      >	        NE,     // NE
							      >	        LT,     // GT
							      >	        GT,     // LT 
							      >	        LE,     // GE 
							      >	        GE      // LE
							      >
							      >	    public static final int swapOp(int operator) {
							      >	          return swapOpArray[operator];
							      >	    }    
							      >	      
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/runtime/output/TransletOutputHandlerFactory.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/runtime/output/TransletOutputHandlerFactory.java
 * $Id: TransletOutputHandlerFactory.java,v 1.16 2004/02/16 2 |	 * $Id: TransletOutputHandlerFactory.java,v 1.17 2005/05/20 1
							      >	    private Node   _nextSibling    = null;
							      >	    
							      >	    public void setNextSibling(Node nextSibling) {
							      >	        _nextSibling = nextSibling;
							      >	    }
                _handler = (_node != null) ? new SAX2DOM(_nod |	                _handler = (_node != null) ? new SAX2DOM(_nod
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/TransletException.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/TransletException.java
 * $Id: TransletException.java,v 1.4 2004/02/16 20:54:58 minc |	 * $Id: TransletException.java,v 1.5 2004/08/17 18:48:34 jycl
							      >	    static final long serialVersionUID = -878916829521217293L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/DOM2TO.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/DOM2TO.java
 * $Id: DOM2TO.java,v 1.9 2004/02/20 19:30:40 bhakti Exp $    |	 * $Id: DOM2TO.java,v 1.10 2004/12/10 18:39:15 santiagopg Exp
							      >	            int colon;
	    // Process all other attributes		      |		    // Process all namespace attributes first
            NamespaceMappings nm = new NamespaceMappings();   <
		int colon;				      <
							      >	                // Is this a namespace declaration?
			: EMPTYSTRING;			      |				                 : EMPTYSTRING;
		else {					      |		    }
							      >	            
							      >		    // Process all non-namespace attributes next
							      >	            NamespaceMappings nm = new NamespaceMappings();
							      >		    for (int i = 0; i < length; i++) {
							      >			final Node attr = map.item(i);
							      >			final String qnameAttr = attr.getNodeName();
							      >
							      >	                // Is this a regular attribute?
							      >			if (!qnameAttr.startsWith(XMLNS_PREFIX)) {
		        _handler.addAttribute((prefix + ":" + |			        _handler.addAttribute((prefix + ":" +
                            , attr.getNodeValue());	      |	                            attr.getNodeValue());
		final int colon = qname.lastIndexOf(':');     |			colon = qname.lastIndexOf(':');
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:36 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:36 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:36 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:48:36
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = -1877553
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/SAX2DOM.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/SAX2DOM.java
 * $Id: SAX2DOM.java,v 1.18 2004/02/16 22:57:21 minchau Exp $ |	 * $Id: SAX2DOM.java,v 1.20 2005/05/20 15:30:23 mkwan Exp $
							      >
							      >	import org.w3c.dom.Text;
							      >	    private Node _nextSibling = null;
							      >	    private Node _lastSibling = null;
    public SAX2DOM(Node root) throws ParserConfigurationExcep |	    public SAX2DOM(Node root, Node nextSibling) throws Parser
							      >		
							      >		_nextSibling = nextSibling;
							      >	    }
							      >	    
							      >	    public SAX2DOM(Node root) throws ParserConfigurationExcep
							      >	        this(root, null);
	if (last != _document) {			      |	        if (last != _document) {
	    final String text = new String(ch, start, length) |	            final String text = new String(ch, start, length)
	    last.appendChild(_document.createTextNode(text)); |	            if( _lastSibling != null && _lastSibling.getNodeT
	}						      |	                  ((Text)_lastSibling).appendData(text);
							      >	            }
							      >	            else if (last == _root && _nextSibling != null) {
							      >	                _lastSibling = last.insertBefore(_document.cr
							      >	            }
							      >	            else {
							      >	                _lastSibling = last.appendChild(_document.cre
							      >	            }
							      >	            
							      >	        }
	last.appendChild(tmp);				      |		
							      >		// If the SAX2DOM is created with a non-null next sib
							      >		// insert the result nodes before the next sibling un
							      >		if (last == _root && _nextSibling != null)
							      >		    last.insertBefore(tmp, _nextSibling);
							      >		else
							      >		    last.appendChild(tmp);
							      >		_lastSibling = null;
							      >		_lastSibling = null;
	if (pi != null)  last.appendChild(pi);		      |		if (pi != null){
							      >	          if (last == _root && _nextSibling != null)
							      >	              last.insertBefore(pi, _nextSibling);
							      >	          else
							      >	              last.appendChild(pi);
							      >	          
							      >	          _lastSibling = pi;
							      >	        }
	if (comment != null) last.appendChild(comment);	      |		if (comment != null){
							      >	          if (last == _root && _nextSibling != null)
							      >	              last.insertBefore(comment, _nextSibling);
							      >	          else
							      >	              last.appendChild(comment);
							      >	          
							      >	          _lastSibling = comment;
							      >	        }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/SmartTransformerFactoryImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/SmartTransformerFactoryImpl.java
 * $Id: SmartTransformerFactoryImpl.java,v 1.11 2004/02/23 10 |	 * $Id: SmartTransformerFactoryImpl.java,v 1.13 2005/05/31 15
							      >	import javax.xml.XMLConstants;
							      >	import org.apache.xalan.xsltc.compiler.util.ErrorMsg;
							      >	    /**
							      >	     * <p>Name of class as a constant to use for debugging.</
							      >	     */
							      >	    private static final String CLASS_NAME = "SmartTransforme
							      >	    
							      >	    /**
							      >	     * <p>State of secure processing feature.</p>
							      >	     */
							      >	    private boolean featureSecureProcessing = false;
							      >	     * <p>Set a feature for this <code>SmartTransformerFactor
							      >	     * or <code>Template</code>s created by this factory.</p>
							      >	     * 
							      >	     * <p>
							      >	     * Feature names are fully qualified {@link java.net.URI}
							      >	     * Implementations may define their own features.
							      >	     * An {@link TransformerConfigurationException} is thrown
							      >	     * <code>Transformer</code>s or <code>Template</code>s it
							      >	     * It is possible for an <code>TransformerFactory</code> 
							      >	     * </p>
							      >	     * 
							      >	     * <p>See {@link javax.xml.transform.TransformerFactory} 
							      >	     * 
							      >	     * @param name Feature name.
							      >	     * @param value Is feature state <code>true</code> or <co
							      >	     *  
							      >	     * @throws TransformerConfigurationException if this <cod
							      >	     *   or the <code>Transformer</code>s or <code>Template</
							      >	     * @throws NullPointerException If the <code>name</code> 
							      >	     */
							      >	    public void setFeature(String name, boolean value)
							      >	        throws TransformerConfigurationException {
							      >
							      >		// feature name cannot be null
							      >		if (name == null) {
							      >	            ErrorMsg err = new ErrorMsg(ErrorMsg.JAXP_SET_FEA
							      >	    	    throw new NullPointerException(err.toString());
							      >		}
							      >		// secure processing?
							      >		else if (name.equals(XMLConstants.FEATURE_SECURE_PROC
							      >		    featureSecureProcessing = value;		
							      >		    // all done processing feature
							      >		    return;
							      >		}
							      >		else {	
							      >		    // unknown feature
							      >	            ErrorMsg err = new ErrorMsg(ErrorMsg.JAXP_UNSUPPO
							      >	            throw new TransformerConfigurationException(err.t
							      >	        }
							      >	    }
							      >
							      >	    /**
							      >			
							      >		// feature name cannot be null
							      >		if (name == null) {
							      >	    	    ErrorMsg err = new ErrorMsg(ErrorMsg.JAXP_GET_FEA
							      >	    	    throw new NullPointerException(err.toString());
							      >		}
							      >
							      >		// Inefficient, but it really does not matter in a fu
							      >		for (int i = 0; i < features.length; i++) {
							      >		    if (name.equals(features[i]))
							      >			return true;
							      >		}
        // Inefficient, but it really does not matter in a fu |		// secure processing?
        for (int i=0; i<features.length; i++) {		      |		if (name.equals(XMLConstants.FEATURE_SECURE_PROCESSIN
            if (name.equals(features[i])) return true;	      |		    return featureSecureProcessing;
        // Feature not supported			      |		// unknown feature
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/TemplatesHandlerImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/TemplatesHandlerImpl.java
 * $Id: TemplatesHandlerImpl.java,v 1.25 2004/02/16 22:57:21  |	 * $Id: TemplatesHandlerImpl.java,v 1.26 2005/06/08 13:10:08 
							      >	import javax.xml.XMLConstants;
        _parser = new XSLTC().getParser();		      |	        XSLTC xsltc = new XSLTC();
							      >	        if (tfactory.getFeature(XMLConstants.FEATURE_SECURE_P
							      >	            xsltc.setSecureProcessing(true);
							      >	       
							      >	        _parser = xsltc.getParser();
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/TemplatesImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/TemplatesImpl.java
 * $Id: TemplatesImpl.java,v 1.34 2004/02/23 10:29:36 aruny E |	 * $Id: TemplatesImpl.java,v 1.36 2005/06/08 13:10:08 mkwan E
							      >	import javax.xml.XMLConstants;
							      |	    static final long serialVersionUID = 673094361519270707L;
							      >		}
							      >		
							      >		if (_tfactory.getFeature(XMLConstants.FEATURE_SECURE_
							      >		    transformer.setSecureProcessing(true);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/TransformerFactoryImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/TransformerFactoryImpl.java
 * $Id: TransformerFactoryImpl.java,v 1.73 2004/02/23 10:29:3 |	 * $Id: TransformerFactoryImpl.java,v 1.79 2005/06/08 13:10:0
							      >	import javax.xml.XMLConstants;
    protected static String DEFAULT_TRANSLET_NAME = "GregorSa |	    protected final static String DEFAULT_TRANSLET_NAME = "Gr
							      <
    /**							      <
     * Use a thread local variable to store a copy of an XML  <
     */							      <
    static ThreadLocal _xmlReader = new ThreadLocal();	      <
							      <
							      >	     * <p>State of secure processing feature.</p>
							      >	     */
							      >	    private boolean _isSecureProcessing = false;
							      >
							      >	    /**
							      >	     * <p>Set a feature for this <code>TransformerFactory</co
							      >	     * or <code>Template</code>s created by this factory.</p>
							      >	     * 
							      >	     * <p>
							      >	     * Feature names are fully qualified {@link java.net.URI}
							      >	     * Implementations may define their own features.
							      >	     * An {@link TransformerConfigurationException} is thrown
							      >	     * <code>Transformer</code>s or <code>Template</code>s it
							      >	     * It is possible for an <code>TransformerFactory</code> 
							      >	     * </p>
							      >	     * 
							      >	     * <p>See {@link javax.xml.transform.TransformerFactory} 
							      >	     * 
							      >	     * @param name Feature name.
							      >	     * @param value Is feature state <code>true</code> or <co
							      >	     *  
							      >	     * @throws TransformerConfigurationException if this <cod
							      >	     *   or the <code>Transformer</code>s or <code>Template</
							      >	     * @throws NullPointerException If the <code>name</code> 
							      >	     */
							      >	    public void setFeature(String name, boolean value)
							      >	        throws TransformerConfigurationException {
							      >
							      >		// feature name cannot be null
							      >		if (name == null) {
							      >	            ErrorMsg err = new ErrorMsg(ErrorMsg.JAXP_SET_FEA
							      >	    	    throw new NullPointerException(err.toString());
							      >		}		
							      >		// secure processing?
							      >		else if (name.equals(XMLConstants.FEATURE_SECURE_PROC
							      >		    _isSecureProcessing = value;		
							      >		    // all done processing feature
							      >		    return;
							      >		}
							      >		else {	
							      >		    // unknown feature
							      >	            ErrorMsg err = new ErrorMsg(ErrorMsg.JAXP_UNSUPPO
							      >	            throw new TransformerConfigurationException(err.t
							      >	        }
							      >	    }
							      >
							      >	    /**
							      >		// feature name cannot be null
							      >		if (name == null) {
							      >	    	    ErrorMsg err = new ErrorMsg(ErrorMsg.JAXP_GET_FEA
							      >	    	    throw new NullPointerException(err.toString());
							      >		}
							      >
							      >		// secure processing?
							      >		if (name.equals(XMLConstants.FEATURE_SECURE_PROCESSIN
							      >			return _isSecureProcessing;
							      >		}
							      >
							      >	                
							      >	                if (_isSecureProcessing) {
							      >	                    try {
							      >	                        factory.setFeature(XMLConstants.FEATU
							      >	                    }
							      >	                    catch (org.xml.sax.SAXException e) {}
							      >	                }
							      >	                
							      >		
							      >		if (_isSecureProcessing) {
							      >		    result.setSecureProcessing(true);
							      >		}
	    String message = messages.elementAt(pos).toString |		    ErrorMsg msg = (ErrorMsg)messages.elementAt(pos);
	    _errorListener.error(			      |		    // Workaround for the TCK failure ErrorListener.e
		new TransformerConfigurationException(message |		    if (msg.isWarningError())
							      >		        _errorListener.error(
							      >			    new TransformerConfigurationException(msg
							      >		    else
							      >		    	_errorListener.warning(
							      >			    new TransformerConfigurationException(msg
     * @param stylesheet The input stylesheet - DOMSource not |	     * @param source The input stylesheet - DOMSource not sup
							      >		if (_isSecureProcessing) xsltc.setSecureProcessing(tr
     * @param src The source of the transformation instructio |	     * @param templates The source of the transformation inst
     * @param exception The warning information encapsulated  |	     * @param e The warning information encapsulated in a tra
     * @param exception The warning information encapsulated  |	     * @param e warning information encapsulated in a transfo
     * @param exception The warning information encapsulated  |	     * @param e The warning information encapsulated in a tra
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/TransformerHandlerImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/TransformerHandlerImpl.java
 * $Id: TransformerHandlerImpl.java,v 1.18 2004/02/16 22:57:2 |	 * $Id: TransformerHandlerImpl.java,v 1.19 2004/07/15 05:07:2
							      >	import javax.xml.transform.dom.DOMResult;
							      >		if (_isIdentity && _result instanceof DOMResult) {
							      >		    ((DOMResult)_result).setNode(_transformer.getTran
							      >	        }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/TransformerImpl.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/TransformerImpl.java
 * $Id: TransformerImpl.java,v 1.80 2004/02/23 21:33:15 igorh |	 * $Id: TransformerImpl.java,v 1.86 2005/06/08 13:10:08 mkwan
							      >	     * A reference to the output stream, if we create one in 
							      >	     */
							      >	    private OutputStream _ostream = null;
							      >
							      >	    /**
							      >	     * State of the secure processing feature.
							      >	     */
							      >	    private boolean _isSecureProcessing = false;
							      >
							      >	    /**
							      >	     * Return the state of the secure processing feature.
							      >	     */
							      >	    public boolean isSecureProcessing() {
							      >	        return _isSecureProcessing;
							      >	    }
							      >	    
							      >	    /**
							      >	     * Set the state of the secure processing feature.
							      >	     */
							      >	    public void setSecureProcessing(boolean flag) {
							      >	        _isSecureProcessing = flag;
							      >	    }
							      >
							      >	    /**
							      >			_tohFactory.setNextSibling(((DOMResult) resul
		        new FileOutputStream(url.getFile())); |			        _ostream = new FileOutputStream(url.g
		    _tohFactory.setOutputStream(connection.ge |			    _tohFactory.setOutputStream(_ostream = co
		        new FileOutputStream(url.getFile())); |			        _ostream = new FileOutputStream(url.g
							      >	    
							      >	    /**
							      >	     * Returns the {@link org.apache.xalan.xsltc.runtime.outp
							      >	     * object that create the <code>TransletOutputHandler</co
							      >	     */
							      >	    protected TransletOutputHandlerFactory getTransletOutputH
							      >	        return _tohFactory;
							      >	    }
							      >
							      >		// If we create an output stream for the Result, we n
							      >		if (_ostream != null) {
							      >		    try {
							      >		        _ostream.close();
							      >		    }
							      >		    catch (IOException e) {}
							      >		    _ostream = null;
							      >		}
     * @param exception The warning information encapsulated  |	     * @param e The warning information encapsulated in a tra
     * @param exception The warning information encapsulated  |	     * @param e The warning information encapsulated in a tra
     * @param exception The warning information encapsulated  |	     * @param e The warning information encapsulated in a tra
							      >	    /**
							      >	     * This method resets  the Transformer to its original co
							      >	     * Transformer code is reset to the same state it was whe
							      >	     * created
							      >	     * @since 1.5
							      >	     */
							      >	    public void reset() {
							      >
							      >	        _method = null;
							      >	        _encoding = null;
							      >	        _sourceSystemId = null;
							      >	        _errorListener = this;
							      >	        _uriResolver = null;
							      >	        _dom = null;
							      >	        _parameters = null;
							      >	        _indentNumber = 0;
							      >	        setOutputProperties (null);
							      >
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/TrAXFilter.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/TrAXFilter.java
 * $Id: TrAXFilter.java,v 1.8 2004/02/16 22:57:21 minchau Exp |	 * $Id: TrAXFilter.java,v 1.9 2005/06/08 13:10:08 mkwan Exp $
							      >	import javax.xml.XMLConstants;
							      >	            
							      >	            if (_transformer.isSecureProcessing()) {
							      >	                try {
							      >	                    pfactory.setFeature(XMLConstants.FEATURE_
							      >	                }
							      >	                catch (SAXException e) {}
							      >	            }
							      >	            
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/trax/Util.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/trax/Util.java
 * $Id: Util.java,v 1.10 2004/02/16 22:57:21 minchau Exp $    |	 * $Id: Util.java,v 1.12 2005/06/08 13:10:08 mkwan Exp $
							      >	import javax.xml.XMLConstants;
							      >	                               
							      >	                               if (xsltc.isSecureProcessing()
							      >	                                  try {
							      >	                                      parserFactory.setFeatur
							      >	                                          XMLConstants.FEATUR
							      >	                                  }
							      >	                                  catch (org.xml.sax.SAXExcep
							      >	                               }
							      >	                               
							      >	                xsltc.setXMLReader(null);     // Clear old XM
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/util/IntegerArray.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/util/IntegerArray.java
 * $Id: IntegerArray.java,v 1.8 2004/02/16 22:58:24 minchau E |	 * $Id: IntegerArray.java,v 1.9 2004/06/21 19:05:16 igorh Exp
     * Merge two sorted arrays and eliminate duplicates.      |	     * Merge two sorted arrays and eliminate duplicates.
							      >	     * Elements of the other IntegerArray must not be changed
    public void merge(IntegerArray other) {		      |	    public void merge(final IntegerArray other) {
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xalan/xsltc/util/JavaCupRedirect.java xalan-j_2_7_0/src/org/apache/xalan/xsltc/util/JavaCupRedirect.java
 * $Id: JavaCupRedirect.java,v 1.3 2004/02/16 22:58:24 mincha |	 * $Id: JavaCupRedirect.java,v 1.4 2004/12/15 17:35:47 jycli 
 * @version $Id: JavaCupRedirect.java,v 1.3 2004/02/16 22:58: |	 * @version $Id: JavaCupRedirect.java,v 1.4 2004/12/15 17:35:
		 		     doSystemExit(systemExitO |	                     throw new RuntimeException(ERRMSG);
		 		     doSystemExit(systemExitO |	                     throw new RuntimeException(e.getMessage(
		 		     doSystemExit(systemExitO |	                     throw new RuntimeException(e.getMessage(
		 		     doSystemExit(systemExitO |	                     throw new RuntimeException();
		     doSystemExit(systemExitOK);	      <
    }							      <
    public static void doSystemExit (boolean doExit) {	      <
        if (doExit)					      <
            System.exit(-1);				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/Axis.java xalan-j_2_7_0/src/org/apache/xml/dtm/Axis.java
 * $Id: Axis.java,v 1.5 2004/02/16 23:03:44 minchau Exp $     |	 * $Id: Axis.java,v 1.6 2004/12/15 17:35:47 jycli Exp $
public interface Axis					      |	public final class Axis
							      |	  /**
  /** The names of the axes for diagnostic purposes. */	      |	   * A table to identify whether an axis is a reverse axis;
  public static final String[] names =			      |	   */
  {							      |	  private static final boolean[] isReverse = {
    "ancestor",  // 0					      |	      true,  // ancestor
    "ancestor-or-self",  // 1				      |	      true,  // ancestor-or-self
    "attribute",  // 2					      |	      false, // attribute
    "child",  // 3					      |	      false, // child
    "descendant",  // 4					      |	      false, // descendant
    "descendant-or-self",  // 5				      |	      false, // descendant-or-self
    "following",  // 6					      |	      false, // following
    "following-sibling",  // 7				      |	      false, // following-sibling
    "namespace-decls",  // 8				      |	      false, // namespace
    "namespace",  // 9					      |	      false, // namespace-declarations
    "parent",  // 10					      |	      false, // parent (one node, has no order)
    "preceding",  // 11					      |	      true,  // preceding
    "preceding-sibling",  // 12				      |	      true,  // preceding-sibling
    "self",  // 13					      |	      false  // self (one node, has no order)
    "all-from-node",  // 14				      <
    "preceding-and-ancestor",  // 15			      <
    "all",  // 16					      <
    "descendants-from-root",  // 17			      <
    "descendants-or-self-from-root",  // 18		      <
    "root",  // 19					      <
    "filtered-list"  // 20				      <
							      >
							      >	    /** The names of the axes for diagnostic purposes. */
							      >	    private static final String[] names =
							      >	    {
							      >	      "ancestor",  // 0
							      >	      "ancestor-or-self",  // 1
							      >	      "attribute",  // 2
							      >	      "child",  // 3
							      >	      "descendant",  // 4
							      >	      "descendant-or-self",  // 5
							      >	      "following",  // 6
							      >	      "following-sibling",  // 7
							      >	      "namespace-decls",  // 8
							      >	      "namespace",  // 9
							      >	      "parent",  // 10
							      >	      "preceding",  // 11
							      >	      "preceding-sibling",  // 12
							      >	      "self",  // 13
							      >	      "all-from-node",  // 14
							      >	      "preceding-and-ancestor",  // 15
							      >	      "all",  // 16
							      >	      "descendants-from-root",  // 17
							      >	      "descendants-or-self-from-root",  // 18
							      >	      "root",  // 19
							      >	      "filtered-list"  // 20
							      >	    };
							      >
							      >	  public static boolean isReverse(int axis){
							      >	      return isReverse[axis];
							      >	  }
							      >	    
							      >	    public static String getNames(int index){
							      >	    	return names[index];    
							      >	    }
							      >	    
							      >	    public static int getNamesLength(){
							      >	    	return names.length;
							      >	    }
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/DTMAxisTraverser.java xalan-j_2_7_0/src/org/apache/xml/dtm/DTMAxisTraverser.java
 * $Id: DTMAxisTraverser.java,v 1.4 2004/02/16 23:03:44 minch |	 * $Id: DTMAxisTraverser.java,v 1.5 2005/01/23 00:52:40 mcnam
   * @see first(int)					      |	   * @see #first(int)
   * @see first(int,int)				      |	   * @see #first(int,int)
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/DTMConfigurationException.java xalan-j_2_7_0/src/org/apache/xml/dtm/DTMConfigurationException.java
 * $Id: DTMConfigurationException.java,v 1.4 2004/02/16 23:03 |	 * $Id: DTMConfigurationException.java,v 1.6 2005/01/23 00:52
							      >	    static final long serialVersionUID = -4607874078818418046
     * @param e The exception to be encapsulated in a	      <
     * DTMConfigurationException			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/DTMDOMException.java xalan-j_2_7_0/src/org/apache/xml/dtm/DTMDOMException.java
 * $Id: DTMDOMException.java,v 1.5 2004/02/16 23:03:44 mincha |	 * $Id: DTMDOMException.java,v 1.6 2004/08/17 18:57:21 jycli 
							      >	    static final long serialVersionUID = 1895654266613192414L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/DTMException.java xalan-j_2_7_0/src/org/apache/xml/dtm/DTMException.java
 * $Id: DTMException.java,v 1.7 2004/02/16 23:03:44 minchau E |	 * $Id: DTMException.java,v 1.8 2004/08/17 16:17:42 mcnamara 
							      >	    static final long serialVersionUID = -775576419181334734L
        Throwable exception = getException();		      |	        boolean isJdk14OrHigher = false;
							      |	        try {
        for (int i = 0; (i < 10) && (null != exception); i++) |	            Throwable.class.getMethod("getCause",null);
            s.println("---------");			      |	            isJdk14OrHigher = true;
							      |	        } catch (NoSuchMethodException nsme) {
            try {					      |	            // do nothing
                if (exception instanceof DTMException) {      |	        }        
                    String locInfo =			      |
                        ((DTMException) exception)	      |	        // The printStackTrace method of the Throwable class 
                            .getLocationAsString();	      |	        // and higher will include the cause when printing th
							      |	        // The following code is only required when using jdk
                    if (null != locInfo) {		      |	        if (!isJdk14OrHigher) {
                        s.println(locInfo);		      |	            Throwable exception = getException();
							      >	    
							      >	            for (int i = 0; (i < 10) && (null != exception); 
							      >	                s.println("---------");
							      >	    
							      >	                try {
							      >	                    if (exception instanceof DTMException) {
							      >	                        String locInfo =
							      >	                            ((DTMException) exception)
							      >	                                .getLocationAsString();
							      >	    
							      >	                        if (null != locInfo) {
							      >	                            s.println(locInfo);
							      >	                        }
							      >	    
							      >	                    exception.printStackTrace(s);
							      >	                } catch (Throwable e) {
							      >	                    s.println("Could not print stack trace...
							      |	    
                exception.printStackTrace(s);		      |	                try {
            } catch (Throwable e) {			      |	                    Method meth =
                s.println("Could not print stack trace...");  |	                        ((Object) exception).getClass().getMe
            }						      |	                            null);
							      |	    
            try {					      |	                    if (null != meth) {
                Method meth =				      |	                        Throwable prev = exception;
                    ((Object) exception).getClass().getMethod |	    
                        null);				      |	                        exception = (Throwable) meth.invoke(e
							      |	    
                if (null != meth) {			      |	                        if (prev == exception) {
                    Throwable prev = exception;		      |	                            break;
							      |	                        }
                    exception = (Throwable) meth.invoke(excep |	                    } else {
							      |	                        exception = null;
                    if (prev == exception) {		      <
                        break;				      <
                } else {				      |	                } catch (InvocationTargetException ite) {
							      >	                    exception = null;
							      >	                } catch (IllegalAccessException iae) {
							      >	                    exception = null;
							      >	                } catch (NoSuchMethodException nsme) {
            } catch (InvocationTargetException ite) {	      <
                exception = null;			      <
            } catch (IllegalAccessException iae) {	      <
                exception = null;			      <
            } catch (NoSuchMethodException nsme) {	      <
                exception = null;			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/DTM.java xalan-j_2_7_0/src/org/apache/xml/dtm/DTM.java
 * $Id: DTM.java,v 1.13 2004/02/16 23:03:44 minchau Exp $     |	 * $Id: DTM.java,v 1.14 2005/01/23 00:52:40 mcnamara Exp $
   * @see getDocumentRoot(int nodeHandle)		      |	   * @see #getDocumentRoot(int nodeHandle)
   * @see getOwnerDocument(int nodeHandle)		      |	   * @see #getOwnerDocument(int nodeHandle)
   * @param nodeHandle The handle to the node in question.    <
   *							      <
   * @param postition int Handle of the node.		      <
   * @param postition int Handle of the node.		      <
   *							      <
   * @param the document handle				      |	   * @param documentHandle the document handle
   *							      <
   * NEEDSDOC @param documentHandle			      <
   *							      <
   * @param the document type declaration handle	      <
   *							      <
   *							      <
   * @param the document handle				      <
   *							      <
   * @param the attribute handle			      |	   * @param attributeHandle The attribute handle
   *							      <
   * NEEDSDOC @param attributeHandle			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/DTMManager.java xalan-j_2_7_0/src/org/apache/xml/dtm/DTMManager.java
 * $Id: DTMManager.java,v 1.18 2004/02/23 10:29:36 aruny Exp  |	 * $Id: DTMManager.java,v 1.20 2005/01/24 04:04:40 mcnamara E
  public static boolean m_incremental = false;  	      |	  public boolean m_incremental = false;
							      >	  
							      >	  /*
							      >	   * Flag set by FEATURE_SOURCE_LOCATION.
							      >	   * This feature specifies whether the transformation phase 
							      >	   * keep track of line and column numbers for the input sour
							      >	   * document. 
							      >	   */
							      >	  public boolean m_source_location = false; 
   * Set a flag indicating whether an incremental transform i |	   * Get a flag indicating whether an incremental transform i
   * @param incremental boolean to use to set m_incremental.  |	   * @return incremental boolean.
  public synchronized static boolean getIncremental()	      |	  public boolean getIncremental()
   * Set a flag indicating whether an incremental transform i |	   * Set a flag indicating whether an incremental transform i
							      >	   * This flag should have the same value as the FEATURE_INCR
							      >	   * which is set by the TransformerFactory.setAttribut() met
							      >	   * DTMManager is created
  public synchronized static void setIncremental(boolean incr |	  public void setIncremental(boolean incremental)
							      >	  /**
							      >	   * Get a flag indicating whether the transformation phase s
							      >	   * keep track of line and column numbers for the input sour
							      >	   * document.
							      >	   * @return source location boolean
							      >	   *
							      >	   */
							      >	  public boolean getSource_location()
							      >	  {
							      >	    return m_source_location;  
							      >	  }  
							      >	  
							      >	  /**
							      >	   * Set a flag indicating whether the transformation phase s
							      >	   * keep track of line and column numbers for the input sour
							      >	   * document.
							      >	   * This flag should have the same value as the FEATURE_SOUR
							      >	   * which is set by the TransformerFactory.setAttribut() met
							      >	   * DTMManager is created
							      >	   * @param sourceLocation boolean to use to set m_source_loc
							      >	   */
							      >	  public void setSource_location(boolean sourceLocation){
							      >	    m_source_location = sourceLocation;
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xml/dtm/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:36 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:57:21 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:36 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:57:21
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 51220540
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/CoroutineManager.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/CoroutineManager.java
 * $Id: CoroutineManager.java,v 1.10 2004/02/16 23:06:11 minc |	 * $Id: CoroutineManager.java,v 1.11 2005/01/24 00:34:35 mcna
   * @param coroutineID: If >=0, requests that we reserve thi |	   * @param coroutineID  If >=0, requests that we reserve thi
   * @param toCoroutine. Integer identifier for the coroutine |	   * @param toCoroutine  Integer identifier for the coroutine
   * @param arg_object A value to be passed to the other coro |	   * @param arg_object    A value to be passed to the other c
   * @param toCoroutine. Integer identifier for the coroutine |	   * @param toCoroutine   Integer identifier for the coroutin
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/dom2dtm/DOM2DTMdefaultNamespaceDeclarationNode.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/dom2dtm/DOM2DTMdefaultNamespaceDeclarationNode.java
 * $Id: DOM2DTMdefaultNamespaceDeclarationNode.java,v 1.5 200 |	 * $Id: DOM2DTMdefaultNamespaceDeclarationNode.java,v 1.6 200
							      >	import org.w3c.dom.TypeInfo;
							      >	import org.w3c.dom.UserDataHandler;
							      >	import org.w3c.dom.DOMException;
public class DOM2DTMdefaultNamespaceDeclarationNode implement |	public class DOM2DTMdefaultNamespaceDeclarationNode implement
	/** Non-DOM method, part of the temporary kluge	      |	    /** Non-DOM method, part of the temporary kluge
	 * %REVIEW% This would be a pruning problem, but sinc |	     * %REVIEW% This would be a pruning problem, but since it
	 * added to the root element and we prune on elements |	     * added to the root element and we prune on elements, we
	 * to worry.					      |	     * to worry.
	 */						      |	     */
	public int getHandleOfNode()			      |	    public int getHandleOfNode()		
	{						      |	    {
		return handle;				      |	        return handle;
	}						      |	    }
							      >
							      >	    //RAMESH: PENDING=> Add proper implementation for the bel
							      >
							      >	    /**
							      >	     * @see org.w3c.dom.TypeInfo#getTypeName()
							      >	     */
							      >	    public String getTypeName() {return null; }
							      >	     
							      >	    /**
							      >	     * @see org.w3c.dom.TypeInfo#getTypeNamespace()
							      >	     */
							      >	    public String getTypeNamespace() { return null;}
							      >	    
							      >	    /**
							      >	     * @see or.gw3c.dom.TypeInfo#isDerivedFrom(String,String,
							      >	     */
							      >	    public boolean isDerivedFrom( String ns, String localName
							      >	        return false;
							      >	    }
							      >
							      >	    public TypeInfo getSchemaTypeInfo() { return this; }
							      >	    
							      >	    public boolean isId( ) { return false; }
							      >
							      >	    /**
							      >	     * Associate an object to a key on this node. The object 
							      >	     * retrieved from this node by calling <code>getUserData<
							      >	     * same key.
							      >	     * @param key The key to associate the object to.
							      >	     * @param data The object to associate to the given key, 
							      >	     *   <code>null</code> to remove any existing association
							      >	     * @param handler The handler to associate to that key, o
							      >	     *   <code>null</code>.
							      >	     * @return Returns the <code>DOMObject</code> previously 
							      >	     *   the given key on this node, or <code>null</code> if 
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object setUserData(String key,
							      >	                              Object data,
							      >	                              UserDataHandler handler) {
							      >	        return getOwnerDocument().setUserData( key, data, han
							      >	    }
							      >
							      >	    /**
							      >	     * Retrieves the object associated to a key on a this nod
							      >	     * must first have been set to this node by calling
							      >	     * <code>setUserData</code> with the same key.
							      >	     * @param key The key the object is associated to.
							      >	     * @return Returns the <code>DOMObject</code> associated 
							      >	     *   on this node, or <code>null</code> if there was none
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object getUserData(String key) {
							      >	        return getOwnerDocument().getUserData( key);
							      >	    } 
							      >
							      >	    /**
							      >	     *  This method returns a specialized object which implem
							      >	     * specialized APIs of the specified feature and version.
							      >	     * specialized object may also be obtained by using bindi
							      >	     * casting methods but is not necessarily expected to, as
							      >	     * @param feature The name of the feature requested (case
							      >	     * @param version  This is the version number of the feat
							      >	     *   the version is <code>null</code> or the empty string
							      >	     *   any version of the feature will cause the method to 
							      >	     *   object that supports at least one version of the fea
							      >	     * @return  Returns an object which implements the specia
							      >	     *   the specified feature and version, if any, or <code>
							      >	     *   there is no object which implements interfaces assoc
							      >	     *   feature. If the <code>DOMObject</code> returned by t
							      >	     *   implements the <code>Node</code> interface, it must 
							      >	     *   primary core <code>Node</code> and not return result
							      >	     *   with the primary core <code>Node</code> such as attr
							      >	     *   childNodes, etc.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object getFeature(String feature, String version) 
							      >	        // we don't have any alternate node, either this node
							      >	        // or we don't have anything that does
							      >	        return isSupported(feature, version) ? this : null;
							      >	    }
							      >
							      >	    /**
							      >	     * Tests whether two nodes are equal.
							      >	     * <br>This method tests for equality of nodes, not samen
							      >	     * whether the two nodes are references to the same objec
							      >	     * tested with <code>Node.isSameNode</code>. All nodes th
							      >	     * will also be equal, though the reverse may not be true
							      >	     * <br>Two nodes are equal if and only if the following c
							      >	     * satisfied: The two nodes are of the same type.The foll
							      >	     * attributes are equal: <code>nodeName</code>, <code>loc
							      >	     * <code>namespaceURI</code>, <code>prefix</code>, <code>
							      >	     * , <code>baseURI</code>. This is: they are both <code>n
							      >	     * they have the same length and are character for charac
							      >	     * The <code>attributes</code> <code>NamedNodeMaps</code>
							      >	     * This is: they are both <code>null</code>, or they have
							      >	     * length and for each node that exists in one map there 
							      >	     * exists in the other map and is equal, although not nec
							      >	     * same index.The <code>childNodes</code> <code>NodeLists
							      >	     * equal. This is: they are both <code>null</code>, or th
							      >	     * same length and contain equal nodes at the same index.
							      >	     * for <code>Attr</code> nodes as for any other type of n
							      >	     * normalization can affect equality; to avoid this, node
							      >	     * normalized before being compared.
							      >	     * <br>For two <code>DocumentType</code> nodes to be equa
							      >	     * conditions must also be satisfied: The following strin
							      >	     * are equal: <code>publicId</code>, <code>systemId</code
							      >	     * <code>internalSubset</code>.The <code>entities</code>
							      >	     * <code>NamedNodeMaps</code> are equal.The <code>notatio
							      >	     * <code>NamedNodeMaps</code> are equal.
							      >	     * <br>On the other hand, the following do not affect equ
							      >	     * <code>ownerDocument</code> attribute, the <code>specif
							      >	     * attribute for <code>Attr</code> nodes, the
							      >	     * <code>isWhitespaceInElementContent</code> attribute fo
							      >	     * <code>Text</code> nodes, as well as any user data or e
							      >	     * registered on the nodes.
							      >	     * @param arg The node to compare equality with.
							      >	     * @param deep If <code>true</code>, recursively compare 
							      >	     *   <code>false</code>, compare only the nodes themselve
							      >	     *   attributes, if it is an <code>Element</code>).
							      >	     * @return If the nodes, and possibly subtrees are equal,
							      >	     *   <code>true</code> otherwise <code>false</code>.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isEqualNode(Node arg) {
							      >	        if (arg == this) {
							      >	            return true;
							      >	        }
							      >	        if (arg.getNodeType() != getNodeType()) {
							      >	            return false;
							      >	        }
							      >	        // in theory nodeName can't be null but better be car
							      >	        // who knows what other implementations may be doing?
							      >	        if (getNodeName() == null) {
							      >	            if (arg.getNodeName() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNodeName().equals(arg.getNodeName())) {
							      >	            return false;
							      >	        }
							      >
							      >	        if (getLocalName() == null) {
							      >	            if (arg.getLocalName() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getLocalName().equals(arg.getLocalName())) 
							      >	            return false;
							      >	        }
							      >
							      >	        if (getNamespaceURI() == null) {
							      >	            if (arg.getNamespaceURI() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNamespaceURI().equals(arg.getNamespaceUR
							      >	            return false;
							      >	        }
							      >
							      >	        if (getPrefix() == null) {
							      >	            if (arg.getPrefix() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getPrefix().equals(arg.getPrefix())) {
							      >	            return false;
							      >	        }
							      >
							      >	        if (getNodeValue() == null) {
							      >	            if (arg.getNodeValue() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNodeValue().equals(arg.getNodeValue())) 
							      >	            return false;
							      >	        }
							      >	    /*
							      >	        if (getBaseURI() == null) {
							      >	            if (((NodeImpl) arg).getBaseURI() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getBaseURI().equals(((NodeImpl) arg).getBas
							      >	            return false;
							      >	        }
							      >	*/
							      >
							      >	             return true;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3 - Experimental:
							      >	     * Look up the namespace URI associated to the given pref
							      >	     * Use lookupNamespaceURI(null) to lookup the default nam
							      >	     *
							      >	     * @param namespaceURI
							      >	     * @return th URI for the namespace
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String lookupNamespaceURI(String specifiedPrefix) 
							      >	        short type = this.getNodeType();
							      >	        switch (type) {
							      >	        case Node.ELEMENT_NODE : {
							      >
							      >	                String namespace = this.getNamespaceURI();
							      >	                String prefix = this.getPrefix();
							      >	                if (namespace !=null) {
							      >	                    // REVISIT: is it possible that prefix is
							      >	                    if (specifiedPrefix== null && prefix==spe
							      >	                        // looking for default namespace
							      >	                        return namespace;
							      >	                    } else if (prefix != null && prefix.equal
							      >	                        // non default namespace
							      >	                        return namespace;
							      >	                    }
							      >	                }
							      >	                if (this.hasAttributes()) {
							      >	                    NamedNodeMap map = this.getAttributes();
							      >	                    int length = map.getLength();
							      >	                    for (int i=0;i<length;i++) {
							      >	                        Node attr = map.item(i);
							      >	                        String attrPrefix = attr.getPrefix();
							      >	                        String value = attr.getNodeValue();
							      >	                        namespace = attr.getNamespaceURI();
							      >	                        if (namespace !=null && namespace.equ
							      >	                            // at this point we are dealing w
							      >	                            if (specifiedPrefix == null &&
							      >	                                attr.getNodeName().equals("xm
							      >	                                // default namespace
							      >	                                return value;
							      >	                            } else if (attrPrefix !=null &&
							      >	                                       attrPrefix.equals("xml
							      >	                                       attr.getLocalName().eq
							      >	                 // non default namespace
							      >	                                return value;
							      >	                            }
							      >	                        }
							      >	                    }
							      >	                }
							      >			/*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupNamespaceURI(specif
							      >	                }
							      >			*/
							      >
							      >	                return null;
							      >
							      >
							      >	            }
							      >	/*
							      >	        case Node.DOCUMENT_NODE : {
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >	*/
							      >	        case Node.ENTITY_NODE :
							      >	        case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return null;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.getOwnerElement().getNodeType() == N
							      >	                    return getOwnerElement().lookupNamespaceU
							      >
							      >	                }
							      >	                return null;
							      >	            }
							      >	        default:{
							      >		   /*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupNamespaceURI(specif
							      >	                }
							      >	             */
							      >	                return null;
							      >	            }
							      >
							      >	        }
							      >	    }
							      >	    
							      >	    /**
							      >	     *  DOM Level 3: Experimental
							      >	     *  This method checks if the specified <code>namespaceUR
							      >	     *  default namespace or not.
							      >	     *  @param namespaceURI The namespace URI to look for.
							      >	     *  @return  <code>true</code> if the specified <code>nam
							      >	     *   is the default namespace, <code>false</code> otherwi
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isDefaultNamespace(String namespaceURI){
							      >	       /*
							      >	        // REVISIT: remove casts when DOM L3 becomes REC.
							      >	        short type = this.getNodeType();
							      >	        switch (type) {
							      >	        case Node.ELEMENT_NODE: {
							      >	            String namespace = this.getNamespaceURI();
							      >	            String prefix = this.getPrefix();
							      >
							      >	            // REVISIT: is it possible that prefix is empty s
							      >	            if (prefix == null || prefix.length() == 0) {
							      >	                if (namespaceURI == null) {
							      >	                    return (namespace == namespaceURI);
							      >	                }
							      >	                return namespaceURI.equals(namespace);
							      >	            }
							      >	            if (this.hasAttributes()) {
							      >	                ElementImpl elem = (ElementImpl)this;
							      >	                NodeImpl attr = (NodeImpl)elem.getAttributeNo
							      >	                if (attr != null) {
							      >	                    String value = attr.getNodeValue();
							      >	                    if (namespaceURI == null) {
							      >	                        return (namespace == value);
							      >	                    }
							      >	                    return namespaceURI.equals(value);
							      >	                }
							      >	            }
							      >
							      >	            NodeImpl ancestor = (NodeImpl)getElementAncestor(
							      >	            if (ancestor != null) {
							      >	                return ancestor.isDefaultNamespace(namespaceU
							      >	            }
							      >	            return false;
							      >	        }
							      >	        case Node.DOCUMENT_NODE:{
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >
							      >	        case Node.ENTITY_NODE :
							      >	          case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return false;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.ownerNode.getNodeType() == Node.ELEM
							      >	                    return ownerNode.isDefaultNamespace(names
							      >
							      >	                }
							      >	                return false;
							      >	            }
							      >	        default:{  
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.isDefaultNamespace(namesp
							      >	                }
							      >	                return false;
							      >	            }
							      >
							      >	        }
							      >	*/
							      >	        return false;
							      >
							      >
							      >	    }
							      >
							      >	    /**
							      >	     *
							      >	     * DOM Level 3 - Experimental:
							      >	     * Look up the prefix associated to the given namespace U
							      >	     *
							      >	     * @param namespaceURI
							      >	     * @return the prefix for the namespace
							      >	     */
							      >	    public String lookupPrefix(String namespaceURI){
							      >
							      >	        // REVISIT: When Namespaces 1.1 comes out this may no
							      >	        // Prefix can't be bound to null namespace
							      >	        if (namespaceURI == null) {
							      >	            return null;
							      >	        }
							      >
							      >	        short type = this.getNodeType();
							      >
							      >	        switch (type) {
							      >	/*
							      >	        case Node.ELEMENT_NODE: {
							      >
							      >	                String namespace = this.getNamespaceURI(); //
							      >	                return lookupNamespacePrefix(namespaceURI, (E
							      >	            }
							      >
							      >	        case Node.DOCUMENT_NODE:{
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >	*/
							      >	        case Node.ENTITY_NODE :
							      >	        case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return null;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.getOwnerElement().getNodeType() == N
							      >	                    return getOwnerElement().lookupPrefix(nam
							      >
							      >	                }
							      >	                return null;
							      >	            }
							      >	        default:{ 
							      >	/*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupPrefix(namespaceURI
							      >	                }
							      >	*/
							      >	                return null;
							      >	            }
							      >	         }
							      >	    }
							      >
							      >	    /**
							      >	     * Returns whether this node is the same node as the give
							      >	     * <br>This method provides a way to determine whether tw
							      >	     * <code>Node</code> references returned by the implement
							      >	     * the same object. When two <code>Node</code> references
							      >	     * to the same object, even if through a proxy, the refer
							      >	     * used completely interchangably, such that all attribut
							      >	     * same values and calling the same DOM method on either 
							      >	     * always has exactly the same effect.
							      >	     * @param other The node to test against.
							      >	     * @return Returns <code>true</code> if the nodes are the
							      >	     *   <code>false</code> otherwise.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isSameNode(Node other) {
							      >	        // we do not use any wrapper so the answer is obvious
							      >	        return this == other;
							      >	    }
							      >
							      >	    /**
							      >	     * This attribute returns the text content of this node a
							      >	     * descendants. When it is defined to be null, setting it
							      >	     * When set, any possible children this node may have are
							      >	     * replaced by a single <code>Text</code> node containing
							      >	     * this attribute is set to. On getting, no serialization
							      >	     * the returned string does not contain any markup. No wh
							      >	     * normalization is performed, the returned string does n
							      >	     * element content whitespaces . Similarly, on setting, n
							      >	     * performed either, the input string is taken as pure te
							      >	     * <br>The string returned is made of the text content of
							      >	     * depending on its type, as defined below:
							      >	     * <table border='1'>
							      >	     * <tr>
							      >	     * <th>Node type</th>
							      >	     * <th>Content</th>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * ELEMENT_NODE, ENTITY_NODE, ENTITY_REFERENCE_NODE,
							      >	     * DOCUMENT_FRAGMENT_NODE</td>
							      >	     * <td valign='top' rowspan='1' colspan='1'>concatenation
							      >	     * attribute value of every child node, excluding COMMENT
							      >	     * PROCESSING_INSTRUCTION_NODE nodes</td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>ATTRIBUTE_NOD
							      >	     * CDATA_SECTION_NODE, COMMENT_NODE, PROCESSING_INSTRUCTI
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * <code>nodeValue</code></td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>DOCUMENT_NODE
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * null</td>
							      >	     * </tr>
							      >	     * </table>
							      >	     * @exception DOMException
							      >	     *   NO_MODIFICATION_ALLOWED_ERR: Raised when the node is
							      >	     * @exception DOMException
							      >	     *   DOMSTRING_SIZE_ERR: Raised when it would return more
							      >	     *   fit in a <code>DOMString</code> variable on the impl
							      >	     *   platform.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public void setTextContent(String textContent)
							      >	        throws DOMException {
							      >	        setNodeValue(textContent);
							      >	    }
							      >	    
							      >	    /**
							      >	     * This attribute returns the text content of this node a
							      >	     * descendants. When it is defined to be null, setting it
							      >	     * When set, any possible children this node may have are
							      >	     * replaced by a single <code>Text</code> node containing
							      >	     * this attribute is set to. On getting, no serialization
							      >	     * the returned string does not contain any markup. No wh
							      >	     * normalization is performed, the returned string does n
							      >	     * element content whitespaces . Similarly, on setting, n
							      >	     * performed either, the input string is taken as pure te
							      >	     * <br>The string returned is made of the text content of
							      >	     * depending on its type, as defined below:
							      >	     * <table border='1'>
							      >	     * <tr>
							      >	     * <th>Node type</th>
							      >	     * <th>Content</th>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * ELEMENT_NODE, ENTITY_NODE, ENTITY_REFERENCE_NODE,
							      >	     * DOCUMENT_FRAGMENT_NODE</td>
							      >	     * <td valign='top' rowspan='1' colspan='1'>concatenation
							      >	     * attribute value of every child node, excluding COMMENT
							      >	     * PROCESSING_INSTRUCTION_NODE nodes</td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>ATTRIBUTE_NOD
							      >	     * CDATA_SECTION_NODE, COMMENT_NODE, PROCESSING_INSTRUCTI
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * <code>nodeValue</code></td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>DOCUMENT_NODE
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * null</td>
							      >	     * </tr>
							      >	     * </table>
							      >	     * @exception DOMException
							      >	     *   NO_MODIFICATION_ALLOWED_ERR: Raised when the node is
							      >	     * @exception DOMException
							      >	     *   DOMSTRING_SIZE_ERR: Raised when it would return more
							      >	     *   fit in a <code>DOMString</code> variable on the impl
							      >	     *   platform.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getTextContent() throws DOMException {
							      >	        return getNodeValue();  // overriden in some subclass
							      >	    }
							      >
							      >	    /**
							      >	     * Compares a node with this node with regard to their po
							      >	     * document.
							      >	     * @param other The node to compare against this node.
							      >	     * @return Returns how the given node is positioned relat
							      >	     *   node.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public short compareDocumentPosition(Node other) throws D
							      >	        return 0;
							      >	    }
							      >
							      >	    /**
							      >	     * The absolute base URI of this node or <code>null</code
							      >	     * This value is computed according to . However, when th
							      >	     * <code>Document</code> supports the feature "HTML" , th
							      >	     * computed using first the value of the href attribute o
							      >	     * element if any, and the value of the <code>documentURI
							      >	     * attribute from the <code>Document</code> interface oth
							      >	     * <br> When the node is an <code>Element</code>, a <code
							      >	     * or a a <code>ProcessingInstruction</code>, this attrib
							      >	     * the properties [base URI] defined in . When the node i
							      >	     * <code>Notation</code>, an <code>Entity</code>, or an
							      >	     * <code>EntityReference</code>, this attribute represent
							      >	     * properties [declaration base URI] in the . How will th
							      >	     * by resolution of relative namespace URIs issue?It's no
							      >	     * only be on Document, Element, ProcessingInstruction, E
							      >	     * Notation nodes, according to the infoset? If not, what
							      >	     * on other nodes? Null? An empty string? I think it shou
							      >	     * parent's.No.Should this be read-only and computed or a
							      >	     * read-write attribute?Read-only and computed (F2F 19 Ju
							      >	     * teleconference 30 May 2001).If the base HTML element i
							      >	     * attached to a document, does the insert change the Doc
							      >	     * Yes. (F2F 26 Sep 2001)
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getBaseURI() {
							      >	        return null;
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/dom2dtm/DOM2DTM.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/dom2dtm/DOM2DTM.java
 * $Id: DOM2DTM.java,v 1.34 2004/02/16 23:06:53 minchau Exp $ |	 * $Id: DOM2DTM.java,v 1.35 2005/01/24 00:34:36 mcnamara Exp 
   * @param the document type declaration handle	      <
   *							      <
   * @param the attribute handle			      |	   * @param attributeHandle the attribute handle
   *							      <
   * NEEDSDOC @param attributeHandle			      <
   * @param buf FastStringBuffer into which the contents of t <
   * nodes are to be concatenated.			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMAxisIterNodeList.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMAxisIterNodeList.java
 * $Id: DTMAxisIterNodeList.java,v 1.3 2004/02/16 23:06:11 mi |	 * $Id: DTMAxisIterNodeList.java,v 1.4 2005/01/24 00:34:35 mc
     * @param indexIndex into the collection.		      |	     * @param index Index into the collection.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMChildIterNodeList.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMChildIterNodeList.java
 * $Id: DTMChildIterNodeList.java,v 1.3 2004/02/16 23:06:11 m |	 * $Id: DTMChildIterNodeList.java,v 1.4 2005/01/24 00:34:35 m
     * @param indexIndex into the collection.		      |	     * @param index Index into the collection.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMDefaultBaseIterators.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMDefaultBaseIterators.java
 * $Id: DTMDefaultBaseIterators.java,v 1.21 2004/02/16 23:06: |	 * $Id: DTMDefaultBaseIterators.java,v 1.23 2005/01/24 00:34:
							      |	import org.apache.xalan.xsltc.dom.NodeCounter;
   * @param domSource the DOM source that this DTM will wrap. <
   * @param domSource the DOM source that this DTM will wrap. <
        throw new DTMException(XMLMessages.createXMLMessage(X |	        throw new DTMException(XMLMessages.createXMLMessage(
							      >	            XMLErrorResources.ER_TYPED_ITERATOR_AXIS_NOT_IMPL
							      >	            new Object[]{Axis.getNames(axis)})); 
							      >	            //"Error: typed iterator for axis "
      throw new DTMException(XMLMessages.createXMLMessage(XML |	      throw new DTMException(XMLMessages.createXMLMessage(
							      >	        XMLErrorResources.ER_ITERATOR_AXIS_NOT_IMPLEMENTED, 
							      >	        new Object[]{Axis.getNames(axis)})); 
							      >	        //"Error: iterator for axis '" + Axis.names[axis]
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMDefaultBase.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMDefaultBase.java
 * $Id: DTMDefaultBase.java,v 1.39 2004/02/16 23:06:11 mincha |	 * $Id: DTMDefaultBase.java,v 1.43 2005/07/25 19:23:05 johng 
	static boolean JJK_DEBUG=false;			      |	    static final boolean JJK_DEBUG=false;
   * @param domSource the DOM source that this DTM will wrap. <
   * @param domSource the DOM source that this DTM will wrap. <
      System.exit(-1);					      |	        throw new RuntimeException(ioe.getMessage());
   * @param NodeHandle (external representation of node)      |	   * @param nodeHandle (external representation of node)
     * @param elementNodeIndex Index of a node to look up.    <
     *							      <
   * @param namespaceHandle handle to node which must be of t <
   * NAMESPACE_NODE.					      <
   *  @param nodeHandle the id of the node.		      <
   * @param nodeHandle The handle to the node in question.    <
   * @param ExpandedNameID an ID that represents an expanded- |	   * @param expandedNameID an ID that represents an expanded-
   * @param ExpandedNameID an ID that represents an expanded- |	   * @param expandedNameID an ID that represents an expanded-
   * @param versionThis is the version number of the feature  |	   * @param version This is the version number of the feature
   * @param version The version string of the feature request <
   * @param the document type declaration handle	      <
   *							      <
    return index1!=NULL & index2!=NULL & index1 <= index2;    |	    return index1!=NULL && index2!=NULL && index1 <= index2;
   * @param the document handle				      <
   *							      <
    * @param manager the DTMManager			      |	    * @param mgr the DTMManager
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMDefaultBaseTraversers.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMDefaultBaseTraversers.java
 * $Id: DTMDefaultBaseTraversers.java,v 1.19 2004/02/16 23:06 |	 * $Id: DTMDefaultBaseTraversers.java,v 1.21 2005/01/24 00:34
							      |	import org.apache.xalan.xsltc.dom.NodeCounter;
   * @param domSource the DOM source that this DTM will wrap. <
   * @param domSource the DOM source that this DTM will wrap. <
      m_traversers = new DTMAxisTraverser[Axis.names.length]; |	      m_traversers = new DTMAxisTraverser[Axis.getNamesLength
      throw new DTMException(XMLMessages.createXMLMessage(XML |	      throw new DTMException(XMLMessages.createXMLMessage(XML
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMDocumentImpl.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMDocumentImpl.java
 * $Id: DTMDocumentImpl.java,v 1.13 2004/02/16 23:06:11 minch |	 * $Id: DTMDocumentImpl.java,v 1.16 2005/01/24 04:04:40 mcnam
          * @param bufferRef FastStringBuffer reference to an |	          * @param buffer FastStringBuffer reference to an in
         * @param docHandle int the handle for the DTM docume |	         * @param documentNumber the handle for the DTM docum
// 	 * @param localName The local part of the qualified n <
         * @param subtreeRootNodeHandle			      |	         * @param subtreeRootHandle
                * Given a node handle, find the owning docume |	         * Given a node handle, find the owning document node
                *					      |	         *
                * @param nodeHandle the id of the node.	      |	         * @return int Node handle of document, which should 
                * @return int Node handle of document, which  |	         */
                */					      <
         * @param nodeHandle The handle to the node in questi <
         *						      <
        static final String[] fixednames=		      |	        private static final String[] fixednames=
         * @param versionThis is the version number of the fe |	         * @param version This is the version number of the f
         * @param the document handle			      |	         * @param documentHandle the document handle
         * @param the document type declaration handle	      <
         *						      <
         * @param node1 DOM Node to perform position comparis |	         * @param nodeHandle1 DOM Node to perform position co
         * @param node2 DOM Node to perform position comparis |	         * @param nodeHandle2 DOM Node to perform position co
         * @param the document handle			      <
         *						      <
         * @param the attribute handle			      |	         * @param attributeHandle the attribute handle
         *						      <
         * NEEDSDOC @param attributeHandle		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMManagerDefault.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMManagerDefault.java
 * $Id: DTMManagerDefault.java,v 1.51 2004/02/16 23:06:11 min |	 * $Id: DTMManagerDefault.java,v 1.52 2004/11/22 17:53:43 mkw
import org.xml.sax.helpers.XMLReaderFactory;		      |	import org.xml.sax.helpers.DefaultHandler;
							      >	  
							      >	  /**
							      >	   * The default implementation of ContentHandler, DTDHandler
							      >	   */
							      >	  protected DefaultHandler m_defaultHandler = new DefaultHand
							      >	        SAX2DTM dtm;
          SAX2DTM dtm;					      <
							      >	          // Reset the ContentHandler, DTDHandler, ErrorHandl
							      >	          // after creating the DTM.
							      >	          if (reader != null && !(m_incremental && incrementa
							      >	            reader.setContentHandler(m_defaultHandler);
							      >	            reader.setDTDHandler(m_defaultHandler);
							      >	            reader.setErrorHandler(m_defaultHandler);
							      >	            
							      >	            // Reset the LexicalHandler to null after creatin
							      >	            try {
							      >	              reader.setProperty("http://xml.org/sax/properti
							      >	            }
							      >	            catch (Exception e) {}
							      >	          }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMNamedNodeMap.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMNamedNodeMap.java
 * $Id: DTMNamedNodeMap.java,v 1.8 2004/02/16 23:06:11 mincha |	 * $Id: DTMNamedNodeMap.java,v 1.11 2005/01/24 00:34:35 mcnam
   * @param nameThe <code>nodeName</code> of a node to retrie |	   * @param name The <code>nodeName</code> of a node to retri
   *							      <
   * @param name Name of the item being requested.	      <
    for (int n = dtm.getFirstAttribute(element); n != -1;     |	    for (int n = dtm.getFirstAttribute(element); n != DTM.NUL
   * @param indexIndex into this map.			      <
   *							      <
    throw new DTMException(DTMException.NOT_SUPPORTED_ERR);   |	       Node retNode = null;
							      >	       for (int n = dtm.getFirstAttribute(element); n != DTM.
							      >	                       n = dtm.getNextAttribute(n))
							      >	       {
							      >	         if (localName.equals(dtm.getLocalName(n)))
							      >	         {
							      >	           String nsURI = dtm.getNamespaceURI(n); 
							      >	           if ((namespaceURI == null && nsURI == null)
							      >	                  || (namespaceURI != null && namespaceURI.eq
							      >	           {
							      >	             retNode = dtm.getNode(n);
							      >	             break;
							      >	           }
							      >	         }
							      >	       }
							      >	       return retNode;
							      |	          static final long serialVersionUID = -8290238117162
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMNodeListBase.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMNodeListBase.java
 * $Id: DTMNodeListBase.java,v 1.3 2004/02/16 23:06:11 mincha |	 * $Id: DTMNodeListBase.java,v 1.4 2005/01/24 00:34:35 mcnama
     * @param indexIndex into the collection.		      |	     * @param index Index into the collection.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMNodeList.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMNodeList.java
 * $Id: DTMNodeList.java,v 1.11 2004/02/16 23:06:11 minchau E |	 * $Id: DTMNodeList.java,v 1.12 2005/01/24 00:34:35 mcnamara 
     * @param indexIndex into the collection.		      |	     * @param index Index into the collection.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMNodeProxy.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMNodeProxy.java
 * $Id: DTMNodeProxy.java,v 1.20 2004/02/16 23:06:11 minchau  |	 * $Id: DTMNodeProxy.java,v 1.24 2005/06/22 15:27:43 mkwan Ex
							      >	import java.util.Vector;
							      >
							      >	import org.apache.xpath.NodeSet;
							      >	import org.w3c.dom.UserDataHandler;
							      >	import org.w3c.dom.DOMConfiguration;
							      >	import org.w3c.dom.TypeInfo;
							      >
        						      |	  
							      >	  /** The return value as Empty String. */
							      >	  private static final String EMPTYSTRING = "";
							      >	          
   * @param name					      |	   * @param namespaceURI
   * @param x						      |	   * @param localName
  public boolean hasAttributeNS(String name, String x)	      |	  public boolean hasAttributeNS(String namespaceURI, String l
    return DTM.NULL != dtm.getAttributeNode(node,x,name);     |	    return DTM.NULL != dtm.getAttributeNode(node,namespaceURI
  public final NodeList getElementsByTagName(String tagname)  |	  public final NodeList getElementsByTagName(String tagname) 
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) |	       Vector listVector = new Vector();
							      >	       Node retNode = dtm.getNode(node);
							      >	       if (retNode != null) 
							      >	       {
							      >	         boolean isTagNameWildCard = "*".equals(tagname);
							      >	         if (DTM.ELEMENT_NODE == retNode.getNodeType()) 
							      >	         {
							      >	           NodeList nodeList = retNode.getChildNodes();
							      >	           for (int i = 0; i < nodeList.getLength(); i++) 
							      >	           {
							      >	             traverseChildren(listVector, nodeList.item(i), t
							      >	                              isTagNameWildCard);
							      >	           }
							      >	         } else if (DTM.DOCUMENT_NODE == retNode.getNodeType(
							      >	           traverseChildren(listVector, dtm.getNode(node), ta
							      >	                            isTagNameWildCard);
							      >	         }
							      >	       }
							      >	       int size = listVector.size();
							      >	       NodeSet nodeSet = new NodeSet(size);
							      >	       for (int i = 0; i < size; i++) 
							      >	       {
							      >	         nodeSet.addNode((Node) listVector.elementAt(i));
							      >	       }
							      >	       return (NodeList) nodeSet;
							      >	  }
							      >	  /**
							      >	   * 
							      >	   * @param listVector
							      >	   * @param tempNode
							      >	   * @param tagname
							      >	   * @param isTagNameWildCard
							      >	   * 
							      >	   * 
							      >	   * Private method to be used for recursive iterations to ob
							      >	   */
							      >	  private final void traverseChildren
							      >	  (
							      >	    Vector listVector,
							      >	    Node tempNode,
							      >	    String tagname,
							      >	    boolean isTagNameWildCard) {
							      >	    if (tempNode == null) 
							      >	    {
							      >	      return;
							      >	    } 
							      >	    else
							      >	    { 
							      >	      if (tempNode.getNodeType() == DTM.ELEMENT_NODE
							      >	            && (isTagNameWildCard || tempNode.getNodeName().e
							      >	      {
							      >	        listVector.add(tempNode);
							      >	      }
							      >	      if(tempNode.hasChildNodes())
							      >	      {
							      >	        NodeList nodeList = tempNode.getChildNodes();
							      >	        for (int i = 0; i < nodeList.getLength(); i++)
							      >	        {
							      >	          traverseChildren(listVector, nodeList.item(i), tagn
							      >	                           isTagNameWildCard);
							      >	        }
							      >	      }
							      >	    }
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) |	    Vector listVector = new Vector();
							      >	    Node retNode = dtm.getNode(node);
							      >	    if (retNode != null)
							      >	    {               
							      >	      boolean isNamespaceURIWildCard = "*".equals(namespaceUR
							      >	      boolean isLocalNameWildCard    = "*".equals(localName);
							      >	      if (DTM.ELEMENT_NODE == retNode.getNodeType())
							      >	      {
							      >	        NodeList nodeList = retNode.getChildNodes();         
							      >	        for(int i = 0; i < nodeList.getLength(); i++)
							      >	        {
							      >	          traverseChildren(listVector, nodeList.item(i), name
							      >	        }
							      >	      }
							      >	      else if(DTM.DOCUMENT_NODE == retNode.getNodeType())
							      >	      {
							      >	        traverseChildren(listVector, dtm.getNode(node), names
							      >	      }
							      >	    }
							      >	    int size = listVector.size();
							      >	    NodeSet nodeSet = new NodeSet(size);
							      >	    for (int i = 0; i < size; i++)
							      >	    {
							      >	      nodeSet.addNode((Node)listVector.elementAt(i));
							      >	    }
							      >	    return (NodeList) nodeSet;
							      >	  }
							      >	  /**
							      >	   * 
							      >	   * @param listVector
							      >	   * @param tempNode
							      >	   * @param namespaceURI
							      >	   * @param localname
							      >	   * @param isNamespaceURIWildCard
							      >	   * @param isLocalNameWildCard
							      >	   * 
							      >	   * Private method to be used for recursive iterations to ob
							      >	   * and namespaceURI.
							      >	   */
							      >	  private final void traverseChildren
							      >	  (
							      >	   Vector listVector, 
							      >	   Node tempNode, 
							      >	   String namespaceURI, 
							      >	   String localname,
							      >	   boolean isNamespaceURIWildCard,
							      >	   boolean isLocalNameWildCard) 
							      >	   {
							      >	    if (tempNode == null)
							      >	    {
							      >	      return;
							      >	    }
							      >	    else 
							      >	    {
							      >	      if (tempNode.getNodeType() == DTM.ELEMENT_NODE
							      >	              && (isLocalNameWildCard
							      >	                      || tempNode.getLocalName().equals(local
							      >	      {         
							      >	        String nsURI = tempNode.getNamespaceURI();
							      >	        if ((namespaceURI == null && nsURI == null)
							      >	               || isNamespaceURIWildCard
							      >	               || (namespaceURI != null && namespaceURI.equal
							      >	        {     
							      >	          listVector.add(tempNode); 
							      >	        } 
							      >	      }
							      >	      if(tempNode.hasChildNodes())
							      >	      {
							      >	        NodeList nl = tempNode.getChildNodes();              
							      >	        for(int i = 0; i < nl.getLength(); i++)
							      >	        {
							      >	          traverseChildren(listVector, nl.item(i), namespaceU
							      >	                           isNamespaceURIWildCard, isLocalNam
							      >	        }
							      >	      }
							      >	    }
							      <
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) |	       return (Element) dtm.getNode(dtm.getElementById(elemen
    return (null == node) ? null : node.getNodeValue();	      |	    return (null == node) ? EMPTYSTRING : node.getNodeValue()
    DTMNamedNodeMap  map = new DTMNamedNodeMap(dtm, node);    |	       Node retNode = null;
    Node node = map.getNamedItemNS(namespaceURI,localName);   |	       int n = dtm.getAttributeNode(node,namespaceURI,localNa
    return (null == node) ? null : node.getNodeValue();	      |	       if(n != DTM.NULL)
							      >	               retNode = dtm.getNode(n);
							      >	       return (null == retNode) ? EMPTYSTRING : retNode.getNo
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) |	       Attr retAttr = null;
							      >	       int n = dtm.getAttributeNode(node,namespaceURI,localNa
							      >	       if(n != DTM.NULL)
							      >	               retAttr = (Attr) dtm.getNode(n);
							      >	       return retAttr;
   * <p>EXPERIMENTAL! Based on the <a			      |	   * <p>Based on the <a
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	   * href='http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-200
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	   * Object Model (DOM) Level 3 Core Specification of 07 Apri
  public String getEncoding()				      |	  public String getInputEncoding()
   * <p>EXPERIMENTAL! Based on the <a			      |	   * <p>Based on the <a
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	   * href='http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-200
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	   * Object Model (DOM) Level 3 Core Specification of 07 Apri
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * of this document. This is <code>null</code> when unspeci <
   * @since DOM Level 3					      <
   *							      <
   * NEEDSDOC @param encoding				      <
   */							      <
  public void setEncoding(String encoding)		      <
  {							      <
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) <
  }							      <
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * document is standalone.				      <
   * @since DOM Level 3					      <
   *							      <
   *							      <
   */							      <
  public boolean getStandalone()			      <
  {							      <
							      <
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) <
  }							      <
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * document is standalone.				      <
   * @since DOM Level 3					      <
   *							      <
   * NEEDSDOC @param standalone				      <
   */							      <
  public void setStandalone(boolean standalone)		      <
  {							      <
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) <
  }							      <
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>EXPERIMENTAL! Based on the <a			      |	   * <p>Based on the <a
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	   * href='http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-200
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	   * Object Model (DOM) Level 3 Core Specification of 07 Apri
  }							      |	  }        
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * number of this document. This is <code>null</code> when  <
   * @since DOM Level 3					      <
   *							      <
   *							      <
   */							      <
  public String getVersion()				      <
  {							      <
							      <
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) <
  }							      <
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * number of this document. This is <code>null</code> when  <
   * @since DOM Level 3					      <
   *							      <
   * NEEDSDOC @param version				      <
   */							      <
  public void setVersion(String version)		      <
  {							      <
    throw new DTMDOMException(DOMException.NOT_SUPPORTED_ERR) <
  }							      <
        						      <
							      >
							      >	    /**
							      >	     *  This method returns a specialized object which implem
							      >	     * specialized APIs of the specified feature and version.
							      >	     * specialized object may also be obtained by using bindi
							      >	     * casting methods but is not necessarily expected to, as
							      >	.
							      >	     * @param feature The name of the feature requested (case
							      >	     * @param version  This is the version number of the feat
							      >	     *   the version is <code>null</code> or the empty string
							      >	     *   any version of the feature will cause the method to 
							      >	     *   object that supports at least one version of the fea
							      >	     * @return  Returns an object which implements the specia
							      >	     *   the specified feature and version, if any, or <code>
							      >	     *   there is no object which implements interfaces assoc
							      >	     *   feature. If the <code>DOMObject</code> returned by t
							      >	     *   implements the <code>Node</code> interface, it must 
							      >	     *   primary core <code>Node</code> and not return result
							      >	     *   with the primary core <code>Node</code> such as attr
							      >	     *   childNodes, etc.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object getFeature(String feature, String version) 
							      >	        // we don't have any alternate node, either this node
							      >	        // or we don't have anything that does
							      >	        //return hasFeature(feature, version) ? this : null;
							      >	        return null; //PENDING
							      >	    }
							      >
							      >
							      >
							      >	    //RAMESH : Pending proper implementation of DOM Level 3
							      >	    
							      >	    public Object setUserData(String key,
							      >	                              Object data,
							      >	                              UserDataHandler handler) {
							      >	        return getOwnerDocument().setUserData( key, data, han
							      >	    }
							      >
							      >	    /**
							      >	     * Retrieves the object associated to a key on a this nod
							      >	     * must first have been set to this node by calling
							      >	     * <code>setUserData</code> with the same key.
							      >	     * @param key The key the object is associated to.
							      >	     * @return Returns the <code>DOMObject</code> associated 
							      >	     *   on this node, or <code>null</code> if there was none
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object getUserData(String key) {
							      >	        return getOwnerDocument().getUserData( key);
							      >	    } 
							      >
							      >	    /**
							      >	     *  This method returns a specialized object which implem
							      >	     * specialized APIs of the specified feature and version.
							      >	     * specialized object may also be obtained by using bindi
							      >	     * casting methods but is not necessarily expected to, as
							      >	     * @param feature The name of the feature requested (case
							      >	     * @param version  This is the version number of the feat
							      >	     *   the version is <code>null</code> or the empty string
							      >	     *   any version of the feature will cause the method to 
							      >	     *   object that supports at least one version of the fea
							      >	     * @return  Returns an object which implements the specia
							      >	     *   the specified feature and version, if any, or <code>
							      >	     *   there is no object which implements interfaces assoc
							      >	     *   feature. If the <code>DOMObject</code> returned by t
							      >	     *   implements the <code>Node</code> interface, it must 
							      >	     *   primary core <code>Node</code> and not return result
							      >	     *   with the primary core <code>Node</code> such as attr
							      >	     *   childNodes, etc.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object getFeature(String feature, String version) 
							      >	        // we don't have any alternate node, either this node
							      >	        // or we don't have anything that does
							      >	        return isSupported(feature, version) ? this : null;
							      >	    }
							      >
							      >	    /**
							      >	     * Tests whether two nodes are equal.
							      >	     * <br>This method tests for equality of nodes, not samen
							      >	     * whether the two nodes are references to the same objec
							      >	     * tested with <code>Node.isSameNode</code>. All nodes th
							      >	     * will also be equal, though the reverse may not be true
							      >	     * <br>Two nodes are equal if and only if the following c
							      >	     * satisfied: The two nodes are of the same type.The foll
							      >	     * attributes are equal: <code>nodeName</code>, <code>loc
							      >	     * <code>namespaceURI</code>, <code>prefix</code>, <code>
							      >	     * , <code>baseURI</code>. This is: they are both <code>n
							      >	     * they have the same length and are character for charac
							      >	     * The <code>attributes</code> <code>NamedNodeMaps</code>
							      >	     * This is: they are both <code>null</code>, or they have
							      >	     * length and for each node that exists in one map there 
							      >	     * exists in the other map and is equal, although not nec
							      >	     * same index.The <code>childNodes</code> <code>NodeLists
							      >	     * equal. This is: they are both <code>null</code>, or th
							      >	     * same length and contain equal nodes at the same index.
							      >	     * for <code>Attr</code> nodes as for any other type of n
							      >	     * normalization can affect equality; to avoid this, node
							      >	     * normalized before being compared.
							      >	     * <br>For two <code>DocumentType</code> nodes to be equa
							      >	     * conditions must also be satisfied: The following strin
							      >	     * are equal: <code>publicId</code>, <code>systemId</code
							      >	     * <code>internalSubset</code>.The <code>entities</code>
							      >	     * <code>NamedNodeMaps</code> are equal.The <code>notatio
							      >	     * <code>NamedNodeMaps</code> are equal.
							      >	     * <br>On the other hand, the following do not affect equ
							      >	     * <code>ownerDocument</code> attribute, the <code>specif
							      >	     * attribute for <code>Attr</code> nodes, the
							      >	     * <code>isWhitespaceInElementContent</code> attribute fo
							      >	     * <code>Text</code> nodes, as well as any user data or e
							      >	     * registered on the nodes.
							      >	     * @param arg The node to compare equality with.
							      >	     * @param deep If <code>true</code>, recursively compare 
							      >	     *   <code>false</code>, compare only the nodes themselve
							      >	     *   attributes, if it is an <code>Element</code>).
							      >	     * @return If the nodes, and possibly subtrees are equal,
							      >	     *   <code>true</code> otherwise <code>false</code>.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isEqualNode(Node arg) {
							      >	        if (arg == this) {
							      >	            return true;
							      >	        }
							      >	        if (arg.getNodeType() != getNodeType()) {
							      >	            return false;
							      >	        }
							      >	        // in theory nodeName can't be null but better be car
							      >	        // who knows what other implementations may be doing?
							      >	        if (getNodeName() == null) {
							      >	            if (arg.getNodeName() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNodeName().equals(arg.getNodeName())) {
							      >	            return false;
							      >	        }
							      >
							      >	        if (getLocalName() == null) {
							      >	            if (arg.getLocalName() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getLocalName().equals(arg.getLocalName())) 
							      >	            return false;
							      >	        }
							      >
							      >	        if (getNamespaceURI() == null) {
							      >	            if (arg.getNamespaceURI() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNamespaceURI().equals(arg.getNamespaceUR
							      >	            return false;
							      >	        }
							      >
							      >	        if (getPrefix() == null) {
							      >	            if (arg.getPrefix() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getPrefix().equals(arg.getPrefix())) {
							      >	            return false;
							      >	        }
							      >
							      >	        if (getNodeValue() == null) {
							      >	            if (arg.getNodeValue() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNodeValue().equals(arg.getNodeValue())) 
							      >	            return false;
							      >	        }
							      >	    /*
							      >	        if (getBaseURI() == null) {
							      >	            if (((NodeImpl) arg).getBaseURI() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getBaseURI().equals(((NodeImpl) arg).getBas
							      >	            return false;
							      >	        }
							      >	*/
							      >	        return true;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3:
							      >	     * Look up the namespace URI associated to the given pref
							      >	     * Use lookupNamespaceURI(null) to lookup the default nam
							      >	     *
							      >	     * @param namespaceURI
							      >	     * @return th URI for the namespace
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String lookupNamespaceURI(String specifiedPrefix) 
							      >	        short type = this.getNodeType();
							      >	        switch (type) {
							      >	        case Node.ELEMENT_NODE : {
							      >
							      >	                String namespace = this.getNamespaceURI();
							      >	                String prefix = this.getPrefix();
							      >	                if (namespace !=null) {
							      >	                    // REVISIT: is it possible that prefix is
							      >	                    if (specifiedPrefix== null && prefix==spe
							      >	                        // looking for default namespace
							      >	                        return namespace;
							      >	                    } else if (prefix != null && prefix.equal
							      >	                        // non default namespace
							      >	                        return namespace;
							      >	                    }
							      >	                }
							      >	                if (this.hasAttributes()) {
							      >	                    NamedNodeMap map = this.getAttributes();
							      >	                    int length = map.getLength();
							      >	                    for (int i=0;i<length;i++) {
							      >	                        Node attr = map.item(i);
							      >	                        String attrPrefix = attr.getPrefix();
							      >	                        String value = attr.getNodeValue();
							      >	                        namespace = attr.getNamespaceURI();
							      >	                        if (namespace !=null && namespace.equ
							      >	                            // at this point we are dealing w
							      >	                            if (specifiedPrefix == null &&
							      >	                                attr.getNodeName().equals("xm
							      >	                                // default namespace
							      >	                                return value;
							      >	                            } else if (attrPrefix !=null &&
							      >	                                       attrPrefix.equals("xml
							      >	                                       attr.getLocalName().eq
							      >	                 // non default namespace
							      >	                                return value;
							      >	                            }
							      >	                        }
							      >	                    }
							      >	                }
							      >			/*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupNamespaceURI(specif
							      >	                }
							      >			*/
							      >	                return null;
							      >	            }
							      >	/*
							      >	        case Node.DOCUMENT_NODE : {
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >	*/
							      >	        case Node.ENTITY_NODE :
							      >	        case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return null;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.getOwnerElement().getNodeType() == N
							      >	                    return getOwnerElement().lookupNamespaceU
							      >	                }
							      >	                return null;
							      >	            }
							      >	        default:{
							      >		   /*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupNamespaceURI(specif
							      >	                }
							      >	             */
							      >	                return null;
							      >	            }
							      >
							      >	        }
							      >	    }
							      >	    
							      >	    /**
							      >	     *  DOM Level 3:
							      >	     *  This method checks if the specified <code>namespaceUR
							      >	     *  default namespace or not.
							      >	     *  @param namespaceURI The namespace URI to look for.
							      >	     *  @return  <code>true</code> if the specified <code>nam
							      >	     *   is the default namespace, <code>false</code> otherwi
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isDefaultNamespace(String namespaceURI){
							      >	       /*
							      >	        // REVISIT: remove casts when DOM L3 becomes REC.
							      >	        short type = this.getNodeType();
							      >	        switch (type) {
							      >	        case Node.ELEMENT_NODE: {
							      >	            String namespace = this.getNamespaceURI();
							      >	            String prefix = this.getPrefix();
							      >
							      >	            // REVISIT: is it possible that prefix is empty s
							      >	            if (prefix == null || prefix.length() == 0) {
							      >	                if (namespaceURI == null) {
							      >	                    return (namespace == namespaceURI);
							      >	                }
							      >	                return namespaceURI.equals(namespace);
							      >	            }
							      >	            if (this.hasAttributes()) {
							      >	                ElementImpl elem = (ElementImpl)this;
							      >	                NodeImpl attr = (NodeImpl)elem.getAttributeNo
							      >	                if (attr != null) {
							      >	                    String value = attr.getNodeValue();
							      >	                    if (namespaceURI == null) {
							      >	                        return (namespace == value);
							      >	                    }
							      >	                    return namespaceURI.equals(value);
							      >	                }
							      >	            }
							      >
							      >	            NodeImpl ancestor = (NodeImpl)getElementAncestor(
							      >	            if (ancestor != null) {
							      >	                return ancestor.isDefaultNamespace(namespaceU
							      >	            }
							      >	            return false;
							      >	        }
							      >	        case Node.DOCUMENT_NODE:{
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >
							      >	        case Node.ENTITY_NODE :
							      >	          case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return false;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.ownerNode.getNodeType() == Node.ELEM
							      >	                    return ownerNode.isDefaultNamespace(names
							      >
							      >	                }
							      >	                return false;
							      >	            }
							      >	        default:{  
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.isDefaultNamespace(namesp
							      >	                }
							      >	                return false;
							      >	            }
							      >
							      >	        }
							      >	*/
							      >	        return false;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3:
							      >	     * Look up the prefix associated to the given namespace U
							      >	     *
							      >	     * @param namespaceURI
							      >	     * @return the prefix for the namespace
							      >	     */
							      >	    public String lookupPrefix(String namespaceURI){
							      >
							      >	        // REVISIT: When Namespaces 1.1 comes out this may no
							      >	        // Prefix can't be bound to null namespace
							      >	        if (namespaceURI == null) {
							      >	            return null;
							      >	        }
							      >
							      >	        short type = this.getNodeType();
							      >
							      >	        switch (type) {
							      >	/*
							      >	        case Node.ELEMENT_NODE: {
							      >
							      >	                String namespace = this.getNamespaceURI(); //
							      >	                return lookupNamespacePrefix(namespaceURI, (E
							      >	            }
							      >
							      >	        case Node.DOCUMENT_NODE:{
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >	*/
							      >	        case Node.ENTITY_NODE :
							      >	        case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return null;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.getOwnerElement().getNodeType() == N
							      >	                    return getOwnerElement().lookupPrefix(nam
							      >
							      >	                }
							      >	                return null;
							      >	            }
							      >	        default:{ 
							      >	/*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupPrefix(namespaceURI
							      >	                }
							      >	*/
							      >	                return null;
							      >	            }
							      >	         }
							      >	    }
							      >
							      >	    /**
							      >	     * Returns whether this node is the same node as the give
							      >	     * <br>This method provides a way to determine whether tw
							      >	     * <code>Node</code> references returned by the implement
							      >	     * the same object. When two <code>Node</code> references
							      >	     * to the same object, even if through a proxy, the refer
							      >	     * used completely interchangably, such that all attribut
							      >	     * same values and calling the same DOM method on either 
							      >	     * always has exactly the same effect.
							      >	     * @param other The node to test against.
							      >	     * @return Returns <code>true</code> if the nodes are the
							      >	     *   <code>false</code> otherwise.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isSameNode(Node other) {
							      >	        // we do not use any wrapper so the answer is obvious
							      >	        return this == other;
							      >	    }
							      >
							      >	    /**
							      >	     * This attribute returns the text content of this node a
							      >	     * descendants. When it is defined to be null, setting it
							      >	     * When set, any possible children this node may have are
							      >	     * replaced by a single <code>Text</code> node containing
							      >	     * this attribute is set to. On getting, no serialization
							      >	     * the returned string does not contain any markup. No wh
							      >	     * normalization is performed, the returned string does n
							      >	     * element content whitespaces . Similarly, on setting, n
							      >	     * performed either, the input string is taken as pure te
							      >	     * <br>The string returned is made of the text content of
							      >	     * depending on its type, as defined below:
							      >	     * <table border='1'>
							      >	     * <tr>
							      >	     * <th>Node type</th>
							      >	     * <th>Content</th>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * ELEMENT_NODE, ENTITY_NODE, ENTITY_REFERENCE_NODE,
							      >	     * DOCUMENT_FRAGMENT_NODE</td>
							      >	     * <td valign='top' rowspan='1' colspan='1'>concatenation
							      >	     * attribute value of every child node, excluding COMMENT
							      >	     * PROCESSING_INSTRUCTION_NODE nodes</td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>ATTRIBUTE_NOD
							      >	     * CDATA_SECTION_NODE, COMMENT_NODE, PROCESSING_INSTRUCTI
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * <code>nodeValue</code></td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>DOCUMENT_NODE
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * null</td>
							      >	     * </tr>
							      >	     * </table>
							      >	     * @exception DOMException
							      >	     *   NO_MODIFICATION_ALLOWED_ERR: Raised when the node is
							      >	     * @exception DOMException
							      >	     *   DOMSTRING_SIZE_ERR: Raised when it would return more
							      >	     *   fit in a <code>DOMString</code> variable on the impl
							      >	     *   platform.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public void setTextContent(String textContent)
							      >	        throws DOMException {
							      >	        setNodeValue(textContent);
							      >	    }
							      >	    
							      >	    /**
							      >	     * This attribute returns the text content of this node a
							      >	     * descendants. When it is defined to be null, setting it
							      >	     * When set, any possible children this node may have are
							      >	     * replaced by a single <code>Text</code> node containing
							      >	     * this attribute is set to. On getting, no serialization
							      >	     * the returned string does not contain any markup. No wh
							      >	     * normalization is performed, the returned string does n
							      >	     * element content whitespaces . Similarly, on setting, n
							      >	     * performed either, the input string is taken as pure te
							      >	     * <br>The string returned is made of the text content of
							      >	     * depending on its type, as defined below:
							      >	     * <table border='1'>
							      >	     * <tr>
							      >	     * <th>Node type</th>
							      >	     * <th>Content</th>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * ELEMENT_NODE, ENTITY_NODE, ENTITY_REFERENCE_NODE,
							      >	     * DOCUMENT_FRAGMENT_NODE</td>
							      >	     * <td valign='top' rowspan='1' colspan='1'>concatenation
							      >	     * attribute value of every child node, excluding COMMENT
							      >	     * PROCESSING_INSTRUCTION_NODE nodes</td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>ATTRIBUTE_NOD
							      >	     * CDATA_SECTION_NODE, COMMENT_NODE, PROCESSING_INSTRUCTI
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * <code>nodeValue</code></td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>DOCUMENT_NODE
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * null</td>
							      >	     * </tr>
							      >	     * </table>
							      >	     * @exception DOMException
							      >	     *   NO_MODIFICATION_ALLOWED_ERR: Raised when the node is
							      >	     * @exception DOMException
							      >	     *   DOMSTRING_SIZE_ERR: Raised when it would return more
							      >	     *   fit in a <code>DOMString</code> variable on the impl
							      >	     *   platform.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getTextContent() throws DOMException {
							      >	        return getNodeValue();  // overriden in some subclass
							      >	    }
							      >
							      >	    /**
							      >	     * Compares a node with this node with regard to their po
							      >	     * document.
							      >	     * @param other The node to compare against this node.
							      >	     * @return Returns how the given node is positioned relat
							      >	     *   node.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public short compareDocumentPosition(Node other) throws D
							      >	        return 0;
							      >	    }
							      >
							      >	    /**
							      >	     * The absolute base URI of this node or <code>null</code
							      >	     * This value is computed according to . However, when th
							      >	     * <code>Document</code> supports the feature "HTML" , th
							      >	     * computed using first the value of the href attribute o
							      >	     * element if any, and the value of the <code>documentURI
							      >	     * attribute from the <code>Document</code> interface oth
							      >	     * <br> When the node is an <code>Element</code>, a <code
							      >	     * or a a <code>ProcessingInstruction</code>, this attrib
							      >	     * the properties [base URI] defined in . When the node i
							      >	     * <code>Notation</code>, an <code>Entity</code>, or an
							      >	     * <code>EntityReference</code>, this attribute represent
							      >	     * properties [declaration base URI] in the . How will th
							      >	     * by resolution of relative namespace URIs issue?It's no
							      >	     * only be on Document, Element, ProcessingInstruction, E
							      >	     * Notation nodes, according to the infoset? If not, what
							      >	     * on other nodes? Null? An empty string? I think it shou
							      >	     * parent's.No.Should this be read-only and computed or a
							      >	     * read-write attribute?Read-only and computed (F2F 19 Ju
							      >	     * teleconference 30 May 2001).If the base HTML element i
							      >	     * attached to a document, does the insert change the Doc
							      >	     * Yes. (F2F 26 Sep 2001)
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getBaseURI() {
							      >	        return null;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * Renaming node
							      >	     */
							      >	    public Node renameNode(Node n,
							      >	                           String namespaceURI,
							      >	                           String name)
							      >	                           throws DOMException{
							      >	        return n;
							      >	    }
							      >	    
							      >	    /**
							      >	     *  DOM Level 3
							      >	     *  Normalize document.
							      >	     */
							      >	    public void normalizeDocument(){   
							      >
							      >	    }
							      >	    
							      >	    /**
							      >	     *  The configuration used when <code>Document.normalizeD
							      >	     * invoked.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public DOMConfiguration getDomConfig(){
							      >	       return null;
							      >	    }
							      >	    
							      >	    /** DOM Level 3 feature: documentURI */
							      >	    protected String fDocumentURI;
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     */
							      >	    public void setDocumentURI(String documentURI){
							      >	        
							      >	        fDocumentURI= documentURI;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * The location of the document or <code>null</code> if u
							      >	     * <br>Beware that when the <code>Document</code> support
							      >	     * "HTML" , the href attribute of the HTML BASE element t
							      >	     * over this attribute.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getDocumentURI(){
							      >	        return fDocumentURI;
							      >	    }
							      >
							      >	    /** DOM Level 3 feature: Document actualEncoding */
							      >	    protected String actualEncoding;
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * An attribute specifying the actual encoding of this do
							      >	     * <code>null</code> otherwise.
							      >	     * <br> This attribute represents the property [character
							      >	     * defined in .
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getActualEncoding() {
							      >	        return actualEncoding;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * An attribute specifying the actual encoding of this do
							      >	     * <code>null</code> otherwise.
							      >	     * <br> This attribute represents the property [character
							      >	     * defined in .
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public void setActualEncoding(String value) {
							      >	        actualEncoding = value;
							      >	    }
							      >
							      >	   /**
							      >	    * DOM Level 3
							      >	    */
							      >	    public Text replaceWholeText(String content)
							      >	                                 throws DOMException{
							      >	/*
							      >
							      >	        if (needsSyncData()) {
							      >	            synchronizeData();
							      >	        }
							      >
							      >	        // make sure we can make the replacement
							      >	        if (!canModify(nextSibling)) {
							      >	            throw new DOMException(DOMException.NO_MODIFICATI
							      >	                DOMMessageFormatter.formatMessage(DOMMessageF
							      >	        }
							      >
							      >	        Node parent = this.getParentNode();
							      >	        if (content == null || content.length() == 0) {
							      >	            // remove current node
							      >	            if (parent !=null) { // check if node in the tree
							      >	                parent.removeChild(this);
							      >	                return null;
							      >	            }
							      >	        }
							      >	        Text currentNode = null;
							      >	        if (isReadOnly()){
							      >	            Text newNode = this.ownerDocument().createTextNod
							      >	            if (parent !=null) { // check if node in the tree
							      >	                parent.insertBefore(newNode, this);
							      >	                parent.removeChild(this);
							      >	                currentNode = newNode;
							      >	            } else {
							      >	                return newNode;
							      >	            }
							      >	        }  else {
							      >	            this.setData(content);
							      >	            currentNode = this;
							      >	        }
							      >	        Node sibling =  currentNode.getNextSibling();
							      >	        while ( sibling !=null) {
							      >	            parent.removeChild(sibling);
							      >	            sibling = currentNode.getNextSibling();
							      >	        }
							      >
							      >	        return currentNode;
							      >	*/
							      >	        return null; //Pending
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * Returns all text of <code>Text</code> nodes logically-
							      >	     * nodes to this node, concatenated in document order.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getWholeText(){
							      >
							      >	/*
							      >	        if (needsSyncData()) {
							      >	            synchronizeData();
							      >	        }
							      >	        if (nextSibling == null) {
							      >	            return data;
							      >	        }
							      >	        StringBuffer buffer = new StringBuffer();
							      >	        if (data != null && data.length() != 0) {
							      >	            buffer.append(data);
							      >	        }
							      >	        getWholeText(nextSibling, buffer);
							      >	        return buffer.toString();
							      >	*/
							      >	        return null; // PENDING
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * Returns whether this text node contains whitespace in 
							      >	     * often abusively called "ignorable whitespace".
							      >	     */
							      >	    public boolean isElementContentWhitespace(){
							      >	        return false;
							      >	    }
							      >
							      >	    /**
							      >	     * NON-DOM: set the type of this attribute to be ID type.
							      >	     *
							      >	     * @param id
							      >	     */
							      >	    public void setIdAttribute(boolean id){
							      >	        //PENDING
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3: register the given attribute node as an I
							      >	     */
							      >	    public void setIdAttribute(String name, boolean makeId) {
							      >	        //PENDING
							      >	    }
							      >
							      >	       
							      >	    /**
							      >	     * DOM Level 3: register the given attribute node as an I
							      >	     */
							      >	    public void setIdAttributeNode(Attr at, boolean makeId) {
							      >	        //PENDING
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3: register the given attribute node as an I
							      >	     */
							      >	    public void setIdAttributeNS(String namespaceURI, String 
							      >	                                    boolean makeId) {
							      >	        //PENDING
							      >	    }
							      >
							      >	    public TypeInfo getSchemaTypeInfo(){
							      >	      return null; //PENDING
							      >	    }
							      >
							      >	    public boolean isId() {
							      >	        return false; //PENDING
							      >	    }
							      >
							      >
							      >	    private String xmlEncoding;
							      >	    
							      >	    public String getXmlEncoding( ) {
							      >	        return xmlEncoding;
							      >	    }
							      >	    
							      >	    public void setXmlEncoding( String xmlEncoding ) {
							      >	        this.xmlEncoding = xmlEncoding;
							      >	    }
							      >
							      >	    private boolean xmlStandalone;
							      >	    
							      >	    public boolean getXmlStandalone() {
							      >	        return xmlStandalone;
							      >	    }
							      >
							      >	    public void setXmlStandalone(boolean xmlStandalone) throw
							      >	        this.xmlStandalone = xmlStandalone;
							      >	    }
							      >
							      >	    private String xmlVersion;
							      >	    
							      >	    public String getXmlVersion() {
							      >	        return xmlVersion;
							      >	    }
							      >
							      >	    public void setXmlVersion(String xmlVersion) throws DOMEx
							      >	        this.xmlVersion = xmlVersion;
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/DTMTreeWalker.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/DTMTreeWalker.java
 * $Id: DTMTreeWalker.java,v 1.6 2004/02/16 23:06:11 minchau  |	 * $Id: DTMTreeWalker.java,v 1.7 2005/01/24 00:34:35 mcnamara
   * @param   contentHandler The implemention of the	      <
   * contentHandler operation (toXMLString, digest, ...)      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/ExpandedNameTable.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/ExpandedNameTable.java
 * $Id: ExpandedNameTable.java,v 1.13 2004/02/16 23:06:11 min |	 * $Id: ExpandedNameTable.java,v 1.14 2005/01/24 00:34:35 mcn
   *							      <
   * @param namespace					      <
   * @param localName					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/IncrementalSAXSource_Filter.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/IncrementalSAXSource_Filter.java
 * $Id: IncrementalSAXSource_Filter.java,v 1.11 2004/02/16 23 |	 * $Id: IncrementalSAXSource_Filter.java,v 1.12 2004/08/17 18
							      >	          static final long serialVersionUID = -1129245796185
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/IncrementalSAXSource_Xerces.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/IncrementalSAXSource_Xerces.java
 * $Id: IncrementalSAXSource_Xerces.java,v 1.15 2004/02/23 10 |	 * $Id: IncrementalSAXSource_Xerces.java,v 1.16 2004/12/15 17
							      |	//  Would null work???
	static final Object[] noparms=new Object[0]; // Would |	    private static final Object[] noparms=new Object[0];
	static final Object[] parmsfalse={Boolean.FALSE};     |	    private static final Object[] parmsfalse={Boolean.FALSE};
	private boolean parseSome()			      |	    private boolean parseSome()
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:36 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 18:57:21 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:36 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 18:57:21
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 77727828
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/sax2dtm/SAX2DTM2.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/sax2dtm/SAX2DTM2.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: SAX2DTM2.java,v 1.10 2004/02/24 04:22:12 zongaro Exp  |	 * $Id: SAX2DTM2.java,v 1.15 2005/01/27 15:28:02 zongaro Exp 
import org.apache.xml.utils.IntStack;			      |	import org.apache.xml.utils.SuballocatedIntVector;
 * and DTMDefaultBase are overridden in SAX2DTM2 in order to  |	 * and DTMDefaultBase are overridden in SAX2DTM2 in order to 
 * Performance is the biggest consideration in the design of  |	 * Performance is the biggest consideration in the design of 
 * of also using it in Xalan-J Interpretive. Xalan's performa |	 * of also using it in Xalan-J Interpretive. Xalan's performa
   							      |
        						      |
        						      |
      } 						      |	      }
	  return returnNode(makeNodeHandle(result));          |		  return returnNode(makeNodeHandle(result));
      							      |
      return DTM.NULL;      				      |	      return DTM.NULL;
      // need to compare the expType with DTM.NTYPES. A child |	      // need to compare the expType with DTM.NTYPES. A child
      							      |
      int node = _currentNode; 				      |	      int node = _currentNode;
      							      |
      if (nodeType != DTM.ELEMENT_NODE) {   		      |	      if (nodeType != DTM.ELEMENT_NODE) {
          						      |
   * Iterator that returns the namespace nodes as defined by  |	   * Iterator that returns the namespace nodes as defined by 
      } 						      |	      }
        } 						      |	        }
      							      |
      // singleton iterator, since there can only be one attr |	      // singleton iterator, since there can only be one attr
        if(ExpandedNameTable.ATTRIBUTE == type 		      |	        if(ExpandedNameTable.ATTRIBUTE == type
          if(NULL!=_currentNode)			      |	          if(NULL!=_currentNode)
      } 						      |	      }
    							      |
     */    						      |	     */
      							      |
      							      |
      							      |
        }      						      |	        }
      							      |
      							      |
        						      |
        						      |
          } 						      |	          }
          } 						      |	          }
             						      |
    							      |
        						      |
    							      |
      							      |
          } 						      |	          }
        						      |
          currentNodeID = (type != NULL) ? current : NULL;    |	          currentNodeID = (type != NULL) ? current : NULL;
        } 						      |	        }
          } 						      |	          }
        						      |
          currentNodeID = (type != NULL) ? current : NULL;    |	          currentNodeID = (type != NULL) ? current : NULL;
        } 						      |	        }
               && (_exptype2(node) != nodeType && _type2(node |	               && (_exptype2(node) != nodeType && _type2(node
    							      |
    							      |
    // Number of ancestor nodes in the array    	      |	    // Number of ancestor nodes in the array
    							      |
    							      |
    							      |
        						      |
        // Start from the current node's parent if 	      |	        // Start from the current node's parent if
          						      |
        						      |
      							      |
      							      |
        						      |
        						      |
    							      |
    /** 						      |	    /**
     * defined by XPath.    				      |	     * defined by XPath.
                 || NAMESPACE_NODE == type);      	      |	                 || NAMESPACE_NODE == type);
  							      |
     */ 						      |	     */
    							      |
      							      |
        while (expType != nodeType);      		      |	        while (expType != nodeType);
	} while (expType < DTM.NTYPES 			      |		} while (expType < DTM.NTYPES
        while (expType < DTM.NTYPES 			      |	        while (expType < DTM.NTYPES
	       || m_extendedTypes[expType].getNodeType() != D |		       || m_extendedTypes[expType].getNodeType() != D
      							      |
      							      |
      } 						      |	      }
   *                End of nested iterators          	      |	   *                End of nested iterators
  // %OPT% Array references which are used to cache the map0  |	  // %OPT% Array references which are used to cache the map0 
  							      |
  							      |
  // A Vector which is used to store the values of attribute, |	  // A Vector which is used to store the values of attribute,
  							      |
  							      |
  							      |
  							      |
   * calls for each getStringValueX() and dispatchCharacterEv |	   * calls for each getStringValueX() and dispatchCharacterEv
  							      |
  							      |
  							      |
  							      |
      							      |
  							      |
 							      |
        						      |
    							      |
    							      |
    							      |
    							      |
    							      |
  							      |
   * 							      |	   *
    return m_exptype.elementAt(identity);    		      |	    return m_exptype.elementAt(identity);
 							      |
    							      |
      return m_exptype_map[identity>>>m_SHIFT][identity&m_MAS |	      return m_exptype_map[identity>>>m_SHIFT][identity&m_MAS
  							      |
    							      |
      return m_nextsib_map[identity>>>m_SHIFT][identity&m_MAS |	      return m_nextsib_map[identity>>>m_SHIFT][identity&m_MAS
  							      |
    							      |
      return m_firstch_map[identity>>>m_SHIFT][identity&m_MAS |	      return m_firstch_map[identity>>>m_SHIFT][identity&m_MAS
  							      |
    							      |
      return m_parent_map[identity>>>m_SHIFT][identity&m_MASK |	      return m_parent_map[identity>>>m_SHIFT][identity&m_MASK
  							      |
      eType = m_exptype_map[identity>>>m_SHIFT][identity&m_MA |	      eType = m_exptype_map[identity>>>m_SHIFT][identity&m_MA
  							      |
    							      |
    							      |
    							      |
        return m_exptype_map[nodeID>>>m_SHIFT][nodeID&m_MASK] |	        return m_exptype_map[nodeID>>>m_SHIFT][nodeID&m_MASK]
  							      |
   							      |
      return NULL;    					      |	      return NULL;
   * @param name The element type name.			      <
   *							      <
							      |
    							      |
    							      |
      							      |
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
   *							      <
  }  							      |	  }
							      |
  							      |
        						      |
    							      |
      if (doStrip)					      |	      if (doStrip) {
      else						      |	      } else {
      {							      |	        // Guard against characters/ignorableWhitespace event
        // If the offset and length do not exceed the given l |	        // contained no characters.  They should not result i
        // (offset < 2^21 and length < 2^10), then save both  |	        if (length > 0) {
        // and length in a bitwise encoded value.	      |	          // If the offset and length do not exceed the given
        if (length <= TEXT_LENGTH_MAX && m_textPendingStart < |	          // (offset < 2^21 and length < 2^10), then save bot
        {						      |	          // and length in a bitwise encoded value.
          m_previous = addNode(m_coalescedTextType, DTM.TEXT_ |	          if (length <= TEXT_LENGTH_MAX
							      >	                  && m_textPendingStart <= TEXT_OFFSET_MAX) {
							      >	            m_previous = addNode(m_coalescedTextType, DTM.TEX
          						      <
        }						      <
        else						      <
        {						      <
          // Store the offset and length in the m_data array  <
          // exceeds the given limits. Use a negative dataInd <
          int dataIndex = m_data.size();		      <
          m_previous = addNode(m_coalescedTextType, DTM.TEXT_ <
                             m_parents.peek(), m_previous, -d <
          m_data.addElement(m_textPendingStart);	      |	          } else {
          m_data.addElement(length);			      |	            // Store offset and length in the m_data array if
							      >	            // the given limits. Use a negative dataIndex as 
							      >	            int dataIndex = m_data.size();
							      >	            m_previous = addNode(m_coalescedTextType, DTM.TEX
							      >	                               m_parents.peek(), m_previous, 
							      >
							      >	            m_data.addElement(m_textPendingStart);
							      >	            m_data.addElement(length);
							      >	          }
   * 							      |	   *
   * 							      |	   *
    m_previous = addNode(DTM.PROCESSING_INSTRUCTION_NODE,     |	    m_previous = addNode(DTM.PROCESSING_INSTRUCTION_NODE,
    							      |
  protected final int getTypedAttribute(int nodeHandle, int a |	  protected final int getTypedAttribute(int nodeHandle, int a
          						      |
    							      |
    							      |
    							      |
							      |
   * 							      |	   *
    							      |
      return m_valuesOrPrefixes.indexToString(dataIndex);     |	      return m_valuesOrPrefixes.indexToString(dataIndex);
    							      |
      return m_valuesOrPrefixes.indexToString(dataIndex);     |	      return m_valuesOrPrefixes.indexToString(dataIndex);
    							      |
                         				      |
      							      |
      							      |
      String localName = extType.getLocalName(); 	      |	      String localName = extType.getLocalName();
	return m_valuesOrPrefixes.indexToString(dataIndex);   |		return m_valuesOrPrefixes.indexToString(dataIndex);
	return m_fixednames[type];			      |	        return getFixedNames(type);
	return localName;      				      |		return localName;
      							      |
    							      |
	do 						      |		do
	    if (dataIndex > 0)				      |		    if (dataIndex >= 0)
	      length += dataIndex & TEXT_LENGTH_MAX;	      |		      length += dataIndex & TEXT_LENGTH_MAX;
    } 							      |	    }
      if (dataIndex > 0)				      |	      if (dataIndex >= 0)
      	  return m_xstrf.newstr(m_chars, dataIndex >>> TEXT_L |	      	  return m_xstrf.newstr(m_chars, dataIndex >>> TEXT_L
      	  return new XMLStringDefault(m_chars.getString(dataI |	      	  return new XMLStringDefault(m_chars.getString(dataI
          return new XMLStringDefault(m_chars.getString(m_dat |	          return new XMLStringDefault(m_chars.getString(m_dat
  							      |
   * 							      |	   *
    							      |
	do 						      |		do
	    if (dataIndex > 0)				      |		    if (dataIndex >= 0)
	      length += dataIndex & TEXT_LENGTH_MAX;	      |		      length += dataIndex & TEXT_LENGTH_MAX;
    } 							      |	    }
      if (dataIndex > 0)				      |	      if (dataIndex >= 0)
      	return m_chars.getString(dataIndex >>> TEXT_LENGTH_BI |	      	return m_chars.getString(dataIndex >>> TEXT_LENGTH_BI
        return m_chars.getString(m_data.elementAt(-dataIndex) |	        return m_chars.getString(m_data.elementAt(-dataIndex)
      							      |
    // optimization: only create StringBuffer if > 1 child    |	    // optimization: only create StringBuffer if > 1 child
      if (dataIndex > 0)				      |	      if (dataIndex >= 0)
        return m_chars.getString(m_data.elementAt(-dataIndex) |	        return m_chars.getString(m_data.elementAt(-dataIndex)
                                  m_data.elementAt(-dataIndex |	                                  m_data.elementAt(-dataIndex
    							      |
    							      |
    							      |
	do 						      |		do
	    if (dataIndex > 0)				      |		    if (dataIndex >= 0)
	      length += dataIndex & TEXT_LENGTH_MAX;	      |		      length += dataIndex & TEXT_LENGTH_MAX;
    } 							      |	    }
      if (dataIndex > 0)				      |	      if (dataIndex >= 0)
          m_chars.sendNormalizedSAXcharacters(ch, m_data.elem |	          m_chars.sendNormalizedSAXcharacters(ch, m_data.elem
                                              m_data.elementA |	                                              m_data.elementA
          m_chars.sendSAXcharacters(ch, m_data.elementAt(-dat |	          m_chars.sendSAXcharacters(ch, m_data.elementAt(-dat
      							      |
      							      |
      	return m_chars.getString(dataIndex >>> TEXT_LENGTH_BI |	      	return m_chars.getString(dataIndex >>> TEXT_LENGTH_BI
        return m_chars.getString(m_data.elementAt(-dataIndex) |	        return m_chars.getString(m_data.elementAt(-dataIndex)
            if (dataIndex > 0) {			      |	            if (dataIndex >= 0) {
        }      						      |	        }
      							      |
            return name;           			      |	            return name;
    							      |
          						      |
    							      |
            return qName;           			      |	            return qName;
        }        					      |	        }
             						      |
    							      |
     /**						      |	    /**
							      >	    protected final void copyNS(final int nodeID, Serializati
							      >	        throws SAXException
							      >	    {
							      >	        // %OPT% Optimization for documents which does not ha
							      >	        // namespace nodes. For these documents, there is an 
							      >	        // namespace node (xmlns:xml="http://www.w3.org/XML/1
							      >	        // declared on the root element node. In this case, t
							      >	        // need to do namespace copying. We can safely return
							      >	        // doing anything.
							      >	        if (m_namespaceDeclSetElements != null &&
							      >	            m_namespaceDeclSetElements.size() == 1 &&
							      >	            m_namespaceDeclSets != null &&
							      >	            ((SuballocatedIntVector)m_namespaceDeclSets.eleme
							      >	            .size() == 1)
							      >	            return;
							      >
							      >	        SuballocatedIntVector nsContext = null;
							      >	        int nextNSNode;
							      >
							      >	        // Find the first namespace node
							      >	        if (inScope) {
							      >	            nsContext = findNamespaceContext(nodeID);
							      >	            if (nsContext == null || nsContext.size() < 1)
							      >	                return;
							      >	            else
							      >	                nextNSNode = makeNodeIdentity(nsContext.eleme
							      >	        }
							      >	        else
							      >	            nextNSNode = getNextNamespaceNode2(nodeID);
  protected final void copyNS(final int nodeID, Serialization |	        int nsIndex = 1;
        throws SAXException{				      |	        while (nextNSNode != DTM.NULL) {
       final int node = makeNodeHandle(nodeID);		      |	            // Retrieve the name of the namespace node
       for(int current = getFirstNamespaceNode(node, inScope) |	            int eType = _exptype2(nextNSNode);
           current = getNextNamespaceNode(node, current, inSc |	            String nodeName = m_extendedTypes[eType].getLocal
                handler.namespaceAfterStartElement(getNodeNam |
       }						      |	            // Retrieve the node value of the namespace node
      							      |	            int dataIndex = m_dataOrQName.elementAt(nextNSNod
							      >
							      >	            if (dataIndex < 0) {
							      >	                dataIndex = -dataIndex;
							      >	                dataIndex = m_data.elementAt(dataIndex + 1);
							      >	            }
							      >
							      >	            String nodeValue = (String)m_values.elementAt(dat
							      >
							      >	            handler.namespaceAfterStartElement(nodeName, node
							      >
							      >	            if (inScope) {
							      >	                if (nsIndex < nsContext.size()) {
							      >	                    nextNSNode = makeNodeIdentity(nsContext.e
							      >	                    nsIndex++;
							      >	                }
							      >	                else
							      >	                    return;
							      >	            }
							      >	            else
							      >	                nextNSNode = getNextNamespaceNode2(nextNSNode
							      >	        }
							      >	    }
							      >
							      >	    /**
							      >	     * Return the next namespace node following the given bas
							      >	     *
							      >	     * @baseID The node identity of the base node, which can 
							      >	     * element, attribute or namespace node.
							      >	     * @return The namespace node immediately following the b
							      >	     */
							      >	    protected final int getNextNamespaceNode2(int baseID) {
							      >	        int type;
							      >	        while ((type = _type2(++baseID)) == DTM.ATTRIBUTE_NOD
							      >
							      >	        if (type == DTM.NAMESPACE_NODE)
							      >	            return baseID;
							      >	        else
							      >	            return NULL;
   							      |
protected final void copyAttributes(final int nodeID, Seriali |	    protected final void copyAttributes(final int nodeID, Ser
        throws SAXException{      			      |	        throws SAXException{
       							      |
       for(int current = getFirstAttributeIdentity(nodeID); c |	       for(int current = getFirstAttributeIdentity(nodeID); c
       }     						      |	       }
 							      |
  							      |
     * @param handler The SerializationHandler     	      |	     * @param handler The SerializationHandler
    protected final void copyAttribute(int nodeID, int exptyp |	    protected final void copyAttribute(int nodeID, int exptyp
        						      |
        if (uri.length() != 0) {			      <
            handler.namespaceAfterStartElement(prefix, uri);  |	            if (uri.length() != 0) {
        }						      |	                handler.namespaceAfterStartElement(prefix, ur
        						      |	            }
							      >
        						      |
    							      |
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/sax2dtm/SAX2DTM.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/sax2dtm/SAX2DTM.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: SAX2DTM.java,v 1.36 2004/02/17 04:07:37 minchau Exp $ |	 * $Id: SAX2DTM.java,v 1.39 2005/01/27 15:17:41 zongaro Exp $
  static final String[] m_fixednames = { null, null,  // noth |	  private static final String[] m_fixednames = { null, 
                                         null, "#text",  // A |	                    null,  // nothing, Element
                                         "#cdata_section", nu |	                    null, "#text",  // Attr, Text
                                         null, null,  // Enti |	                    "#cdata_section", null,  // CDATA, Entity
                                         "#comment", "#docume |	                    null, null,  // Entity, PI
                                         null, "#document-fra |	                    "#comment", "#document",  // Comment, Doc
                                         null };  // Notation |	                    null, "#document-fragment",  // Doctype, 
							      >	                    null };  // Notation
  /**							      <
   * Describes whether information about document source loca <
   * should be maintained or not. This static flag is set by  <
   */							      <
  protected static boolean m_source_location = false;	      <
							      <
    m_useSourceLocationProperty = m_source_location;	      |	    m_useSourceLocationProperty = mgr.getSource_location();
  public static void setUseSourceLocation(boolean useSourceLo |	  public void setUseSourceLocation(boolean useSourceLocation)
    m_source_location = useSourceLocation;		      |	    m_useSourceLocationProperty = useSourceLocation;
   * @param appCoRID The CoRoutine ID for the application.    <
   * @param the attribute handle			      <
   *							      <
        System.err.println("CODING ERROR in Source Location:  |	        String msg = "CODING ERROR in Source Location: " + m_
                           + " != "			      |	                    + m_sourceSystemId.size();
                            + m_sourceSystemId.size());	      |	        System.err.println(msg);
        System.exit(1);					      |	        throw new RuntimeException(msg);
   * @param the document type declaration handle	      <
   *							      <
   * @param qname The qualified name, which may be null.      <
   * @param uri The namespace URI, which may be null.	      <
   *							      <
      if (doStrip)					      |	      if (doStrip) {
      else						      |	      } else {
      {							      |	        // Guard against characters/ignorableWhitespace event
        int exName = m_expandedNameTable.getExpandedTypeID(DT |	        // contained no characters.  They should not result i
        int dataIndex = m_data.size();			      |	        if (length > 0) {
							      >	          int exName = m_expandedNameTable.getExpandedTypeID(
							      >	          int dataIndex = m_data.size();
        m_previous = addNode(m_coalescedTextType, exName,     |	          m_previous = addNode(m_coalescedTextType, exName,
                             m_parents.peek(), m_previous, da |	                               m_parents.peek(), m_previous, 
        m_data.addElement(m_textPendingStart);		      |	          m_data.addElement(m_textPendingStart);
        m_data.addElement(length);			      |	          m_data.addElement(length);
							      >	        }
   * @param name The element type name.			      <
   *							      <
   * @param name The element type name.			      <
   * @param attributes The specified or defaulted attributes. <
   *							      <
							      >	  }
							      >	  
							      >	  public String getFixedNames(int type){
							      >	    return m_fixednames[type];
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/dtm/ref/sax2dtm/SAX2RTFDTM.java xalan-j_2_7_0/src/org/apache/xml/dtm/ref/sax2dtm/SAX2RTFDTM.java
 * $Id: SAX2RTFDTM.java,v 1.9 2004/02/17 04:07:37 minchau Exp |	 * $Id: SAX2RTFDTM.java,v 1.10 2005/01/24 00:34:36 mcnamara E
   *  @param nodeHandle the id of the node.		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_ca.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_ca.java
 * $Id: XMLErrorResources_ca.java,v 1.2 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_ca.java,v 1.3 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_cs.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_cs.java
 * $Id: XMLErrorResources_cs.java,v 1.2 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_cs.java,v 1.3 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_de.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_de.java
 * $Id: XMLErrorResources_de.java,v 1.4 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_de.java,v 1.5 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_es.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_es.java
 * $Id: XMLErrorResources_es.java,v 1.4 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_es.java,v 1.5 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_fr.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_fr.java
 * $Id: XMLErrorResources_fr.java,v 1.4 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_fr.java,v 1.5 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_hu.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_hu.java
 * $Id: XMLErrorResources_hu.java,v 1.2 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_hu.java,v 1.3 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_it.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_it.java
 * $Id: XMLErrorResources_it.java,v 1.4 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_it.java,v 1.5 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_ja.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_ja.java
 * $Id: XMLErrorResources_ja.java,v 1.4 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_ja.java,v 1.5 2004/12/15 17:35:50 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: XMLErrorResources.java,v 1.7 2004/02/17 04:14:26 minc |	 * $Id: XMLErrorResources.java,v 1.10 2005/06/29 19:30:33 jyc
  /** Maximum error messages, this is needed to keep track of <
  public static final int MAX_CODE = 61;		      <
							      <
  /** Maximum warnings, this is needed to keep track of the n <
  public static final int MAX_WARNING = 0;		      <
							      <
  /** Maximum misc strings.   */			      <
  public static final int MAX_OTHERS = 4;		      <
							      <
  /** Maximum total warnings and error messages.          */  <
  public static final int MAX_MESSAGES = MAX_CODE + MAX_WARNI <
							      <
							      <
  // Message keys used by the serializer		      <
  public static final String ER_RESOURCE_COULD_NOT_FIND = "ER <
  public static final String ER_RESOURCE_COULD_NOT_LOAD = "ER <
  public static final String ER_BUFFER_SIZE_LESSTHAN_ZERO = " <
  public static final String ER_INVALID_UTF16_SURROGATE = "ER <
  public static final String ER_OIERROR = "ER_OIERROR";	      <
  public static final String ER_NAMESPACE_PREFIX = "ER_NAMESP <
  public static final String ER_STRAY_ATTRIBUTE = "ER_STRAY_A <
  public static final String ER_STRAY_NAMESPACE = "ER_STRAY_N <
  public static final String ER_COULD_NOT_LOAD_RESOURCE = "ER <
  public static final String ER_COULD_NOT_LOAD_METHOD_PROPERT <
  public static final String ER_SERIALIZER_NOT_CONTENTHANDLER <
  public static final String ER_ILLEGAL_ATTRIBUTE_POSITION =  <
  public static final String ER_ILLEGAL_CHARACTER = "ER_ILLEG <
							      <
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
    { "column","Column #"},				      |	    { "column","Column #"}
    							      |	  
    {ER_SERIALIZER_NOT_CONTENTHANDLER,			      <
      "The serializer class ''{0}'' does not implement org.xm <
    							      <
    {ER_RESOURCE_COULD_NOT_FIND,			      <
      "The resource [ {0} ] could not be found.\n {1}" },     <
    							      <
    {ER_RESOURCE_COULD_NOT_LOAD,			      <
      "The resource [ {0} ] could not load: {1} \n {2} \t {3} <
    							      <
    {ER_BUFFER_SIZE_LESSTHAN_ZERO,			      <
      "Buffer size <=0" },				      <
    							      <
    {ER_INVALID_UTF16_SURROGATE,			      <
      "Invalid UTF-16 surrogate detected: {0} ?" },	      <
    							      <
    {ER_OIERROR,					      <
      "IO error" },					      <
    							      <
    {ER_ILLEGAL_ATTRIBUTE_POSITION,			      <
      "Cannot add attribute {0} after child nodes or before a <
							      <
      /*						      <
       * Note to translators:  The stylesheet contained a ref <
       * namespace prefix that was undefined.  The value of t <
       * text is the name of the prefix.		      <
       */						      <
    {ER_NAMESPACE_PREFIX,				      <
      "Namespace for prefix ''{0}'' has not been declared." } <
      /*						      <
       * Note to translators:  This message is reported if th <
       * being processed attempted to construct an XML docume <
       * attribute in a place other than on an element.  The  <
       * specifies the name of the attribute.		      <
       */						      <
    {ER_STRAY_ATTRIBUTE,				      <
      "Attribute ''{0}'' outside of element." },	      <
							      <
      /*						      <
       * Note to translators:  As with the preceding message, <
       * declaration has the form of an attribute and is only <
       * appear on an element.  The substitution text {0} is  <
       * prefix and {1} is the URI that was being used in the <
       * namespace declaration.				      <
       */						      <
    {ER_STRAY_NAMESPACE,				      <
      "Namespace declaration ''{0}''=''{1}'' outside of eleme <
							      <
    {ER_COULD_NOT_LOAD_RESOURCE,			      <
      "Could not load ''{0}'' (check CLASSPATH), now using ju <
							      <
    { ER_ILLEGAL_CHARACTER,				      <
       "Attempt to output character of integral value {0} tha <
    							      <
    {ER_COULD_NOT_LOAD_METHOD_PROPERTY,			      <
      "Could not load the propery file ''{0}'' for output met <
    							      <
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_ko.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_ko.java
 * $Id: XMLErrorResources_ko.java,v 1.4 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_ko.java,v 1.5 2004/12/15 17:35:51 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_pl.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_pl.java
 * $Id: XMLErrorResources_pl.java,v 1.2 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_pl.java,v 1.3 2004/12/15 17:35:51 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_pt_BR.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_pt_BR.java
 * $Id: XMLErrorResources_pt_BR.java,v 1.2 2004/02/17 04:14:2 |	 * $Id: XMLErrorResources_pt_BR.java,v 1.3 2004/12/15 17:35:5
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_ru.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_ru.java
 * $Id: XMLErrorResources_ru.java,v 1.2 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_ru.java,v 1.3 2004/12/15 17:35:51 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_sk.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_sk.java
 * $Id: XMLErrorResources_sk.java,v 1.2 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_sk.java,v 1.3 2004/12/15 17:35:51 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_sv.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_sv.java
 * $Id: XMLErrorResources_sv.java,v 1.3 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_sv.java,v 1.4 2004/12/15 17:35:51 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
 							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_tr.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_tr.java
 * $Id: XMLErrorResources_tr.java,v 1.2 2004/02/17 04:14:26 m |	 * $Id: XMLErrorResources_tr.java,v 1.3 2004/12/15 17:35:51 j
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_zh_CN.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_zh_CN.java
 * $Id: XMLErrorResources_zh_CN.java,v 1.4 2004/02/17 04:14:2 |	 * $Id: XMLErrorResources_zh_CN.java,v 1.5 2004/12/15 17:35:5
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLErrorResources_zh_TW.java xalan-j_2_7_0/src/org/apache/xml/res/XMLErrorResources_zh_TW.java
 * $Id: XMLErrorResources_zh_TW.java,v 1.4 2004/02/17 04:14:2 |	 * $Id: XMLErrorResources_zh_TW.java,v 1.5 2004/12/15 17:35:5
  /** The lookup table for error messages.   */		      |	  /**
  public static final Object[][] contents = {		      |	   * Get the lookup table for error messages
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][] {
							      <
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/res/XMLMessages.java xalan-j_2_7_0/src/org/apache/xml/res/XMLMessages.java
 * $Id: XMLMessages.java,v 1.5 2004/02/17 04:14:26 minchau Ex |	 * $Id: XMLMessages.java,v 1.7 2005/01/23 00:52:40 mcnamara E
  protected static String BAD_CODE = "BAD_CODE";	      |	  protected static final String BAD_CODE = "BAD_CODE";
  protected static String FORMAT_FAILED = "FORMAT_FAILED";    |	  protected static final String FORMAT_FAILED = "FORMAT_FAILE
   * @param errorCode The key for the message text.	      |	   * @param msgKey    The key for the message text.
   * @param errorCode The key for the message text.	      <
   *							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/AttributesImplSerializer.java xalan-j_2_7_0/src/org/apache/xml/serializer/AttributesImplSerializer.java
 * $Id: AttributesImplSerializer.java,v 1.4 2004/02/17 04:18: |	 * $Id: AttributesImplSerializer.java,v 1.6 2005/02/11 06:18:
							      >	 * 
							      >	 * @xsl.usage internal
public class AttributesImplSerializer extends AttributesImpl  |	public final class AttributesImplSerializer extends Attribute
							      >	     * 
							      >	     * The keys to the hashtable to find the index are either
							      >	     * "prefix:localName"  or "{uri}localName".
    private Hashtable m_indexFromQName = new Hashtable();     |	    private final Hashtable m_indexFromQName = new Hashtable(
							      >	    
							      >	    private final StringBuffer m_buff = new StringBuffer();
     * and can be tuned, but 12 seems good for now - bjm      |	     * and can be tuned, but 12 seems good for now - Brian M.
    public static final int MAX = 12;			      |	    private static final int MAX = 12;
    public int getIndex(String qname)			      |	    public final int getIndex(String qname)
    public void addAttribute(				      |	    public final void addAttribute(
							      >	            /* add the key with the format of "prefix:localNa
							      >	            
							      >	            /* now add with key of the format "{uri}localName
							      >	            m_buff.setLength(0);
							      >	            m_buff.append('{').append(uri).append('}').append
							      >	            String key = m_buff.toString();
							      >	            m_indexFromQName.put(key, i);
							      >	            
							      >	            // Add quick look-up to find with uri/local name 
							      >	            String uri = super.getURI(index);
							      >	            String local = super.getLocalName(index);
							      >	            m_buff.setLength(0);
							      >	            m_buff.append('{').append(uri).append('}').append
							      >	            String key = m_buff.toString();
							      >	            m_indexFromQName.put(key, i);
    public void clear()					      |	    public final void clear()
    public void setAttributes(Attributes atts)		      |	    public final void setAttributes(Attributes atts)
							      >	    }
							      >	    
							      >	    /**
							      >	     * This method gets the index of an attribute given its u
							      >	     * @param uri the URI of the attribute name.
							      >	     * @param localName the local namer (after the ':' ) of t
							      >	     * @return the integer index of the attribute.
							      >	     * @see org.xml.sax.Attributes#getIndex(String)
							      >	     */
							      >	    public final int getIndex(String uri, String localName)
							      >	    {
							      >	        int index;
							      >
							      >	        if (super.getLength() < MAX)
							      >	        {
							      >	            // if we haven't got too many attributes let the
							      >	            // super class look it up
							      >	            index = super.getIndex(uri,localName);
							      >	            return index;
							      >	        }
							      >	        // we have too many attributes and the super class is
							      >	        // so find it quickly using our Hashtable.
							      >	        // Form the key of format "{uri}localName"
							      >	        m_buff.setLength(0);
							      >	        m_buff.append('{').append(uri).append('}').append(loc
							      >	        String key = m_buff.toString();
							      >	        Integer i = (Integer)m_indexFromQName.get(key);
							      >	        if (i == null)
							      >	            index = -1;
							      >	        else
							      >	            index = i.intValue();
							      >	        return index;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/CharInfo.java xalan-j_2_7_0/src/org/apache/xml/serializer/CharInfo.java
 * $Id: CharInfo.java,v 1.11 2004/02/23 10:29:37 aruny Exp $  |	 * $Id: CharInfo.java,v 1.19 2005/04/07 03:47:14 minchau Exp 
							      >	import java.util.Enumeration;
import java.util.Enumeration;				      <
							      >	import java.security.AccessController;
							      >	import java.security.PrivilegedAction;
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.SystemIDResolver;
import org.apache.xml.utils.CharKey;			      |	import org.apache.xml.serializer.utils.Utils;
import org.apache.xml.utils.SystemIDResolver;		      |	import org.apache.xml.serializer.utils.WrappedRuntimeExceptio
import org.apache.xml.utils.WrappedRuntimeException;	      <
class CharInfo						      |	final class CharInfo
    /** Lookup table for characters to entity references. */  |	    /** Given a character, lookup a String to output (e.g. a 
    private Hashtable m_charToEntityRef = new Hashtable();    |	    private Hashtable m_charToString = new Hashtable();
    public static String HTML_ENTITIES_RESOURCE = "org.apache |	    public static final String HTML_ENTITIES_RESOURCE = 
							      >	                "org.apache.xml.serializer.HTMLEntities";
    public static String XML_ENTITIES_RESOURCE = "org.apache. |	    public static final String XML_ENTITIES_RESOURCE = 
							      >	                "org.apache.xml.serializer.XMLEntities";
    public static char S_CARRIAGERETURN = 0x0D;		      |	    public static final char S_CARRIAGERETURN = 0x0D;
                        XMLMessages.createXMLMessage(	      |	                        Utils.messages.createMessage(
                            XMLErrorResources.ER_RESOURCE_COU |	                            MsgKey.ER_RESOURCE_COULD_NOT_FIND
                    XMLMessages.createXMLMessage(	      |	                    Utils.messages.createMessage(
                        XMLErrorResources.ER_RESOURCE_COULD_N |	                        MsgKey.ER_RESOURCE_COULD_NOT_LOAD,
							      >
							      >
							      >	        onlyQuotAmpLtGt = noExtraEntities;
							      >
							      >	        // initialize the array with a cache of the BitSet va
							      >	        for (int i=0; i<ASCII_MAX; i++)
							      >	            isSpecialAttrASCII[i] = get(i);   
							      >	            
            set(S_HORIZONAL_TAB);			      |	            isSpecialAttrASCII[S_HORIZONAL_TAB] = true;
        						      <
							      <
        onlyQuotAmpLtGt = noExtraEntities;		      <
							      <
        // initialize the array with a cache of the BitSet va <
        for (int i=0; i<ASCII_MAX; i++)			      <
            isSpecialAttrASCII[i] = get(i);    		      <
							      <
        CharKey character = new CharKey(value);		      |	        StringBuffer sb = new StringBuffer("&");
							      |	        sb.append(name);
        m_charToEntityRef.put(character, name);		      |	        sb.append(';');
        set(value);					      |	        String entityString = sb.toString();
							      >	        
							      >	        defineChar2StringMapping(entityString, value);
     * Resolve a character to an entity reference name.	      |	     * Map a character to a String. For example given
							      >	     * the character '>' this method would return the fully d
							      >	     * entity name "&lt;".
							      >	     * Strings for entity references are loaded from a proper
							      >	     * but additional mappings defined through calls to defin
							      >	     * are possible. Such entity reference mappings could be 
     * @param value character value that should be resolved t |	     * @param value The character that should be resolved to
							      >	     * a String, e.g. resolve '>' to  "&lt;".
     * @return name of character entity, or null if not found |	     * @return The String that the character is mapped to, or
    synchronized public String getEntityNameForChar(char valu |	    synchronized String getOutputStringForChar(char value)
        return (String) m_charToEntityRef.get(m_charKey);     |	        return (String) m_charToString.get(m_charKey);
    public final boolean isSpecialAttrChar(int value)	      |	    final boolean isSpecialAttrChar(int value)
    public final boolean isSpecialTextChar(int value)	      |	    final boolean isSpecialTextChar(int value)
    public final boolean isTextASCIIClean(int value)	      |	    final boolean isTextASCIIClean(int value)
							      |	     
							      >	    private static CharInfo getCharInfoBasedOnPrivilege(
							      >	        final String entitiesFileName, final String method, 
							      >	        final boolean internal){
							      >	            return (CharInfo) AccessController.doPrivileged(
							      >	                new PrivilegedAction() {
							      >	                        public Object run() {
							      >	                            return new CharInfo(entitiesFileN
							      >	                              method, internal);}
							      >	            });            
							      >	    }
							      >	     
    public static CharInfo getCharInfo(String entitiesFileNam |	    static CharInfo getCharInfo(String entitiesFileName, Stri
            charInfo = new CharInfo(entitiesFileName, method, |	            charInfo = getCharInfoBasedOnPrivilege(entitiesFi
							      >	                                        method, true);
            return new CharInfo(entitiesFileName, method);    |	            return getCharInfoBasedOnPrivilege(entitiesFileNa
							      >	                                method, false);
        return new CharInfo(absoluteEntitiesFileName, method, |	        return getCharInfoBasedOnPrivilege(entitiesFileName, 
							      >	                                method, false);
    private final void set(int i) {        		      |	    private final void set(int i) {   
							      >	        setASCIIdirty(i);
							      >	             
							      >	    
							      >	    /**
							      >	     * If the character is a printable ASCII character then
							      >	     * mark it as not clean and needing replacement with
							      >	     * a String on output.
							      >	     * @param ch
							      >	     */
							      >	    private void setASCIIdirty(int j) 
							      >	    {
							      >	        if (0 <= j && j < ASCII_MAX) 
							      >	        {
							      >	            isCleanTextASCII[j] = false;
							      >	            isSpecialTextASCII[j] = true;
							      >	        } 
							      >	    }
							      >
							      >	    /**
							      >	     * If the character is a printable ASCII character then
							      >	     * mark it as and not needing replacement with
							      >	     * a String on output.
							      >	     * @param ch
							      >	     */    
							      >	    private void setASCIIclean(int j)
							      >	    {
							      >	        if (0 <= j && j < ASCII_MAX) 
							      >	        {        
							      >	            isCleanTextASCII[j] = true;
							      >	            isSpecialTextASCII[j] = false;
							      >	        }
							      >	    }
							      >	    
							      >	    private void defineChar2StringMapping(String outputString
							      >	    {
							      >	        CharKey character = new CharKey(inputChar);
							      >	        m_charToString.put(character, outputString);
							      >	        set(inputChar);        
							      >	    }
							      >
							      >	    /**
							      >	     * Simple class for fast lookup of char values, when used
							      >	     * hashtables.  You can set the char, then use it as a ke
							      >	     * 
							      >	     * This class is a copy of the one in org.apache.xml.util
							      >	     * It exists to cut the serializers dependancy on that pa
							      >	     *  
							      >	     * @xsl.usage internal
							      >	     */
							      >	    private static class CharKey extends Object
							      >	    {
							      >
							      >	      /** String value          */
							      >	      private char m_char;
							      >
							      >	      /**
							      >	       * Constructor CharKey
							      >	       *
							      >	       * @param key char value of this object.
							      >	       */
							      >	      public CharKey(char key)
							      >	      {
							      >	        m_char = key;
							      >	      }
							      >	  
							      >	      /**
							      >	       * Default constructor for a CharKey.
							      >	       *
							      >	       * @param key char value of this object.
							      >	       */
							      >	      public CharKey()
							      >	      {
							      >	      }
							      >	  
							      >	      /**
							      >	       * Get the hash value of the character.  
							      >	       *
							      >	       * @return hash value of the character.
							      >	       */
							      >	      public final void setChar(char c)
							      >	      {
							      >	        m_char = c;
							      >	      }
							      >
							      >
							      >
							      >	      /**
							      >	       * Get the hash value of the character.  
							      >	       *
							      >	       * @return hash value of the character.
							      >	       */
							      >	      public final int hashCode()
							      >	      {
							      >	        return (int)m_char;
							      >	      }
							      >
							      >	      /**
							      >	       * Override of equals() for this object 
							      >	       *
							      >	       * @param obj to compare to
							      >	       *
							      >	       * @return True if this object equals this string value
							      >	       */
							      >	      public final boolean equals(Object obj)
							      >	      {
							      >	        return ((CharKey)obj).m_char == m_char;
							      >	      }
							      >	    }
							      >	   
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/DOMSerializer.java xalan-j_2_7_0/src/org/apache/xml/serializer/DOMSerializer.java
 * $Id: DOMSerializer.java,v 1.3 2004/02/17 04:18:18 minchau  |	 * $Id: DOMSerializer.java,v 1.5 2005/03/16 20:54:11 minchau 
 * The DOM serializer is a facet of a serializer. A serialize |	 * The DOMSerializer is a facet of a serializer and is obtain
 * not support a DOM serializer.			      |	 * asDOMSerializer() method of the Serializer interface. 
							      >	 * A serializer may or may not support a DOM serializer, if i
							      >	 * return value from asDOMSerializer() is null.
							      >	 * 
							      >	 * ser = ...;
							      >	 * os = ...;
 * ser.asDOMSerializer( doc );				      |	 * DOMSerialzier dser = ser.asDOMSerializer();
							      >	 * dser.serialize(doc);
							      >	 * 
							      >	 * @see Serializer
							      >	 * 
							      >	 * @xsl.usage general
 *							      <
 * @version Alpha					      <
 * @author <a href="mailto:Scott_Boag/CAM/Lotus@lotus.com">Sc <
 * @author <a href="mailto:arkin@exoffice.com">Assaf Arkin</a <
							      >	     * 
							      >	     * This interface is a public API.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ElemContext.java xalan-j_2_7_0/src/org/apache/xml/serializer/ElemContext.java
 * $Id: ElemContext.java,v 1.2 2004/02/17 04:18:19 minchau Ex |	 * $Id: ElemContext.java,v 1.3 2004/10/14 21:45:06 minchau Ex
							      >	 * @xsl.usage internal
class ElemContext					      |	final class ElemContext
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ElemDesc.java xalan-j_2_7_0/src/org/apache/xml/serializer/ElemDesc.java
 * $Id: ElemDesc.java,v 1.4 2004/02/17 04:18:19 minchau Exp $ |	 * $Id: ElemDesc.java,v 1.7 2005/04/07 04:29:03 minchau Exp $
import org.apache.xml.utils.StringToIntTable;		      |	import org.apache.xml.serializer.utils.StringToIntTable;
							      >	 * 
							      >	 * This class is public because XSLTC uses it, it is not a pu
							      >	 * 
							      >	 * @xsl.usage internal
    int m_flags;					      |	    private int m_flags;
    StringToIntTable m_attrs = null;			      |	    private StringToIntTable m_attrs = null;
    public static final int EMPTY = (1 << 1);		      |	    static final int EMPTY = (1 << 1);
    public static final int FLOW = (1 << 2);		      |	    private static final int FLOW = (1 << 2);
    public static final int BLOCK = (1 << 3);		      |	    static final int BLOCK = (1 << 3);
    public static final int BLOCKFORM = (1 << 4);	      |	    static final int BLOCKFORM = (1 << 4);
    /** Bit position if this element type is a block form fie |	    /** Bit position if this element type is a block form fie
    public static final int BLOCKFORMFIELDSET = (1 << 5);     |	    static final int BLOCKFORMFIELDSET = (1 << 5);
    public static final int CDATA = (1 << 6);		      |	    private static final int CDATA = (1 << 6);
    public static final int PCDATA = (1 << 7);		      |	    private static final int PCDATA = (1 << 7);
    public static final int RAW = (1 << 8);		      |	    static final int RAW = (1 << 8);
    public static final int INLINE = (1 << 9);		      |	    private static final int INLINE = (1 << 9);
    /** Bit position if this element type is INLINEA (?? -sb) |	    /** Bit position if this element type is INLINEA. */
    public static final int INLINEA = (1 << 10);	      |	    private static final int INLINEA = (1 << 10);
    public static final int INLINELABEL = (1 << 11);	      |	    static final int INLINELABEL = (1 << 11);
    public static final int FONTSTYLE = (1 << 12);	      |	    static final int FONTSTYLE = (1 << 12);
    public static final int PHRASE = (1 << 13);		      |	    static final int PHRASE = (1 << 13);
    public static final int FORMCTRL = (1 << 14);	      |	    static final int FORMCTRL = (1 << 14);
    public static final int SPECIAL = (1 << 15);	      |	    static final int SPECIAL = (1 << 15);
    public static final int ASPECIAL = (1 << 16);	      |	    static final int ASPECIAL = (1 << 16);
    public static final int HEADMISC = (1 << 17);	      |	    static final int HEADMISC = (1 << 17);
    public static final int HEAD = (1 << 18);		      |	    static final int HEAD = (1 << 18);
    public static final int LIST = (1 << 19);		      |	    static final int LIST = (1 << 19);
    public static final int PREFORMATTED = (1 << 20);	      |	    static final int PREFORMATTED = (1 << 20);
    public static final int WHITESPACESENSITIVE = (1 << 21);  |	    static final int WHITESPACESENSITIVE = (1 << 21);
    public static final int HEADELEM = (1 << 22);	      |	    static final int HEADELEM = (1 << 22);
							      >	    
							      >	    /** Bit position if this element is the "HTML" element */
							      >	    private static final int HTMLELEM = (1 << 23);
    public ElemDesc(int flags)				      |	    ElemDesc(int flags)
    public boolean is(int flags)			      |	    private boolean is(int flags)
    public int getFlags() {				      |	    int getFlags() {
    public void setAttr(String name, int flags)		      |	    void setAttr(String name, int flags)
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/EmptySerializer.java xalan-j_2_7_0/src/org/apache/xml/serializer/EmptySerializer.java
 * $Id: EmptySerializer.java,v 1.5 2004/02/17 04:18:19 mincha |	 * $Id: EmptySerializer.java,v 1.11 2005/04/07 04:29:03 minch
							      >	 * 
							      >	 * This class is not a public API, it is only public because 
							      >	 * across package boundaries.
							      >	 * 
							      >	 * @xsl.usage internal
     * @see org.apache.xml.serializer.SerializationHandler#as |	     * @see SerializationHandler#asContentHandler()
							      >	    
							      >	    protected void couldThrowIOException() throws IOException
							      >	    {
							      >	        return; // don't do anything.
							      >	    }
							      >	    
							      >	    protected void couldThrowSAXException() throws SAXExcepti
							      >	    {
							      >	        return; // don't do anything.
							      >	    }
							      >	    
							      >	    protected void couldThrowSAXException(char[] chars, int o
							      >	    {
							      >	        return; // don't do anything.
							      >	    }
							      >	    
							      >	    protected void couldThrowSAXException(String elemQName) t
							      >	    {
							      >	        return; // don't do anything.
							      >	    }
							      >	    
							      >	    protected void couldThrowException() throws Exception
							      >	    {
							      >	        return; // don't do anything.
							      >	    }
    private static void throwUnimplementedException()	      |	    void aMethodIsCalled()
        /* TODO: throw this exception for real.		      |
         * Some users of this class do not over-ride all meth <
         * they use, which is a violation of the intended use <
         * class. Those tests used to end in error, but fail  <
         * exception is enabled.  Perhaps that is an indicati <
         * the true problem is.  Such tests include copy56,58 <
         * both Xalan-J interpretive and for XSLTC. - bjm     <
         */						      <
							      >	  
							      >	    
     * @see org.apache.xml.serializer.SerializationHandler#as |	     * @see SerializationHandler#asContentHandler()
        throwUnimplementedException();			      |	        couldThrowIOException();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setContentHandler(org.xml.sa
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#cl |	     * @see SerializationHandler#close()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#ge |	     * @see SerializationHandler#getOutputFormat()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#ge |	     * @see SerializationHandler#getOutputStream()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#ge |	     * @see SerializationHandler#getWriter()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#re |	     * @see SerializationHandler#reset()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#serialize(org.w3c.dom.Node)
        throwUnimplementedException();			      |	        couldThrowIOException();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setCdataSectionElements(java
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setEscaping(boolean)
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setIndent(boolean)
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setIndentAmount(int)
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setOutputFormat(java.util.Pr
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setOutputStream(java.io.Outp
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setVersion(java.lang.String)
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setWriter(java.io.Writer)
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setTransformer(javax.xml.tra
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#ge |	     * @see SerializationHandler#getTransformer()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.SerializationHandler#fl |	     * @see SerializationHandler#flushPending()
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addAttribute(java.lang.Str
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)        
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addAttributes(org.xml.sax.
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addAttribute(java.lang.Str
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#characters(java.lang.Strin
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(java.lang.Strin
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startDocument()
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startElement(java.lang.Str
        throwUnimplementedException();			      |	        couldThrowSAXException(qName);
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startElement(java.lang.Str
        throwUnimplementedException();			      |	        couldThrowSAXException(qName);
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#namespaceAfterStartElement
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startPrefixMapping(java.la
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#entityReference(java.lang.
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getNamespaceMappings()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getPrefix(java.lang.String
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getNamespaceURI(java.lang.
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getNamespaceURIFromPrefix(
        throwUnimplementedException();			      |	        aMethodIsCalled();
        throwUnimplementedException();			      |	        aMethodIsCalled();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException(arg0, arg1, arg2);
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.ExtendedLexicalHandler# |	     * @see ExtendedLexicalHandler#comment(java.lang.String)
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getDoctypePublic()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getDoctypeSystem()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getEncoding()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getIndent()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getIndentAmount()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getMediaType()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getOmitXMLDeclaration()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getStandalone()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getVersion()
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setCdataSectionElements
        throwUnimplementedException();			      |	        couldThrowException();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setDoctype(java.lang.String, 
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setDoctypePublic(java.lang.St
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setDoctypeSystem(java.lang.St
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setEncoding(java.lang.String)
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setMediaType(java.lang.String
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setOmitXMLDeclaration(boolean
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setStandalone(java.lang.Strin
        throwUnimplementedException();			      |	        aMethodIsCalled();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
        throwUnimplementedException();			      |	        couldThrowSAXException();
     * @see org.apache.xml.serializer.Serializer#asDOMSeriali |	     * @see Serializer#asDOMSerializer()
        throwUnimplementedException();			      |	        couldThrowIOException();
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setNamespaceMappings(Namespa
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#setSourceLocator(javax.xml
        throwUnimplementedException();			      |	        aMethodIsCalled();
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addUniqueAttribute(java.la
        throwUnimplementedException();			      |	        couldThrowSAXException();
							      >	    }
							      >
							      >	    /**
							      >	     * @see ExtendedContentHandler#characters(org.w3c.dom.Nod
							      >	     */
							      >	    public void characters(Node node) throws SAXException
							      >	    {
							      >	        couldThrowSAXException();        
							      >	    }
							      >	    
							      >	    /**
							      >	     * @see ExtendedContentHandler#addXSLAttribute(java.lang.
							      >	     */
							      >	    public void addXSLAttribute(String qName, String value, S
							      >	    {
							      >	        aMethodIsCalled();        
							      >	    }
							      >
							      >	    /**
							      >	     * @see ExtendedContentHandler#addAttribute(java.lang.Str
							      >	     */
							      >	    public void addAttribute(String uri, String localName, St
							      >	    {
							      >	        couldThrowSAXException();        
							      >	    }
							      >	    /**
							      >	     * @see org.xml.sax.DTDHandler#notationDecl(java.lang.Str
							      >	     */
							      >	    public void notationDecl(String arg0, String arg1, String
							      >	    {
							      >	        couldThrowSAXException(); 
							      >	    }
							      >
							      >	    /**
							      >	     * @see org.xml.sax.DTDHandler#unparsedEntityDecl(java.la
							      >	     */
							      >	    public void unparsedEntityDecl(
							      >	        String arg0,
							      >	        String arg1,
							      >	        String arg2,
							      >	        String arg3)
							      >	        throws SAXException {
							      >	        couldThrowSAXException();
							      >	    }
							      >
							      >	    /**
							      >	     * @see SerializationHandler#setDTDEntityExpansion(boolea
							      >	     */
							      >	    public void setDTDEntityExpansion(boolean expand) {
							      >	        aMethodIsCalled();
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/EncodingInfo.java xalan-j_2_7_0/src/org/apache/xml/serializer/EncodingInfo.java
 * $Id: EncodingInfo.java,v 1.2 2004/02/17 04:18:18 minchau E |	 * $Id: EncodingInfo.java,v 1.6 2005/08/04 23:57:06 minchau E
							      >
							      >	import java.io.UnsupportedEncodingException;
							      >
 * encoding, the equivalent ISO name, and the integer value o |	 * encoding, the equivalent ISO name.
 * character in the encoding.				      |	 * <p>
							      >	 * An object of this type has two useful methods
							      >	 * <pre>
							      >	 * isInEncoding(char ch);
							      >	 * </pre>
							      >	 * which can be called if the character is not the high one i
							      >	 * a surrogate pair and:
							      >	 * <pre>
							      >	 * isInEncoding(char high, char low);
							      >	 * </pre>
							      >	 * which can be called if the two characters from a high/low 
							      >	 * <p>
							      >	 * An EncodingInfo object is a node in a binary search tree. 
							      >	 * will answer if a character is in the encoding, and do so f
							      >	 * range of unicode values (<code>m_first</code> to
							      >	 * <code>m_last</code>). It will handle a certain range of va
							      >	 * explicitly (<code>m_explFirst</code> to <code>m_explLast</
							      >	 * If the unicode point is before that explicit range, that i
							      >	 * is in the range <code>m_first <= value < m_explFirst</code
							      >	 * of such a tree, m_before.  Likewise for values in the rang
							      >	 * <code>m_explLast < value <= m_last</code>, but delgating t
							      >	 * <p>
							      >	 * Actually figuring out if a code point is in the encoding i
							      >	 * purpose of this tree is to cache such determinations, and 
							      >	 * entire tree of information at the start, but only build up
							      >	 * tree as is used during the transformation.
							      >	 * <p>
							      >	 * This Class is not a public API, and should only be used in
							      >	 * the serializer.
							      >	 * 
							      >	 * @xsl.usage internal
public class EncodingInfo extends Object		      |	public final class EncodingInfo extends Object
							      |	    
							      >	    /**
							      >	     * A helper object that we can ask if a
							      >	     * single char, or a surrogate UTF-16 pair
							      >	     * of chars that form a single character,
							      >	     * is in this encoding.
							      >	     */
							      >	    private InEncoding m_encoding;
							      >	    
     * The last printable character.			      |	     * This is not a public API. It returns true if the
							      >	     * char in question is in the encoding.
							      >	     * @param ch the char in question.
							      >	     * @xsl.usage internal
    final int lastPrintable;				      |	    public boolean isInEncoding(char ch) {
							      >	        if (m_encoding == null) {
							      >	            m_encoding = new EncodingImpl();
							      >	            
							      >	            // One could put alternate logic in here to
							      >	            // instantiate another object that implements the
							      >	            // InEncoding interface. For example if the JRE i
							      >	            // we could have an object that uses JRE 1.4 meth
							      >	        }
							      >	        return m_encoding.isInEncoding(ch); 
							      >	    }
							      >	    
							      >	    /**
							      >	     * This is not a public API. It returns true if the
							      >	     * character formed by the high/low pair is in the encodi
							      >	     * @param high a char that the a high char of a high/low 
							      >	     * @param low a char that is the low char of a high/low s
							      >	     * @xsl.usage internal
							      >	     */
							      >	    public boolean isInEncoding(char high, char low) {
							      >	        if (m_encoding == null) {
							      >	            m_encoding = new EncodingImpl();
							      >	            
							      >	            // One could put alternate logic in here to
							      >	            // instantiate another object that implements the
							      >	            // InEncoding interface. For example if the JRE i
							      >	            // we could have an object that uses JRE 1.4 meth
							      >	        }
							      >	        return m_encoding.isInEncoding(high, low); 
							      >	    }
     * Create an EncodingInfo object based on the name, java  |	     * Create an EncodingInfo object based on the ISO name an
     * max character size.				      |	     * If both parameters are null any character will be cons
							      >	     * be in the encoding. This is useful for when the serial
							      >	     * temporary output state, and has no assciated encoding.
     * @param name non-null reference to the ISO name.	      |	     * @param name reference to the ISO name.
     * @param javaName non-null reference to the Java encodin |	     * @param javaName reference to the Java encoding name.
     * @param lastPrintable The maximum character that can be <
    public EncodingInfo(String name, String javaName, int las |	    public EncodingInfo(String name, String javaName)
        this.lastPrintable = lastPrintable;		      <
							      >	    
							      >	    
							      >	    
							      >	    /**
							      >	     * A simple interface to isolate the implementation.
							      >	     * We could also use some new JRE 1.4 methods in another 
							      >	     * provided we use reflection with them.
							      >	     * <p>
							      >	     * This interface is not a public API,
							      >	     * and should only be used internally within the serializ
							      >	     * @xsl.usage internal
							      >	     */
							      >	    private interface InEncoding {
							      >	        /**
							      >	         * Returns true if the char is in the encoding
							      >	         */
							      >	        public boolean isInEncoding(char ch);
							      >	        /**
							      >	         * Returns true if the high/low surrogate pair forms
							      >	         * a character that is in the encoding.
							      >	         */
							      >	        public boolean isInEncoding(char high, char low);
							      >	    }
							      >
							      >	    /**
							      >	     * This class implements the 
							      >	     */
							      >	    private class EncodingImpl implements InEncoding {
							      >	        
							      >
							      >
							      >	        public boolean isInEncoding(char ch1) {
							      >	            final boolean ret;
							      >	            int codePoint = Encodings.toCodePoint(ch1);
							      >	            if (codePoint < m_explFirst) {
							      >	                // The unicode value is before the range
							      >	                // that we explictly manage, so we delegate t
							      >	                
							      >	                // If we don't have an m_before object to del
							      >	                if (m_before == null)
							      >	                    m_before =
							      >	                        new EncodingImpl(
							      >	                            m_encoding,
							      >	                            m_first,
							      >	                            m_explFirst - 1,
							      >	                            codePoint);
							      >	                ret = m_before.isInEncoding(ch1);
							      >	            } else if (m_explLast < codePoint) {
							      >	                // The unicode value is after the range
							      >	                // that we explictly manage, so we delegate t
							      >	                
							      >	                // If we don't have an m_after object to dele
							      >	                if (m_after == null)
							      >	                    m_after =
							      >	                        new EncodingImpl(
							      >	                            m_encoding,
							      >	                            m_explLast + 1,
							      >	                            m_last,
							      >	                            codePoint);
							      >	                ret = m_after.isInEncoding(ch1);
							      >	            } else {
							      >	                // The unicode value is in the range we expli
							      >	                final int idx = codePoint - m_explFirst;
							      >	                
							      >	                // If we already know the answer, just return
							      >	                if (m_alreadyKnown[idx])
							      >	                    ret = m_isInEncoding[idx];
							      >	                else {
							      >	                    // We don't know the answer, so find out,
							      >	                    // which may be expensive, then cache the
							      >	                    ret = inEncoding(ch1, m_encoding);
							      >	                    m_alreadyKnown[idx] = true;
							      >	                    m_isInEncoding[idx] = ret;
							      >	                }
							      >	            }
							      >	            return ret;
							      >	        }
							      >
							      >	        public boolean isInEncoding(char high, char low) {
							      >	            final boolean ret;
							      >	            int codePoint = Encodings.toCodePoint(high,low);
							      >	            if (codePoint < m_explFirst) {
							      >	                // The unicode value is before the range
							      >	                // that we explictly manage, so we delegate t
							      >	                
							      >	                // If we don't have an m_before object to del
							      >	                if (m_before == null)
							      >	                    m_before =
							      >	                        new EncodingImpl(
							      >	                            m_encoding,
							      >	                            m_first,
							      >	                            m_explFirst - 1,
							      >	                            codePoint);
							      >	                ret = m_before.isInEncoding(high,low);
							      >	            } else if (m_explLast < codePoint) {
							      >	                // The unicode value is after the range
							      >	                // that we explictly manage, so we delegate t
							      >	                
							      >	                // If we don't have an m_after object to dele
							      >	                if (m_after == null)
							      >	                    m_after =
							      >	                        new EncodingImpl(
							      >	                            m_encoding,
							      >	                            m_explLast + 1,
							      >	                            m_last,
							      >	                            codePoint);
							      >	                ret = m_after.isInEncoding(high,low);
							      >	            } else {
							      >	                // The unicode value is in the range we expli
							      >	                final int idx = codePoint - m_explFirst;
							      >	                
							      >	                // If we already know the answer, just return
							      >	                if (m_alreadyKnown[idx])
							      >	                    ret = m_isInEncoding[idx];
							      >	                else {
							      >	                    // We don't know the answer, so find out,
							      >	                    // which may be expensive, then cache the
							      >	                    ret = inEncoding(high, low, m_encoding);
							      >	                    m_alreadyKnown[idx] = true;
							      >	                    m_isInEncoding[idx] = ret;
							      >	                }
							      >	            }
							      >	            return ret;
							      >	        }
							      >
							      >	        /**
							      >	         * The encoding.
							      >	         */
							      >	        final private String m_encoding;
							      >	        /**
							      >	         * m_first through m_last is the range of unicode
							      >	         * values that this object will return an answer on.
							      >	         * It may delegate to a similar object with a differe
							      >	         * range
							      >	         */
							      >	        final private int m_first;
							      >	        
							      >	        /**
							      >	         * m_explFirst through m_explLast is the range of uni
							      >	         * value that this object handles explicitly and does
							      >	         * delegate to a similar object.
							      >	         */
							      >	        final private int m_explFirst;
							      >	        final private int m_explLast;
							      >	        final private int m_last;
							      >
							      >	        /**
							      >	         * The object, of the same type as this one,
							      >	         * that handles unicode values in a range before
							      >	         * the range explictly handled by this object, and
							      >	         * to which this object may delegate.
							      >	         */
							      >	        private InEncoding m_before;
							      >	        /**
							      >	         * The object, of the same type as this one,
							      >	         * that handles unicode values in a range after
							      >	         * the range explictly handled by this object, and
							      >	         * to which this object may delegate.
							      >	         */
							      >	        private InEncoding m_after;
							      >	        
							      >	        /**
							      >	         * The number of unicode values explicitly handled
							      >	         * by a single EncodingInfo object. This value is 
							      >	         * tuneable, but is set to 128 because that covers th
							      >	         * entire low range of ASCII type chars within a sing
							      >	         * object.
							      >	         */
							      >	        private static final int RANGE = 128;
							      >
							      >	        /**
							      >	         * A flag to record if we already know the answer
							      >	         * for the given unicode value.
							      >	         */
							      >	        final private boolean m_alreadyKnown[] = new boolean[
							      >	        /**
							      >	         * A table holding the answer on whether the given un
							      >	         * value is in the encoding.
							      >	         */
							      >	        final private boolean m_isInEncoding[] = new boolean[
							      >	        
							      >	        private EncodingImpl() {
							      >	            // This object will answer whether any unicode va
							      >	            // is in the encoding, it handles values 0 throug
							      >	            this(javaName, 0, Integer.MAX_VALUE, (char) 0);
							      >	        }
							      >
							      >	        private EncodingImpl(String encoding, int first, int 
							      >	            // Set the range of unicode values that this obje
							      >	            // either explicitly or implicitly.
							      >	            m_first = first;
							      >	            m_last = last;  
							      >	                      
							      >	            // Set the range of unicode values that this obje
							      >	            // explicitly manages
							      >	            m_explFirst = codePoint;
							      >	            m_explLast = codePoint + (RANGE-1);  
							      >	            
							      >	            m_encoding = encoding;
							      >	            
							      >	            if (javaName != null)
							      >	            {
							      >	                // Some optimization.
							      >	                if (0 <= m_explFirst && m_explFirst <= 127) {
							      >	                    // This particular EncodingImpl explicitl
							      >	                    // characters in the low range.
							      >	                    if ("UTF8".equals(javaName)
							      >	                        || "UTF-16".equals(javaName)
							      >	                        || "ASCII".equals(javaName)
							      >	                        || "US-ASCII".equals(javaName)
							      >	                        || "Unicode".equals(javaName)
							      >	                        || "UNICODE".equals(javaName)
							      >	                        || javaName.startsWith("ISO8859")) {
							      >	                        
							      >	                        // Not only does this EncodingImpl ob
							      >	                        // handle chracters in the low range,
							      >	                        // also one that we know something ab
							      >	                        // needing to call inEncoding(char ch
							      >	                        // for this low range
							      >	                        //
							      >	                        // By initializing the table ahead of
							      >	                        // for these low values, we prevent t
							      >	                        // inEncoding(char ch, String encodin
							      >	                        // from being called, at least for th
							      >	                        // encodings.
							      >	                        for (int unicode = 1; unicode < 127; 
							      >	                            final int idx = unicode - m_explF
							      >	                            if (0 <= idx && idx < RANGE) {
							      >	                                m_alreadyKnown[idx] = true;
							      >	                                m_isInEncoding[idx] = true;
							      >	                            }
							      >	                        }
							      >	                    }
							      >	                }
							      >
							      >	                /* A little bit more than optimization.
							      >	                 * 
							      >	                 * We will say that any character is in the e
							      >	                 * we don't have an encoding.
							      >	                 * This is meaningful when the serializer is 
							      >	                 * in temporary output state, where we are no
							      >	                 * the final output tree.  It is when writing
							      >	                 * final output tree that we need to worry ab
							      >	                 * encoding
							      >	                 */
							      >	                if (javaName == null) {
							      >	                    for (int idx = 0; idx < m_alreadyKnown.le
							      >	                        m_alreadyKnown[idx] = true;
							      >	                        m_isInEncoding[idx] = true;
							      >	                    }
							      >	                }
							      >	            }
							      >	        }
							      >	    }
							      >
							      >	    /**
							      >	     * This is heart of the code that determines if a given c
							      >	     * is in the given encoding. This method is probably expe
							      >	     * and the answer should be cached.
							      >	     * <p>
							      >	     * This method is not a public API,
							      >	     * and should only be used internally within the serializ
							      >	     * @param ch the char in question, that is not a high cha
							      >	     * a high/low surrogate pair.
							      >	     * @param encoding the Java name of the enocding.
							      >	     * 
							      >	     * @xsl.usage internal
							      >	     * 
							      >	     */
							      >	    private static boolean inEncoding(char ch, String encodin
							      >	        boolean isInEncoding;
							      >	        try {
							      >	            char cArray[] = new char[1];
							      >	            cArray[0] = ch;
							      >	            // Construct a String from the char 
							      >	            String s = new String(cArray);
							      >	            // Encode the String into a sequence of bytes 
							      >	            // using the given, named charset. 
							      >	            byte[] bArray = s.getBytes(encoding);
							      >	            isInEncoding = inEncoding(ch, bArray);
							      >
							      >	        } catch (Exception e) {
							      >	            isInEncoding = false;
							      >	            
							      >	            // If for some reason the encoding is null, e.g.
							      >	            // for a temporary result tree, we should just
							      >	            // say that every character is in the encoding.
							      >	            if (encoding == null)
							      >	            	isInEncoding = true;
							      >	        }
							      >	        return isInEncoding;
							      >	    }
							      >	    
							      >	    /**
							      >	     * This is heart of the code that determines if a given h
							      >	     * surrogate pair forms a character that is in the given 
							      >	     * This method is probably expensive, and the answer shou
							      >	     * <p>
							      >	     * This method is not a public API,
							      >	     * and should only be used internally within the serializ
							      >	     * @param high the high char of
							      >	     * a high/low surrogate pair.
							      >	     * @param low the low char of a high/low surrogate pair.
							      >	     * @param encoding the Java name of the encoding.
							      >	     * 
							      >	     * @xsl.usage internal
							      >	     * 
							      >	     */ 
							      >	    private static boolean inEncoding(char high, char low, St
							      >	        boolean isInEncoding;
							      >	        try {
							      >	            char cArray[] = new char[2];
							      >	            cArray[0] = high;
							      >	            cArray[1] = low;
							      >	            // Construct a String from the char 
							      >	            String s = new String(cArray);
							      >	            // Encode the String into a sequence of bytes 
							      >	            // using the given, named charset. 
							      >	            byte[] bArray = s.getBytes(encoding);
							      >	            isInEncoding = inEncoding(high,bArray);
							      >	        } catch (Exception e) {
							      >	            isInEncoding = false;
							      >	        }
							      >	        
							      >	        return isInEncoding;
							      >	    } 
							      >	    
							      >	    /**
							      >	     * This method is the core of determining if character
							      >	     * is in the encoding. The method is not foolproof, becau
							      >	     * s.getBytes(encoding) has specified behavior only if th
							      >	     * characters are in the specified encoding. However this
							      >	     * method tries it's best.
							      >	     * @param ch the char that was converted using getBytes, 
							      >	     * the first char of a high/low pair that was converted.
							      >	     * @param data the bytes written out by the call to s.get
							      >	     * @return true if the character is in the encoding.
							      >	     */
							      >	    private static boolean inEncoding(char ch, byte[] data) {
							      >	        final boolean isInEncoding;
							      >	        // If the string written out as data is not in the en
							      >	        // the output is not specified according to the docum
							      >	        // on the String.getBytes(encoding) method,
							      >	        // but we do our best here.        
							      >	        if (data==null || data.length == 0) {
							      >	            isInEncoding = false;
							      >	        }
							      >	        else {
							      >	            if (data[0] == 0)
							      >	                isInEncoding = false;
							      >	            else if (data[0] == '?' && ch != '?')
							      >	                isInEncoding = false;
							      >	            /*
							      >	             * else if (isJapanese) {
							      >	             *   // isJapanese is really 
							      >	             *   //   (    "EUC-JP".equals(javaName) 
							      >	             *   //    ||  "EUC_JP".equals(javaName)
							      >	             *  //     ||  "SJIS".equals(javaName)   )
							      >	             * 
							      >	             *   // Work around some bugs in JRE for Japanese
							      >	             *   if(data[0] == 0x21)
							      >	             *     isInEncoding = false;
							      >	             *   else if (ch == 0xA5)
							      >	             *     isInEncoding = false;
							      >	             *   else
							      >	             *     isInEncoding = true;
							      >	             * }
							      >	             */ 
							      >	                
							      >	            else {
							      >	                // We don't know for sure, but it looks like 
							      >	                isInEncoding = true; 
							      >	            }
							      >	        }
							      >	        return isInEncoding;
							      >	    }
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/Encodings.java xalan-j_2_7_0/src/org/apache/xml/serializer/Encodings.java
 * $Id: Encodings.java,v 1.8 2004/02/23 10:29:37 aruny Exp $  |	 * $Id: Encodings.java,v 1.14 2005/08/03 19:20:31 minchau Exp
							      >	import java.security.AccessController;
							      >	import java.security.PrivilegedAction;
import java.security.PrivilegedAction;			      <
import java.security.AccessController;			      <
 * to provides writers for the different encodings, but can b |	 * to provides writers for the different encodings.
 * to override encoding names and provide the last printable  |	 * 
 * for each encoding.					      |	 * This class is only for internal use within Xalan. However,
							      >	 * by org.apache.xalan.xsltc.compiler.Output.
 * @version $Revision: 1.8 $ $Date: 2004/02/23 10:29:37 $     |	 * @xsl.usage internal
 * @author <a href="mailto:arkin@intalio.com">Assaf Arkin</a> <
public class Encodings extends Object			      |	public final class Encodings extends Object
							      <
    /**							      <
     * The last printable character for unknown encodings.    <
     */							      <
    static final int m_defaultLastPrintable = 0x7F;	      <
							      <
    static final String ENCODINGS_FILE = "org/apache/xml/seri |	    private static final String ENCODINGS_FILE = "org/apache/
    static final String ENCODINGS_PROP = "org.apache.xalan.se |	    private static final String ENCODINGS_PROP = "org.apache.
							      <
    /** SUN JVM internal ByteToChar converter method */	      <
    private static final Method				      <
        SUN_CHAR2BYTE_CONVERTER_METHOD = findCharToByteConver <
							      <
    private static Method findCharToByteConverterMethod() {   <
        try						      <
        {						      <
            AccessController.doPrivileged(new PrivilegedActio <
                public Object run() {			      <
                    try {				      <
                        Class charToByteConverterClass = (Cla <
                            Class.forName("sun.io.CharToByteC <
                        Class argTypes[] = {String.class};    <
                        return charToByteConverterClass.getMe <
                    }					      <
                    catch (Exception e) {		      <
                        throw new RuntimeException(e.toString <
                    }					      <
                }});					      <
        }						      <
        catch (Exception e)				      <
        {						      <
            System.err.println(				      <
                "Warning: Could not get charToByteConverterCl <
        }						      <
							      <
        return null;					      <
    }							      <
     *							      |	     * <p>
							      >	     * This is not a public API.
							      >	     * @xsl.usage internal
    public static Writer getWriter(OutputStream output, Strin |	    static Writer getWriter(OutputStream output, String encod
     * Returns an opaque CharToByte converter for the specifi |	     * Returns the EncodingInfo object for the specified
     *							      <
     * @param encoding The encoding			      <
     * @return An object which should be a sun.io.CharToByteC <
     */							      <
    public static Object getCharToByteConverter(String encodi <
    {							      <
        if (SUN_CHAR2BYTE_CONVERTER_METHOD == null) {	      <
            return null;				      <
        }						      <
							      <
        Object args[] = new Object[1];			      <
        for (int i = 0; i < _encodings.length; ++i)	      <
        {						      <
            if (_encodings[i].name.equalsIgnoreCase(encoding) <
            {						      <
                try					      <
                {					      <
                    args[0] = _encodings[i].javaName;	      <
                    Object converter =			      <
                        SUN_CHAR2BYTE_CONVERTER_METHOD.invoke <
                    if (null != converter) 		      <
                        return converter;		      <
                }					      <
                catch (Exception iae)			      <
                {					      <
                    // keep trying			      <
                }					      <
            }						      <
        }						      <
							      <
        return null;					      <
    }							      <
							      <
    /**							      <
     * Returns the last printable character for the specified <
							      >	     * <p>
							      >	     * This is not a public API.
     * @return The last printable character		      |	     * @return The object that is used to determine if 
							      >	     * characters are in the given encoding.
							      >	     * @xsl.usage internal
    public static int getLastPrintable(String encoding)	      |	    static EncodingInfo getEncodingInfo(String encoding)
        String normalizedEncoding = encoding.toUpperCase();   |	        String normalizedEncoding = toUpperCaseFast(encoding)
        if (ei != null)					      |	        if (ei == null) {
            return ei.lastPrintable;			      |	            // We shouldn't have to do this, but just in case
        return m_defaultLastPrintable;			      |	            ei = new EncodingInfo(null,null);
    }							      |	        }
							      >	        return ei;
							      >	    }
							      >	 
     * Returns the last printable character for an unspecifie |	     * A fast and cheap way to uppercase a String that is
     * encoding.					      |	     * only made of printable ASCII characters.
     *							      |	     * <p>
     * @return the default size				      |	     * This is not a public API.
     */							      |	     * @param s a String of ASCII characters
    public static int getLastPrintable()		      |	     * @return an uppercased version of the input String,
    {							      |	     * possibly the same String.
        return m_defaultLastPrintable;			      |	     * @xsl.usage internal
							      >	     */
							      >	    static private String toUpperCaseFast(final String s) {
							      >
							      >	    	boolean different = false;
							      >	    	final int mx = s.length();
							      >			char[] chars = new char[mx];
							      >	    	for (int i=0; i < mx; i++) {
							      >	    		char ch = s.charAt(i);
							      >	            // is the character a lower case ASCII one?
							      >	    		if ('a' <= ch && ch <= 'z') {
							      >	                // a cheap and fast way to uppercase that is 
							      >	    			ch = (char) (ch + ('A' - 'a'));
							      >	    			different = true; // the uppercased S
							      >	    		}
							      >	    		chars[i] = ch;
							      >	    	}
							      >	    	
							      >	    	// A little optimization, don't call String.valueOf()
							      >	    	// the uppercased string is the same as the input str
							      >	    	final String upper;
							      >	    	if (different) 
							      >	    		upper = String.valueOf(chars);
							      >	    	else
							      >	    		upper = s;
							      >	    		
							      >	    	return upper;
    public static final String DEFAULT_MIME_ENCODING = "UTF-8 |	    static final String DEFAULT_MIME_ENCODING = "UTF-8";
							      >	     * <p>
							      >	     * This is not a public API.
							      >	     * @xsl.usage internal
    public static String getMimeEncoding(String encoding)     |	    static String getMimeEncoding(String encoding)
     *							      |	     * <p>
							      >	     * This is not a public API.
							      >	     * @xsl.usage internal
    public static String convertJava2MimeEncoding(String enco |	    private static String convertJava2MimeEncoding(String enc
            (EncodingInfo) _encodingTableKeyJava.get(encoding |	            (EncodingInfo) _encodingTableKeyJava.get(toUpperC
							      >	     * <p>
							      >	     * This is not a public API.
							      >	     *
							      >	     * @xsl.usage internal
							      >	     * @xsl.usage internal
                int lastPrintable;			      |	                //int lastPrintable;
                    lastPrintable = 0x00FF;		      |	                   // lastPrintable = 0x00FF;
                    lastPrintable =			      |	//                    lastPrintable =
                        Integer.decode(val.substring(pos).tri |	//                        Integer.decode(val.substring(pos).t
                            new EncodingInfo(mimeName, javaNa |	                            new EncodingInfo(mimeName, javaNa
            throw new org.apache.xml.utils.WrappedRuntimeExce |	            throw new org.apache.xml.serializer.utils.Wrapped
            throw new org.apache.xml.utils.WrappedRuntimeExce |	            throw new org.apache.xml.serializer.utils.Wrapped
							      >	    }
							      >
							      >	    /**
							      >	     * Return true if the character is the high member of a s
							      >	     * <p>
							      >	     * This is not a public API.
							      >	     * @param ch the character to test
							      >	     * @xsl.usage internal
							      >	     */
							      >	    static boolean isHighUTF16Surrogate(char ch) {
							      >	        return ('\uD800' <= ch && ch <= '\uDBFF');
							      >	    }
							      >	    /**
							      >	     * Return true if the character is the low member of a su
							      >	     * <p>
							      >	     * This is not a public API.
							      >	     * @param ch the character to test
							      >	     * @xsl.usage internal
							      >	     */
							      >	    static boolean isLowUTF16Surrogate(char ch) {
							      >	        return ('\uDC00' <= ch && ch <= '\uDFFF');
							      >	    }
							      >	    /**
							      >	     * Return the unicode code point represented by the high/
							      >	     * <p>
							      >	     * This is not a public API.
							      >	     * @param highSurrogate the high char of the high/low pai
							      >	     * @param lowSurrogate the low char of the high/low pair
							      >	     * @xsl.usage internal
							      >	     */
							      >	    static int toCodePoint(char highSurrogate, char lowSurrog
							      >	        int codePoint =
							      >	            ((highSurrogate - 0xd800) << 10)
							      >	                + (lowSurrogate - 0xdc00)
							      >	                + 0x10000;
							      >	        return codePoint;
							      >	    }
							      >	    /**
							      >	     * Return the unicode code point represented by the char.
							      >	     * A bit of a dummy method, since all it does is return t
							      >	     * but as an int value.
							      >	     * <p>
							      >	     * This is not a public API.
							      >	     * @param ch the char.
							      >	     * @xsl.usage internal
							      >	     */
							      >	    static int toCodePoint(char ch) {
							      >	        int codePoint = ch;
							      >	        return codePoint;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/Encodings.properties xalan-j_2_7_0/src/org/apache/xml/serializer/Encodings.properties
# $Id: Encodings.properties,v 1.5 2004/02/17 17:07:49 minchau |	# $Id: Encodings.properties,v 1.7 2005/08/03 19:20:31 minchau
							      >	ISO8859_10 ISO-8859-10 0x00FF
							      >	ISO8859-10 ISO-8859-10 0x00FF
							      >	ISO8859_11 ISO-8859-11 0x00FF
							      >	ISO8859-11 ISO-8859-11 0x00FF
							      >	ISO8859_12 ISO-8859-12 0x00FF
							      >	ISO8859-12 ISO-8859-12 0x00FF
							      >	ISO8859_13 ISO-8859-13 0x00FF
							      >	ISO8859-13 ISO-8859-13 0x00FF
							      >	ISO8859_14 ISO-8859-14 0x00FF
							      >	ISO8859-14 ISO-8859-14 0x00FF
							      >	ISO8859_15 ISO-8859-15 0x00FF
							      >	ISO8859-15 ISO-8859-15 0x00FF
# can be found at http://www.iana.org/assignments/character-s \	# can be found at http://www.iana.org/assignments/character-s
							      >
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ExtendedContentHandler.java xalan-j_2_7_0/src/org/apache/xml/serializer/ExtendedContentHandler.java
 * $Id: ExtendedContentHandler.java,v 1.3 2004/02/17 04:18:18 |	 * $Id: ExtendedContentHandler.java,v 1.7 2005/02/18 04:35:18
							      >	 * @xsl.usage internal
public interface ExtendedContentHandler extends org.xml.sax.C |	abstract interface ExtendedContentHandler extends org.xml.sax
							      >	     * @param XSLAttribute true if the added attribute is com
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)
							      >	    
							      >	    /**
							      >	     * This method is used to notify of a character event, bu
							      >	     * as a DOM Node rather than the standard character array
							      >	     * @param node a DOM Node containing text.
							      >	     * @throws SAXException
							      >	     */    
							      >	    public void characters(org.w3c.dom.Node node) throws org.
							      >	        throws SAXException;
							      >	    
							      >	    /**
							      >	     * Add an attribute from an xsl:attribute element.
							      >	     * @param qName the qualified attribute name (prefix:loca
							      >	     * @param value the attributes value
							      >	     * @param uri the uri that the prefix of the qName is map
							      >	     */    
							      >	    public void addXSLAttribute(String qName, final String va
							      >	    
							      >	    /**
							      >	     * Add at attribute to the current element, not from an x
							      >	     * element.
							      >	     * @param uri the namespace URI of the attribute name
							      >	     * @param localName the local name of the attribute (with
							      >	     * @param rawName the qualified name of the attribute
							      >	     * @param type the attribute type typically character dat
							      >	     * @param value the value of the attribute
							      >	     * @throws SAXException
							      >	     */
							      >	    public void addAttribute(
							      >	        String uri,
							      >	        String localName,
							      >	        String rawName,
							      >	        String type,
							      >	        String value)
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ExtendedLexicalHandler.java xalan-j_2_7_0/src/org/apache/xml/serializer/ExtendedLexicalHandler.java
 * $Id: ExtendedLexicalHandler.java,v 1.2 2004/02/17 04:18:18 |	 * $Id: ExtendedLexicalHandler.java,v 1.4 2004/10/14 21:45:05
							      >	 * @xsl.usage internal
public interface ExtendedLexicalHandler extends org.xml.sax.e |	abstract interface ExtendedLexicalHandler extends org.xml.sax
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/Method.java xalan-j_2_7_0/src/org/apache/xml/serializer/Method.java
 * $Id: Method.java,v 1.2 2004/02/17 04:18:19 minchau Exp $   |	 * $Id: Method.java,v 1.4 2005/04/07 04:29:03 minchau Exp $
 * Four default output methods are defined: XML, HTML, XHTML  |	 * Three default output methods are defined: XML, HTML, and T
 * Serializers may support additional output methods. The nam |	 * These constants can be used as an argument to the
 * these output methods should be encoded as <tt>namespace:lo |	 * OutputPropertiesFactory.getDefaultMethodProperties() metho
 *							      |	 * the properties to create a serializer.
 * @version Alpha					      |	 * 
 * @author <a href="mailto:arkin@exoffice.com">Assaf Arkin</a |	 * This class is a public API.
							      >	 * 
							      >	 * @see OutputPropertiesFactory
							      >	 * @see Serializer
							      >	 * 
							      >	 * @xsl.usage general
							      >	    /**
							      >	     * A private constructor to prevent the creation of such 
							      >	     */
							      >	    private Method() {
							      >	        
							      >	    }
   * The output method for XML documents: <tt>xml</tt>.	      |	   * The output method type for XML documents: <tt>xml</tt>.
   * The output method for HTML documents: <tt>html</tt>.     |	   * The output method type for HTML documents: <tt>html</tt>
   * The output method for XHTML documents: <tt>xhtml</tt>.   |	   * The output method for XHTML documents,
							      >	   * this method type is not currently supported: <tt>xhtml</
   * The output method for text documents: <tt>text</tt>.     |	   * The output method type for text documents: <tt>text</tt>
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/NamespaceMappings.java xalan-j_2_7_0/src/org/apache/xml/serializer/NamespaceMappings.java
 * $Id: NamespaceMappings.java,v 1.6 2004/02/17 04:18:18 minc |	 * $Id: NamespaceMappings.java,v 1.9 2005/04/07 04:29:03 minc
							      >	 * 
							      >	 * This class is public only because it is used by Xalan. It 
							      >	 * 
							      >	 * @xsl.usage internal
     * Stack of prefixes that have mappings		      <
     * The top of this stack is the prefix that was last mapp <
     * 							      <
     * For every prefix pushed on this stack a corresponding  <
     * on the m_nodeStack. That way all prefixes pushed at th <
     * be removed at the same time.      		      <
     */							      <
    private java.util.Stack m_prefixStack = new Stack();      <
							      <
    /**							      <
							      >	     * This table maps a prefix (String) to a Stack of prefix
							      >	     * All mappings in that retrieved stack have the same pre
							      >	     * though possibly different URI's or depths. Such a stac
							      >	     * mappings at deeper depths push later on such a stack. 
							      >	     * earlier on the stack will have smaller values for Mapp
     * The top of this stack contains the nested element dept |	     * The top of this stack contains the MapRecord
     * pushed on this stack, as well as the prefix on the m_p |	     * pushed on this stack.
        stack.push(EMPTYSTRING);			      |	        stack.push(new MappingRecord(EMPTYSTRING,EMPTYSTRING,
        m_prefixStack.push(EMPTYSTRING);		      <
        stack.push("http://www.w3.org/XML/1998/namespace");   |	        stack.push(new MappingRecord( XML_PREFIX,
        m_prefixStack.push(XML_PREFIX);			      |	            "http://www.w3.org/XML/1998/namespace",0));
        m_nodeStack.push(new Integer(-1));		      |	        m_nodeStack.push(new MappingRecord(null,null,-1));
        return stack != null && !stack.isEmpty() ? (String) s |	        return stack != null && !stack.isEmpty() ? 
							      >	            ((MappingRecord) stack.peek()).m_uri : null;
							      >	    }
							      >	    
							      >	    MappingRecord getMappingFromPrefix(String prefix) {
							      >	        final Stack stack = (Stack) m_namespaces.get(prefix);
							      >	        return stack != null && !stack.isEmpty() ? 
							      >	            ((MappingRecord) stack.peek()) : null;
							      >	    
							      >	    MappingRecord getMappingFromURI(String uri)
							      >	    {
							      >	        MappingRecord foundMap = null;
							      >	        Enumeration prefixes = m_namespaces.keys();
							      >	        while (prefixes.hasMoreElements())
							      >	        {
							      >	            String prefix = (String) prefixes.nextElement();
							      >	            MappingRecord map2 = getMappingFromPrefix(prefix)
							      >	            if (map2 != null && (map2.m_uri).equals(uri))
							      >	            {
							      >	                foundMap = map2;
							      >	                break;
							      >	            }
							      >	        }
							      >	        return foundMap;
							      >	    }
    public boolean popNamespace(String prefix)		      |	    boolean popNamespace(String prefix)
     * Declare a prefix to point to a namespace URI	      |	     * Declare a mapping of a prefix to namespace URI at the 
    public boolean pushNamespace(String prefix, String uri, i |	    boolean pushNamespace(String prefix, String uri, int elem
        if (!stack.empty() && uri.equals(stack.peek()))	      |	        if (!stack.empty() && uri.equals(((MappingRecord)stac
							      |	        MappingRecord map = new MappingRecord(prefix,uri,elem
        stack.push(uri);				      |	        stack.push(map);
        m_prefixStack.push(prefix);			      |	        m_nodeStack.push(map);
        m_nodeStack.push(new Integer(elemDepth));	      <
    public void popNamespaces(int elemDepth, ContentHandler s |	    void popNamespaces(int elemDepth, ContentHandler saxHandl
            Integer i = (Integer) (m_nodeStack.peek());	      |	            MappingRecord map = (MappingRecord)(m_nodeStack.p
            if (i.intValue() < elemDepth)		      |	            int depth = map.m_declarationDepth;
							      >	            if (depth < elemDepth)
            m_nodeStack.pop();				      |	            map = (MappingRecord) m_nodeStack.pop();
            final String prefix = (String) m_prefixStack.pop( |	            final String prefix = map.m_prefix; 
        clone.m_prefixStack = (Stack)m_prefixStack.clone();   <
    public final void reset()				      |	    final void reset()
        this.m_nodeStack.clear();			      |	        this.m_nodeStack.clear();        
        this.m_prefixStack.clear();			      <
        						      <
							      >	    }
							      >	    
							      >	    class MappingRecord {
							      >	        final String m_prefix;  // the prefix
							      >	        final String m_uri;     // the uri
							      >	        // the depth of the element where declartion was made
							      >	        final int m_declarationDepth;
							      >	        MappingRecord(String prefix, String uri, int depth) {
							      >	            m_prefix = prefix;
							      >	            m_uri = uri;
							      >	            m_declarationDepth = depth;
							      >	            
							      >	        }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xml/serializer/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:37 aruny Ex |	 * $Id: ObjectFactory.java,v 1.7 2004/10/14 21:45:05 minchau 
import java.io.InputStream;				      |	import java.io.BufferedReader;
import java.io.IOException;				      <
							      |	import java.io.IOException;
import java.util.Properties;				      |	import java.io.InputStream;
import java.io.BufferedReader;				      <
							      >	import java.util.Properties;
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:37 |	 * @xsl.usage internal
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 88592542
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/OutputPropertiesFactory.java xalan-j_2_7_0/src/org/apache/xml/serializer/OutputPropertiesFactory.java
 * $Id: OutputPropertiesFactory.java,v 1.5 2004/02/18 22:57:4 |	 * $Id: OutputPropertiesFactory.java,v 1.11 2005/06/01 19:17:
							      >
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.Utils;
import org.apache.xml.utils.Constants;			      |	import org.apache.xml.serializer.utils.WrappedRuntimeExceptio
import org.apache.xml.utils.WrappedRuntimeException;	      <
 * This class acts as a factory to generate properties for th |	 * This class is a factory to generate a set of default prope
 * ("xml", "text", "html")..				      |	 * of key/value pairs that are used to create a serializer th
							      >	 * factory {@link SerializerFactory SerilizerFactory}. 
							      >	 * The properties generated by this factory
							      >	 * may be modified to non-default values before the Serialize
							      >	 * create a Serializer.
							      >	 * <p>
							      >	 * The given output types supported are "xml", "text", and "h
							      >	 * These type strings can be obtained from the 
							      >	 * {@link Method Method} class in this package.
							      >	 * <p>
							      >	 * Other constants defined in this class are the non-standard
							      >	 * that can be used to set non-standard property values on a 
							      >	 * that is used to create or configure a serializer. Here are
							      >	 * <ul>
							      >	 * <li> <b>S_KEY_INDENT_AMOUNT </b> -
							      >	 * The non-standard property key to use to set the indentatio
							      >	 * The "indent" key needs to have a value of "yes", and this
							      >	 * properties value is a the number of whitespaces to indent 
							      >	 * indentation level.
							      >	 * 
							      >	 * <li> <b>S_KEY_CONTENT_HANDLER </b> -
							      >	 * This non-standard property key is used to set the name of 
							      >	 * Java class that implements the ContentHandler interface. 
							      >	 * The output of the serializer will be SAX events sent to th
							      >	 * object of this class.
							      >	 * 
							      >	 * <li> <b>S_KEY_ENTITIES </b> -
							      >	 * This non-standard property key is used to specify the name
							      >	 * that specifies character to entity reference mappings. A l
							      >	 * file is has the name of the entity and the numeric (base 1
							      >	 * of the corresponding character, like this one: <br> quot=3
							      >	 * 
							      >	 * <li> <b>S_USE_URL_ESCAPING </b> -
							      >	 * This non-standard property key is used to set a value of "
							      >	 *  use %xx escaping.
							      >	 * 
							      >	 * <li> <b>S_OMIT_META_TAG </b> -
							      >	 * This non-standard property key is used to set a value of "
							      >	 *  otherwise be supplied.
							      >	 * </ul>
							      >	 * 
							      >	 * @see SerializerFactory
							      >	 * @see Method
							      >	 * @see Serializer
public class OutputPropertiesFactory			      |	public final class OutputPropertiesFactory
							      >	    /** S_BUILTIN_EXTENSIONS_URL is a mnemonic for the XML Na
							      >	     *(http://xml.apache.org/xalan) predefined to signify Xal
							      >	     * built-in XSLT Extensions. When used in stylesheets, th
							      >	     * bound to the "xalan:" prefix.
							      >	     */
							      >	    private static final String 
							      >	      S_BUILTIN_EXTENSIONS_URL = "http://xml.apache.org/xalan
							      >
							      >	    /**
							      >	     * The old built-in extension url. It is still supported 
							      >	     * backward compatibility.
							      >	     */
							      >	    private static final String 
							      >	      S_BUILTIN_OLD_EXTENSIONS_URL = "http://xml.apache.org/x
							      >	      
    /** Built-in extensions namespace, reexpressed in {namesp |	    /** 
							      >	     * This is not a public API.
							      >	     * This is the built-in extensions namespace, 
							      >	     * reexpressed in {namespaceURI} syntax
        "{" + Constants.S_BUILTIN_EXTENSIONS_URL + "}";	      |	        "{" + S_BUILTIN_EXTENSIONS_URL + "}";
    /** The number of whitespaces to indent by, if indent="ye |	    /** 
							      >	     * The non-standard property key to use to set the
							      >	     * number of whitepaces to indent by, per indentation lev
							      >	     * if indent="yes".
							      >	     */
							      >	        
							      >	    /** 
							      >	     * The non-standard property key to use to set the
							      >	     * number of whitepaces to indent by, per indentation lev
							      >	     * if indent="yes".
							      >	     */
							      >	    public static final String S_KEY_LINE_SEPARATOR =
							      >	        S_BUILTIN_EXTENSIONS_UNIVERSAL + "line-separator";   
    /**							      |	    /** This non-standard property key is used to set the nam
							      >	     * Java class that implements the ContentHandler interfac
							      >
    /** File name of file that specifies character to entity  |	    /**
							      >	     * This non-standard property key is used to specify the 
							      >	     * that specifies character to entity reference mappings.
							      >	     */
    /** Use a value of "yes" if the href values for HTML seri |	    /** 
							      >	     * This non-standard property key is used to set a value 
    /** Use a value of "yes" if the META tag should be omitte |	    /** 
							      >	     * This non-standard property key is used to set a value 
     * The old built-in extension namespace		      |	     * The old built-in extension namespace, this is not a pu
        "{" + Constants.S_BUILTIN_OLD_EXTENSIONS_URL + "}";   |	        "{" + S_BUILTIN_OLD_EXTENSIONS_URL + "}";
     * The length of the old built-in extension namespace     |	     * This is not a public API, it is only public because it
							      >	     * by outside of this package,
							      >	     * it is the length of the old built-in extension namespa
     * Creates an empty OutputProperties with the defaults sp |	     * Creates an empty OutputProperties with the property ke
     * <p>At the moment, anything other than 'text', 'xml', a |	     * 
							      >	     * <p>Anything other than 'text', 'xml', and 'html', will
    static public Properties getDefaultMethodProperties(Strin |	    static public final Properties getDefaultMethodProperties
                XMLMessages.createXMLMessage(		      |	                Utils.messages.createMessage(
                    XMLErrorResources.ER_COULD_NOT_LOAD_METHO |	                    MsgKey.ER_COULD_NOT_LOAD_METHOD_PROPERTY,
							      |	        // wrap these cached defaultProperties in a new Prope
							      >	        // that the caller of this method can't modify the de
                    XMLMessages.createXMLMessage(	      |	                    Utils.messages.createMessage(
                        XMLErrorResources.ER_COULD_NOT_LOAD_R |	                        MsgKey.ER_COULD_NOT_LOAD_RESOURCE,
                    XMLMessages.createXMLMessage(	      |	                    Utils.messages.createMessage(
                        XMLErrorResources.ER_COULD_NOT_LOAD_R |	                        MsgKey.ER_COULD_NOT_LOAD_RESOURCE,
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/OutputPropertyUtils.java xalan-j_2_7_0/src/org/apache/xml/serializer/OutputPropertyUtils.java
 * $Id: OutputPropertyUtils.java,v 1.2 2004/02/17 04:18:18 mi |	 * $Id: OutputPropertyUtils.java,v 1.4 2005/04/07 04:29:03 mi
							      >	 * This class is not a public API. 
							      >	 * It is only public because it is used outside of this packa
							      >	 * 
							      >	 * @xsl.usage internal
public class OutputPropertyUtils			      |	public final class OutputPropertyUtils
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SecuritySupport12.java xalan-j_2_7_0/src/org/apache/xml/serializer/SecuritySupport12.java
 * $Id: SecuritySupport12.java,v 1.3 2004/02/23 10:29:37 arun |	 * $Id: SecuritySupport12.java,v 1.4 2004/04/01 18:45:30 minc
							      <
							      <
import java.util.Properties;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SecuritySupport.java xalan-j_2_7_0/src/org/apache/xml/serializer/SecuritySupport.java
 * $Id: SecuritySupport.java,v 1.3 2004/02/23 10:29:37 aruny  |	 * $Id: SecuritySupport.java,v 1.4 2004/04/01 18:45:30 mincha
							      <
import java.util.Properties;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SerializationHandler.java xalan-j_2_7_0/src/org/apache/xml/serializer/SerializationHandler.java
 * $Id: SerializationHandler.java,v 1.4 2004/02/17 04:18:18 m |	 * $Id: SerializationHandler.java,v 1.9 2005/04/07 04:29:03 m
import java.io.OutputStream;				      <
import java.io.Writer;					      <
import java.util.Properties;				      <
import java.util.Vector;				      <
import org.apache.xml.serializer.Serializer;		      <
							      >	 * 
							      >	 * This class is public only because it is used in another pa
							      >	 * it is not a public API.
							      >	 * 
							      >	 * @xsl.usage internal
							      >	        org.xml.sax.DTDHandler,
     * @see org.apache.xml.serializer.Serializer#asContentHan |	     * @see Serializer#asContentHandler()
     * @see org.apache.xml.serializer.ToSAXHandler	      |	     * @see ToSAXHandler
     * @param true if escaping is to be set on.		      |	     * @param escape true if escaping is to be set on.
     * @param NamespaceMappings				      |	     * @param mappings NamespaceMappings
							      >	    
							      >	    /**
							      >	     * Default behavior is to expand DTD entities,
							      >	     * that is the initall default value is true.
							      >	     * @param expand true if DTD entities are to be expanded,
							      >	     * false if they are to be left as DTD entity references.
							      >	     */
							      >	    public void setDTDEntityExpansion(boolean expand);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SerializerBase.java xalan-j_2_7_0/src/org/apache/xml/serializer/SerializerBase.java
 * $Id: SerializerBase.java,v 1.10 2004/02/17 04:18:18 mincha |	 * $Id: SerializerBase.java,v 1.20 2005/04/07 04:29:03 mincha
import java.util.Hashtable;				      <
import java.util.Stack;					      <
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.Utils;
import org.apache.xml.utils.BoolStack;			      <
 * @author Santiago Pericas-Geertsen			      |	 * 
 * @author G. Todd Miller 				      |	 * @xsl.usage internal
abstract public class SerializerBase			      |	public abstract class SerializerBase
    implements SerializationHandler, SerializerConstants, org |	    implements SerializationHandler, SerializerConstants
     * @see org.apache.xml.serializer.ExtendedLexicalHandler# |	     * @see ExtendedLexicalHandler#comment(String)
      * TODO: This method is a HACK! Since XSLTC does not hav |	     * If at runtime, when the qname of the attribute is
      * XML file, it sometimes generates a NS prefix of the f |	     * known, another prefix is specified for the attribute, 
      * an attribute. If at runtime, when the qname of the at |	     * patch or hack the name with this method. For
      * known, another prefix is specified for the attribute, |	     * a qname of the form "ns?:otherprefix:name", this funct
      * a qname of the form "ns?:otherprefix:name". This func |	     * qname by simply ignoring "otherprefix".
      * qname by simply ignoring "otherprefix".		      |	     * TODO: This method is a HACK! We do not have access to 
      */						      |	     * XML file, it sometimes generates a NS prefix of the fo
							      >	     * an attribute.
							      >	     */
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @param XSLAttribute true if this attribute is coming f
							      >	     * @see ExtendedContentHandler#addAttribute(String, Strin
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)
            addAttributeAlways(uri, localName, rawName, type, |	            addAttributeAlways(uri, localName, rawName, type,
							      >	     * @param XSLAttribute true if this attribute is coming f
							      >	     * @return true if the attribute was added, 
							      >	     * false if an existing value was replaced.
    public void addAttributeAlways(			      |	    public boolean addAttributeAlways(
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)
							      >	        boolean was_added;
            index = m_attributes.getIndex(rawName);	      |	            if (localName == null || uri == null || uri.lengt
							      >	                index = m_attributes.getIndex(rawName);
							      >	            else {
							      >	                index = m_attributes.getIndex(uri,localName);
							      >	            }
							      >	                was_added = false;
							      >	                was_added = true;
							      >	            return was_added;
     * but only if there is a currently open element.  This m |	     * but only if there is a currently open element.
     * called by XSLTC.					      <
            addAttributeAlways(uri,localName, patchedName, "C |	            addAttributeAlways(uri,localName, patchedName, "C
							      >	    /**
							      >	     * Adds the given xsl:attribute to the set of collected a
							      >	     * but only if there is a currently open element.
							      >	     *
							      >	     * @param name the attribute's qualified name (prefix:loc
							      >	     * @param value the value of the attribute
							      >	     * @param uri the URI that the prefix of the name points 
							      >	     */
							      >	    public void addXSLAttribute(String name, final String val
							      >	    {
							      >	        if (m_elemContext.m_startTagOpen)
							      >	        {
							      >	            final String patchedName = patchName(name);
							      >	            final String localName = getLocalName(patchedName
							      >
							      >	            addAttributeAlways(uri,localName, patchedName, "C
							      >	         }
							      >	    } 
                atts.getValue(i));			      |	                atts.getValue(i),
							      >	                false);
     * @see org.apache.xml.serializer.ToStream		      |	     * @see ToStream
     * @param encoding the character encoding		      |	     * @param m_encoding the character encoding
     *  @see   org.apache.xml.serializer.XSLOutputAttributes# |	     *  @see XSLOutputAttributes#getStandalone()
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setVersion(String)
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setMediaType(String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setIndent(boolean)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#namespaceAfterStartElement
     * @see org.apache.xml.serializer.Serializer#asDOMSeriali |	     * @see Serializer#asDOMSerializer()
     * Push a boolean state based on if the name of the eleme |	     * Push a boolean state based on if the name of the curre
     *							      |	     * <p>
     * @param namespaceURI Should be a non-null reference to  <
     *        of the element that owns the state, or empty st <
     * @param localName Should be a non-null reference to the <
     *        of the element that owns the state.	      <
     *							      <
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getNamespaceMappings()
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getPrefix(String)
                        XMLMessages.createXMLMessage(	      |	                        Utils.messages.createMessage(
                            XMLErrorResources.ER_NAMESPACE_PR |	                            MsgKey.ER_NAMESPACE_PREFIX,
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setTransformer(Transformer)
     * @see org.apache.xml.serializer.SerializationHandler#ge |	     * @see SerializationHandler#getTransformer()
     * serializer.  Historically Xalan has not always called  |	     * serializer.  For historical reasons the serializer is 
     * although it always calls endDocument() on the serializ |	     * startDocument() not always being called.
     * So the serializer must be flexible for that. Even if n |	     * Even if no external call is
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#setSourceLocator(javax.xml
     * @param NamespaceMappings				      |	     * @param mappings NamespaceMappings
							      >	    }
							      >	    
							      >	    /**
							      >	     * Returns true if the serializer is used for temporary o
							      >	     * final output.
							      >	     * 
							      >	     * This concept is made clear in the XSLT 2.0 draft.
							      >	     */
							      >	    final boolean inTemporaryOutputState() 
							      >	    {
							      >	        /* This is a hack. We should really be letting the se
							      >	         * that it is in temporary output state with an expli
							      >	         * from a pragmatic point of view (for now anyways) h
							      >	         * encoding at all, not even the default UTF-8 indica
							      >	         * is being used for temporary RTF.
							      >	         */ 
							      >	        return (getEncoding() == null);
							      >	        
							      >	    }
							      >	    
							      >	    /**
							      >	     * This method adds an attribute the the current element,
							      >	     * but should not be used for an xsl:attribute child.
							      >	     * @see ExtendedContentHandler#addAttribute(java.lang.Str
							      >	     */
							      >	    public void addAttribute(String uri, String localName, St
							      >	    {
							      >	        if (m_elemContext.m_startTagOpen)
							      >	        {
							      >	            addAttributeAlways(uri, localName, rawName, type,
							      >	        }
							      >	    }
							      >	    
							      >	    /**
							      >	     * @see org.xml.sax.DTDHandler#notationDecl(java.lang.Str
							      >	     */
							      >	    public void notationDecl(String arg0, String arg1, String
							      >	        throws SAXException {
							      >	        // This method just provides a definition to satisfy 
							      >	        // A particular sub-class of SerializerBase provides 
							      >	    }
							      >
							      >	    /**
							      >	     * @see org.xml.sax.DTDHandler#unparsedEntityDecl(java.la
							      >	     */
							      >	    public void unparsedEntityDecl(
							      >	        String arg0,
							      >	        String arg1,
							      >	        String arg2,
							      >	        String arg3)
							      >	        throws SAXException {
							      >	        // This method just provides a definition to satisfy 
							      >	        // A particular sub-class of SerializerBase provides 
							      >	    }
							      >
							      >	    /**
							      >	     * If set to false the serializer does not expand DTD ent
							      >	     * but leaves them as is, the default value is true.
							      >	     */
							      >	    public void setDTDEntityExpansion(boolean expand) {
							      >	        // This method just provides a definition to satisfy 
							      >	        // A particular sub-class of SerializerBase provides 
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SerializerConstants.java xalan-j_2_7_0/src/org/apache/xml/serializer/SerializerConstants.java
 * $Id: SerializerConstants.java,v 1.2 2004/02/17 04:18:19 mi |	 * $Id: SerializerConstants.java,v 1.6 2005/03/02 23:08:08 yt
 * @author minchau					      <
 *							      <
 * @author Jacek Ambroziak				      |	 * @xsl.usage internal
 * @author Santiago Pericas-Geertsen			      <
public interface SerializerConstants			      |	interface SerializerConstants
    static final char[] CNTCDATA = CDATA_CONTINUE.toCharArray <
    static final char[] BEGCDATA = CDATA_DELIMITER_OPEN.toCha <
    static final char[] ENDCDATA = CDATA_DELIMITER_CLOSE.toCh <
							      <
							      >	    
							      >	    /**
							      >	     * Define the XML version.
							      >	     */
							      >	    static final String XMLVERSION11 = "1.1";
							      >	    static final String XMLVERSION10 = "1.0";
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SerializerFactory.java xalan-j_2_7_0/src/org/apache/xml/serializer/SerializerFactory.java
 * $Id: SerializerFactory.java,v 1.6 2004/02/23 10:29:37 arun |	 * $Id: SerializerFactory.java,v 1.10 2005/04/07 04:29:03 min
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.Utils;
 * Factory for creating serializers.			      |	 * This class is a public API, it is a factory for creating s
 */							      |	   * 
public abstract class SerializerFactory			      |	   * The properties object passed to the getSerializer() meth
							      >	   * the OutputPropertiesFactory. Although the properties obj
							      >	   * used to create a serializer does not need to be obtained
							      >	   * from OutputPropertiesFactory,
							      >	   * using this factory ensures that the default key/value pr
							      >	   * are set for the given output "method".
							      >	   * 
							      >	   * <p>
							      >	   * The standard property keys supported are: "method", "ver
							      >	   * "omit-xml-declaration", "standalone", doctype-public",
							      >	   * "doctype-system", "cdata-section-elements", "indent", "m
							      >	   * These property keys and their values are described in th
							      >	   * see {@link <a href="http://www.w3.org/TR/1999/REC-xslt-1
							      >	   * 
							      >	   * <p>
							      >	   * The value of the "cdata-section-elements" property key i
							      >	   * separated list of elements. If the element is in a names
							      >	   * value is passed in this format: {uri}localName 
							      >	   *
							      >	   * <p>
							      >	   * The non-standard property keys supported are defined in 
							      >	   *
							      >	   * @see OutputPropertiesFactory
							      >	   * @see Method
							      >	   * @see Serializer
							      >	   */
							      >	public final class SerializerFactory
							      >	   * This constructor is private just to prevent the creation
							      >	   */
							      >
							      >	  private SerializerFactory() {
							      >	 
							      >	  }
							      >	  /**
   * Returns a serializer for the specified output method.    |	   * Returns a serializer for the specified output method. Th
							      >	   * is specified by the value of the property associated wit
   * For a list of the default output methods see {@link Meth |	   * For a list of the output "method" key values see {@link 
        if (method == null)				      |	        if (method == null) {
          throw new IllegalArgumentException(		      |	            String msg = Utils.messages.createMessage(
            "The output format has a null method name");      |	                MsgKey.ER_FACTORY_PROPERTY_MISSING,
							      >	                new Object[] { OutputKeys.METHOD});
							      >	            throw new IllegalArgumentException(msg);
							      >	        }
                if (null == className)			      |	            if (null == className) {
                throw new IllegalArgumentException(	      |	                String msg = Utils.messages.createMessage(
                    "The output format must have a '"	      |	                    MsgKey.ER_FACTORY_PROPERTY_MISSING,
                    + OutputPropertiesFactory.S_KEY_CONTENT_H |	                    new Object[] { OutputPropertiesFactory.S_
							      >	                throw new IllegalArgumentException(msg);
							      >	            }
							      >
                       XMLMessages.createXMLMessage(	      |	                       Utils.messages.createMessage(
                           XMLErrorResources.ER_SERIALIZER_NO |	                           MsgKey.ER_SERIALIZER_NOT_CONTENTHA
        throw new org.apache.xml.utils.WrappedRuntimeExceptio |	        throw new org.apache.xml.serializer.utils.WrappedRunt
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/Serializer.java xalan-j_2_7_0/src/org/apache/xml/serializer/Serializer.java
 * $Id: Serializer.java,v 1.2 2004/02/17 04:18:19 minchau Exp |	 * $Id: Serializer.java,v 1.5 2005/04/07 04:29:03 minchau Exp
import java.io.Writer;					      <
import java.io.OutputStream;				      <
							      >	import java.io.OutputStream;
							      >	import java.io.Writer;
import org.apache.xml.serializer.DOMSerializer; 	      <
							      <
 * The Serializer interface is implemented by Serializers to  |	 * The Serializer interface is implemented by a serializer to
 * get and set streams and writers, to set the output propert |	 * <ul>
 * Serializer as a ContentHandler or DOMSerializer.	      |	 * <li>get and set streams or writers
							      >	 * <li>configure the serializer with key/value properties
							      >	 * <li>get an org.xml.sax.ContentHandler or a DOMSerializer t
							      >	 * </ul>
							      >	 *
							      >	 * <p>
							      >	 * Here is an example using the asContentHandler() method:
							      >	 * <pre>
							      >	 * java.util.Properties props = 
							      >	 *   OutputPropertiesFactory.getDefaultMethodProperties(Metho
							      >	 * Serializer ser = SerializerFactory.getSerializer(props);
							      >	 * java.io.PrintStream ostream = System.out; 
							      >	 * ser.setOutputStream(ostream);
							      >	 * 
							      >	 * // Provide the SAX input events
							      >	 * ContentHandler handler = ser.asContentHandler();
							      >	 * handler.startDocument();
							      >	 * char[] chars = { 'a', 'b', 'c' };
							      >	 * handler.characters(chars, 0, chars.length);
							      >	 * handler.endDocument();
							      >	 * 
							      >	 * ser.reset(); // get ready to use the serializer for anothe
							      >	 *              // of the same output method (TEXT).
							      >	 * </pre>
							      >	 * 
							      >	 * <p>
							      >	 * As an alternate to supplying a series of SAX events as inp
							      >	 * ContentHandler interface, the input to serialize may be gi
							      >	 * <p>
							      >	 * For example:
							      >	 * <pre>
							      >	 * org.w3c.dom.Document     inputDoc;
							      >	 * org.apache.xml.serializer.Serializer   ser;
							      >	 * java.io.Writer owriter;
							      >	 * 
							      >	 * java.util.Properties props = 
							      >	 *   OutputPropertiesFactory.getDefaultMethodProperties(Metho
							      >	 * Serializer ser = SerializerFactory.getSerializer(props);
							      >	 * owriter = ...;  // create a writer to serialize the docume
							      >	 * ser.setWriter( owriter );
							      >	 * 
							      >	 * inputDoc = ...; // create the DOM document to be serialize
							      >	 * DOMSerializer dser = ser.asDOMSerializer(); // a DOM will 
							      >	 * dser.serialize(inputDoc); // serialize the DOM, sending ou
							      >	 * 
							      >	 * ser.reset(); // get ready to use the serializer for anothe
							      >	 *              // of the same output method.
							      >	 * </pre>
							      >	 * 
							      >	 * This interface is a public API.
							      >	 * 
							      >	 * @see Method
							      >	 * @see OutputPropertiesFactory
							      >	 * @see SerializerFactory
							      >	 * @see DOMSerializer
							      >	 * @see ContentHandler
							      >	 * 
							      >	 * @xsl.usage general
							      >	     * <p>
							      >	     * Only one of setWriter() or setOutputStream() should be
     * @return reference to the result stream, or null of onl |	     * @return reference to the result stream, or null if onl
							      >	     * 
							      >	     * <p>
							      >	     * Only one of setWriter() or setOutputStream() should be
							      >	     * <p>
							      >	     * The standard property keys supported are: "method", "v
							      >	     * "omit-xml-declaration", "standalone", doctype-public",
							      >	     * "doctype-system", "cdata-section-elements", "indent", 
							      >	     * These property keys and their values are described in 
							      >	     * see {@link <a href="http://www.w3.org/TR/1999/REC-xslt
							      >	     * <p>
							      >	     * The non-standard property keys supported are defined i
							      >	     *
							      >	     * <p>
							      >	     * This method can be called multiple times before a docu
							      >	     * time it is called more, or over-riding property values
							      >	     * property value that can not be changed is that of the 
							      >	     * <p>
							      >	     * The value of the "cdata-section-elements" property key
							      >	     * separated list of elements. If the element is in a nam
							      >	     * value is passed in this format: {uri}localName 
							      >	     * <p>
							      >	     * If the "cdata-section-elements" key is specified on mu
							      >	     * to this method the set of elements specified in the va
							      >	     * is not replaced from one call to the
							      >	     * next, but it is cumulative across the calls.
     * @param format The output format to use		      |	     * @param format The output format to use, as a set of ke
     * @return The output format in use			      |	     * @return The output format key/value pairs in use.
     * Return a {@link ContentHandler} interface into this se |	     * Return a {@link ContentHandler} interface to provide S
							      >	     * Through the returned object the document to be seraili
							      >	     * as a series of SAX events, can be provided to the seri
     * interface, it should return null.		      |	     * interface, it will return null.
							      >	     * <p>
							      >	     * In principle only one of asDOMSerializer() or asConten
							      >	     * should be called.
							      >	     * Through the returned object the document to be seriali
							      >	     * a DOM, can be provided to the serializer.
							      >	     * <p>
							      >	     * In principle only one of asDOMSerializer() or asConten
							      >	     * should be called.
     * Resets the serializer. If this method returns true, th |	     * This method resets the serializer. 
							      >	     * If this method returns true, the
     * output stream prior to serializing, or to use the exis |	     * output stream prior to serializing, or to reuse the ex
     * output format and output stream.			      |	     * output format and output stream or writer.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SerializerTrace.java xalan-j_2_7_0/src/org/apache/xml/serializer/SerializerTrace.java
 * $Id: SerializerTrace.java,v 1.2 2004/02/17 04:18:18 mincha |	 * $Id: SerializerTrace.java,v 1.3 2004/10/14 21:45:05 mincha
							      >	 * 
							      >	 * @xsl.usage internal
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/SerializerTraceWriter.java xalan-j_2_7_0/src/org/apache/xml/serializer/SerializerTraceWriter.java
 * $Id: SerializerTraceWriter.java,v 1.2 2004/02/17 04:18:18  |	 * $Id: SerializerTraceWriter.java,v 1.4 2004/10/14 21:45:05 
							      >	import java.io.OutputStream;
 *							      |	 * 
							      >	 * @xsl.usage internal
public class SerializerTraceWriter extends Writer	      |	final class SerializerTraceWriter extends Writer implements W
							      >	    /**
							      >	     * Get the writer that this one directly wraps.
							      >	     */
							      >	    public Writer getWriter()
							      >	    {
							      >	        return m_writer;
							      >	    }
							      >
							      >	    /**
							      >	     * Get the OutputStream that is the at the end of the
							      >	     * chain of writers.
							      >	     */
							      >	    public OutputStream getOutputStream()
							      >	    {
							      >	        OutputStream retval = null;
							      >	        if (m_writer instanceof WriterChain)
							      >	            retval = ((WriterChain) m_writer).getOutputStream
							      >	        return retval;
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToHTMLSAXHandler.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToHTMLSAXHandler.java
 * $Id: ToHTMLSAXHandler.java,v 1.8 2004/02/17 04:18:19 minch |	 * $Id: ToHTMLSAXHandler.java,v 1.14 2005/07/15 16:01:12 minc
 * @author Santiago Pericas-Geertsen			      |	 * 
 * @author G. Todd Miller 				      |	 * This class is not a public API.
							      >	 * 
							      >	 * @xsl.usage internal
public class ToHTMLSAXHandler extends ToSAXHandler	      |	public final class ToHTMLSAXHandler extends ToSAXHandler
							      |		/**
							      >		 *  Handle document type declaration (for first eleme
							      >		 */
							      >		private boolean m_dtdHandled = false;
							      >		
     * @see org.apache.xml.serializer.Serializer#getOutputFor |	     * @see Serializer#getOutputFormat()
     * @see org.apache.xml.serializer.Serializer#getOutputStr |	     * @see Serializer#getOutputStream()
     * @see org.apache.xml.serializer.Serializer#getWriter()  |	     * @see Serializer#getWriter()
     * @see org.apache.xml.serializer.DOMSerializer#serialize |	     * @see DOMSerializer#serialize(Node)
     * @param excape true if escaping is to be set on.	      |	     * @param escape true if escaping is to be set on.
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setEscaping(boolean)
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setIndent(boolean)
     * @see org.apache.xml.serializer.Serializer#setOutputFor |	     * @see Serializer#setOutputFormat(Properties)
     * @see org.apache.xml.serializer.Serializer#setOutputStr |	     * @see Serializer#setOutputStream(OutputStream)
     * @see org.apache.xml.serializer.Serializer#setWriter(Wr |	     * @see Serializer#setWriter(Writer)
     * @param namespaceURI The Namespace URI, or the empty st |	     * @param uri The Namespace URI, or the empty string if t
     * @param name The qualified name (with prefix), or the   |	     * @param qName The qualified name (with prefix), or the
     * @param name The element type name		      <
    public void processingInstruction(String arg0, String arg |	    public void processingInstruction(String target, String d
        m_saxHandler.processingInstruction(arg0,arg1);	      |	        m_saxHandler.processingInstruction(target,data);
		    super.fireEscapingEvent(arg0,arg1);       |			    super.fireEscapingEvent(target,data);    
        m_lexHandler.comment(ch, start, length);	      |	        if (m_lexHandler != null)
							      >	            m_lexHandler.comment(ch, start, length);
     * @see org.apache.xml.serializer.SerializationHandler#cl |	     * @see SerializationHandler#close()
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#characters(String)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startElement(String)
        if (m_lexHandler != null)			      |	        if (!m_dtdHandled)
            if ((doctypeSystem != null) || (doctypePublic !=  |	            if ((doctypeSystem != null) || (doctypePublic != 
                m_lexHandler.startDTD(			      |	                if (m_lexHandler != null)
                    elementName,			      |	                    m_lexHandler.startDTD(
                    doctypePublic,			      |	                        elementName,
                    doctypeSystem);			      |	                        doctypePublic,
            m_lexHandler = null;			      |	                        doctypeSystem);
							      >	            }
							      >				m_dtdHandled = true;
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startElement(String)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(String)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startPrefixMapping
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#namespaceAfterStartElement
     * @see org.apache.xml.serializer.Serializer#reset()      |	     * @see Serializer#reset()
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToHTMLStream.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToHTMLStream.java
 * $Id: ToHTMLStream.java,v 1.28 2004/02/18 22:57:44 minchau  |	 * $Id: ToHTMLStream.java,v 1.43 2005/08/03 19:20:31 minchau 
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.Utils;
import org.apache.xml.utils.BoolStack;			      <
import org.apache.xml.utils.Trie;			      <
 * @author Santiago Pericas-Geertsen			      |	 * This serializer takes a series of SAX or
 * @author G. Todd Miller 				      |	 * SAX-like events and writes its output
							      >	 * to the given stream.
							      >	 * 
							      >	 * This class is not a public API, it is public
							      >	 * because it is used from another package.
							      >	 * 
							      >	 * @xsl.usage internal
public class ToHTMLStream extends ToStream 		      |	public final class ToHTMLStream extends ToStream 
    protected static final CharInfo m_htmlcharInfo =	      |	    private static final CharInfo m_htmlcharInfo =
							      >	        initTagReference(m_elementFlags);
							      >	    }
							      >	    static void initTagReference(Trie m_elementFlags) {
        // NS4 extensions				      |	                    
							      >	        // Netscape 4 extension
							      >	        // Netscape 4 extension                    
							      >
							      >	        // NOW FOR ATTRIBUTE INFORMATION . . .
        elemDesc = (ElemDesc) m_elementFlags.get("AREA");     <
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("A");
							      >	        elemDesc.setAttr("HREF", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("NAME", ElemDesc.ATTRURL);
							      >	        
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("AREA");
							      >	        // ----------------------------------------------
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("BLOCKQUOTE" |	        // ----------------------------------------------
							      |	        elemDesc = (ElemDesc) m_elementFlags.get("BUTTON");
        elemDesc.setAttr("CITE", ElemDesc.ATTRURL);	      |	        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("Q");	      <
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("BLOCKQUOTE"
        elemDesc = (ElemDesc) m_elementFlags.get("INS");      |	        // ----------------------------------------------
							      |	        elemDesc = (ElemDesc) m_elementFlags.get("DEL");
							      >	     
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("DIR");
							      >	        elemDesc.setAttr("COMPACT", ElemDesc.ATTREMPTY);
							      >	           
							      >	        // ----------------------------------------------
							      >	        
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("DIV");
							      >	        elemDesc.setAttr("SRC", ElemDesc.ATTRURL); // Netscap
							      >	        elemDesc.setAttr("NOWRAP", ElemDesc.ATTREMPTY); // In
							      >	   
							      >	        // ----------------------------------------------    
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("DL");
							      >	        elemDesc.setAttr("COMPACT", ElemDesc.ATTREMPTY);
							      >	           
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("FORM");
							      >	        elemDesc.setAttr("ACTION", ElemDesc.ATTRURL);
        elemDesc = (ElemDesc) m_elementFlags.get("DEL");      |	        // ----------------------------------------------
							      >	        // Attribution to: "Voytenko, Dimitry" <DVoytenko@SEC
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("FRAME");
							      >	        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("LONGDESC", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("NORESIZE",ElemDesc.ATTREMPTY);
        elemDesc.setAttr("CITE", ElemDesc.ATTRURL);	      |	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("HEAD");
							      >	        elemDesc.setAttr("PROFILE", ElemDesc.ATTRURL);
        elemDesc = (ElemDesc) m_elementFlags.get("A");	      |	        // ----------------------------------------------    
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("HR");
							      >	        elemDesc.setAttr("NOSHADE", ElemDesc.ATTREMPTY);
							      >	        
							      >	        // ----------------------------------------------
							      >	        // HTML 4.0, section 16.5
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("IFRAME");
							      >	        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("LONGDESC", ElemDesc.ATTRURL);
        elemDesc.setAttr("HREF", ElemDesc.ATTRURL);	      |	        // ----------------------------------------------
        elemDesc.setAttr("NAME", ElemDesc.ATTRURL);	      |	        // Netscape 4 extension
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("ILAYER");
							      >	        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);
        elemDesc = (ElemDesc) m_elementFlags.get("LINK");     |	        // ----------------------------------------------
        elemDesc.setAttr("HREF", ElemDesc.ATTRURL);	      |	        elemDesc = (ElemDesc) m_elementFlags.get("IMG");
							      >	        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("LONGDESC", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("USEMAP", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("ISMAP", ElemDesc.ATTREMPTY);
							      >	        // ----------------------------------------------
							      <
							      >	        
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("INS");
							      >	        elemDesc.setAttr("CITE", ElemDesc.ATTRURL);
        elemDesc = (ElemDesc) m_elementFlags.get("SELECT");   |	        // ----------------------------------------------
							      |	        // Netscape 4 extension
        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);     |	        elemDesc = (ElemDesc) m_elementFlags.get("LAYER");
        elemDesc.setAttr("MULTIPLE", ElemDesc.ATTREMPTY);     <
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("OPTGROUP"); <
							      <
        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);     <
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("OPTION");   <
							      <
        elemDesc.setAttr("SELECTED", ElemDesc.ATTREMPTY);     <
        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);     <
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("TEXTAREA"); <
							      <
        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);     <
        elemDesc.setAttr("READONLY", ElemDesc.ATTREMPTY);     <
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("BUTTON");   <
							      <
        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);     <
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("SCRIPT");   <
							      <
        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);	      <
        elemDesc.setAttr("FOR", ElemDesc.ATTRURL);	      <
        elemDesc.setAttr("DEFER", ElemDesc.ATTREMPTY);	      <
							      <
        elemDesc = (ElemDesc) m_elementFlags.get("IMG");      <
							      <
        elemDesc.setAttr("LONGDESC", ElemDesc.ATTRURL);	      <
        elemDesc.setAttr("USEMAP", ElemDesc.ATTRURL);	      <
        elemDesc.setAttr("ISMAP", ElemDesc.ATTREMPTY);	      <
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("LINK");
							      >	        elemDesc.setAttr("HREF", ElemDesc.ATTRURL);
							      >	       
							      >	        // ----------------------------------------------    
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("MENU");
							      >	        elemDesc.setAttr("COMPACT", ElemDesc.ATTREMPTY);
							      >	        
							      >	        // ----------------------------------------------
							      <
							      >	        
							      >	        // ----------------------------------------------    
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("OL");
							      >	        elemDesc.setAttr("COMPACT", ElemDesc.ATTREMPTY);
							      >	        
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("OPTGROUP");
							      >	        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);
        elemDesc = (ElemDesc) m_elementFlags.get("FORM");     |	        // ----------------------------------------------
							      |	        elemDesc = (ElemDesc) m_elementFlags.get("OPTION");
        elemDesc.setAttr("ACTION", ElemDesc.ATTRURL);	      |	        elemDesc.setAttr("SELECTED", ElemDesc.ATTREMPTY);
							      |	        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);
        elemDesc = (ElemDesc) m_elementFlags.get("HEAD");     |	        
							      |	        // ----------------------------------------------
        elemDesc.setAttr("PROFILE", ElemDesc.ATTRURL);	      |	        elemDesc = (ElemDesc) m_elementFlags.get("Q");
							      |	        elemDesc.setAttr("CITE", ElemDesc.ATTRURL);
        // Attribution to: "Voytenko, Dimitry" <DVoytenko@SEC <
        elemDesc = (ElemDesc) m_elementFlags.get("FRAME");    <
							      <
        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);	      <
        elemDesc.setAttr("LONGDESC", ElemDesc.ATTRURL);	      <
							      <
        // HTML 4.0, section 16.5			      <
        elemDesc = (ElemDesc) m_elementFlags.get("IFRAME");   <
							      <
        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);	      <
        elemDesc.setAttr("LONGDESC", ElemDesc.ATTRURL);	      <
							      <
        // NS4 extensions				      <
        elemDesc = (ElemDesc) m_elementFlags.get("LAYER");    <
							      >	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("SCRIPT");
							      >	        elemDesc.setAttr("FOR", ElemDesc.ATTRURL);
							      >	        elemDesc.setAttr("DEFER", ElemDesc.ATTREMPTY);
        elemDesc = (ElemDesc) m_elementFlags.get("ILAYER");   |	        // ----------------------------------------------
							      |	        elemDesc = (ElemDesc) m_elementFlags.get("SELECT");
        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);	      |	        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);
							      >	        elemDesc.setAttr("MULTIPLE", ElemDesc.ATTREMPTY);
        elemDesc = (ElemDesc) m_elementFlags.get("DIV");      |	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("TABLE");
							      >	        elemDesc.setAttr("NOWRAP", ElemDesc.ATTREMPTY); // In
							      >	        
							      >	        // ----------------------------------------------    
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("TD");
							      >	        elemDesc.setAttr("NOWRAP", ElemDesc.ATTREMPTY);
        elemDesc.setAttr("SRC", ElemDesc.ATTRURL);	      |	        // ----------------------------------------------
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("TEXTAREA");
							      >	        elemDesc.setAttr("DISABLED", ElemDesc.ATTREMPTY);
							      >	        elemDesc.setAttr("READONLY", ElemDesc.ATTREMPTY);
							      >	       
							      >	        // ----------------------------------------------    
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("TH");
							      >	        elemDesc.setAttr("NOWRAP", ElemDesc.ATTREMPTY);
							      >	        
							      >	        // ----------------------------------------------
							      >	        // The nowrap attribute of a tr element is both
							      >	        // a Netscape and Internet-Explorer extension        
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("TR");
							      >	        elemDesc.setAttr("NOWRAP", ElemDesc.ATTREMPTY);
							      >	        
							      >	        // ----------------------------------------------    
							      >	        elemDesc = (ElemDesc) m_elementFlags.get("UL");
							      >	        elemDesc.setAttr("COMPACT", ElemDesc.ATTREMPTY);
							      >	     * 
							      >	     * This method can be called multiple times before starti
							      >	     * the serialization of a particular result-tree. In prin
							      >	     * all serialization parameters can be changed, with the 
							      >	     * of method="html" (it must be method="html" otherwise w
							      >	     * shouldn't even have a ToHTMLStream object here!) 
     * @param format The output format to use		      |	     * @param format The output format or serialzation parame
							      >	     * to use.
							      >	    
							      >	    /**
							      >	     * A Trie that is just a copy of the "static" one.
							      >	     * We need this one to be able to use the faster, but not
							      >	     * method Trie.get2(name)
							      >	     */
							      >	    private Trie m_htmlInfo = new Trie(m_elementFlags);
							      >	    /**
							      >	     * Calls to this method could be replaced with calls to
							      >	     * getElemDesc(name), but this one should be faster.
							      >	     */
							      >	    private ElemDesc getElemDesc2(String name)
							      >	    {
							      >	        Object obj = m_htmlInfo.get2(name);
							      >	        if (null != obj)
							      >	            return (ElemDesc)obj;
							      >	        return m_dummy;
							      >	    }
                writer.write("<!DOCTYPE HTML");		      |	                writer.write("<!DOCTYPE html");
                        writer.write('"');		      |	                        writer.write(" \"");
            ElemDesc elemDesc = getElemDesc(name);	      |	            // getElemDesc2(name) is faster than getElemDesc(
							      >	            ElemDesc elemDesc = getElemDesc2(name);
                    else if (isUTF16Surrogate(ch)) // high su |	                    else if (Encodings.isHighUTF16Surrogate(c
                int pos = accumDefaultEntity(writer, ch, i, c |	                int pos = accumDefaultEntity(writer, ch, i, c
                    if (isUTF16Surrogate(ch))		      |	                    if (Encodings.isHighUTF16Surrogate(ch))
                    String entityName = m_charInfo.getEntityN |	                    String outputStringForChar = m_charInfo.g
                    if (null != entityName)		      |	                    if (null != outputStringForChar)
                        writer.write('&');		      |	                        writer.write(outputStringForChar);
                        writer.write(entityName);	      <
                        writer.write(';');		      <
                    XMLMessages.createXMLMessage(	      |	                    Utils.messages.createMessage(
                        XMLErrorResources.ER_OIERROR,	      |	                        MsgKey.ER_OIERROR,
                    XMLMessages.createXMLMessage(	      |	                    Utils.messages.createMessage(
                        XMLErrorResources.ER_OIERROR,	      |	                        MsgKey.ER_OIERROR,
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(String)
         * @see org.apache.xml.serializer.ExtendedContentHand |	         * @see ExtendedContentHandler#namespaceAfterStartEle
							      >	    }
							      >	    
							      >	    static class Trie
							      >	    {
							      >	        /**
							      >	         * A digital search trie for 7-bit ASCII text
							      >	         * The API is a subset of java.util.Hashtable
							      >	         * The key must be a 7-bit ASCII string
							      >	         * The value may be any Java Object
							      >	         * One can get an object stored in a trie from its ke
							      >	         * but the search is either case sensitive or case 
							      >	         * insensitive to the characters in the key, and this
							      >	         * choice of sensitivity or insensitivity is made whe
							      >	         * the Trie is created, before any objects are put in
							      >	         * 
							      >	         * This class is a copy of the one in org.apache.xml.
							      >	         * It exists to cut the serializers dependancy on tha
							      >	         *  
							      >	         * @xsl.usage internal
							      >	         */
							      >
							      >	        /** Size of the m_nextChar array.  */
							      >	        public static final int ALPHA_SIZE = 128;
							      >
							      >	        /** The root node of the tree.    */
							      >	        final Node m_Root;
							      >
							      >	        /** helper buffer to convert Strings to char arrays *
							      >	        private char[] m_charBuffer = new char[0];
							      >
							      >	        /** true if the search for an object is lower case on
							      >	        private final boolean m_lowerCaseOnly;
							      >
							      >	        /**
							      >	         * Construct the trie that has a case insensitive sea
							      >	         */
							      >	        public Trie()
							      >	        {
							      >	            m_Root = new Node();
							      >	            m_lowerCaseOnly = false;
							      >	        }
							      >
							      >	        /**
							      >	         * Construct the trie given the desired case sensitiv
							      >	         * @param lowerCaseOnly true if the search keys are t
							      >	         * not case insensitive.
							      >	         */
							      >	        public Trie(boolean lowerCaseOnly)
							      >	        {
							      >	            m_Root = new Node();
							      >	            m_lowerCaseOnly = lowerCaseOnly;
							      >	        }
							      >
							      >	        /**
							      >	         * Put an object into the trie for lookup.
							      >	         *
							      >	         * @param key must be a 7-bit ASCII string
							      >	         * @param value any java object.
							      >	         *
							      >	         * @return The old object that matched key, or null.
							      >	         */
							      >	        public Object put(String key, Object value)
							      >	        {
							      >
							      >	            final int len = key.length();
							      >	            if (len > m_charBuffer.length)
							      >	            {
							      >	                // make the biggest buffer ever needed in get
							      >	                m_charBuffer = new char[len];
							      >	            }
							      >
							      >	            Node node = m_Root;
							      >
							      >	            for (int i = 0; i < len; i++)
							      >	            {
							      >	                Node nextNode =
							      >	                    node.m_nextChar[Character.toLowerCase(key
							      >
							      >	                if (nextNode != null)
							      >	                {
							      >	                    node = nextNode;
							      >	                }
							      >	                else
							      >	                {
							      >	                    for (; i < len; i++)
							      >	                    {
							      >	                        Node newNode = new Node();
							      >	                        if (m_lowerCaseOnly)
							      >	                        {
							      >	                            // put this value into the tree o
							      >	                            node.m_nextChar[Character.toLower
							      >	                                key.charAt(i))] =
							      >	                                newNode;
							      >	                        }
							      >	                        else
							      >	                        {
							      >	                            // put this value into the tree w
							      >	                            node.m_nextChar[Character.toUpper
							      >	                                key.charAt(i))] =
							      >	                                newNode;
							      >	                            node.m_nextChar[Character.toLower
							      >	                                key.charAt(i))] =
							      >	                                newNode;
							      >	                        }
							      >	                        node = newNode;
							      >	                    }
							      >	                    break;
							      >	                }
							      >	            }
							      >
							      >	            Object ret = node.m_Value;
							      >
							      >	            node.m_Value = value;
							      >
							      >	            return ret;
							      >	        }
							      >
							      >	        /**
							      >	         * Get an object that matches the key.
							      >	         *
							      >	         * @param key must be a 7-bit ASCII string
							      >	         *
							      >	         * @return The object that matches the key, or null.
							      >	         */
							      >	        public Object get(final String key)
							      >	        {
							      >
							      >	            final int len = key.length();
							      >
							      >	            /* If the name is too long, we won't find it, thi
							      >	             * from overflowing m_charBuffer
							      >	             */
							      >	            if (m_charBuffer.length < len)
							      >	                return null;
							      >
							      >	            Node node = m_Root;
							      >	            switch (len) // optimize the look up based on the
							      >	            {
							      >	                // case 0 looks silly, but the generated byte
							      >	                // faster for lookup of elements of length 2 
							      >	                // and a fair bit faster.  Don't know why.
							      >	                case 0 :
							      >	                    {
							      >	                        return null;
							      >	                    }
							      >
							      >	                case 1 :
							      >	                    {
							      >	                        final char ch = key.charAt(0);
							      >	                        if (ch < ALPHA_SIZE)
							      >	                        {
							      >	                            node = node.m_nextChar[ch];
							      >	                            if (node != null)
							      >	                                return node.m_Value;
							      >	                        }
							      >	                        return null;
							      >	                    }
							      >	                    //                comment out case 2 beca
							      >	                    //                case 2 :
							      >	                    //                    {
							      >	                    //                        final char ch0 
							      >	                    //                        final char ch1 
							      >	                    //                        if (ch0 < ALPHA
							      >	                    //                        {
							      >	                    //                            node = node
							      >	                    //                            if (node !=
							      >	                    //                            {
							      >	                    //                        
							      >	                    //                                if (ch1
							      >	                    //                                {
							      >	                    //                                    nod
							      >	                    //                                    if 
							      >	                    //                                       
							      >	                    //                                }
							      >	                    //                            }
							      >	                    //                        }
							      >	                    //                        return null;
							      >	                    //                   }
							      >	                default :
							      >	                    {
							      >	                        for (int i = 0; i < len; i++)
							      >	                        {
							      >	                            // A thread-safe way to loop over
							      >	                            final char ch = key.charAt(i);
							      >	                            if (ALPHA_SIZE <= ch)
							      >	                            {
							      >	                                // the key is not 7-bit ASCII
							      >	                                return null;
							      >	                            }
							      >
							      >	                            node = node.m_nextChar[ch];
							      >	                            if (node == null)
							      >	                                return null;
							      >	                        }
							      >
							      >	                        return node.m_Value;
							      >	                    }
							      >	            }
							      >	        }
							      >
							      >	        /**
							      >	         * The node representation for the trie.
							      >	         * @xsl.usage internal
							      >	         */
							      >	        private class Node
							      >	        {
							      >
							      >	            /**
							      >	             * Constructor, creates a Node[ALPHA_SIZE].
							      >	             */
							      >	            Node()
							      >	            {
							      >	                m_nextChar = new Node[ALPHA_SIZE];
							      >	                m_Value = null;
							      >	            }
							      >
							      >	            /** The next nodes.   */
							      >	            final Node m_nextChar[];
							      >
							      >	            /** The value.   */
							      >	            Object m_Value;
							      >	        }
							      >	        /**
							      >	         * Construct the trie from another Trie.
							      >	         * Both the existing Trie and this new one share the 
							      >	         * lookup, and it is assumed that the table is fully 
							      >	         * not changing anymore.
							      >	         * 
							      >	         * @param existingTrie the Trie that this one is a co
							      >	         */
							      >	        public Trie(Trie existingTrie)
							      >	        {
							      >	            // copy some fields from the existing Trie into t
							      >	            m_Root = existingTrie.m_Root;
							      >	            m_lowerCaseOnly = existingTrie.m_lowerCaseOnly;
							      >
							      >	            // get a buffer just big enough to hold the longe
							      >	            int max = existingTrie.getLongestKeyLength();
							      >	            m_charBuffer = new char[max];
							      >	        }
							      >
							      >	        /**
							      >	         * Get an object that matches the key.
							      >	         * This method is faster than get(), but is not threa
							      >	         *
							      >	         * @param key must be a 7-bit ASCII string
							      >	         *
							      >	         * @return The object that matches the key, or null.
							      >	         */
							      >	        public Object get2(final String key)
							      >	        {
							      >
							      >	            final int len = key.length();
							      >
							      >	            /* If the name is too long, we won't find it, thi
							      >	             * from overflowing m_charBuffer
							      >	             */
							      >	            if (m_charBuffer.length < len)
							      >	                return null;
							      >
							      >	            Node node = m_Root;
							      >	            switch (len) // optimize the look up based on the
							      >	            {
							      >	                // case 0 looks silly, but the generated byte
							      >	                // faster for lookup of elements of length 2 
							      >	                // and a fair bit faster.  Don't know why.
							      >	                case 0 :
							      >	                    {
							      >	                        return null;
							      >	                    }
							      >
							      >	                case 1 :
							      >	                    {
							      >	                        final char ch = key.charAt(0);
							      >	                        if (ch < ALPHA_SIZE)
							      >	                        {
							      >	                            node = node.m_nextChar[ch];
							      >	                            if (node != null)
							      >	                                return node.m_Value;
							      >	                        }
							      >	                        return null;
							      >	                    }
							      >	                default :
							      >	                    {
							      >	                        /* Copy string into array. This is no
							      >	                         * it modifies the contents of m_char
							      >	                         * threads were to use this Trie they
							      >	                         * using this same array (not good). 
							      >	                         * method is not thread-safe, but it 
							      >	                         * converting to a char[] and looping
							      >	                         * the array is faster than a String'
							      >	                         */
							      >	                        key.getChars(0, len, m_charBuffer, 0)
							      >
							      >	                        for (int i = 0; i < len; i++)
							      >	                        {
							      >	                            final char ch = m_charBuffer[i];
							      >	                            if (ALPHA_SIZE <= ch)
							      >	                            {
							      >	                                // the key is not 7-bit ASCII
							      >	                                return null;
							      >	                            }
							      >
							      >	                            node = node.m_nextChar[ch];
							      >	                            if (node == null)
							      >	                                return null;
							      >	                        }
							      >
							      >	                        return node.m_Value;
							      >	                    }
							      >	            }
							      >	        }
							      >
							      >	        /**
							      >	         * Get the length of the longest key used in the tabl
							      >	         */
							      >	        public int getLongestKeyLength()
							      >	        {
							      >	            return m_charBuffer.length;
							      >	        }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToSAXHandler.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToSAXHandler.java
 * $Id: ToSAXHandler.java,v 1.10 2004/02/17 04:18:18 minchau  |	 * $Id: ToSAXHandler.java,v 1.16 2005/04/07 04:29:03 minchau 
 * @author Santiago Pericas-Geertsen			      |	 * This class is used to provide a base behavior to be inheri
 * @author G. Todd Miller 				      |	 * by other To...SAXHandler serializers.
							      >	 * 
							      >	 * This class is not a public API.
							      >	 * 
							      >	 * @xsl.usage internal
abstract public class ToSAXHandler extends SerializerBase     |	public abstract class ToSAXHandler extends SerializerBase 
     * @param chars The string of characters to process.      |	     * @param characters The string of characters to process.
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#characters(String)
     * @see org.apache.xml.serializer.ExtendedLexicalHandler# |	     * @see ExtendedLexicalHandler#comment(String)
							      |	        flushPending();
        // Close any open element before emitting comment     <
        if (m_elemContext.m_startTagOpen)		      <
        {						      <
            closeStartTag();				      <
        }						      <
        else if (m_cdataTagOpen)			      <
        {						      <
            closeCDATA();				      <
        }						      <
     *							      <
     * @param namespaceURI The Namespace URI, or the empty st <
     *        element has no Namespace URI or if Namespace    <
     *        processing is not being performed.	      <
     * @param localName The local name (without prefix), or t <
     *        empty string if Namespace processing is not bei <
     *        performed.				      <
     * @param name The element type name.		      <
     * @param atts The attributes attached to the element, if <
     * @param m_saxHandler The ContentHandler to set	      |	     * @param _saxHandler The ContentHandler to set
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setCdataSectionElements(java
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startElement(String, Strin
     * @param elementName the element name, with prefix (if a |	     * @param qName the element name, with prefix (if any).
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startElement(String)
     * @see org.apache.xml.serializer.Serializer#reset()      |	     * @see Serializer#reset()
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToStream.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToStream.java
 * $Id: ToStream.java,v 1.29 2004/02/18 22:57:44 minchau Exp  |	 * $Id: ToStream.java,v 1.45 2005/08/04 23:57:06 minchau Exp 
							      >	import javax.xml.transform.ErrorListener;
							      >	import javax.xml.transform.TransformerException;
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.Utils;
import org.apache.xml.utils.BoolStack;			      |	import org.apache.xml.serializer.utils.WrappedRuntimeExceptio
import org.apache.xml.utils.FastStringBuffer;		      <
import org.apache.xml.utils.QName;			      <
import org.apache.xml.utils.TreeWalker;			      <
import org.apache.xml.utils.WrappedRuntimeException;	      <
 * @author Santiago Pericas-Geertsen			      |	 * 
 * @author G. Todd Miller 				      |	 * @xsl.usage internal
    /**							      <
     * Boolean that tells if we already tried to get the conv <
     */							      <
    boolean m_triedToGetConverter = false;		      <
    /**							      <
     * Method reference to the sun.io.CharToByteConverter#can <
     * for this encoding.  Invalid if m_charToByteConverter i <
     */							      <
    java.lang.reflect.Method m_canConvertMeth;		      <
     * Opaque reference to the sun.io.CharToByteConverter for |	     * The encoding information associated with this serializ
     * encoding.					      |	     * Although initially there is no encoding,
							      >	     * there is a dummy EncodingInfo object that will say
							      >	     * that every character is in the encoding. This is usefu
							      >	     * for a serializer that is in temporary output state and
							      >	     * no associated encoding. A serializer in final output s
							      >	     * will have an encoding, and will worry about whether 
							      >	     * single chars or surrogate pairs of high/low chars form
							      >	     * characters in the output encoding. 
    Object m_charToByteConverter = null;		      |	    EncodingInfo m_encodingInfo = new EncodingInfo(null,null)
							      |	    
    /**							      <
     * The maximum character size before we have to resort    <
     * to escaping.					      <
     */							      <
    protected int m_maxCharacter = Encodings.getLastPrintable <
							      >	     * The default value is from the system property,
							      >	     * but this value can be set through the xsl:output
							      >	     * extension attribute xalan:line-separator.
    protected final char[] m_lineSep =			      |	    protected char[] m_lineSep =
    protected final int m_lineSepLen = m_lineSep.length;      |	    protected int m_lineSepLen = m_lineSep.length;
							      >	    
							      >	    /**
							      >	     * If this flag is true DTD entity references are not lef
							      >	     * which is exiting older behavior.
							      >	     */
							      >	    private boolean m_expandDTDEntities = true;
							      >	  
     * @param elem The element to serialize		      <
     *							      <
                new TreeWalker(this, new org.apache.xml.utils |	                new TreeWalker(this);
     * Return true if the character is the high member of a s <
     *							      <
     * NEEDSDOC @param c				      <
     *							      <
     * NEEDSDOC ($objectName$) @return			      <
     */							      <
    static final boolean isUTF16Surrogate(char c)	      <
    {							      <
        return (c & 0xFC00) == 0xD800;			      <
    }							      <
							      <
    /**							      <
            if (m_needToOutputDocTypeDecl)		      |	            DTDprolog();
            {						      <
                outputDocTypeDecl(m_elemContext.m_elementName <
                m_needToOutputDocTypeDecl = false;	      <
            }            				      <
            if (m_inDoctype)				      <
            {						      <
                writer.write(" [");			      <
                writer.write(m_lineSep, 0, m_lineSepLen);     <
							      <
                m_inDoctype = false;			      <
            }						      <
            if (m_needToOutputDocTypeDecl)		      |	            DTDprolog();
            {						      <
                outputDocTypeDecl(m_elemContext.m_elementName <
                m_needToOutputDocTypeDecl = false;	      <
            }        					      <
            if (m_inDoctype)				      <
            {						      <
                final java.io.Writer writer = m_writer;	      <
                writer.write(" [");			      <
                writer.write(m_lineSep, 0, m_lineSepLen);     <
							      <
                m_inDoctype = false;			      <
            }						      <
							      <
							      >	     * This method can be called multiple times and the xsl:o
							      >	     * passed in the 'format' parameter are accumulated acros
							      >	            
							      >	        {
							      >	            String sep = 
							      >	                    format.getProperty(OutputPropertiesFactor
							      >	            if (sep != null) {
							      >	                m_lineSep = sep.toCharArray();
							      >	                m_lineSepLen = sep.length();
							      >	            }
							      >	        }
							      >	        /* 
							      >	         * This code is added for XML 1.1 Version output.
							      >	         */
							      >	        String version = getVersion();
							      >	        if (null == version)
							      >	        {
							      >	            version = format.getProperty(OutputKeys.VERSION);
							      >	            setVersion(version);
							      >	        }
							      >
        m_maxCharacter = Encodings.getLastPrintable(encoding) <
            m_maxCharacter = Encodings.getLastPrintable(encod <
							      <
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setEscaping(boolean)
     * @param pw        The character output stream to use.   <
            if (m_needToOutputDocTypeDecl)		      |	            DTDprolog();
            {						      <
                outputDocTypeDecl(m_elemContext.m_elementName <
                m_needToOutputDocTypeDecl = false;	      <
            }						      <
            if (m_inDoctype)				      <
            {						      <
                writer.write(" [");			      <
                writer.write(m_lineSep, 0, m_lineSepLen);     <
							      <
                m_inDoctype = false;			      <
            }						      <
							      >	        try {
							      >	            DTDprolog();
							      >	            
							      >	            m_writer.write("<!ENTITY ");            
							      >	            m_writer.write(name);
							      >	            if (publicId != null) {
							      >	                m_writer.write(" PUBLIC \"");
							      >	                m_writer.write(publicId);
							      >	  
							      >	            }
							      >	            else {
							      >	                m_writer.write(" SYSTEM \"");
							      >	                m_writer.write(systemId);
							      >	            }
							      >	            m_writer.write("\" >");
							      >	            m_writer.write(m_lineSep, 0, m_lineSepLen);
							      >	        } catch (IOException e) {
							      >	            // TODO Auto-generated catch block
							      >	            e.printStackTrace();
							      >	        }
							      >
							      >	        final boolean ret;
							      >	            // This is the old/fast code here, but is this 
							      >	            // correct for all encodings?
                return true;				      |	                ret= true;
                return false;				      |	                ret = false;
        }						      <
							      <
        if (null == m_charToByteConverter && false == m_tried <
        {						      <
            m_triedToGetConverter = true;		      <
            try						      <
            {						      <
                m_charToByteConverter =			      <
                    Encodings.getCharToByteConverter(getEncod <
                if (null != m_charToByteConverter)	      <
                {					      <
                    Class argsTypes[] = new Class[1];	      <
                    argsTypes[0] = Character.TYPE;	      <
                    Class convClass = m_charToByteConverter.g <
                    m_canConvertMeth =			      <
                        convClass.getMethod("canConvert", arg <
                }					      <
            }						      <
            catch (Exception e)				      <
            {						      <
                // This is just an assert: no action at the m <
                System.err.println("Warning: " + e.getMessage <
            }						      <
        if (null != m_charToByteConverter)		      |	        else {            
        {						      |	            ret = m_encodingInfo.isInEncoding(ch);
            try						      <
            {						      <
                Object args[] = new Object[1];		      <
                args[0] = new Character(ch);		      <
                Boolean bool =				      <
                    (Boolean) m_canConvertMeth.invoke(	      <
                        m_charToByteConverter,		      <
                        args);				      <
                return bool.booleanValue()		      <
                    ? !Character.isISOControl(ch)	      <
                    : false;				      <
            }						      <
            catch (java.lang.reflect.InvocationTargetExceptio <
            {						      <
                // This is just an assert: no action at the m <
                System.err.println(			      <
                    "Warning: InvocationTargetException in ca <
            }						      <
            catch (java.lang.IllegalAccessException iae)      <
            {						      <
                // This is just an assert: no action at the m <
                System.err.println(			      <
                    "Warning: IllegalAccessException in canCo <
            }						      <
        // fallback!					      |	        return ret;
        return (ch <= m_maxCharacter);			      <
     * characters as a single character reference.	      |	     * characters if it is in the encoding, or if there is no
							      >	     * encoding, otherwise write out an entity reference
							      >	     * of the value of the unicode code point of the characte
							      >	     * represented by the high/low surrogate pair.
							      >	     * <p>
							      >	     * An exception is thrown if there is no low surrogate in
							      >	     * because the array ends unexpectely, or if the low char
							      >	     * but its value is such that it is not a low surrogate.
     * @param c the first part of the surrogate.	      |	     * @param c the first (high) part of the surrogate, which
							      >	     * must be confirmed before calling this method.
							      >	     * @return 0 if the pair of characters was written out as
							      >	     * the unicode code point of the character represented by
							      >	     * the surrogate pair if an entity reference with that va
							      >	     * was written out. 
							      >	     * 
    protected void writeUTF16Surrogate(char c, char ch[], int |	    protected int writeUTF16Surrogate(char c, char ch[], int 
        throws IOException				      <
    {							      <
							      <
        // UTF-16 surrogate				      <
        int surrogateValue = getURF16SurrogateValue(c, ch, i, <
							      <
        final java.io.Writer writer = m_writer;		      <
        writer.write('&');				      <
        writer.write('#');				      <
							      <
        // writer.write('x');				      <
        writer.write(Integer.toString(surrogateValue));	      <
        writer.write(';');				      <
    }							      <
							      <
    /**							      <
     * Once a surrogate has been detected, get the pair as a  <
     * value.						      <
     *							      <
     * @param c the first part of the surrogate.	      <
     * @param ch Character array.			      <
     * @param i position Where the surrogate was detected.    <
     * @param end The end index of the significant characters <
     * @return the integer value of the UTF-16 surrogate.     <
     * @throws org.xml.sax.SAXException if invalid UTF-16 sur <
     */							      <
    int getURF16SurrogateValue(char c, char ch[], int i, int  <
							      |	        int codePoint = 0;
        int next;					      <
							      <
                XMLMessages.createXMLMessage(		      |	                Utils.messages.createMessage(
                    XMLErrorResources.ER_INVALID_UTF16_SURROG |	                    MsgKey.ER_INVALID_UTF16_SURROGATE,
            //"Invalid UTF-16 surrogate detected: "	      <
							      <
            //+Integer.toHexString((int)c)+ " ?");	      <
        else						      |	        
        {						      |	        final char high = c;
            next = ch[++i];				      |	        final char low = ch[i+1];
							      |	        if (!Encodings.isLowUTF16Surrogate(low)) {
            if (!(0xdc00 <= next && next < 0xe000))	      |	            throw new IOException(
                throw new IOException(			      |	                Utils.messages.createMessage(
                    XMLMessages.createXMLMessage(	      |	                    MsgKey.ER_INVALID_UTF16_SURROGATE,
                        XMLErrorResources.ER_INVALID_UTF16_SU |	                    new Object[] {
                        new Object[] {			      |	                        Integer.toHexString((int) c)
                            Integer.toHexString((int) c)      |	                            + " "
                                + " "			      |	                            + Integer.toHexString(low)}));
                                + Integer.toHexString(next)}) <
            //"Invalid UTF-16 surrogate detected: "	      <
							      <
            //+Integer.toHexString((int)c)+" "+Integer.toHexS <
            next = ((c - 0xd800) << 10) + next - 0xdc00 + 0x0 <
        return next;					      |	        final java.io.Writer writer = m_writer;
							      >	                
							      >	        // If we make it to here we have a valid high, low su
							      >	        if (m_encodingInfo.isInEncoding(c,low)) {
							      >	            // If the character formed by the surrogate pair
							      >	            // is in the encoding, so just write it out
							      >	            writer.write(ch,i,2);
							      >	        }
							      >	        else {
							      >	            // Don't know what to do with this char, it is
							      >	            // not in the encoding and not a high char in
							      >	            // a surrogate pair, so write out as an entity re
							      >	            final String encoding = getEncoding();
							      >	            if (encoding != null) {
							      >	                /* The output encoding is known, 
							      >	                 * so somthing is wrong.
							      >	                  */
							      >	                codePoint = Encodings.toCodePoint(high, low);
							      >	                // not in the encoding, so write out a charac
							      >	                writer.write('&');
							      >	                writer.write('#');
							      >	                writer.write(Integer.toString(codePoint));
							      >	                writer.write(';');
							      >	            } else {
							      >	                /* The output encoding is not known,
							      >	                 * so just write it out as-is.
							      >	                 */
							      >	                writer.write(ch, i, 2);
							      >	            }
							      >	        }
							      >	        // non-zero only if character reference was written o
							      >	        return codePoint;
                String entityRef = m_charInfo.getEntityNameFo |	                String outputStringForChar = m_charInfo.getOu
                if (null != entityRef)			      |	                if (null != outputStringForChar)
                    writer.write('&');			      |	                    writer.write(outputStringForChar);
                    writer.write(entityRef);		      <
                    writer.write(';');			      <
                if (isUTF16Surrogate(c))		      |	                if (Encodings.isHighUTF16Surrogate(c))
                else if (isUTF16Surrogate(c))		      |	                else if (Encodings.isHighUTF16Surrogate(c))
                XMLMessages.createXMLMessage(		      |	                Utils.messages.createMessage(
                    XMLErrorResources.ER_OIERROR,	      |	                    MsgKey.ER_OIERROR,
							      >	        // It does not make sense to continue with rest of th
							      >	        // characters to read from array is 0.
							      >	        // Section 7.6.1 of XSLT 1.0 (http://www.w3.org/TR/xs
							      >	        // is created if string is empty.	
							      >	        if (length == 0 || (m_inEntityRef && !m_expandDTDEnti
							      >	            return;
							      >	            final boolean isXML10 = XMLVERSION10.equals(getVe
                if (					      |	                /*  The check for isCharacterInC0orC1Ranger a
                					      |	                 *  isNELorLSEPCharacter has been added
							      >	                 *  to support Control Characters in XML 1.1
							      >	                 */     
							      >	                if (!isCharacterInC0orC1Range(ch) && 
							      >	                    (isXML10 || !isNELorLSEPCharacter(ch)) &&
							      >	    }     
							      >	    /**
							      >	     * This method checks if a given character is between C0 
							      >	     * of Control characters.
							      >	     * This method is added to support Control Characters for
							      >	     * If a given character is TAB (0x09), LF (0x0A) or CR (0
							      >	     * return false. Since they are whitespace characters, no
							      >	     * 
							      >	     * @param ch
							      >	     * @return boolean
							      >	     */
							      >	    private static boolean isCharacterInC0orC1Range(char ch)
							      >	    {
							      >	        if(ch == 0x09 || ch == 0x0A || ch == 0x0D)
							      >	        	return false;
							      >	        else        	    	
							      >	        	return (ch >= 0x7F && ch <= 0x9F)|| (ch >= 0x
							      >	    }
							      >	    /**
							      >	     * This method checks if a given character either NEL (0x
							      >	     * These are new end of line charcters added in XML 1.1. 
							      >	     * written as Numeric Character References (NCR) in XML 1
							      >	     * 
							      >	     * @param ch
							      >	     * @return boolean
							      >	     */
							      >	    private static boolean isNELorLSEPCharacter(char ch)
							      >	    {
							      >	        return (ch == 0x85 || ch == 0x2028);
							      >	        if (m_inEntityRef && !m_expandDTDEntities)
							      >	            return;
            if (0xd800 <= ch && ch < 0xdc00)		      |	            if (Encodings.isHighUTF16Surrogate(ch))
                // UTF-16 surrogate			      |	                // Should be the UTF-16 low surrogate of the 
                int next;				      |	                char next;
							      >	                // Unicode code point formed from the high/lo
							      >	                int codePoint = 0;
                        XMLMessages.createXMLMessage(	      |	                        Utils.messages.createMessage(
                            XMLErrorResources.ER_INVALID_UTF1 |	                            MsgKey.ER_INVALID_UTF16_SURROGATE
                    if (!(0xdc00 <= next && next < 0xe000))   |	                    if (!(Encodings.isLowUTF16Surrogate(next)
                            XMLMessages.createXMLMessage(     |	                            Utils.messages.createMessage(
                                XMLErrorResources	      |	                                MsgKey
                    next = ((ch - 0xd800) << 10) + next - 0xd |	                    codePoint = Encodings.toCodePoint(ch,next
                writer.write(Integer.toString(next));	      |	                writer.write(Integer.toString(codePoint));
                if (!escapingNotNeeded(ch) || 		      |	                /*  This if check is added to support control
							      >	                 *  If a character is a Control Character wit
							      >	                 *  to write it out as Numeric Character Refe
							      >	                 *  being used for output document.
							      >	                 */ 
							      >	                if (isCharacterInC0orC1Range(ch) || 
							      >	                        (XMLVERSION11.equals(getVersion()) &&
							      >	                {
							      >	                    writer.write("&#");
							      >	                    writer.write(Integer.toString(ch));
							      >	                    writer.write(';');
							      >	                }
							      >	                else if ((!escapingNotNeeded(ch) || 
                     || (!fromTextNode && m_charInfo.isSpecia |	                     || (!fromTextNode && m_charInfo.isSpecia
							      >	                && m_elemContext.m_currentElemDepth > 0)
      * @param namespaceURI The Namespace URI, or the empty s |	      * @param elementNamespaceURI The Namespace URI, or the 
      * @param localName The local name (without prefix), or  |	      * @param elementLocalName The local name (without prefi
      * @param name The element type name.		      |	      * @param elementName The element type name.
                // but not anymore - bjm		      |	                // but not anymore - Brian M.
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startPrefixMapping
            /* bjm: don't know if we really needto do this. T |	            /* Brian M.: don't know if we really needto do th
                addAttributeAlways(XMLNS_URI, prefix, name, " |	                addAttributeAlways(XMLNS_URI, name, name, "CD
                    addAttributeAlways(XMLNS_URI, prefix, nam |	                    addAttributeAlways(XMLNS_URI, prefix, nam
							      >
							      >	        if (!m_expandDTDEntities && !m_inExternalDTD) {
							      >	            /* Only leave the entity as-is if
							      >	             * we've been told not to expand them
							      >	             * and this is not the magic [dtd] name.
							      >	             */
							      >	            startNonEscaping();
							      >	            characters("&" + name + ';');
							      >	            endNonEscaping();
							      >	        }
							      >
            FastStringBuffer buf = new FastStringBuffer();    |	            StringBuffer buf = new StringBuffer();
                            buf.reset();		      |	                            buf.setLength(0);
                buf.reset();				      |	                buf.setLength(0);
     * @param name String of the form "{uri}local" or "local" |	     * @param URI_and_localName String of the form "{uri}loca
        QName qname;					      <
     * @param Vector URI_and_localNames a vector of pairs of  |	     * @param URI_and_localNames a vector of pairs of Strings
                        ns);				      |	                        ns, false);
                        ns);				      |	                        ns, false);
            String prefix =				      |	            final boolean no_prefix = ((index = rawName.index
                (index = rawName.indexOf(":")) < 0	      |	            String prefix = (no_prefix) ? "" : rawName.substr
                    ? ""				      <
                    : rawName.substring(0, index);	      <
                        prefix,				      |	                        no_prefix ? "xmlns" : prefix,  // loc
                        "xmlns" + (prefix.length() == 0 ? ""  |	                        no_prefix ? "xmlns" : ("xmlns:"+ pref
                        ns);				      |	                        ns,
							      >	                        false);
     * nocurrently open element. This is useful if a SAX star |	     * no currently open element. This is useful if a SAX sta
							      >	     * @param xslAttribute true if this attribute is coming f
							      >	     * @return true if the attribute value was added, 
							      >	     * false if the attribute already existed and the value w
							      >	     * replaced with the new value.
    public void addAttributeAlways(			      |	    public boolean addAttributeAlways(
        String value)					      |	        String value,
							      >	        boolean xslAttribute)
							      |	        boolean was_added;
        index = m_attributes.getIndex(rawName);		      |	        if (uri == null || localName == null || uri.length() 
							      >	            index = m_attributes.getIndex(rawName);
							      >	        else {
							      >	            index = m_attributes.getIndex(uri, localName);
							      >	        }
							      >
							      >	            was_added = false;
							      >	            if (xslAttribute)
							      >	            {
							      >	                /*
							      >	                 * This attribute is from an xsl:attribute el
							      >	                 * adding it, e.g.
							      >	                 *   <elem1  foo:attr1="1" xmlns:foo="uri1">
							      >	                 *       <xsl:attribute name="foo:attr2">2</x
							      >	                 *   </elem1>
							      >	                 * 
							      >	                 * We are adding attr1 and attr2 both as attr
							      >	                 * and this code is adding attr2 (the xsl:att
							      >	                 * We could have a collision with the prefix 
							      >	                 */
							      >
							      >	                // In the example above, is there a prefix li
							      >	                final int colonIndex = rawName.indexOf(':');
							      >	                if (colonIndex > 0)
							      >	                {
							      >	                    String prefix = rawName.substring(0,colon
							      >	                    NamespaceMappings.MappingRecord existing_
							      >
							      >	                    /* Before adding this attribute (foo:attr
							      >	                     * is the prefix for it (foo) already map
							      >	                     */
							      >	                    if (existing_mapping != null 
							      >	                    && existing_mapping.m_declarationDepth ==
							      >	                    && !existing_mapping.m_uri.equals(uri))
							      >	                    {
							      >	                        /*
							      >	                         * There is an existing mapping of th
							      >	                         * it differs from the one we need,
							      >	                         * and unfortunately it is at the cur
							      >	                         * can not over-ride it.
							      >	                         */
							      >
							      >	                        /*
							      >	                         * Are we lucky enough that an existi
							      >	                         */
							      >	                        prefix = m_prefixMap.lookupPrefix(uri
							      >	                        if (prefix == null)
							      >	                        {
							      >	                            /* Unfortunately there is no exis
							      >	                             * so to avoid a prefix collision
							      >	                             * This is OK because the prefix 
							      >	                             * defined in the xsl:attribute i
							      >	                             * just the xsl:attribute element
							      >	                             * and at this point in serializa
							      >	                             * xsl:attribute, if any, is just
							      >	                             *   . . . I sure hope so - Brian
							      >	                             */
							      >	                            prefix = m_prefixMap.generateNext
							      >	                        }
							      >
							      >	                        rawName = prefix + ':' + localName;
							      >	                    }
							      >	                }
							      >
							      >	                try
							      >	                {
							      >	                    /* This is our last chance to make sure t
							      >	                     * attribute is declared, especially if w
							      >	                     * prefix to avoid a collision (the new p
							      >	                     * soon and be lost ...  last chance here
							      >	                     */
							      >	                    String prefixUsed =
							      >	                        ensureAttributesNamespaceIsDeclared(
							      >	                            uri,
							      >	                            localName,
							      >	                            rawName);
							      >	                }
							      >	                catch (SAXException e)
							      >	                {
							      >	                    // TODO Auto-generated catch block
							      >	                    e.printStackTrace();
							      >	                }
							      >	            }
							      >	            was_added = true;
							      |	        return was_added;
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setTransformer(Transformer)
         this.m_canConvertMeth = null;			      <
         this.m_charToByteConverter = null;		      |
         // Leave m_format alone for now - bjm		      |	         // Leave m_format alone for now - Brian M.
         this.m_maxCharacter = Encodings.getLastPrintable();  <
         this.m_triedToGetConverter = false;		      <
         // this.m_writer = null;        		      |	         // this.m_writer = null;  
							      >	         this.m_expandDTDEntities = true;      
}							      |	    
							      >	    /**
							      >	      * Sets the character encoding coming from the xsl:outpu
							      >	      * @param encoding the character encoding
							      >	      */
							      >	     public void setEncoding(String encoding)
							      >	     {
							      >	         String old = getEncoding();
							      >	         super.setEncoding(encoding); 
							      >	         if (old == null || !old.equals(encoding)) {        
							      >	            // If we have changed the setting of the 
							      >	            m_encodingInfo = Encodings.getEncodingInfo(encodi
							      >	            
							      >	            if (encoding != null && m_encodingInfo.name == nu
							      >	            	// We tried to get an EncodingInfo for Object
							      >	            	// encoding, but it came back with an interna
							      >	            	// so the encoding is not supported by the JD
							      >	            	String msg = Utils.messages.createMessage(
							      >	            			MsgKey.ER_ENCODING_NOT_SUPPOR
							      >	            	try 
							      >	            	{
							      >	            		// Prepare to issue the warning messa
							      >	            		Transformer tran = super.getTransform
							      >	            		if (tran != null) {
							      >	            			ErrorListener errHandler = tr
							      >	            			// Issue the warning message
							      >	            			if (null != errHandler && m_s
							      >	            				errHandler.warning(ne
							      >	            			else
							      >	            				System.out.println(ms
							      >	            	    }
							      >	            		else
							      >	            			System.out.println(msg);
							      >	            	}
							      >	            	catch (Exception e){}
							      >	            }
							      >	         }
							      >	         return;
							      >	     }
							      >	     
							      >	    /**
							      >	     * Simple stack for boolean values.
							      >	     * 
							      >	     * This class is a copy of the one in org.apache.xml.util
							      >	     * It exists to cut the serializers dependancy on that pa
							      >	     * A minor changes from that package are:
							      >	     * doesn't implement Clonable
							      >	     *  
							      >	     * @xsl.usage internal
							      >	     */
							      >	    static final class BoolStack
							      >	    {
							      >
							      >	      /** Array of boolean values          */
							      >	      private boolean m_values[];
							      >
							      >	      /** Array size allocated           */
							      >	      private int m_allocatedSize;
							      >
							      >	      /** Index into the array of booleans          */
							      >	      private int m_index;
							      >
							      >	      /**
							      >	       * Default constructor.  Note that the default
							      >	       * block size is very small, for small lists.
							      >	       */
							      >	      public BoolStack()
							      >	      {
							      >	        this(32);
							      >	      }
							      >
							      >	      /**
							      >	       * Construct a IntVector, using the given block size.
							      >	       *
							      >	       * @param size array size to allocate
							      >	       */
							      >	      public BoolStack(int size)
							      >	      {
							      >
							      >	        m_allocatedSize = size;
							      >	        m_values = new boolean[size];
							      >	        m_index = -1;
							      >	      }
							      >
							      >	      /**
							      >	       * Get the length of the list.
							      >	       *
							      >	       * @return Current length of the list
							      >	       */
							      >	      public final int size()
							      >	      {
							      >	        return m_index + 1;
							      >	      }
							      >
							      >	      /**
							      >	       * Clears the stack.
							      >	       *
							      >	       */
							      >	      public final void clear()
							      >	      {
							      >	        m_index = -1;
							      >	      }
							      >
							      >	      /**
							      >	       * Pushes an item onto the top of this stack.
							      >	       *
							      >	       *
							      >	       * @param val the boolean to be pushed onto this stack.
							      >	       * @return  the <code>item</code> argument.
							      >	       */
							      >	      public final boolean push(boolean val)
							      >	      {
							      >
							      >	        if (m_index == m_allocatedSize - 1)
							      >	          grow();
							      >
							      >	        return (m_values[++m_index] = val);
							      >	      }
							      >
							      >	      /**
							      >	       * Removes the object at the top of this stack and retu
							      >	       * object as the value of this function.
							      >	       *
							      >	       * @return     The object at the top of this stack.
							      >	       * @throws  EmptyStackException  if this stack is empty
							      >	       */
							      >	      public final boolean pop()
							      >	      {
							      >	        return m_values[m_index--];
							      >	      }
							      >
							      >	      /**
							      >	       * Removes the object at the top of this stack and retu
							      >	       * next object at the top as the value of this function
							      >	       *
							      >	       *
							      >	       * @return Next object to the top or false if none ther
							      >	       */
							      >	      public final boolean popAndTop()
							      >	      {
							      >
							      >	        m_index--;
							      >
							      >	        return (m_index >= 0) ? m_values[m_index] : false;
							      >	      }
							      >
							      >	      /**
							      >	       * Set the item at the top of this stack  
							      >	       *
							      >	       *
							      >	       * @param b Object to set at the top of this stack
							      >	       */
							      >	      public final void setTop(boolean b)
							      >	      {
							      >	        m_values[m_index] = b;
							      >	      }
							      >
							      >	      /**
							      >	       * Looks at the object at the top of this stack without
							      >	       * from the stack.
							      >	       *
							      >	       * @return     the object at the top of this stack.
							      >	       * @throws  EmptyStackException  if this stack is empty
							      >	       */
							      >	      public final boolean peek()
							      >	      {
							      >	        return m_values[m_index];
							      >	      }
							      >
							      >	      /**
							      >	       * Looks at the object at the top of this stack without
							      >	       * from the stack.  If the stack is empty, it returns f
							      >	       *
							      >	       * @return     the object at the top of this stack.
							      >	       */
							      >	      public final boolean peekOrFalse()
							      >	      {
							      >	        return (m_index > -1) ? m_values[m_index] : false;
							      >	      }
							      >
							      >	      /**
							      >	       * Looks at the object at the top of this stack without
							      >	       * from the stack.  If the stack is empty, it returns t
							      >	       *
							      >	       * @return     the object at the top of this stack.
							      >	       */
							      >	      public final boolean peekOrTrue()
							      >	      {
							      >	        return (m_index > -1) ? m_values[m_index] : true;
							      >	      }
							      >
							      >	      /**
							      >	       * Tests if this stack is empty.
							      >	       *
							      >	       * @return  <code>true</code> if this stack is empty;
							      >	       *          <code>false</code> otherwise.
							      >	       */
							      >	      public boolean isEmpty()
							      >	      {
							      >	        return (m_index == -1);
							      >	      }
							      >
							      >	      /**
							      >	       * Grows the size of the stack
							      >	       *
							      >	       */
							      >	      private void grow()
							      >	      {
							      >
							      >	        m_allocatedSize *= 2;
							      >
							      >	        boolean newVector[] = new boolean[m_allocatedSize];
							      >
							      >	        System.arraycopy(m_values, 0, newVector, 0, m_index +
							      >
							      >	        m_values = newVector;
							      >	      }
							      >	    }
							      >	    
							      >	    // Implement DTDHandler
							      >	    /**
							      >	     * If this method is called, the serializer is used as a
							      >	     * DTDHandler, which changes behavior how the serializer 
							      >	     * handles document entities. 
							      >	     * @see org.xml.sax.DTDHandler#notationDecl(java.lang.Str
							      >	     */
							      >	    public void notationDecl(String name, String pubID, Strin
							      >	        // TODO Auto-generated method stub
							      >	        try {
							      >	            DTDprolog();
							      >	            
							      >	            m_writer.write("<!NOTATION ");            
							      >	            m_writer.write(name);
							      >	            if (pubID != null) {
							      >	                m_writer.write(" PUBLIC \"");
							      >	                m_writer.write(pubID);
							      >	  
							      >	            }
							      >	            else {
							      >	                m_writer.write(" SYSTEM \"");
							      >	                m_writer.write(sysID);
							      >	            }
							      >	            m_writer.write("\" >");
							      >	            m_writer.write(m_lineSep, 0, m_lineSepLen);
							      >	        } catch (IOException e) {
							      >	            // TODO Auto-generated catch block
							      >	            e.printStackTrace();
							      >	        }
							      >	    }
							      >
							      >	    /**
							      >	     * If this method is called, the serializer is used as a
							      >	     * DTDHandler, which changes behavior how the serializer 
							      >	     * handles document entities. 
							      >	     * @see org.xml.sax.DTDHandler#unparsedEntityDecl(java.la
							      >	     */
							      >	    public void unparsedEntityDecl(String name, String pubID,
							      >	        // TODO Auto-generated method stub
							      >	        try {
							      >	            DTDprolog();       
							      >	            
							      >	            m_writer.write("<!ENTITY ");            
							      >	            m_writer.write(name);
							      >	            if (pubID != null) {
							      >	                m_writer.write(" PUBLIC \"");
							      >	                m_writer.write(pubID);
							      >	  
							      >	            }
							      >	            else {
							      >	                m_writer.write(" SYSTEM \"");
							      >	                m_writer.write(sysID);
							      >	            }
							      >	            m_writer.write("\" NDATA ");
							      >	            m_writer.write(notationName);
							      >	            m_writer.write(" >");
							      >	            m_writer.write(m_lineSep, 0, m_lineSepLen);
							      >	        } catch (IOException e) {
							      >	            // TODO Auto-generated catch block
							      >	            e.printStackTrace();
							      >	        }        
							      >	    }
							      >	    
							      >	    /**
							      >	     * A private helper method to output the 
							      >	     * @throws SAXException
							      >	     * @throws IOException
							      >	     */
							      >	    private void DTDprolog() throws SAXException, IOException
							      >	        final java.io.Writer writer = m_writer;
							      >	        if (m_needToOutputDocTypeDecl)
							      >	        {
							      >	            outputDocTypeDecl(m_elemContext.m_elementName, fa
							      >	            m_needToOutputDocTypeDecl = false;
							      >	        }
							      >	        if (m_inDoctype)
							      >	        {
							      >	            writer.write(" [");
							      >	            writer.write(m_lineSep, 0, m_lineSepLen);
							      >	            m_inDoctype = false;
							      >	        }
							      >	    }
							      >	    
							      >	    /**
							      >	     * If set to false the serializer does not expand DTD ent
							      >	     * but leaves them as is, the default value is true;
							      >	     */
							      >	    public void setDTDEntityExpansion(boolean expand) { 
							      >	        m_expandDTDEntities = expand;     
							      >	    }
							      >	}diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToTextSAXHandler.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToTextSAXHandler.java
 * $Id: ToTextSAXHandler.java,v 1.5 2004/02/17 04:18:18 minch |	 * $Id: ToTextSAXHandler.java,v 1.8 2005/04/07 04:29:03 minch
 * @author minchau					      |	 * This class converts SAX-like event to SAX events for
 *							      |	 * xsl:output method "text". 
 * To change this generated comment edit the template variabl |	 * 
 * Window>Preferences>Java>Templates.			      |	 * This class is only to be used internally. This class is no
 * To enable and disable the creation of type comments go to  |	 * 
 * Window>Preferences>Java>Code Generation.		      |	 * @xsl.usage internal
 * @author Santiago Pericas-Geertsen			      <
public class ToTextSAXHandler extends ToSAXHandler 	      |	public final class ToTextSAXHandler extends ToSAXHandler 
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(String)
     * @see org.apache.xml.serializer.Serializer#getOutputFor |	     * @see Serializer#getOutputFormat()
     * @see org.apache.xml.serializer.Serializer#getOutputStr |	     * @see Serializer#getOutputStream()
     * @see org.apache.xml.serializer.Serializer#getWriter()  |	     * @see Serializer#getWriter()
     * @see org.apache.xml.serializer.Serializer#reset()      |	     * @see Serializer#reset()
     * @see org.apache.xml.serializer.DOMSerializer#serialize |	     * @see DOMSerializer#serialize(Node)
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setEscaping(boolean)
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setIndent(boolean)
     * @see org.apache.xml.serializer.Serializer#setOutputFor |	     * @see Serializer#setOutputFormat(Properties)
     * @see org.apache.xml.serializer.Serializer#setOutputStr |	     * @see Serializer#setOutputStream(OutputStream)
     * @see org.apache.xml.serializer.Serializer#setWriter(Wr |	     * @see Serializer#setWriter(Writer)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addAttribute(String, Strin
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#startElement(String)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#characters(String)
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToTextStream.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToTextStream.java
 * $Id: ToTextStream.java,v 1.15 2004/02/17 04:18:18 minchau  |	 * $Id: ToTextStream.java,v 1.22 2005/08/03 19:20:31 minchau 
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.Utils;
 * @author Santiago Pericas-Geertsen			      |	 * This class is not a public API.
							      >	 * It is only public because it is used in other packages. 
							      >	 * This class converts SAX or SAX-like calls to a 
							      >	 * serialized document for xsl:output method of "text".
							      >	 * @xsl.usage internal
public class ToTextStream extends ToStream 		      |	public final class ToTextStream extends ToStream 
   * @param name The element type name			      <
    // this.accum(ch, start, length);			      <
        writeNormalizedChars(ch, start, length, false, m_line |	        if (inTemporaryOutputState()) {
							      >	            /* leave characters un-processed as we are
							      >	             * creating temporary output, the output generate
							      >	             * this serializer will be input to a final seria
							      >	             * later on and it will do the processing in fina
							      >	             * output state (not temporary output state).
							      >	             * 
							      >	             * A "temporary" ToTextStream serializer is used 
							      >	             * evaluate attribute value templates (for exampl
							      >	             * and the result of evaluating such a thing
							      >	             * is fed into a final serializer later on.
							      >	             */
							      >	            m_writer.write(ch, start, length);
							      >	        }
							      >	        else {
							      >	            // In final output state we do process the charac
							      >	            writeNormalizedChars(ch, start, length, m_lineSep
							      >	        }
							      >	            
      writeNormalizedChars(ch, start, length, false, m_lineSe |	      writeNormalizedChars(ch, start, length, m_lineSepUse);
/**							      |	    /**
 * Normalize the characters, but don't escape.  Different fro |	     * Normalize the characters, but don't escape.  Different
 * SerializerToXML#writeNormalizedChars because it does not a |	     * SerializerToXML#writeNormalizedChars because it does n
 * XML escaping at all.					      |	     * XML escaping at all.
 *							      |	     *
 * @param ch The characters from the XML document.	      |	     * @param ch The characters from the XML document.
 * @param start The start position in the array.	      |	     * @param start The start position in the array.
 * @param length The number of characters to read from the ar |	     * @param length The number of characters to read from th
 * @param isCData true if a CDATA block should be built aroun |	     * @param useLineSep true if the operating systems 
 * @param useLineSep true if the operating systems 	      |	     * end-of-line separator should be output rather than a n
 * end-of-line separator should be output rather than a new-l |	     * 
 * 							      |	     * @throws IOException
 * @throws IOException					      |	     * @throws org.xml.sax.SAXException
 * @throws org.xml.sax.SAXException			      |	     */
 */							      |	    void writeNormalizedChars(
void writeNormalizedChars(				      |	        final char ch[],
    final char ch[],					      |	            final int start,
    final int start,					      |	            final int length,
    final int length,					      |	            final boolean useLineSep)
    final boolean isCData,				      |	            throws IOException, org.xml.sax.SAXException 
    final boolean useLineSep)				      |	    {
    throws IOException, org.xml.sax.SAXException	      |	        final String encoding = getEncoding();
{							      |	        final java.io.Writer writer = m_writer;
    final java.io.Writer writer = m_writer;		      |	        final int end = start + length;
    final int end = start + length;			      |
							      |	        /* copy a few "constants" before the loop for perform
    /* copy a few "constants" before the loop for performance |	        final char S_LINEFEED = CharInfo.S_LINEFEED;
    final char S_LINEFEED = CharInfo.S_LINEFEED;	      <
    final int M_MAXCHARACTER = this.m_maxCharacter;	      <
    if (isCData)					      <
    {							      <
        // two input characters are processed.		      |	        // two input characters (a high/low UTF16 surrogate p
        for (int i = start; i < end; i++)		      |	        // are processed.
        {						      |	        for (int i = start; i < end; i++) {
            if (S_LINEFEED == c && useLineSep)		      |	            if (S_LINEFEED == c && useLineSep) {
            {						      <
            }						      |	                // one input char processed
            else if (c > M_MAXCHARACTER)		      |	            } else if (m_encodingInfo.isInEncoding(c)) {
            {						      |	                writer.write(c);
                if (i != 0)				      |	                // one input char processed    
                    closeCDATA();			      |	            } else if (Encodings.isHighUTF16Surrogate(c)) {
							      |	                final int codePoint = writeUTF16Surrogate(c, 
                // This needs to go into a function...	      |	                if (codePoint != 0) {
                if (isUTF16Surrogate(c))		      |	                    // I think we can just emit the message,
                {					      |	                    // not crash and burn.
                    writeUTF16Surrogate(c, ch, i, end);	      |	                    final String integralValue = Integer.toSt
                    i++; // two input characters processed    |	                    final String msg = Utils.messages.createM
                }					      |	                        MsgKey.ER_ILLEGAL_CHARACTER,
                else					      |	                        new Object[] { integralValue, encodin
                {					      |	                      
                    writer.write(c);			      |	                    //Older behavior was to throw the message
                }					      |	                    //but newer gentler behavior is to write 
							      |	                    //throw new SAXException(msg);
                if ((i != 0) && (i < (end - 1)))	      |	                    System.err.println(msg);                 
                {					      <
                    writer.write(CDATA_DELIMITER_OPEN);	      <
                    m_cdataTagOpen = true;		      <
                }					      <
            }						      <
            else if (					      <
                ((i < (end - 2))			      <
                    && (']' == c)			      <
                    && (']' == ch[i + 1])		      <
                    && ('>' == ch[i + 2])))		      <
            {						      <
                writer.write(CDATA_CONTINUE);		      <
                i += 2;					      <
            }						      <
            else					      <
            {						      <
                if (c <= M_MAXCHARACTER)		      <
                {					      <
                    writer.write(c);			      <
                }					      <
                else if (isUTF16Surrogate(c))		      <
                {					      <
                    writeUTF16Surrogate(c, ch, i, end);	      <
                    i++; // two input characters processed    <
                else					      |	                i++; // two input chars processed            
                {					      |	            } else {
                    /* The character is greater than the allo |	                // Don't know what to do with this char, it i
                     * maximum value and it is not part of a  |	                // not in the encoding and not a high char in
                     * pair that would be put out as a charac |	                // a surrogate pair, so write out as an entit
                     */					      |	                if (encoding != null) {
                    String encoding = getEncoding();	      <
                    if (encoding != null)		      <
                    {					      <
                        /* The output encoding is known,      <
                         * so somthing is wrong.	      <
                         */ 				      <
                        String integralValue = Integer.toStri <
                        throw new SAXException(XMLMessages.cr <
                            XMLErrorResources.ER_ILLEGAL_CHAR <
                            new Object[]{ integralValue, enco <
                    }					      <
                    else 				      <
                    {					      <
                        /* The output encoding is not known,  <
                         * so just write it out as-is.	      <
                         */                        	      <
                        writer.write(c);		      <
                    }					      <
                }					      <
            }						      <
        }						      <
    }							      <
    else						      <
    {							      <
        // not in CDATA section				      <
        for (int i = start; i < end; i++)		      <
        {						      <
            final char c = ch[i];			      <
							      <
            if (S_LINEFEED == c && useLineSep)		      <
            {						      <
                writer.write(m_lineSep, 0, m_lineSepLen);     <
            }						      <
            else if (c <= M_MAXCHARACTER)		      <
            {						      <
                writer.write(c);			      <
            }						      <
            else if (isUTF16Surrogate(c))		      <
            {						      <
                writeUTF16Surrogate(c, ch, i, end);	      <
                i++; // two input characters processed	      <
            }						      <
            else					      <
            {						      <
                /* The character is greater than the allowed  <
                 * maximum value and it is not part of a UTF- <
                 * pair that would be put out as a character  <
                 */					      <
                String encoding = getEncoding();	      <
                if (encoding != null) 			      <
                {					      <
                     */ 				      |	                     */
                    String integralValue = Integer.toString(c |
                    throw new SAXException(XMLMessages.create |	                    // not in the encoding, so write out a ch
                        XMLErrorResources.ER_ILLEGAL_CHARACTE |	                    writer.write('&');
                        new Object[]{ integralValue, encoding |	                    writer.write('#');
                }					      |	                    writer.write(Integer.toString(c));
                else 					      |	                    writer.write(';');
                {					      |
							      >	                    // I think we can just emit the message,
							      >	                    // not crash and burn.
							      >	                    final String integralValue = Integer.toSt
							      >	                    final String msg = Utils.messages.createM
							      >	                        MsgKey.ER_ILLEGAL_CHARACTER,
							      >	                        new Object[] { integralValue, encodin
							      >	                      
							      >	                    //Older behavior was to throw the message
							      >	                    //but newer gentler behavior is to write 
							      >	                    //throw new SAXException(msg);
							      >	                    System.err.println(msg); 
							      >	                } else {
                     */                        		      |	                     */
                }                			      |	                }
							      >
							      >	                // one input char was processed
}							      <
        writeNormalizedChars(ch, start, length, false, m_line |	        writeNormalizedChars(ch, start, length, m_lineSepUse)
      writeNormalizedChars(ch, start, length, false, m_lineSe |	      writeNormalizedChars(ch, start, length, m_lineSepUse);
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addAttribute(String, Strin
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(String)
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToUnknownStream.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToUnknownStream.java
 * $Id: ToUnknownStream.java,v 1.8 2004/02/17 04:18:18 mincha |	 * $Id: ToUnknownStream.java,v 1.12 2005/04/07 04:29:03 minch
							      >	 * 
							      >	 * This class is not a public API, it is public because it is
							      >	 * @xsl.usage internal
public class ToUnknownStream extends SerializerBase	      |	public final class ToUnknownStream extends SerializerBase
     * @see org.apache.xml.serializer.Serializer#asContentHan |	     * @see Serializer#asContentHandler()
     * @see org.apache.xml.serializer.SerializationHandler#cl |	     * @see SerializationHandler#close()
     * @see org.apache.xml.serializer.Serializer#getOutputFor |	     * @see Serializer#getOutputFormat()
     * @see org.apache.xml.serializer.Serializer#getOutputStr |	     * @see Serializer#getOutputStream()
     * @see org.apache.xml.serializer.Serializer#getWriter()  |	     * @see Serializer#getWriter()
     * @see org.apache.xml.serializer.Serializer#reset()      |	     * @see Serializer#reset()
     * @see org.apache.xml.serializer.DOMSerializer#serialize |	     * @see DOMSerializer#serialize(Node)
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setEscaping(boolean)
     * @see org.apache.xml.serializer.Serializer#setOutputFor |	     * @see Serializer#setOutputFormat(Properties)
     * @see org.apache.xml.serializer.Serializer#setOutputStr |	     * @see Serializer#setOutputStream(OutputStream)
     * @see org.apache.xml.serializer.Serializer#setWriter(Wr |	     * @see Serializer#setWriter(Writer)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @param XSLAttribute true if this attribute is coming f
							      >	     * @see ExtendedContentHandler#addAttribute(String, Strin
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)
        m_handler.addAttribute(uri, localName, rawName, type, |	        m_handler.addAttribute(uri, localName, rawName, type,
     * @param name the attribute name, with prefix (if any)   |	     * @param rawName the attribute name, with prefix (if any
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addAttribute(String, Strin
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#characters(String)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(String)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#namespaceAfterStartElement
     * @see org.apache.xml.serializer.ExtendedLexicalHandler# |	     * @see ExtendedLexicalHandler#comment(String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getDoctypePublic()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getDoctypeSystem()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getEncoding()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getIndent()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getIndentAmount()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getMediaType()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getOmitXMLDeclaration()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getStandalone()
     * @see org.apache.xml.serializer.XSLOutputAttributes#get |	     * @see XSLOutputAttributes#getVersion()
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setDoctype(String, String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setDoctypePublic(String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setDoctypeSystem(String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setEncoding(String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setIndent(boolean)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setMediaType(String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setOmitXMLDeclaration(boolean
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setStandalone(String)
     * @see org.apache.xml.serializer.XSLOutputAttributes#set |	     * @see XSLOutputAttributes#setVersion(String)
     * @see org.apache.xml.serializer.Serializer#asDOMSeriali |	     * @see Serializer#asDOMSerializer()
     * specified in the cdata-section-elements attribute      |	     * specified in the cdata-section-elements attribute.
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setCdataSectionElements(java
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#addAttributes(org.xml.sax.
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getNamespaceMappings()
     * @see org.apache.xml.serializer.SerializationHandler#fl |	     * @see SerializationHandler#flushPending()
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getPrefix
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#entityReference(java.lang.
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#getNamespaceURI(java.lang.
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setContentHandler(org.xml.sa
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#setSourceLocator(javax.xml
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToXMLSAXHandler.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToXMLSAXHandler.java
 * $Id: ToXMLSAXHandler.java,v 1.13 2004/02/17 04:18:19 minch |	 * $Id: ToXMLSAXHandler.java,v 1.17 2005/04/07 04:29:03 minch
 * on a handler, the ultimate output is known to be XML.      |	 * on a handler, the ultimate xsl:output method is known to b
 * @author minchau					      |	 * This class is not a public API, it is only public because 
 * @author Santiago Pericas-Geertsen			      |	 * @xsl.usage internal
 * @author G. Todd Miller 				      <
public class ToXMLSAXHandler extends ToSAXHandler	      |	public final class ToXMLSAXHandler extends ToSAXHandler
     * @see org.apache.xml.serializer.Serializer#getOutputFor |	     * @see Serializer#getOutputFormat()
     * @see org.apache.xml.serializer.Serializer#getOutputStr |	     * @see Serializer#getOutputStream()
     * @see org.apache.xml.serializer.Serializer#getWriter()  |	     * @see Serializer#getWriter()
     * @see org.apache.xml.serializer.DOMSerializer#serialize |	     * @see DOMSerializer#serialize(Node)
     * @see org.apache.xml.serializer.SerializationHandler#se |	     * @see SerializationHandler#setEscaping(boolean)
     * @see org.apache.xml.serializer.Serializer#setOutputFor |	     * @see Serializer#setOutputFormat(Properties)
     * @see org.apache.xml.serializer.Serializer#setOutputStr |	     * @see Serializer#setOutputStream(OutputStream)
     * @see org.apache.xml.serializer.Serializer#setWriter(Wr |	     * @see Serializer#setWriter(Writer)
	              /* bjm: don't know if we really needto  |		              /* Brian M.: don't know if we really ne
  	                addAttributeAlways(XMLNS_URI, prefix, |	  	                addAttributeAlways(XMLNS_URI, name, n
  	                    addAttributeAlways(XMLNS_URI, pre |	  	                    addAttributeAlways(XMLNS_URI, pre
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#characters(String)
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(String)
            String prefix =				      |	            final boolean no_prefix = ((index = rawName.index
                (index = rawName.indexOf(":")) < 0	      |	            String prefix = (no_prefix) ? "" : rawName.substr
                    ? ""				      |
                    : rawName.substring(0, index);	      <
                            prefix,			      |	                            no_prefix ? "xmlns" : prefix,  //
                            "xmlns" + (prefix.length() == 0 ? |	                            no_prefix ? "xmlns" : ("xmlns:"+ 
                            ns);			      |	                            ns,
							      >	                            false);
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @param XSLAttribute true if this attribute is coming f
							      >	     * @see ExtendedContentHandler#addAttribute(String, Strin
        String value)					      |	        String value,
							      >	        boolean XSLAttribute)
            addAttributeAlways(uri, localName, rawName, type, |	            addAttributeAlways(uri, localName, rawName, type,
     * @see org.apache.xml.serializer.Serializer#reset()      |	     * @see Serializer#reset()
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/ToXMLStream.java xalan-j_2_7_0/src/org/apache/xml/serializer/ToXMLStream.java
 * $Id: ToXMLStream.java,v 1.13 2004/02/18 22:57:44 minchau E |	 * $Id: ToXMLStream.java,v 1.21 2005/08/03 19:20:31 minchau E
import org.apache.xml.res.XMLErrorResources;		      |	import org.apache.xml.serializer.utils.MsgKey;
import org.apache.xml.res.XMLMessages;			      |	import org.apache.xml.serializer.utils.Utils;
 * @author Santiago Pericas-Geertsen			      |	 * This class converts SAX or SAX-like calls to a 
 * @author G. Todd Miller 				      |	 * serialized xml document.  The xsl:output method is "xml".
							      >	 * 
							      >	 * This class is used explicitly in code generated by XSLTC, 
							      >	 * so it is "public", but it should 
							      >	 * be viewed as internal or package private, this is not an A
							      >	 * 
							      >	 * @xsl.usage internal
public class ToXMLStream extends ToStream		      |	public final class ToXMLStream extends ToStream
    protected static CharInfo m_xmlcharInfo =		      |	    private static CharInfo m_xmlcharInfo =
        m_maxCharacter = xmlListener.m_maxCharacter;	      |	        m_encodingInfo = xmlListener.m_encodingInfo;
							      |	            /* The call to getXMLVersion() might emit an erro
							      >	             * and we should emit this message regardless of 
							      >	             * writing out an XML header or not.
							      >	             */ 
							      >	            final String version = getXMLVersion();
                String version = getVersion();		      <
                if (version == null)			      <
                    version = "1.0";			      <
							      >	                else if (m_needToCallStartDocument)
							      >	                    startDocumentInternal();                
							      >	    /**
							      >	     * Add an attribute to the current element.
							      >	     * @param uri the URI associated with the element name
							      >	     * @param localName local part of the attribute name
							      >	     * @param rawName   prefix:localName
							      >	     * @param type
							      >	     * @param value the value of the attribute
							      >	     * @param xslAttribute true if this attribute is from an 
							      >	     * false if declared within the elements opening tag.
							      >	     * @throws SAXException
							      >	     */
        String value)					      |	        String value,
							      >	        boolean xslAttribute)
            if (!rawName.startsWith("xmlns"))		      |	            boolean was_added = addAttributeAlways(uri, local
							      >	            
							      >
							      >	            /*
							      >	             * We don't run this block of code if:
							      >	             * 1. The attribute value was only replaced (was_
							      >	             * 2. The attribute is from an xsl:attribute elem
							      >	             *    in the addAttributeAlways() call just above
							      >	             * 3. The name starts with "xmlns", i.e. it is a 
							      >	             */
							      >	            if (was_added && !xslAttribute && !rawName.starts
            addAttributeAlways(uri, localName, rawName, type, |	            addAttributeAlways(uri, localName, rawName, type,
            String msg = XMLMessages.createXMLMessage(	      |	            String msg = Utils.messages.createMessage(
                    XMLErrorResources.ER_ILLEGAL_ATTRIBUTE_PO |	                    MsgKey.ER_ILLEGAL_ATTRIBUTE_POSITION,new 
     * @see org.apache.xml.serializer.ExtendedContentHandler# |	     * @see ExtendedContentHandler#endElement(String)
     * From XSLTC					      |	     * This method is used to notify the serializer of a name
     * Related to startPrefixMapping ???		      |	     * that applies to the current element whose startElement
							      >	     * The official SAX startPrefixMapping(prefix,uri) is to 
							      >	     * element that is soon to be seen with a startElement() 
							      >	     * does not apply to the current element, hence the reaso
							      >	    /**
							      >	     * This method checks for the XML version of output docum
							      >	     * If XML version of output document is not specified, th
							      >	     * document is of version XML 1.0.
							      >	     * If XML version of output doucment is specified, but it
							      >	     * XML 1.0 or XML 1.1, a warning message is generated, th
							      >	     * output document is set to XML 1.0 and processing conti
							      >	     * @return string (XML version)
							      >	     */
							      >	    private String getXMLVersion()
							      >	    {
							      >	        String xmlVersion = getVersion();
							      >	        if(xmlVersion == null || xmlVersion.equals(XMLVERSION
							      >	        {
							      >	            xmlVersion = XMLVERSION10;
							      >	        }
							      >	        else if(xmlVersion.equals(XMLVERSION11))
							      >	        {
							      >	            xmlVersion = XMLVERSION11;
							      >	        }
							      >	        else
							      >	        {
							      >	            String msg = Utils.messages.createMessage(
							      >	                               MsgKey.ER_XML_VERSION_NOT_SUPP
							      >	            try 
							      >	            {
							      >	                // Prepare to issue the warning message
							      >	                Transformer tran = super.getTransformer();
							      >	                ErrorListener errHandler = tran.getErrorListe
							      >	                // Issue the warning message
							      >	                if (null != errHandler && m_sourceLocator != 
							      >	                    errHandler.warning(new TransformerExcepti
							      >	                else
							      >	                    System.out.println(msg);
							      >	            }
							      >	            catch (Exception e){}
							      >	            xmlVersion = XMLVERSION10;			
							      >	        }
							      >	        return xmlVersion;
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/TransformStateSetter.java xalan-j_2_7_0/src/org/apache/xml/serializer/TransformStateSetter.java
 * $Id: TransformStateSetter.java,v 1.2 2004/02/17 04:18:19 m |	 * $Id: TransformStateSetter.java,v 1.4 2005/01/23 00:52:41 m
							      >	 * This interface is not a public API, it is only public beca
							      >	 * used by Xalan.
							      >	 * 
							      >	 * @xsl.usage internal
   * @param Node The current node.			      |	   * @param n The current node.
   * @param Transformer					      |	   * @param transformer
只在 xalan-j_2_7_0/src/org/apache/xml/serializer 存在：TreeWalker.java
只在 xalan-j_2_7_0/src/org/apache/xml/serializer 存在：utils
只在 xalan-j_2_6_0/src/org/apache/xml/serializer 存在：Utils.java
只在 xalan-j_2_7_0/src/org/apache/xml/serializer 存在：Version.java
只在 xalan-j_2_7_0/src/org/apache/xml/serializer 存在：Version.src
只在 xalan-j_2_7_0/src/org/apache/xml/serializer 存在：WriterChain.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/WriterToASCI.java xalan-j_2_7_0/src/org/apache/xml/serializer/WriterToASCI.java
 * $Id: WriterToASCI.java,v 1.2 2004/02/17 04:18:18 minchau E |	 * $Id: WriterToASCI.java,v 1.5 2005/01/23 00:52:41 mcnamara 
							      >	 * 
							      >	 * This class is only used internally within Xalan.
							      >	 * 
							      >	 * @xsl.usage internal
public class WriterToASCI extends Writer		      |	class WriterToASCI extends Writer implements WriterChain
   * @param  str  String to be written			      |	   * @param  s String to be written
							      >	  /**
							      >	   * Get the writer that this writer directly chains to.
							      >	   */
							      >	  public Writer getWriter()
							      >	  {
							      >	      return null;
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/WriterToUTF8Buffered.java xalan-j_2_7_0/src/org/apache/xml/serializer/WriterToUTF8Buffered.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: WriterToUTF8Buffered.java,v 1.5 2004/02/17 04:18:18 m |	 * $Id: WriterToUTF8Buffered.java,v 1.9 2005/03/23 17:54:05 y
							      >	 * 
							      >	 * This class is only used internally within Xalan.
							      >	 * 
							      >	 * @xsl.usage internal
public final class WriterToUTF8Buffered extends Writer	      |	final class WriterToUTF8Buffered extends Writer implements Wr
  							      <
      m_inputChars = new char[CHARS_MAX + 1];		      |	      m_inputChars = new char[CHARS_MAX + 2];
    else						      |	    else if (c < 0x10000)
							      >		else
							      >		{
							      >		  m_outputBytes[count++] = (byte) (0xf0 + (c >> 18));
							      >		  m_outputBytes[count++] = (byte) (0x80 + ((c >> 12) 
							      >		  m_outputBytes[count++] = (byte) (0x80 + ((c >> 6) &
							      >		  m_outputBytes[count++] = (byte) (0x80 + (c & 0x3f))
							      >		}
							      >
      if (lengthx3 >= BYTES_MAX)			      |	      if (lengthx3 > BYTES_MAX)
							      >	         * Be careful about integer overflows in multiplicati
        final int chunks = 1 + length/CHARS_MAX;	      |	        int split = length/CHARS_MAX; 
        for (int chunk =0 ; chunk < chunks; chunk++)	      |	        final int chunks;
							      >	        if (split > 1)
							      >	            chunks = split;
							      >	        else
							      >	            chunks = 2;
							      >	        int end_chunk = start;
							      >	        for (int chunk = 1; chunk <= chunks; chunk++)
            int start_chunk = start + ((length*chunk)/chunks) |	            int start_chunk = end_chunk;
            int end_chunk   = start + ((length*(chunk+1))/chu |	            end_chunk = start + (int) ((((long) length) * chu
							      >	            
							      >	            // Adjust the end of the chunk if it ends on a hi
							      >	            // of a Unicode surrogate pair and low char of th
							      >	            // is not going to be in the same chunk
							      >	            final char c = chars[end_chunk - 1]; 
							      >	            int ic = chars[end_chunk - 1];
							      >	            if (c >= 0xD800 && c <= 0xDBFF) {
							      >	                // The last Java char that we were going
							      >	                // to process is the first of a
							      >	                // Java surrogate char pair that
							      >	                // represent a Unicode character.
							      >
							      >	                if (end_chunk < start + length) {
							      >	                    // Avoid spanning by including the low
							      >	                    // char in the current chunk of chars.
							      >	                    end_chunk++;
							      >	                } else {
							      >	                    /* This is the last char of the last chun
							      >	                     * and it is the high char of a high/low 
							      >	                     * no low char provided.
							      >	                     * TODO: error message needed.
							      >	                     * The char array incorrectly ends in a h
							      >	                     * of a high/low surrogate pair, but ther
							      >	                     * no corresponding low as the high is th
							      >	                     */
							      >	                    end_chunk--;
							      >	                }
							      >	            }
							      >
							      >
							      >	      /**
							      >	        * The following else if condition is added to support
							      >	        * UTF-8:   [1111 0uuu] [10uu zzzz] [10yy yyyy] [10xx 
							      >	        * Unicode: [1101 10ww] [wwzz zzyy] (high surrogate)
							      >	        *          [1101 11yy] [yyxx xxxx] (low surrogate)
							      >	        *          * uuuuu = wwww + 1
							      >	        */
							      >	      else if (c >= 0xD800 && c <= 0xDBFF) 
							      >	      {
							      >	          char high, low;
							      >	          high = c;
							      >	          i++;
							      >	          low = chars[i];
							      >
							      >	          buf_loc[count_loc++] = (byte) (0xF0 | (((high + 0x4
							      >	          buf_loc[count_loc++] = (byte) (0x80 | (((high + 0x4
							      >	          buf_loc[count_loc++] = (byte) (0x80 | ((low >> 6) &
							      >	          buf_loc[count_loc++] = (byte) (0x80 | (low & 0x3f))
							      >	      }
  							      <
  /**							      <
   * Writes out the character array 			      <
   * @param chars a character array with only ASCII character <
   * the UTF-8 encoding is optimized.			      <
   * @param start the first character in the input array      <
   * @param length the number of characters in the input arra <
   */							      <
  private void directWrite(final char chars[], final int star <
          throws java.io.IOException			      <
  {							      <
							      <
							      <
							      <
    if (length >= BYTES_MAX - count)			      <
    {							      <
      // The requested length is greater than the unused part <
      flushBuffer();					      <
							      <
      if (length >= BYTES_MAX)				      <
      {							      <
        /*						      <
         * The requested length exceeds the size of the buffe <
         * Cut the buffer up into chunks, each of which will  <
         * not cause an overflow to the output buffer m_outpu <
         * and make multiple recursive calls.		      <
         */          					      <
        int chunks = 1 + length/CHARS_MAX;		      <
        for (int chunk =0 ; chunk < chunks; chunk++)	      <
        {						      <
            int start_chunk = start + ((length*chunk)/chunks) <
            int end_chunk   = start + ((length*(chunk+1))/chu <
            int len_chunk = (end_chunk - start_chunk);	      <
            this.directWrite(chars,start_chunk, len_chunk);   <
        }						      <
        return;						      <
      }							      <
    }							      <
							      <
    final int n = length+start;				      <
    final byte[] buf_loc = m_outputBytes; // local reference  <
    int count_loc = count;      // local integer for faster a <
    for(int i=start; i < n ; i++ )			      <
        buf_loc[count_loc++] = (byte) buf_loc[i];	      <
    // Store the local integer back into the instance variabl <
    count = count_loc;					      <
  }							      <
      if (lengthx3 >= BYTES_MAX)			      |	      if (lengthx3 > BYTES_MAX)
         int chunks = 1 + length/CHARS_MAX;		      |	         int split = length/CHARS_MAX; 
         for (int chunk =0 ; chunk < chunks; chunk++)	      |	         final int chunks;
							      >	         if (split > 1)
							      >	             chunks = split;
							      >	         else
							      >	             chunks = 2;
							      >	         int end_chunk = 0;
							      >	         for (int chunk = 1; chunk <= chunks; chunk++)
             int start_chunk = start + ((length*chunk)/chunks |	             int start_chunk = end_chunk;
             int end_chunk   = start + ((length*(chunk+1))/ch |	             end_chunk = start + (int) ((((long) length) * ch
             int len_chunk = (end_chunk - start_chunk);	      <
							      >	             int len_chunk = (end_chunk - start_chunk);
							      >
							      >	             // Adjust the end of the chunk if it ends on a h
							      >	             // of a Unicode surrogate pair and low char of t
							      >	             // is not going to be in the same chunk
							      >	             final char c = m_inputChars[len_chunk - 1];
							      >	             if (c >= 0xD800 && c <= 0xDBFF) {
							      >	                 // Exclude char in this chunk, 
							      >	                 // to avoid spanning a Unicode character 
							      >	                 // that is in two Java chars as a high/low s
							      >	                 end_chunk--;
							      >	                 len_chunk--;
							      >	                 if (chunk == chunks) {
							      >	                     /* TODO: error message needed.
							      >	                      * The String incorrectly ends in a high
							      >	                      * of a high/low surrogate pair, but the
							      >	                      * no corresponding low as the high is t
							      >	                      * Recover by ignoring this last char.
							      >	                      */
							      >	                 }
							      >	             }
							      >
							      >	    /**
							      >	      * The following else if condition is added to support X
							      >	      * UTF-8:   [1111 0uuu] [10uu zzzz] [10yy yyyy] [10xx xx
							      >	      * Unicode: [1101 10ww] [wwzz zzyy] (high surrogate)
							      >	      *          [1101 11yy] [yyxx xxxx] (low surrogate)
							      >	      *          * uuuuu = wwww + 1
							      >	      */
							      >	    else if (c >= 0xD800 && c <= 0xDBFF) 
							      >	    {
							      >	        char high, low;
							      >	        high = c;
							      >	        i++;
							      >	        low = chars[i];
							      >
							      >	        buf_loc[count_loc++] = (byte) (0xF0 | (((high + 0x40)
							      >	        buf_loc[count_loc++] = (byte) (0x80 | (((high + 0x40)
							      >	        buf_loc[count_loc++] = (byte) (0x80 | ((low >> 6) & 0
							      >	        buf_loc[count_loc++] = (byte) (0x80 | (low & 0x3f));
							      >	    }
  							      <
  /**							      <
   * 							      <
   * @param s A string with only ASCII characters	      <
   * @throws IOException				      <
   */							      <
  public void directWrite(final String s) throws IOException  <
  {							      <
							      <
    final int length = s.length();			      <
    							      <
    if (length >= BYTES_MAX - count)			      <
    {							      <
      // The requested length is greater than the unused part <
      flushBuffer();					      <
							      <
      if (length >= BYTES_MAX)				      <
      {							      <
        /*						      <
         * The requested length exceeds the size of the buffe <
         * so don't bother to buffer this one, just write it  <
         * directly. The buffer is already flushed so this is <
         * safe thing to do.				      <
         */						      <
         final int start = 0;				      <
         int chunks = 1 + length/CHARS_MAX;		      <
         for (int chunk =0 ; chunk < chunks; chunk++)	      <
         {						      <
             int start_chunk = start + ((length*chunk)/chunks <
             int end_chunk   = start + ((length*(chunk+1))/ch <
             int len_chunk = (end_chunk - start_chunk);	      <
             s.getChars(start_chunk,end_chunk, m_inputChars,0 <
             this.directWrite(m_inputChars,0, len_chunk);     <
         }						      <
        return;						      <
      }							      <
    }							      <
							      <
							      <
    s.getChars(0, length , m_inputChars, 0);		      <
    final char[] chars = m_inputChars;			      <
    final byte[] buf_loc = m_outputBytes; // local reference  <
    int count_loc = count;      // local integer for faster a <
    int i = 0;						      <
    while( i < length) 					      <
        buf_loc[count_loc++] = (byte)chars[i++];	      <
							      <
 							      <
    // Store the local integer back into the instance variabl <
    count = count_loc;					      <
							      >	  public Writer getWriter()
							      >	  {
							      >	    // Only one of getWriter() or getOutputStream() can retur
							      >	    // This type of writer wraps an OutputStream, not a Write
							      >	    return null;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/serializer/XSLOutputAttributes.java xalan-j_2_7_0/src/org/apache/xml/serializer/XSLOutputAttributes.java
 * $Id: XSLOutputAttributes.java,v 1.2 2004/02/17 04:18:18 mi |	 * $Id: XSLOutputAttributes.java,v 1.3 2004/08/31 05:10:51 mi
							      >	 * 
							      >	 * This interface is only used internally within Xalan.
							      >	 * 
							      >	 * @xsl.usage internal
public interface XSLOutputAttributes			      |	interface XSLOutputAttributes
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/AttList.java xalan-j_2_7_0/src/org/apache/xml/utils/AttList.java
 * $Id: AttList.java,v 1.12 2004/02/17 04:21:14 minchau Exp $ |	 * $Id: AttList.java,v 1.13 2005/01/23 00:52:41 mcnamara Exp 
   * @param index The attribute index (zero-based).	      |	   * @param i The attribute index (zero-based).
   * @param index The attribute index (zero-based)	      |	   * @param i The attribute index (zero-based)
   * @param index The attribute index (zero-based)	      |	   * @param i The attribute index (zero-based)
只在 xalan-j_2_6_0/src/org/apache/xml/utils 存在：CharKey.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/DefaultErrorHandler.java xalan-j_2_7_0/src/org/apache/xml/utils/DefaultErrorHandler.java
 * $Id: DefaultErrorHandler.java,v 1.15 2004/02/17 04:21:14 m |	 * $Id: DefaultErrorHandler.java,v 1.16 2005/06/03 15:52:46 m
							      >	   * if this flag is set to true, we will rethrow the excepti
							      >	   * the error() and fatalError() methods. If it is false, th
							      >	   * are reported to System.err. 
							      >	   */
							      >	  boolean m_throwExceptionOnError = true;
							      >
							      >	  /**
							      >	    this(true);
							      >	  }
							      >
							      >	  /**
							      >	   * Constructor DefaultErrorHandler
							      >	   */
							      >	  public DefaultErrorHandler(boolean throwExceptionOnError)
							      >	  {
							      >	    m_throwExceptionOnError = throwExceptionOnError;
    // printLocation(exception);			      |	    // If the m_throwExceptionOnError flag is true, rethrow t
    // ensureLocationSet(exception);			      |	    // Otherwise report the error to System.err.
							      |	    if (m_throwExceptionOnError)
    throw exception;					      |	      throw exception;
							      >	    else
							      >	    {
							      >	      printLocation(m_pw, exception);
							      >	      m_pw.println(exception.getMessage());
							      >	    }
    // printLocation(exception);			      |	    // If the m_throwExceptionOnError flag is true, rethrow t
    // ensureLocationSet(exception);			      |	    // Otherwise report the error to System.err.
							      |	    if (m_throwExceptionOnError)
    throw exception;					      |	      throw exception;
							      >	    else
							      >	    {
							      >	      printLocation(m_pw, exception);
							      >	      m_pw.println(exception.getMessage());
							      >	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/DOMBuilder.java xalan-j_2_7_0/src/org/apache/xml/utils/DOMBuilder.java
 * $Id: DOMBuilder.java,v 1.19 2004/02/25 13:07:51 aruny Exp  |	 * $Id: DOMBuilder.java,v 1.21 2005/05/20 14:25:13 mkwan Exp 
							      >	  
							      >	  /** The root node          */
							      >	  protected Node m_root = null;
							      >	  
							      >	  /** The next sibling node  */
							      >	  protected Node m_nextSibling = null;
    m_currentNode = node;				      |	    m_currentNode = m_root = node;
							      >	    
							      >	    if (node instanceof Element)
							      >	      m_elemStack.push(node);
   * Get the root node of the DOM being created.  This	      |	   * Get the root document or DocumentFragment of the DOM bei
   * is either a Document or a DocumentFragment.	      <
  public Node getRootNode()				      |	  public Node getRootDocument()
							      |	  
							      >	  /**
							      >	   * Get the root node of the DOM tree.
							      >	   */
							      >	  public Node getRootNode()
							      >	  {
							      >	    return m_root;
							      >	  }
							      >	  
							      >	  
							      >	  /**
							      >	   * Set the next sibling node, which is where the result nod
							      >	   * should be inserted before.
							      >	   * 
							      >	   * @param nextSibling the next sibling node.
							      >	   */
							      >	  public void setNextSibling(Node nextSibling)
							      >	  {
							      >	    m_nextSibling = nextSibling;
							      >	  }
							      >	  
							      >	  /**
							      >	   * Return the next sibling node.
							      >	   * 
							      >	   * @return the next sibling node.
							      >	   */
							      >	  public Node getNextSibling()
							      >	  {
							      >	    return m_nextSibling;
							      >	  }
      currentNode.appendChild(newNode);			      |	      if (currentNode == m_root && m_nextSibling != null)
							      >	        currentNode.insertBefore(newNode, m_nextSibling);
							      >	      else
							      >	        currentNode.appendChild(newNode);
      m_docFrag.appendChild(newNode);			      |	      if (m_nextSibling != null)
							      >	        m_docFrag.insertBefore(newNode, m_nextSibling);
							      >	      else
							      >	        m_docFrag.appendChild(newNode);
							      >	          ok = false;
							      >	          
        m_doc.appendChild(newNode);			      |	      {
							      >	        if (m_nextSibling != null)
							      >	          m_doc.insertBefore(newNode, m_nextSibling);
							      >	        else
							      >	          m_doc.appendChild(newNode);
							      >	      }
          // In SAX, xmlns: attributes have an empty namespac |	          // In SAX, xmlns[:] attributes have an empty namesp
          if (attrQName.startsWith("xmlns:"))		      |	          // should have the xmlns namespace
							      >	          if (attrQName.startsWith("xmlns:") || attrQName.equ
							      >	          }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/DOMHelper.java xalan-j_2_7_0/src/org/apache/xml/utils/DOMHelper.java
 * $Id: DOMHelper.java,v 1.6 2004/02/17 04:21:14 minchau Exp  |	 * $Id: DOMHelper.java,v 1.7 2005/06/07 15:35:52 mkwan Exp $
							      >	import javax.xml.XMLConstants;
							      >	   * @param isSecureProcessing state of the secure processing
  public static Document createDocument()		      |	  public static Document createDocument(boolean isSecureProce
							      |	      
							      >	      if (isSecureProcessing)
							      >	      {
							      >	        try
							      >	        {
							      >	          dfactory.setFeature(XMLConstants.FEATURE_SECURE_PRO
							      >	        }
							      >	        catch (ParserConfigurationException pce) {}
							      >	      }
							      >	      
							      >	  /**
							      >	   * DOM Level 1 did not have a standard mechanism for creati
							      >	   * Document object. This function provides a DOM-implementa
							      >	   * abstraction for that for that concept. It's typically us
							      >	   * outputting a new DOM as the result of an operation.
							      >	   *
							      >	   * @return The newly created DOM Document object, with no c
							      >	   * null if we can't find a DOM implementation that permits 
							      >	   * new empty Documents.
							      >	   */
							      >	  public static Document createDocument()
							      >	  {
							      >	    return createDocument(false);
							      >	  }
							      >	  
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/FastStringBuffer.java xalan-j_2_7_0/src/org/apache/xml/utils/FastStringBuffer.java
 * $Id: FastStringBuffer.java,v 1.25 2004/02/17 04:21:14 minc |	 * $Id: FastStringBuffer.java,v 1.27 2005/01/23 00:52:41 mcna
	static boolean DEBUG_FORCE_FIXED_CHUNKSIZE=true;      |	    static final boolean DEBUG_FORCE_FIXED_CHUNKSIZE=true;
	 * @see sendNormalizedSAXcharacters(char[],int,int,or |		 * @see #sendNormalizedSAXcharacters(org.xml.sax.Cont
	 * @see sendNormalizedSAXcharacters(char[],int,int,or |		 * @see #sendNormalizedSAXcharacters(org.xml.sax.Cont
   *							      <
   * @param						      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/IntVector.java xalan-j_2_7_0/src/org/apache/xml/utils/IntVector.java
 * $Id: IntVector.java,v 1.8 2004/02/17 04:21:14 minchau Exp  |	 * $Id: IntVector.java,v 1.9 2005/01/23 00:52:41 mcnamara Exp
   * @param value Int to add to the list 		      |	   * @param numberOfElements Int to add to the list 
   * @param node object to set				      |	   * @param value object to set
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/ListingErrorHandler.java xalan-j_2_7_0/src/org/apache/xml/utils/ListingErrorHandler.java
 * $Id: ListingErrorHandler.java,v 1.7 2004/02/17 04:21:14 mi |	 * $Id: ListingErrorHandler.java,v 1.9 2005/01/24 04:04:40 mc
 * @version $Id: ListingErrorHandler.java,v 1.7 2004/02/17 04 |	 * @version $Id: ListingErrorHandler.java,v 1.9 2005/01/24 04
     * @author shane_curcuru@us.ibm.com			      <
     * @param t if we should throw an exception on warnings   |	     * @param b if we should throw an exception on warnings
     * @param t if we should throw an exception on errors     |	     * @param b if we should throw an exception on errors
     * @param t if we should throw an exception on fatalError |	     * @param b if we should throw an exception on fatalError
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/MutableAttrListImpl.java xalan-j_2_7_0/src/org/apache/xml/utils/MutableAttrListImpl.java
 * $Id: MutableAttrListImpl.java,v 1.7 2004/02/17 04:21:14 mi |	 * $Id: MutableAttrListImpl.java,v 1.8 2004/08/17 18:57:22 jy
							      >	    static final long serialVersionUID = 6289452013442934470L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/NameSpace.java xalan-j_2_7_0/src/org/apache/xml/utils/NameSpace.java
 * $Id: NameSpace.java,v 1.6 2004/02/17 04:21:14 minchau Exp  |	 * $Id: NameSpace.java,v 1.7 2004/08/17 18:57:22 jycli Exp $
							      >	    static final long serialVersionUID = 1471232939184881839L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/NodeVector.java xalan-j_2_7_0/src/org/apache/xml/utils/NodeVector.java
 * $Id: NodeVector.java,v 1.9 2004/02/17 04:21:14 minchau Exp |	 * $Id: NodeVector.java,v 1.11 2005/01/23 00:52:41 mcnamara E
							      >	    static final long serialVersionUID = -713473092200731870L
   *							      <
   * @param a The array to be sorted.			      <
   * @param lo0  The low index.				      <
   * @param hi0  The high index.			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/NSInfo.java xalan-j_2_7_0/src/org/apache/xml/utils/NSInfo.java
 * $Id: NSInfo.java,v 1.5 2004/02/17 04:21:14 minchau Exp $   |	 * $Id: NSInfo.java,v 1.6 2005/01/23 00:52:41 mcnamara Exp $
   * @param hasXMLNSAttrs Flag indicating whether one of this |	   * @param ancestorHasXMLNSAttrs Flag indicating whether one
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xml/utils/ObjectFactory.java
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = 20366192
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/ObjectPool.java xalan-j_2_7_0/src/org/apache/xml/utils/ObjectPool.java
 * $Id: ObjectPool.java,v 1.11 2004/02/17 04:21:14 minchau Ex |	 * $Id: ObjectPool.java,v 1.12 2004/08/17 18:57:22 jycli Exp 
							      >	    static final long serialVersionUID = -8519013691660936643
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/PrefixResolverDefault.java xalan-j_2_7_0/src/org/apache/xml/utils/PrefixResolverDefault.java
 * $Id: PrefixResolverDefault.java,v 1.9 2004/02/20 20:32:51  |	 * $Id: PrefixResolverDefault.java,v 1.10 2005/01/23 00:52:41
   * @param xpathExpressionContext Node from which to start s <
   * xmlns attribute that binds a prefix to a namespace (when <
   * context is not specified in the getNamespaceForPrefix ca <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/QName.java xalan-j_2_7_0/src/org/apache/xml/utils/QName.java
 * $Id: QName.java,v 1.15 2004/02/17 04:21:14 minchau Exp $   |	 * $Id: QName.java,v 1.18 2005/03/23 17:54:05 ytalwar Exp $
							      >	    static final long serialVersionUID = 467434581652829920L;
        if (!XMLChar.isValidNCName(localName))		      |	        if (!XML11Char.isXML11ValidNCName(localName))
        if (!XMLChar.isValidNCName(localName))		      |	        if (!XML11Char.isXML11ValidNCName(localName))
        if ((null != prefix) && (!XMLChar.isValidNCName(prefi |	        if ((null != prefix) && (!XML11Char.isXML11ValidNCNam
        if (!XMLChar.isValidNCName(localName))		      |	        if (!XML11Char.isXML11ValidNCName(localName))
        if ((_localName == null) || (!XMLChar.isValidNCName(_ |	        if ((_localName == null) || (!XML11Char.isXML11ValidN
        if ((_localName == null) || (!XMLChar.isValidNCName(_ |	        if ((_localName == null) || (!XML11Char.isXML11ValidN
        if ((_localName == null) || (!XMLChar.isValidNCName(_ |	        if ((_localName == null) || (!XML11Char.isXML11ValidN
   *							      <
   * @param qname Qualified name to compare to 		      <
只在 xalan-j_2_7_0/src/org/apache/xml/utils/res 存在：CharArrayWrapper.java
只在 xalan-j_2_7_0/src/org/apache/xml/utils/res 存在：IntArrayWrapper.java
只在 xalan-j_2_7_0/src/org/apache/xml/utils/res 存在：LongArrayWrapper.java
只在 xalan-j_2_7_0/src/org/apache/xml/utils/res 存在：StringArrayWrapper.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResourceBundle.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResourceBundle.java
 * $Id: XResourceBundle.java,v 1.7 2004/02/17 04:22:15 mincha |	 * $Id: XResourceBundle.java,v 1.8 2004/12/15 17:35:52 jycli 
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list. */				      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(new char[]{ 'A', 'B', 
      new char[]{ 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I' |	         'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R
                  'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U' |	         'V', 'W', 'X', 'Y', 'Z' })},
                  'Y', 'Z' } },				      |	    { "tradAlphabet", new CharArrayWrapper(new char[]{ 'A', '
    { "tradAlphabet",					      |	         'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q
      new char[]{ 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I' |	         'U', 'V', 'W', 'X', 'Y', 'Z' }) },
                  'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U' <
                  'Y', 'Z' } },				      <
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_cy.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_cy.java
 * $Id: XResources_cy.java,v 1.7 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_cy.java,v 1.8 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
 /** The association list. */				      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x0443, 0x0444, 0x0445, 0x0470, 0x0460, 0x0 |	                  0x0443, 0x0444, 0x0445, 0x0470, 0x0460, 0x0
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 100, 10, 1 } },	      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 100, 10,
    { "multiplier", new long[]{ 1000 } },		      |	    { "multiplier", new LongArrayWrapper(new long[]{ 1000 }) 
    { "multiplierChar", new char[]{ 0x03D9 } },		      |	    { "multiplierChar", new CharArrayWrapper(new char[]{ 0x03
    { "zero", new char[0] },				      |	    { "zero", new CharArrayWrapper(new char[0]) },
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x0439, 0x04A9 } },			      |	                  0x0439, 0x04A9 }) },
    { "tens",						      |	    { "tens", new CharArrayWrapper(
                  0x043F, 0x0447 } },			      |	                  0x043F, 0x0447 }) },
    { "hundreds",					      |	    { "hundreds", new CharArrayWrapper(
                  0x0460, 0x0446 } },			      |	                  0x0460, 0x0446 }) },
    { "tables", new String[]{ "hundreds", "tens", "digits" }  |	    { "tables", new StringArrayWrapper(new String[]{ "hundred
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_de.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_de.java
 * $Id: XResources_de.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_de.java,v 1.7 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_el.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_el.java
 * $Id: XResources_el.java,v 1.7 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_el.java,v 1.8 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.          */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x03c6, 0x03c7, 0x03c8, 0x03c9 } },	      |	                  0x03c6, 0x03c7, 0x03c8, 0x03c9 }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 100, 10, 1 } },	      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 100, 10,
    { "multiplier", new long[]{ 1000 } },		      |	    { "multiplier", new LongArrayWrapper(new long[]{ 1000 }) 
    { "multiplierChar", new char[]{ 0x03d9 } },		      |	    { "multiplierChar", new CharArrayWrapper(new char[]{ 0x03
    { "zero", new char[0] },				      |	    { "zero", new CharArrayWrapper(new char[0]) },
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x03b7, 0x03b8 } },			      |	                  0x03b7, 0x03b8 }) },
    { "tens",						      |	    { "tens", new CharArrayWrapper(
                  0x03c0, 0x03df } },			      |	                  0x03c0, 0x03df }) },
    { "hundreds",					      |	    { "hundreds", new CharArrayWrapper(
                  0x03c9, 0x03e1 } },			      |	                  0x03c9, 0x03e1 }) },
    { "tables", new String[]{ "hundreds", "tens", "digits" }  |	    { "tables", new StringArrayWrapper(new String[]{ "hundred
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_en.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_en.java
 * $Id: XResources_en.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_en.java,v 1.7 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][] 
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' })},
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_es.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_es.java
 * $Id: XResources_es.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_es.java,v 1.7 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_fr.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_fr.java
 * $Id: XResources_fr.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_fr.java,v 1.7 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_he.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_he.java
 * $Id: XResources_he.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_he.java,v 1.7 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.          */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x05DE, 0x05DF, 0x05E0, 0x05E1 } },	      |	                  0x05DE, 0x05DF, 0x05E0, 0x05E1 }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 10, 1 } },		      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 10, 1 })
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x05D7, 0x05D8 } },			      |	                  0x05D7, 0x05D8 }) },
    { "tens",						      |	    { "tens", new CharArrayWrapper(
                  0x05E0, 0x05E1 } },			      |	                  0x05E0, 0x05E1 }) },
    { "tables", new String[]{ "tens", "digits" } }	      |	    { "tables", new StringArrayWrapper(new String[]{ "tens", 
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_hy.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_hy.java
 * $Id: XResources_hy.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_hy.java,v 1.7 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.          */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x0584 } },				      |	                  0x0584 }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1000, 100, 10, 1 } },	      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1000, 10
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x0568, 0x0569 } },			      |	                  0x0568, 0x0569 }) },
    { "tens",						      |	    { "tens", new CharArrayWrapper(
                  0x0568, 0x0572 } },			      |	                  0x0568, 0x0572 }) },
    { "hundreds",					      |	    { "hundreds", new CharArrayWrapper(
                  0x057A, 0x057B } },			      |	                  0x057A, 0x057B }) },
    { "thousands",					      |	    { "thousands", new CharArrayWrapper(
                  0x0583, 0x0584 } },			      |	                  0x0583, 0x0584 }) },
    { "tables", new String[]{ "thousands", "hundreds", "tens" |	    { "tables", new StringArrayWrapper(new String[]{ "thousan
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_it.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_it.java
 * $Id: XResources_it.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_it.java,v 1.7 2004/12/15 17:35:52 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_ja_JP_A.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_ja_JP_A.java
 * $Id: XResources_ja_JP_A.java,v 1.7 2004/02/17 04:22:15 min |	 * $Id: XResources_ja_JP_A.java,v 1.8 2004/12/15 17:35:52 jyc
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x30ed, 0x30ef, 0x30f0, 0x30f1, 0x30f2, 0x3 |	                  0x30ed, 0x30ef, 0x30f0, 0x30f1, 0x30f2, 0x3
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1 } },			      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1 }) },
    { "multiplier",					      |	    { "multiplier", new LongArrayWrapper(
      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000,  |	      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000, 
    { "multiplierChar",					      |	          100, 10 }) },
      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7 |	    { "multiplierChar", new CharArrayWrapper(
							      >	      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7
    { "zero", new char[0] },				      |	    { "zero", new CharArrayWrapper(new char[0]) },
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x516B, 0x4E5D } }, { "tables", new String[ |	                  0x516B, 0x4E5D }) }, { "tables", new String
							      >	                      new String[]{ "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_ja_JP_HA.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_ja_JP_HA.java
 * $Id: XResources_ja_JP_HA.java,v 1.7 2004/02/17 04:22:15 mi |	 * $Id: XResources_ja_JP_HA.java,v 1.8 2004/12/15 17:35:53 jy
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.        */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x308d, 0x308f, 0x3090, 0x3091, 0x3092, 0x3 |	                  0x308d, 0x308f, 0x3090, 0x3091, 0x3092, 0x3
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1 } },			      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1 }) },
    { "multiplier",					      |	    { "multiplier", new LongArrayWrapper(
      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000,  |	      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000, 
    { "multiplierChar",					      |	          100, 10 }) },
      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7 |	    { "multiplierChar", new CharArrayWrapper(
							      >	      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7
    { "zero", new char[0] },				      |	    { "zero", new CharArrayWrapper(new char[0]) },
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x516B, 0x4E5D } }, { "tables", new String[ |	                  0x516B, 0x4E5D }) }, { "tables", new String
							      >	                      new String[]{ "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_ja_JP_HI.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_ja_JP_HI.java
 * $Id: XResources_ja_JP_HI.java,v 1.8 2004/02/17 04:22:15 mi |	 * $Id: XResources_ja_JP_HI.java,v 1.9 2004/12/15 17:35:53 jy
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association table for this resource.  */	      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x3091, 0x3072, 0x3082, 0x305b, 0x3059 } }, |	                  0x3091, 0x3072, 0x3082, 0x305b, 0x3059 }) }
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1 } },			      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1 }) },
    { "multiplier",					      |	    { "multiplier", new LongArrayWrapper(
      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000,  |	      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000, 
    { "multiplierChar",					      |	          100, 10 }) },
      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7 |	    { "multiplierChar", new CharArrayWrapper(
							      >	      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7
    { "zero", new char[0] },				      |	    { "zero", new CharArrayWrapper(new char[0]) },
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x516B, 0x4E5D } }, { "tables", new String[ |	                  0x516B, 0x4E5D }) }, { "tables", new String
							      >	                      new String[]{ "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_ja_JP_I.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_ja_JP_I.java
 * $Id: XResources_ja_JP_I.java,v 1.8 2004/02/17 04:22:15 min |	 * $Id: XResources_ja_JP_I.java,v 1.9 2004/12/15 17:35:53 jyc
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association table for this resource.  */	      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x30f1, 0x30d2, 0x30e2, 0x30bb, 0x30b9 } }, |	                  0x30f1, 0x30d2, 0x30e2, 0x30bb, 0x30b9 }) }
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1 } },			      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1 }) },
    { "multiplier",					      |	    { "multiplier", new LongArrayWrapper(
      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000,  |	      new long[]{ Long.MAX_VALUE, Long.MAX_VALUE, 100000000, 
    { "multiplierChar",					      |	    { "multiplierChar", new CharArrayWrapper(
      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7 |	      new char[]{ 0x4EAC, 0x5146, 0x5104, 0x4E07, 0x5343, 0x7
    { "zero", new char[0] },				      |	    { "zero", new CharArrayWrapper(new char[0]) },
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x516B, 0x4E5D } }, { "tables", new String[ |	                  0x516B, 0x4E5D }) }, { "tables", new String
							      >	                      new String[]{ "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_ka.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_ka.java
 * $Id: XResources_ka.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_ka.java,v 1.7 2004/12/15 17:35:53 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.          */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0x10F0 } },				      |	                  0x10F0 }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1000, 100, 10, 1 } },	      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1000, 10
    { "digits",						      |	    { "digits", new CharArrayWrapper(
                  0x10f1, 0x10D7 } },			      |	                  0x10f1, 0x10D7 }) },
    { "tens",						      |	    { "tens", new CharArrayWrapper(
                  0x10DE, 0x10DF } },			      |	                  0x10DE, 0x10DF }) },
    { "hundreds",					      |	    { "hundreds", new CharArrayWrapper(
                  0x10E7, 0x10E8 } },			      |	                  0x10E7, 0x10E8 }) },
    { "thousands",					      |	    { "thousands", new CharArrayWrapper(
                  0x10EF, 0x10F0 } },			      |	                  0x10EF, 0x10F0 }) },
    { "tables", new String[]{ "thousands", "hundreds", "tens" |	    { "tables", new StringArrayWrapper(new String[]{ "thousan
							      >	            "tens", "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_ko.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_ko.java
 * $Id: XResources_ko.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_ko.java,v 1.7 2004/12/15 17:35:53 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.          */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
      new char[]{ 0x3131, 0x3134, 0x3137, 0x3139, 0x3141, 0x3 |	      new char[]{ 0x3131, 0x3134, 0x3137, 0x3139, 0x3141, 0x3
                  0x314d, 0x314e, 0x314f, 0x3151, 0x3153, 0x3 |	                  0x3147, 0x3148, 0x314a, 0x314b, 0x314c, 0x3
    { "tradAlphabet",					      |	                  0x314f, 0x3151, 0x3153, 0x3155, 0x3157, 0x3
							      >	                  0x3160, 0x3161, 0x3163})},
							      >	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1 } },			      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1 }) },
    { "zero", new char[0] },				      |	    { "zero", new CharArrayWrapper(new char[0]) },
    { "multiplier", new int[]{ 100000000, 10000, 1000, 100, 1 |	    { "multiplier", new LongArrayWrapper(new long[]{ 10000000
    { "multiplierChar",					      |	        100, 10 }) },
      new char[]{  0xc5b5, 0xb9cc, 0xcc9c, 0xbc31, 0xc2ed } } |	    { "multiplierChar", new CharArrayWrapper(
    { "digits",						      |	      new char[]{  0xc5b5, 0xb9cc, 0xcc9c, 0xbc31, 0xc2ed }) 
      new char[]{ 0xc77c, 0xc774, 0xc0bc, 0xc0ac, 0xc624, 0xc |	    { "digits", new CharArrayWrapper(
                   } }, { "tables", new String[]{ "digits" }  |	      new char[]{ 0xc77c, 0xc774, 0xc0bc, 0xc0ac, 0xc624, 0xc
							      >	          0xd314, 0xad6c}) }, { "tables", new StringArrayWrap
							      >	              new String[]{ "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_sv.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_sv.java
 * $Id: XResources_sv.java,v 1.6 2004/02/17 04:22:15 minchau  |	 * $Id: XResources_sv.java,v 1.7 2004/12/15 17:35:53 jycli Ex
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_zh_CN.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_zh_CN.java
 * $Id: XResources_zh_CN.java,v 1.8 2004/02/17 04:22:15 minch |	 * $Id: XResources_zh_CN.java,v 1.9 2004/12/15 17:35:53 jycli
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.          */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0xff36, 0xff37, 0xff38, 0xff39, 0xff3a } }, |	                  0xff36, 0xff37, 0xff38, 0xff39, 0xff3a }) }
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1 } },			      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1 }) },
    { "zero", new char[]{ 0x96f6 } },			      |	    { "zero", new CharArrayWrapper(new char[]{ 0x96f6 }) },
    { "multiplier", new long[]{ 100000000, 10000, 1000, 100,  |	    { "multiplier", new LongArrayWrapper(new long[]{ 10000000
    { "multiplierChar",					      |	        100, 10 }) },
      new char[]{ 0x4ebf, 0x4e07, 0x5343, 0x767e, 0x5341 } }, |	    { "multiplierChar", new CharArrayWrapper(
    { "digits",						      |	      new char[]{ 0x4ebf, 0x4e07, 0x5343, 0x767e, 0x5341 }) }
							      >	    { "digits", new CharArrayWrapper(
                  0x516b, 0x4e5d } }, { "tables", new String[ |	                  0x516b, 0x4e5d }) }, { "tables", new String
							      >	                      new String[]{ "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/res/XResources_zh_TW.java xalan-j_2_7_0/src/org/apache/xml/utils/res/XResources_zh_TW.java
 * $Id: XResources_zh_TW.java,v 1.8 2004/02/17 04:22:15 minch |	 * $Id: XResources_zh_TW.java,v 1.9 2004/12/15 17:35:53 jycli
    return contents;					      |	    return new Object[][]
  }							      <
							      <
  /** The association list.         */			      <
  static final Object[][] contents =			      <
    { "alphabet",					      |	    { "alphabet", new CharArrayWrapper(
                  0xff36, 0xff37, 0xff38, 0xff39, 0xff3a } }, |	                  0xff36, 0xff37, 0xff38, 0xff39, 0xff3a }) }
    { "tradAlphabet",					      |	    { "tradAlphabet", new CharArrayWrapper(
                  'Y', 'Z' } },				      |	                  'Y', 'Z' }) },
    { "numberGroups", new int[]{ 1 } },			      |	    { "numberGroups", new IntArrayWrapper(new int[]{ 1 }) },
    { "zero", new char[]{ 0x96f6 } },			      |	    { "zero", new CharArrayWrapper(new char[]{ 0x96f6 }) },
    { "multiplier", new long[]{ 100000000, 10000, 1000, 100,  |	    { "multiplier", new LongArrayWrapper(new long[]{ 10000000
    { "multiplierChar",					      |	        100, 10 }) },
      new char[]{ 0x5104, 0x842c, 0x4edf, 0x4f70, 0x62fe } }, |	    { "multiplierChar", new CharArrayWrapper(
    { "digits",						      |	      new char[]{ 0x5104, 0x842c, 0x4edf, 0x4f70, 0x62fe }) }
							      >	    { "digits", new CharArrayWrapper(
                  0x634c, 0x7396 } }, { "tables", new String[ |	                  0x634c, 0x7396 }) }, { "tables", new String
							      >	                      new String[]{ "digits" }) }
							      >	  }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/SAXSourceLocator.java xalan-j_2_7_0/src/org/apache/xml/utils/SAXSourceLocator.java
 * $Id: SAXSourceLocator.java,v 1.8 2004/02/17 04:21:14 minch |	 * $Id: SAXSourceLocator.java,v 1.9 2004/08/17 18:57:22 jycli
							      >	    static final long serialVersionUID = 3181680946321164112L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/SerializableLocatorImpl.java xalan-j_2_7_0/src/org/apache/xml/utils/SerializableLocatorImpl.java
 * $Id: SerializableLocatorImpl.java,v 1.4 2004/02/17 04:21:1 |	 * $Id: SerializableLocatorImpl.java,v 1.5 2004/08/17 18:57:2
							      >	    static final long serialVersionUID = -2660312888446371460
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/StopParseException.java xalan-j_2_7_0/src/org/apache/xml/utils/StopParseException.java
 * $Id: StopParseException.java,v 1.2 2004/02/17 04:21:14 min |	 * $Id: StopParseException.java,v 1.3 2004/08/17 18:57:22 jyc
							      |	        static final long serialVersionUID = 2101024792182589
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/StringVector.java xalan-j_2_7_0/src/org/apache/xml/utils/StringVector.java
 * $Id: StringVector.java,v 1.7 2004/02/17 04:21:14 minchau E |	 * $Id: StringVector.java,v 1.8 2004/08/17 18:57:22 jycli Exp
							      >	    static final long serialVersionUID = 4995234972032919748L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/StylesheetPIHandler.java xalan-j_2_7_0/src/org/apache/xml/utils/StylesheetPIHandler.java
 * $Id: StylesheetPIHandler.java,v 1.2 2004/02/17 04:21:14 mi |	 * $Id: StylesheetPIHandler.java,v 1.3 2005/01/23 01:02:10 mc
   * @param uri The Namespace URI, or an empty string.	      |	   * @param namespaceURI The Namespace URI, or an empty strin
   * @param rawName The qualified name (with prefix).	      |	   * @param qName The qualified name (with prefix).
   * @param attributes The specified or defaulted attributes. |	   * @param atts  The specified or defaulted attributes.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/SuballocatedByteVector.java xalan-j_2_7_0/src/org/apache/xml/utils/SuballocatedByteVector.java
 * $Id: SuballocatedByteVector.java,v 1.6 2004/02/17 04:21:14 |	 * $Id: SuballocatedByteVector.java,v 1.7 2005/01/23 01:02:10
   * @param value Byte to add to the list 		      |	   * @param numberOfElements
   * @param node object to set				      |	   * @param value
   * @param index Index of where to set the object	      |	   * @param at     Index of where to set the object
   * @throw ArrayIndexOutOfBoundsException if the index was _ |	   * @throws ArrayIndexOutOfBoundsException if the index was 
   * @throw NullPointerException if the index points to a blo |	   * @throws NullPointerException if the index points to a bl
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/SuballocatedIntVector.java xalan-j_2_7_0/src/org/apache/xml/utils/SuballocatedIntVector.java
 * $Id: SuballocatedIntVector.java,v 1.10 2004/02/17 04:21:14 |	 * $Id: SuballocatedIntVector.java,v 1.11 2005/01/23 01:02:10
   * @param value Int to add to the list 		      |	   * @param numberOfElements Int to add to the list 
   * @param node object to set				      |	   * @param value object to set
   * @param index Index of where to set the object	      |	   * @param at    Index of where to set the object
   * @throw ArrayIndexOutOfBoundsException if the index was _ |	   * @throws ArrayIndexOutOfBoundsException if the index was 
   * @throw NullPointerException if the index points to a blo |	   * @throws NullPointerException if the index points to a bl
只在 xalan-j_2_6_0/src/org/apache/xml/utils 存在：synthetic
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/ThreadControllerWrapper.java xalan-j_2_7_0/src/org/apache/xml/utils/ThreadControllerWrapper.java
 * $Id: ThreadControllerWrapper.java,v 1.3 2004/02/17 04:21:1 |	 * $Id: ThreadControllerWrapper.java,v 1.5 2005/01/23 01:02:1
  static ThreadController m_tpool = new ThreadController();   |	  private static ThreadController m_tpool = new ThreadControl
							      <
  /**							      <
   * Change the ThreadController that will be used to	      <
   * manage the transform threads.			      <
   *							      <
   * @param tp A ThreadController object		      <
   */							      <
  public static void setThreadController(ThreadController tpo <
  {							      <
    m_tpool = tpool;					      <
  }							      <
     * @returns The thread that is running the task, can be u |	     * @return  The thread that is running the task, can be u
     *							      <
     * NEEDSDOC ($objectName$) @return			      <
只在 xalan-j_2_6_0/src/org/apache/xml/utils 存在：Trie.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/UnImplNode.java xalan-j_2_7_0/src/org/apache/xml/utils/UnImplNode.java
 * $Id: UnImplNode.java,v 1.10 2004/02/17 04:21:14 minchau Ex |	 * $Id: UnImplNode.java,v 1.13 2005/06/22 19:07:10 mkwan Exp 
							      >	import org.w3c.dom.UserDataHandler;
							      >	import org.w3c.dom.DOMConfiguration;
							      >	import org.w3c.dom.TypeInfo;
   * @param localName Local part of qualified name of attribu <
   * @param featureThe name of the feature to test. This is t |	   * @param feature The name of the feature to test. This is 
   * @param versionThis is the version number of the feature  |	   * @param version This is the version number of the feature
   * NEEDSDOC @param feature				      <
   * NEEDSDOC @param version				      <
   * @param importedNodeThe node to import.		      |	   * @param importedNode The node to import.
   * @param deepIf <code>true</code>, recursively import the  |	   * @param deep         If <code>true</code>, recursively im
   * NEEDSDOC @param importedNode			      <
   * NEEDSDOC @param deep				      <
   *							      <
   * @param count The length of the substring to insert.      <
   * <p>EXPERIMENTAL! Based on the <a			      |	   * <p>Based on the <a
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	   * href='http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-200
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	   * Object Model (DOM) Level 3 Core Specification of 07 Apri
  public String getEncoding()				      |	  public String getInputEncoding()
   * <p>EXPERIMENTAL! Based on the <a			      |	   * <p>Based on the <a
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	   * href='http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-200
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	   * Object Model (DOM) Level 3 Core Specification of 07 Apri
  public void setEncoding(String encoding)		      |	  public void setInputEncoding(String encoding)
  {							      <
    error(XMLErrorResources.ER_FUNCTION_NOT_SUPPORTED);	      <
  }							      <
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * document is standalone.				      <
   * @since DOM Level 3					      <
   *							      <
   * NEEDSDOC ($objectName$) @return			      <
   */							      <
  public boolean getStandalone()			      <
							      <
							      <
    return false;					      <
   * <p>EXPERIMENTAL! Based on the <a			      |	   * <p>Based on the <a
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	   * href='http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-200
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	   * Object Model (DOM) Level 3 Core Specification of 07 Apri
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * document is standalone.				      <
   * @since DOM Level 3					      <
   *							      <
   * NEEDSDOC @param standalone				      <
   */							      <
  public void setStandalone(boolean standalone)		      <
  {							      <
    error(XMLErrorResources.ER_FUNCTION_NOT_SUPPORTED);	      <
  }							      <
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>EXPERIMENTAL! Based on the <a			      |	   * <p>Based on the <a
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	   * href='http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-200
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	   * Object Model (DOM) Level 3 Core Specification of 07 Apri
  /**							      |	    // RAMESH : Pending proper implementation of DOM Level 3 
   * <p>EXPERIMENTAL! Based on the <a			      |	    public Object setUserData(String key,
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 |	                              Object data,
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  |	                              UserDataHandler handler) {
   * <p>						      |	        return getOwnerDocument().setUserData( key, data, han
   * An attribute specifying, as part of the XML declaration, |	    }
   * number of this document. This is <code>null</code> when  |
   * @since DOM Level 3					      |	    /**
   *							      |	     * Retrieves the object associated to a key on a this nod
   * NEEDSDOC ($objectName$) @return			      |	     * must first have been set to this node by calling
   */							      |	     * <code>setUserData</code> with the same key.
  public String getVersion()				      |	     * @param key The key the object is associated to.
  {							      |	     * @return Returns the <code>DOMObject</code> associated 
							      >	     *   on this node, or <code>null</code> if there was none
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object getUserData(String key) {
							      >	        return getOwnerDocument().getUserData( key);
							      >	    } 
							      >
							      >	      /**
							      >	     *  This method returns a specialized object which implem
							      >	     * specialized APIs of the specified feature and version.
							      >	     * specialized object may also be obtained by using bindi
							      >	     * casting methods but is not necessarily expected to, as
							      >	     * @param feature The name of the feature requested (case
							      >	     * @param version  This is the version number of the feat
							      >	     *   the version is <code>null</code> or the empty string
							      >	     *   any version of the feature will cause the method to 
							      >	     *   object that supports at least one version of the fea
							      >	     * @return  Returns an object which implements the specia
							      >	     *   the specified feature and version, if any, or <code>
							      >	     *   there is no object which implements interfaces assoc
							      >	     *   feature. If the <code>DOMObject</code> returned by t
							      >	     *   implements the <code>Node</code> interface, it must 
							      >	     *   primary core <code>Node</code> and not return result
							      >	     *   with the primary core <code>Node</code> such as attr
							      >	     *   childNodes, etc.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public Object getFeature(String feature, String version) 
							      >	        // we don't have any alternate node, either this node
							      >	        // or we don't have anything that does
							      >	        return isSupported(feature, version) ? this : null;
							      >	    }
							      >
							      >	    /**
							      >	     * Tests whether two nodes are equal.
							      >	     * <br>This method tests for equality of nodes, not samen
							      >	     * whether the two nodes are references to the same objec
							      >	     * tested with <code>Node.isSameNode</code>. All nodes th
							      >	     * will also be equal, though the reverse may not be true
							      >	     * <br>Two nodes are equal if and only if the following c
							      >	     * satisfied: The two nodes are of the same type.The foll
							      >	     * attributes are equal: <code>nodeName</code>, <code>loc
							      >	     * <code>namespaceURI</code>, <code>prefix</code>, <code>
							      >	     * , <code>baseURI</code>. This is: they are both <code>n
							      >	     * they have the same length and are character for charac
							      >	     * The <code>attributes</code> <code>NamedNodeMaps</code>
							      >	     * This is: they are both <code>null</code>, or they have
							      >	     * length and for each node that exists in one map there 
							      >	     * exists in the other map and is equal, although not nec
							      >	     * same index.The <code>childNodes</code> <code>NodeLists
							      >	     * equal. This is: they are both <code>null</code>, or th
							      >	     * same length and contain equal nodes at the same index.
							      >	     * for <code>Attr</code> nodes as for any other type of n
							      >	     * normalization can affect equality; to avoid this, node
							      >	     * normalized before being compared.
							      >	     * <br>For two <code>DocumentType</code> nodes to be equa
							      >	     * conditions must also be satisfied: The following strin
							      >	     * are equal: <code>publicId</code>, <code>systemId</code
							      >	     * <code>internalSubset</code>.The <code>entities</code>
							      >	     * <code>NamedNodeMaps</code> are equal.The <code>notatio
							      >	     * <code>NamedNodeMaps</code> are equal.
							      >	     * <br>On the other hand, the following do not affect equ
							      >	     * <code>ownerDocument</code> attribute, the <code>specif
							      >	     * attribute for <code>Attr</code> nodes, the
							      >	     * <code>isWhitespaceInElementContent</code> attribute fo
							      >	     * <code>Text</code> nodes, as well as any user data or e
							      >	     * registered on the nodes.
							      >	     * @param arg The node to compare equality with.
							      >	     * @param deep If <code>true</code>, recursively compare 
							      >	     *   <code>false</code>, compare only the nodes themselve
							      >	     *   attributes, if it is an <code>Element</code>).
							      >	     * @return If the nodes, and possibly subtrees are equal,
							      >	     *   <code>true</code> otherwise <code>false</code>.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isEqualNode(Node arg) {
							      >	        if (arg == this) {
							      >	            return true;
							      >	        }
							      >	        if (arg.getNodeType() != getNodeType()) {
							      >	            return false;
							      >	        }
							      >	        // in theory nodeName can't be null but better be car
							      >	        // who knows what other implementations may be doing?
							      >	        if (getNodeName() == null) {
							      >	            if (arg.getNodeName() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNodeName().equals(arg.getNodeName())) {
							      >	            return false;
							      >	        }
							      >
							      >	        if (getLocalName() == null) {
							      >	            if (arg.getLocalName() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getLocalName().equals(arg.getLocalName())) 
							      >	            return false;
							      >	        }
							      >
							      >	        if (getNamespaceURI() == null) {
							      >	            if (arg.getNamespaceURI() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNamespaceURI().equals(arg.getNamespaceUR
							      >	            return false;
							      >	        }
							      >
							      >	        if (getPrefix() == null) {
							      >	            if (arg.getPrefix() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getPrefix().equals(arg.getPrefix())) {
							      >	            return false;
							      >	        }
							      >
							      >	        if (getNodeValue() == null) {
							      >	            if (arg.getNodeValue() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getNodeValue().equals(arg.getNodeValue())) 
							      >	            return false;
							      >	        }
							      >	    /*
							      >	        if (getBaseURI() == null) {
							      >	            if (((NodeImpl) arg).getBaseURI() != null) {
							      >	                return false;
							      >	            }
							      >	        }
							      >	        else if (!getBaseURI().equals(((NodeImpl) arg).getBas
							      >	            return false;
							      >	        }
							      >	*/
							      >
							      >	             return true;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3:
							      >	     * Look up the namespace URI associated to the given pref
							      >	     * Use lookupNamespaceURI(null) to lookup the default nam
							      >	     *
							      >	     * @param namespaceURI
							      >	     * @return th URI for the namespace
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String lookupNamespaceURI(String specifiedPrefix) 
							      >	        short type = this.getNodeType();
							      >	        switch (type) {
							      >	        case Node.ELEMENT_NODE : {
							      >
							      >	                String namespace = this.getNamespaceURI();
							      >	                String prefix = this.getPrefix();
							      >	                if (namespace !=null) {
							      >	                    // REVISIT: is it possible that prefix is
							      >	                    if (specifiedPrefix== null && prefix==spe
							      >	                        // looking for default namespace
							      >	                        return namespace;
							      >	                    } else if (prefix != null && prefix.equal
							      >	                        // non default namespace
							      >	                        return namespace;
							      >	                    }
							      >	                }
							      >	                if (this.hasAttributes()) {
							      >	                    NamedNodeMap map = this.getAttributes();
							      >	                    int length = map.getLength();
							      >	                    for (int i=0;i<length;i++) {
							      >	                        Node attr = map.item(i);
							      >	                        String attrPrefix = attr.getPrefix();
							      >	                        String value = attr.getNodeValue();
							      >	                        namespace = attr.getNamespaceURI();
							      >	                        if (namespace !=null && namespace.equ
							      >	                            // at this point we are dealing w
							      >	                            if (specifiedPrefix == null &&
							      >	                                attr.getNodeName().equals("xm
							      >	                                // default namespace
							      >	                                return value;
							      >	                            } else if (attrPrefix !=null &&
							      >	                                       attrPrefix.equals("xml
							      >	                                       attr.getLocalName().eq
							      >	                 // non default namespace
							      >	                                return value;
							      >	                            }
							      >	                        }
							      >	                    }
							      >	                }
							      >			/*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupNamespaceURI(specif
							      >	                }
							      >			*/
							      >
							      >	                return null;
							      >
							      >
							      >	            }
							      >	/*
							      >	        case Node.DOCUMENT_NODE : {
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >	*/
							      >	        case Node.ENTITY_NODE :
							      >	        case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return null;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.getOwnerElement().getNodeType() == N
							      >	                    return getOwnerElement().lookupNamespaceU
							      >
							      >	                }
							      >	                return null;
							      >	            }
							      >	        default:{
							      >		   /*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupNamespaceURI(specif
							      >	                }
							      >	             */
							      >	                return null;
							      >	            }
							      >
							      >	        }
							      >	    }
							      >	    
							      >	    /**
							      >	     *  DOM Level 3:
							      >	     *  This method checks if the specified <code>namespaceUR
							      >	     *  default namespace or not.
							      >	     *  @param namespaceURI The namespace URI to look for.
							      >	     *  @return  <code>true</code> if the specified <code>nam
							      >	     *   is the default namespace, <code>false</code> otherwi
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isDefaultNamespace(String namespaceURI){
							      >	       /*
							      >	        // REVISIT: remove casts when DOM L3 becomes REC.
							      >	        short type = this.getNodeType();
							      >	        switch (type) {
							      >	        case Node.ELEMENT_NODE: {
							      >	            String namespace = this.getNamespaceURI();
							      >	            String prefix = this.getPrefix();
							      >
							      >	            // REVISIT: is it possible that prefix is empty s
							      >	            if (prefix == null || prefix.length() == 0) {
							      >	                if (namespaceURI == null) {
							      >	                    return (namespace == namespaceURI);
							      >	                }
							      >	                return namespaceURI.equals(namespace);
							      >	            }
							      >	            if (this.hasAttributes()) {
							      >	                ElementImpl elem = (ElementImpl)this;
							      >	                NodeImpl attr = (NodeImpl)elem.getAttributeNo
							      >	                if (attr != null) {
							      >	                    String value = attr.getNodeValue();
							      >	                    if (namespaceURI == null) {
							      >	                        return (namespace == value);
							      >	                    }
							      >	                    return namespaceURI.equals(value);
							      >	                }
							      >	            }
							      >
							      >	            NodeImpl ancestor = (NodeImpl)getElementAncestor(
							      >	            if (ancestor != null) {
							      >	                return ancestor.isDefaultNamespace(namespaceU
							      >	            }
							      >	            return false;
							      >	        }
							      >	        case Node.DOCUMENT_NODE:{
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >
							      >	        case Node.ENTITY_NODE :
							      >	          case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return false;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.ownerNode.getNodeType() == Node.ELEM
							      >	                    return ownerNode.isDefaultNamespace(names
							      >
							      >	                }
							      >	                return false;
							      >	            }
							      >	        default:{  
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.isDefaultNamespace(namesp
							      >	                }
							      >	                return false;
							      >	            }
							      >
							      >	        }
							      >	*/
							      >	        return false;
							      >
							      >
							      >	    }
							      >
							      >	    /**
							      >	     *
							      >	     * DOM Level 3:
							      >	     * Look up the prefix associated to the given namespace U
							      >	     *
							      >	     * @param namespaceURI
							      >	     * @return the prefix for the namespace
							      >	     */
							      >	    public String lookupPrefix(String namespaceURI){
							      >
							      >	        // REVISIT: When Namespaces 1.1 comes out this may no
							      >	        // Prefix can't be bound to null namespace
							      >	        if (namespaceURI == null) {
							      >	            return null;
							      >	        }
							      >
							      >	        short type = this.getNodeType();
							      >
							      >	        switch (type) {
							      >	/*
							      >	        case Node.ELEMENT_NODE: {
							      >
							      >	                String namespace = this.getNamespaceURI(); //
							      >	                return lookupNamespacePrefix(namespaceURI, (E
							      >	            }
							      >
							      >	        case Node.DOCUMENT_NODE:{
							      >	                return((NodeImpl)((Document)this).getDocument
							      >	            }
							      >	*/
							      >	        case Node.ENTITY_NODE :
							      >	        case Node.NOTATION_NODE:
							      >	        case Node.DOCUMENT_FRAGMENT_NODE:
							      >	        case Node.DOCUMENT_TYPE_NODE:
							      >	            // type is unknown
							      >	            return null;
							      >	        case Node.ATTRIBUTE_NODE:{
							      >	                if (this.getOwnerElement().getNodeType() == N
							      >	                    return getOwnerElement().lookupPrefix(nam
							      >
							      >	                }
							      >	                return null;
							      >	            }
							      >	        default:{ 
							      >	/*
							      >	                NodeImpl ancestor = (NodeImpl)getElementAnces
							      >	                if (ancestor != null) {
							      >	                    return ancestor.lookupPrefix(namespaceURI
							      >	                }
							      >	*/
							      >	                return null;
							      >	            }
							      >	         }
							      >	    }
							      >
							      >	    /**
							      >	     * Returns whether this node is the same node as the give
							      >	     * <br>This method provides a way to determine whether tw
							      >	     * <code>Node</code> references returned by the implement
							      >	     * the same object. When two <code>Node</code> references
							      >	     * to the same object, even if through a proxy, the refer
							      >	     * used completely interchangably, such that all attribut
							      >	     * same values and calling the same DOM method on either 
							      >	     * always has exactly the same effect.
							      >	     * @param other The node to test against.
							      >	     * @return Returns <code>true</code> if the nodes are the
							      >	     *   <code>false</code> otherwise.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public boolean isSameNode(Node other) {
							      >	        // we do not use any wrapper so the answer is obvious
							      >	        return this == other;
							      >	    }
							      >
							      >	    /**
							      >	     * This attribute returns the text content of this node a
							      >	     * descendants. When it is defined to be null, setting it
							      >	     * When set, any possible children this node may have are
							      >	     * replaced by a single <code>Text</code> node containing
							      >	     * this attribute is set to. On getting, no serialization
							      >	     * the returned string does not contain any markup. No wh
							      >	     * normalization is performed, the returned string does n
							      >	     * element content whitespaces . Similarly, on setting, n
							      >	     * performed either, the input string is taken as pure te
							      >	     * <br>The string returned is made of the text content of
							      >	     * depending on its type, as defined below:
							      >	     * <table border='1'>
							      >	     * <tr>
							      >	     * <th>Node type</th>
							      >	     * <th>Content</th>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * ELEMENT_NODE, ENTITY_NODE, ENTITY_REFERENCE_NODE,
							      >	     * DOCUMENT_FRAGMENT_NODE</td>
							      >	     * <td valign='top' rowspan='1' colspan='1'>concatenation
							      >	     * attribute value of every child node, excluding COMMENT
							      >	     * PROCESSING_INSTRUCTION_NODE nodes</td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>ATTRIBUTE_NOD
							      >	     * CDATA_SECTION_NODE, COMMENT_NODE, PROCESSING_INSTRUCTI
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * <code>nodeValue</code></td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>DOCUMENT_NODE
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * null</td>
							      >	     * </tr>
							      >	     * </table>
							      >	     * @exception DOMException
							      >	     *   NO_MODIFICATION_ALLOWED_ERR: Raised when the node is
							      >	     * @exception DOMException
							      >	     *   DOMSTRING_SIZE_ERR: Raised when it would return more
							      >	     *   fit in a <code>DOMString</code> variable on the impl
							      >	     *   platform.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public void setTextContent(String textContent)
							      >	        throws DOMException {
							      >	        setNodeValue(textContent);
							      >	    }
							      >	    
							      >	    /**
							      >	     * This attribute returns the text content of this node a
							      >	     * descendants. When it is defined to be null, setting it
							      >	     * When set, any possible children this node may have are
							      >	     * replaced by a single <code>Text</code> node containing
							      >	     * this attribute is set to. On getting, no serialization
							      >	     * the returned string does not contain any markup. No wh
							      >	     * normalization is performed, the returned string does n
							      >	     * element content whitespaces . Similarly, on setting, n
							      >	     * performed either, the input string is taken as pure te
							      >	     * <br>The string returned is made of the text content of
							      >	     * depending on its type, as defined below:
							      >	     * <table border='1'>
							      >	     * <tr>
							      >	     * <th>Node type</th>
							      >	     * <th>Content</th>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * ELEMENT_NODE, ENTITY_NODE, ENTITY_REFERENCE_NODE,
							      >	     * DOCUMENT_FRAGMENT_NODE</td>
							      >	     * <td valign='top' rowspan='1' colspan='1'>concatenation
							      >	     * attribute value of every child node, excluding COMMENT
							      >	     * PROCESSING_INSTRUCTION_NODE nodes</td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>ATTRIBUTE_NOD
							      >	     * CDATA_SECTION_NODE, COMMENT_NODE, PROCESSING_INSTRUCTI
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * <code>nodeValue</code></td>
							      >	     * </tr>
							      >	     * <tr>
							      >	     * <td valign='top' rowspan='1' colspan='1'>DOCUMENT_NODE
							      >	     * <td valign='top' rowspan='1' colspan='1'>
							      >	     * null</td>
							      >	     * </tr>
							      >	     * </table>
							      >	     * @exception DOMException
							      >	     *   NO_MODIFICATION_ALLOWED_ERR: Raised when the node is
							      >	     * @exception DOMException
							      >	     *   DOMSTRING_SIZE_ERR: Raised when it would return more
							      >	     *   fit in a <code>DOMString</code> variable on the impl
							      >	     *   platform.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getTextContent() throws DOMException {
							      >	        return getNodeValue();  // overriden in some subclass
							      >	    }
							      >
							      >	    /**
							      >	     * Compares a node with this node with regard to their po
							      >	     * document.
							      >	     * @param other The node to compare against this node.
							      >	     * @return Returns how the given node is positioned relat
							      >	     *   node.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public short compareDocumentPosition(Node other) throws D
							      >	        return 0;
							      >	    }
							      >
							      >	    /**
							      >	     * The absolute base URI of this node or <code>null</code
							      >	     * This value is computed according to . However, when th
							      >	     * <code>Document</code> supports the feature "HTML" , th
							      >	     * computed using first the value of the href attribute o
							      >	     * element if any, and the value of the <code>documentURI
							      >	     * attribute from the <code>Document</code> interface oth
							      >	     * <br> When the node is an <code>Element</code>, a <code
							      >	     * or a a <code>ProcessingInstruction</code>, this attrib
							      >	     * the properties [base URI] defined in . When the node i
							      >	     * <code>Notation</code>, an <code>Entity</code>, or an
							      >	     * <code>EntityReference</code>, this attribute represent
							      >	     * properties [declaration base URI] in the . How will th
							      >	     * by resolution of relative namespace URIs issue?It's no
							      >	     * only be on Document, Element, ProcessingInstruction, E
							      >	     * Notation nodes, according to the infoset? If not, what
							      >	     * on other nodes? Null? An empty string? I think it shou
							      >	     * parent's.No.Should this be read-only and computed or a
							      >	     * read-write attribute?Read-only and computed (F2F 19 Ju
							      >	     * teleconference 30 May 2001).If the base HTML element i
							      >	     * attached to a document, does the insert change the Doc
							      >	     * Yes. (F2F 26 Sep 2001)
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getBaseURI() {
							      >	        return null;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * Renaming node
							      >	     */
							      >	    public Node renameNode(Node n,
							      >	                           String namespaceURI,
							      >	                           String name)
							      >	                           throws DOMException{
							      >	        return n;
							      >	    }
							      >	    
							      >	    /**
							      >	     *  DOM Level 3
							      >	     *  Normalize document.
							      >	     */
							      >	    public void normalizeDocument(){   
							      >
							      >	    }
							      >	    
							      >	    /**
							      >	     *  The configuration used when <code>Document.normalizeD
							      >	     * invoked.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public DOMConfiguration getDomConfig(){
							      >	       return null;
							      >	    }
							      >
							      >	    
							      >	    /** DOM Level 3 feature: documentURI */
							      >	    protected String fDocumentURI;
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     */
							      >	    public void setDocumentURI(String documentURI){
							      >	        
							      >	        fDocumentURI= documentURI;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * The location of the document or <code>null</code> if u
							      >	     * <br>Beware that when the <code>Document</code> support
							      >	     * "HTML" , the href attribute of the HTML BASE element t
							      >	     * over this attribute.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getDocumentURI(){
							      >	        return fDocumentURI;
							      >	    }
							      >
							      >	    /** DOM Level 3 feature: Document actualEncoding */
							      >	    protected String actualEncoding;
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * An attribute specifying the actual encoding of this do
							      >	     * <code>null</code> otherwise.
							      >	     * <br> This attribute represents the property [character
							      >	     * defined in .
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getActualEncoding() {
							      >	        return actualEncoding;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * An attribute specifying the actual encoding of this do
							      >	     * <code>null</code> otherwise.
							      >	     * <br> This attribute represents the property [character
							      >	     * defined in .
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public void setActualEncoding(String value) {
							      >	        actualEncoding = value;
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     */
							      >	    public Text replaceWholeText(String content)
							      >	                                 throws DOMException{
							      >	/*
							      >
							      >	        if (needsSyncData()) {
							      >	            synchronizeData();
							      >	        }
							      >
							      >	        // make sure we can make the replacement
							      >	        if (!canModify(nextSibling)) {
							      >	            throw new DOMException(DOMException.NO_MODIFICATI
							      >	                DOMMessageFormatter.formatMessage(DOMMessageF
							      >	        }
							      >
							      >	        Node parent = this.getParentNode();
							      >	        if (content == null || content.length() == 0) {
							      >	            // remove current node
							      >	            if (parent !=null) { // check if node in the tree
							      >	                parent.removeChild(this);
							      >	                return null;
							      >	            }
							      >	        }
							      >	        Text currentNode = null;
							      >	        if (isReadOnly()){
							      >	            Text newNode = this.ownerDocument().createTextNod
							      >	            if (parent !=null) { // check if node in the tree
							      >	                parent.insertBefore(newNode, this);
							      >	                parent.removeChild(this);
							      >	                currentNode = newNode;
							      >	            } else {
							      >	                return newNode;
							      >	            }
							      >	        }  else {
							      >	            this.setData(content);
							      >	            currentNode = this;
							      >	        }
							      >	        Node sibling =  currentNode.getNextSibling();
							      >	        while ( sibling !=null) {
							      >	            parent.removeChild(sibling);
							      >	            sibling = currentNode.getNextSibling();
							      >	        }
							      >
							      >	        return currentNode;
							      >	*/
							      >	        return null; //Pending
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * Returns all text of <code>Text</code> nodes logically-
							      >	     * nodes to this node, concatenated in document order.
							      >	     * @since DOM Level 3
							      >	     */
							      >	    public String getWholeText(){
							      >
							      >	/*
							      >	        if (needsSyncData()) {
							      >	            synchronizeData();
							      >	        }
							      >	        if (nextSibling == null) {
							      >	            return data;
							      >	        }
							      >	        StringBuffer buffer = new StringBuffer();
							      >	        if (data != null && data.length() != 0) {
							      >	            buffer.append(data);
							      >	        }
							      >	        getWholeText(nextSibling, buffer);
							      >	        return buffer.toString();
							      >	*/
							      >	        return null; // PENDING
							      >
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3
							      >	     * Returns whether this text node contains whitespace in 
							      >	     * often abusively called "ignorable whitespace".
							      >	     */
							      >	    public boolean isWhitespaceInElementContent(){
							      >	        return false;
							      >	    }
							      >
							      >	    /**
							      >	     * NON-DOM: set the type of this attribute to be ID type.
							      >	     *
							      >	     * @param id
							      >	     */
							      >	    public void setIdAttribute(boolean id){
							      >	        //PENDING
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3: register the given attribute node as an I
							      >	     */
							      >	    public void setIdAttribute(String name, boolean makeId) {
							      >	        //PENDING
							      >	    }
							      >	       
							      >	    /**
							      >	     * DOM Level 3: register the given attribute node as an I
							      >	     */
							      >	    public void setIdAttributeNode(Attr at, boolean makeId) {
							      >	        //PENDING
							      >	    }
							      >
							      >	    /**
							      >	     * DOM Level 3: register the given attribute node as an I
							      >	     */
							      >	    public void setIdAttributeNS(String namespaceURI, String 
							      >	                                    boolean makeId) {
							      >	        //PENDING
							      >	    }
							      >	    
							      >	    /**
							      >	     * Method getSchemaTypeInfo.
							      >	     * @return TypeInfo
							      >	     */
							      >	    public TypeInfo getSchemaTypeInfo(){
							      >	        return null; //PENDING
							      >	    }
							      >
							      >	    public boolean isId() {
							      >	        return false; //PENDING
							      >	    }
							      >	  
							      >	    private String xmlEncoding;
							      >	    public String getXmlEncoding ( ) {
							      >	        return xmlEncoding;
							      >	    }
							      >	    public void setXmlEncoding ( String xmlEncoding ) {
							      >	        this.xmlEncoding = xmlEncoding;
							      >	    }
							      >	  
							      >	    private boolean xmlStandalone;
							      >	    public boolean getXmlStandalone() {
							      >	        return xmlStandalone;
							      >	    }
							      >
							      >	    public void setXmlStandalone(boolean xmlStandalone) throw
							      >	        this.xmlStandalone = xmlStandalone;
							      >	    }
							      >
							      >	    private String xmlVersion;
							      >	    public String getXmlVersion() {
							      >	        return xmlVersion;
							      >	    }
							      >
							      >	    public void setXmlVersion(String xmlVersion) throws DOMEx
							      >	        this.xmlVersion = xmlVersion;
							      >	    }
    error(XMLErrorResources.ER_FUNCTION_NOT_SUPPORTED);	      <
							      <
    return null;					      <
  }							      <
							      <
  /**							      <
   * <p>EXPERIMENTAL! Based on the <a			      <
   * href='http://www.w3.org/TR/2001/WD-DOM-Level-3-Core-2001 <
   * Object Model (DOM) Level 3 Core Working Draft of 5 June  <
   * <p>						      <
   * An attribute specifying, as part of the XML declaration, <
   * number of this document. This is <code>null</code> when  <
   * @since DOM Level 3					      <
   *							      <
   * NEEDSDOC @param version				      <
   */							      <
  public void setVersion(String version)		      <
  {							      <
    error(XMLErrorResources.ER_FUNCTION_NOT_SUPPORTED);	      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/URI.java xalan-j_2_7_0/src/org/apache/xml/utils/URI.java
 * $Id: URI.java,v 1.11 2004/02/17 04:21:14 minchau Exp $     |	 * $Id: URI.java,v 1.13 2005/02/22 21:35:41 ytalwar Exp $
							      >	    static final long serialVersionUID = 7096266377907081897L
							      >	      // This is a fix for XALANJ-2059.
							      >	      if(m_scheme != null && p_base != null)
							      >	      {	  	
							      >	        // a) If <uriSpec> starts with a slash (/), it means 
							      >	        //    and p_base can be ignored.
							      >	        //    For example,
							      >	        //    uriSpec = file:/myDIR/myXSLFile.xsl
							      >	        //    p_base = file:/myWork/
							      >	        //
							      >	        //    Here, uriSpec has absolute path after scheme fi
							      >	        //    Hence p_base can be ignored.
							      >	        // 
							      >	        // b) Similarily, according to RFC 2396, uri is resol
							      >	        //    if scheme in <uriSpec> is same as scheme in <p_
							      >	        // 
							      >	        // c) if <p_base> is not hierarchical, it can be igno
							      >	        //
							      >	        if(uriSpec.startsWith("/") || !m_scheme.equals(p_base
							      >	        {
							      >	          p_base = null;
							      >	        }
							      >	      }
							      >	      // Fix for XALANJ-2059  
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/WrappedRuntimeException.java xalan-j_2_7_0/src/org/apache/xml/utils/WrappedRuntimeException.java
 * $Id: WrappedRuntimeException.java,v 1.6 2004/02/17 04:21:1 |	 * $Id: WrappedRuntimeException.java,v 1.7 2004/08/17 18:57:2
							      >	    static final long serialVersionUID = 7140414456714658073L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/WrongParserException.java xalan-j_2_7_0/src/org/apache/xml/utils/WrongParserException.java
 * $Id: WrongParserException.java,v 1.4 2004/02/17 04:21:14 m |	 * $Id: WrongParserException.java,v 1.5 2004/08/17 18:57:22 j
							      >	    static final long serialVersionUID = 6481643018533043846L
只在 xalan-j_2_7_0/src/org/apache/xml/utils 存在：XML11Char.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/XMLCharacterRecognizer.java xalan-j_2_7_0/src/org/apache/xml/utils/XMLCharacterRecognizer.java
 * $Id: XMLCharacterRecognizer.java,v 1.7 2004/02/17 04:21:14 |	 * $Id: XMLCharacterRecognizer.java,v 1.8 2005/01/23 01:02:10
   * @param buf StringBuffer to check as XML whitespace.      |	   * @param s String to check as XML whitespace.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/XMLChar.java xalan-j_2_7_0/src/org/apache/xml/utils/XMLChar.java
    public static final byte[] CHARS = new byte[1 << 16];     |	    private static final byte[] CHARS = new byte[1 << 16];
     * @param name string to check			      |	     * @param ncName string to check
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/XMLReaderManager.java xalan-j_2_7_0/src/org/apache/xml/utils/XMLReaderManager.java
 * $Id: XMLReaderManager.java,v 1.2 2004/02/17 04:21:14 minch |	 * $Id: XMLReaderManager.java,v 1.5 2005/04/26 06:04:29 minch
     * {@link releaseXMLReader}.			      |	     * {@link #releaseXMLReader}.
        // for this thread, mark it as no longer being in use |	        // for this thread, remove it from the m_isUse list.
        if (m_readers.get() == reader) {		      |	        if (m_readers.get() == reader && reader != null) {
            m_inUse.put(reader, Boolean.FALSE);		      |	            m_inUse.remove(reader);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/XMLStringDefault.java xalan-j_2_7_0/src/org/apache/xml/utils/XMLStringDefault.java
 * $Id: XMLStringDefault.java,v 1.3 2004/02/17 04:21:14 minch |	 * $Id: XMLStringDefault.java,v 1.4 2005/07/21 18:08:34 zonga
   * "Fahrvergngen".toUpperCase() returns "FAHRVERGNGEN"      |	   * "Fahrvergn&uuml;gen".toUpperCase() returns "FAHRVERGN&Uu
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xml/utils/XMLString.java xalan-j_2_7_0/src/org/apache/xml/utils/XMLString.java
 * $Id: XMLString.java,v 1.4 2004/02/17 04:21:14 minchau Exp  |	 * $Id: XMLString.java,v 1.5 2005/07/21 18:08:34 zongaro Exp 
   * "Fahrvergngen".toUpperCase() returns "FAHRVERGNGEN"      |	   * "Fahrvergn&uuml;gen".toUpperCase() returns "FAHRVERGN&Uu
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/AttributeIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/AttributeIterator.java
 * $Id: AttributeIterator.java,v 1.15 2004/02/17 04:32:08 min |	 * $Id: AttributeIterator.java,v 1.16 2004/08/17 19:25:34 jyc
							      >	    static final long serialVersionUID = -8417986700712229686
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/AxesWalker.java xalan-j_2_7_0/src/org/apache/xpath/axes/AxesWalker.java
 * $Id: AxesWalker.java,v 1.28 2004/02/17 04:32:08 minchau Ex |	 * $Id: AxesWalker.java,v 1.29 2004/08/17 19:25:34 jycli Exp 
							      >	    static final long serialVersionUID = -2966031951306601247
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/BasicTestIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/BasicTestIterator.java
 * $Id: BasicTestIterator.java,v 1.6 2004/02/17 04:32:08 minc |	 * $Id: BasicTestIterator.java,v 1.7 2004/08/17 19:25:34 jycl
							      >	    static final long serialVersionUID = 3505378079378096623L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/ChildIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/ChildIterator.java
 * $Id: ChildIterator.java,v 1.15 2004/02/17 04:32:08 minchau |	 * $Id: ChildIterator.java,v 1.17 2004/08/17 19:25:34 jycli E
							      >	import org.apache.xml.dtm.DTMFilter;
							      >	    static final long serialVersionUID = -6935428015142993583
							      >
							      >	    // This iterator matches all kinds of nodes
							      >	    initNodeTest(DTMFilter.SHOW_ALL);
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/ChildTestIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/ChildTestIterator.java
 * $Id: ChildTestIterator.java,v 1.20 2004/02/17 04:32:08 min |	 * $Id: ChildTestIterator.java,v 1.22 2005/01/23 01:02:10 mcn
							      >	    static final long serialVersionUID = -7936835957960705722
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/DescendantIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/DescendantIterator.java
 * $Id: DescendantIterator.java,v 1.22 2004/02/17 04:32:08 mi |	 * $Id: DescendantIterator.java,v 1.25 2005/01/23 01:02:10 mc
							      >	    static final long serialVersionUID = -1190338607743976938
   * @param compiler A reference to the Compiler that contain <
   * @param opPos The position within the op map, which conta <
   * location path expression for this itterator.	      <
   *							      <
   * @throws javax.xml.transform.TransformerException	      <
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
       || localName == NodeTest.WILD			      |	       || NodeTest.WILD.equals(localName)
       || namespace == NodeTest.WILD)			      |	       || NodeTest.WILD.equals(namespace))
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/FilterExprIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/FilterExprIterator.java
 * $Id: FilterExprIterator.java,v 1.5 2004/02/17 04:32:08 min |	 * $Id: FilterExprIterator.java,v 1.7 2005/01/23 01:02:10 mcn
							      >	    static final long serialVersionUID = 2552176105165737614L
   * Create a ChildTestIterator object.			      |	   * Create a FilterExprIterator object.
   * @param traverser Traverser that tells how the KeyIterato <
   *							      <
   * @throws javax.xml.transform.TransformerException	      <
   * Create a ChildTestIterator object.			      |	   * Create a FilterExprIterator object.
   *							      <
   * @param traverser Traverser that tells how the KeyIterato <
   * @throws javax.xml.transform.TransformerException	      <
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
   * @param owner The owner of the visitor, where that path m <
   *              rewritten if needed.			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/FilterExprIteratorSimple.java xalan-j_2_7_0/src/org/apache/xpath/axes/FilterExprIteratorSimple.java
 * $Id: FilterExprIteratorSimple.java,v 1.5 2004/02/17 04:32: |	 * $Id: FilterExprIteratorSimple.java,v 1.7 2005/01/23 01:02:
							      >	    static final long serialVersionUID = -6978977187025375579
   * Create a ChildTestIterator object.			      |	   * Create a FilterExprIteratorSimple object.
   * @param traverser Traverser that tells how the KeyIterato <
   *							      <
   * @throws javax.xml.transform.TransformerException	      <
   * Create a ChildTestIterator object.			      |	   * Create a FilterExprIteratorSimple object.
   *							      <
   * @param traverser Traverser that tells how the KeyIterato <
   * @throws javax.xml.transform.TransformerException	      <
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
   * @param owner The owner of the visitor, where that path m <
   *              rewritten if needed.			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/FilterExprWalker.java xalan-j_2_7_0/src/org/apache/xpath/axes/FilterExprWalker.java
 * $Id: FilterExprWalker.java,v 1.24 2004/02/17 04:32:08 minc |	 * $Id: FilterExprWalker.java,v 1.26 2005/01/23 01:02:10 mcna
							      >	    static final long serialVersionUID = 5457182471424488375L
	 * @param owner The owner of the visitor, where that  <
	 *              rewritten if needed.		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/IteratorPool.java xalan-j_2_7_0/src/org/apache/xpath/axes/IteratorPool.java
 * $Id: IteratorPool.java,v 1.8 2004/02/17 04:32:08 minchau E |	 * $Id: IteratorPool.java,v 1.9 2004/08/17 19:25:34 jycli Exp
							      >	    static final long serialVersionUID = -460927331149566998L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/LocPathIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/LocPathIterator.java
 * $Id: LocPathIterator.java,v 1.41 2004/02/17 04:32:08 minch |	 * $Id: LocPathIterator.java,v 1.43 2005/01/23 01:02:10 mcnam
							      >	    static final long serialVersionUID = -4602476357268405754
   * @param nscontext The namespace context for this iterator <
   * should be OK if null.				      <
   * @param namespaceContext The context in which namespaces  <
   * XPath are supposed to be expanded.			      <
   * 							      <
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/MatchPatternIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/MatchPatternIterator.java
 * $Id: MatchPatternIterator.java,v 1.8 2004/02/17 04:32:08 m |	 * $Id: MatchPatternIterator.java,v 1.11 2005/01/23 01:02:10 
							      >	    static final long serialVersionUID = -5201153767396296474
      System.out.println("axis: "+Axis.names[m_superAxis]);   |	      System.out.println("axis: "+Axis.getNames(m_superAxis))
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/NodeSequence.java xalan-j_2_7_0/src/org/apache/xpath/axes/NodeSequence.java
 * $Id: NodeSequence.java,v 1.11 2004/02/17 04:32:08 minchau  |	 * $Id: NodeSequence.java,v 1.14 2005/01/23 01:02:10 mcnamara
							      >	    static final long serialVersionUID = 3866261934726581044L
   * @param iter Cloned (not static) DTMIterator.	      |	   * @param nodeVector
  	return super.clone();				      |	          NodeSequence clone = (NodeSequence) super.clone();
							      >	          if (null != m_iter) clone.m_iter = (DTMIterator) m_
							      >	          return clone;
   * @param v Vector of nodes, presumably containing Nodes    <
   * @param obj Node object.				      <
   *							      <
   * @param test true if we should test for doc order	      <
   * @param support The XPath runtime context.		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/OneStepIteratorForward.java xalan-j_2_7_0/src/org/apache/xpath/axes/OneStepIteratorForward.java
 * $Id: OneStepIteratorForward.java,v 1.10 2004/02/17 04:32:0 |	 * $Id: OneStepIteratorForward.java,v 1.12 2005/01/23 01:02:1
							      >	    static final long serialVersionUID = -1576936606178190566
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/OneStepIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/OneStepIterator.java
 * $Id: OneStepIterator.java,v 1.15 2004/02/17 04:32:08 minch |	 * $Id: OneStepIterator.java,v 1.17 2005/01/23 01:02:10 mcnam
							      >	    static final long serialVersionUID = 4623710779664998283L
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/PredicatedNodeTest.java xalan-j_2_7_0/src/org/apache/xpath/axes/PredicatedNodeTest.java
 * $Id: PredicatedNodeTest.java,v 1.15 2004/02/17 04:32:08 mi |	 * $Id: PredicatedNodeTest.java,v 1.17 2005/01/23 01:02:11 mc
							      >	    static final long serialVersionUID = -6193530757296377351
	 * @param owner The owner of the visitor, where that  <
	 *              rewritten if needed.		      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/ReverseAxesWalker.java xalan-j_2_7_0/src/org/apache/xpath/axes/ReverseAxesWalker.java
 * $Id: ReverseAxesWalker.java,v 1.14 2004/02/17 04:32:08 min |	 * $Id: ReverseAxesWalker.java,v 1.15 2004/08/17 19:25:34 jyc
							      >	    static final long serialVersionUID = 2847007647832768941L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/RTFIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/RTFIterator.java
 * $Id: RTFIterator.java,v 1.6 2004/02/17 04:32:08 minchau Ex |	 * $Id: RTFIterator.java,v 1.7 2004/08/17 19:25:34 jycli Exp 
							      >	    static final long serialVersionUID = 7658117366258528996L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/SelfIteratorNoPredicate.java xalan-j_2_7_0/src/org/apache/xpath/axes/SelfIteratorNoPredicate.java
 * $Id: SelfIteratorNoPredicate.java,v 1.12 2004/02/17 04:32: |	 * $Id: SelfIteratorNoPredicate.java,v 1.14 2005/01/23 01:02:
							      >	    static final long serialVersionUID = -4226887905279814201
   *							      <
   * @param compiler A reference to the Compiler that contain <
   * @param opPos The position within the op map, which conta <
   * location path expression for this itterator.	      <
   * @param analysis Analysis bits.			      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/UnionChildIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/UnionChildIterator.java
 * $Id: UnionChildIterator.java,v 1.5 2004/02/17 04:32:08 min |	 * $Id: UnionChildIterator.java,v 1.6 2004/08/17 19:25:34 jyc
							      >	    static final long serialVersionUID = 3500298482193003495L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/UnionPathIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/UnionPathIterator.java
 * $Id: UnionPathIterator.java,v 1.33 2004/02/17 04:32:08 min |	 * $Id: UnionPathIterator.java,v 1.36 2005/01/23 01:02:11 mcn
							      >	    static final long serialVersionUID = -3910351546843826781
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this 
   * @param iter non-null reference to a location path iterat |	   * @param expr non-null reference to a location path iterat
//    if (m_iterators != null)				      |	    if (m_iterators != null)
//    {							      |	    {
//      int n = m_iterators.length;			      |	      int n = m_iterators.length;
//							      |	      
//      clone.m_iterators = new LocPathIterator[n];	      |	      clone.m_iterators = new DTMIterator[n];
//							      |
//      for (int i = 0; i < n; i++)			      |	      for (int i = 0; i < n; i++)
//      {						      |	      {
//        clone.m_iterators[i] = (LocPathIterator)m_iterators |	        clone.m_iterators[i] = (DTMIterator)m_iterators[i].cl
//      }						      |	      }
//    }							      |	    }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/WalkerFactory.java xalan-j_2_7_0/src/org/apache/xpath/axes/WalkerFactory.java
 * $Id: WalkerFactory.java,v 1.28 2004/02/17 04:32:08 minchau |	 * $Id: WalkerFactory.java,v 1.30 2005/01/23 01:02:11 mcnamar
   * @param xpath The xpath that is executing.		      <
   * @param context The current source tree context node.     <
   *							      <
   * @param xpath The xpath that is executing.		      <
   * @param context The current source tree context node.     <
   *							      <
   * @param stepIndex The top-level step index withing the it <
      System.out.print(", axis: " + Axis.names[ai.getAxis()]) |	      System.out.print(", axis: " + Axis.getNames(ai.getAxis(
      System.out.print(", predAxis: " + Axis.names[ai.getAxis |	      System.out.print(", predAxis: " + Axis.getNames(ai.getA
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/WalkingIterator.java xalan-j_2_7_0/src/org/apache/xpath/axes/WalkingIterator.java
 * $Id: WalkingIterator.java,v 1.10 2004/02/17 04:32:08 minch |	 * $Id: WalkingIterator.java,v 1.12 2005/01/23 01:02:11 mcnam
							      >	    static final long serialVersionUID = 9110225941815665906L
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/axes/WalkingIteratorSorted.java xalan-j_2_7_0/src/org/apache/xpath/axes/WalkingIteratorSorted.java
 * $Id: WalkingIteratorSorted.java,v 1.11 2004/02/17 04:32:08 |	 * $Id: WalkingIteratorSorted.java,v 1.12 2004/08/17 19:25:34
							      >	    static final long serialVersionUID = -4512512007542368213
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/CachedXPathAPI.java xalan-j_2_7_0/src/org/apache/xpath/CachedXPathAPI.java
 * $Id: CachedXPathAPI.java,v 1.5 2004/02/17 04:30:02 minchau |	 * $Id: CachedXPathAPI.java,v 1.7 2005/01/24 20:51:23 zongaro
  /** Default constructor. Establishes its own XPathContext,  |	  /**
   *  its own DTMManager.  Good choice for simple uses.	      |	   * <p>Default constructor. Establishes its own {@link XPath
   * */							      |	   * its own {@link org.apache.xml.dtm.DTMManager}.
							      >	   * Good choice for simple uses.</p>
							      >	   * <p>Note that any particular instance of {@link CachedXPa
							      >	   * operated upon by multiple threads without synchronizatio
							      >	   * not currently support multithreaded access to a single
							      >	   * {@link org.apache.xml.dtm.DTM}.</p>
							      >	   */
  /** This constructor shares its XPathContext with a pre-exi |	  /**
   *  CachedXPathAPI.  That allows sharing document models (D |	   * <p>This constructor shares its {@link XPathContext} with
   *  previously established location state.		      |	   * {@link CachedXPathAPI}.  That allows sharing document mo
   *							      |	   * ({@link org.apache.xml.dtm.DTM}) and previously establis
   *  Note that the original CachedXPathAPI and the new one s |	   * state.</p>
   *  be operated concurrently; we do not support multithread |	   * <p>Note that the original {@link CachedXPathAPI} and the
   *  to a single DTM at this time.			      |	   * not be operated upon concurrently; we do not support mul
							      >	   * to a single {@link org.apache.xml.dtm.DTM} at this time.
							      >	   * any particular instance of {@link CachedXPathAPI} must n
							      >	   * upon by multiple threads without synchronization.</p>
							      >	   * <p>%REVIEW% Should this instead do a clone-and-reset on 
   *  %REVIEW% Should this instead do a clone-and-reset on th |	   */
   * */							      <
   *  @param namespaceNode The node from which prefixes in th <
   *   @param namespaceNode The node from which prefixes in t <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/compiler/Compiler.java xalan-j_2_7_0/src/org/apache/xpath/compiler/Compiler.java
 * $Id: Compiler.java,v 1.36 2004/02/17 04:32:49 minchau Exp  |	 * $Id: Compiler.java,v 1.41 2005/05/17 21:25:46 jycli Exp $
							      >	import org.apache.xpath.functions.FuncExtFunctionAvailable;
							      >	   * @param fTable  The FunctionTable object where the xpath 
							      >	   *                functions are stored.
  public Compiler(ErrorListener errorHandler, SourceLocator l |	  public Compiler(ErrorListener errorHandler, SourceLocator l
							      >	            FunctionTable fTable)
							      >	    m_functionTable = fTable;
   * @param xctxt The execution context.		      <
   * @param context The current source tree context node.     <
   * @param callback Interface that implements the processLoc <
   * @param callbackInfo Object that will be passed to the pr <
							      >	   * Get the function table  
							      >	   */
							      >	  FunctionTable getFunctionTable()
							      >	  {
							      >	    return m_functionTable;
							      >	  }
							      >
							      >	  /**
      Function func = FunctionTable.getFunction(funcID);      |	      Function func = m_functionTable.getFunction(funcID);
							      >	      
							      >	      /**
							      >	       * It is a trick for function-available. Since the func
							      >	       * instance field, insert this table at compilation tim
							      >	       */
							      >	      
							      >	      if (func instanceof FuncExtFunctionAvailable)
							      >	          ((FuncExtFunctionAvailable) func).setFunctionTable(
        java.lang.String name = FunctionTable.m_functions[fun |	        java.lang.String name = m_functionTable.getFunctionNa
							      >	  
							      >	  /**
							      >	   * The FunctionTable for all xpath build-in functions
							      >	   */
							      >	  private FunctionTable m_functionTable;
只在 xalan-j_2_6_0/src/org/apache/xpath/compiler 存在：FuncLoader.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/compiler/FunctionTable.java xalan-j_2_7_0/src/org/apache/xpath/compiler/FunctionTable.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: FunctionTable.java,v 1.6 2004/02/17 04:32:48 minchau  |	 * $Id: FunctionTable.java,v 1.9 2005/05/17 21:25:46 jycli Ex
							      >	import java.util.HashMap;
							      >	import javax.xml.transform.TransformerException;
  public static FuncLoader m_functions[];		      |	  private static Class m_functions[];
							      >	  /** Table of function name to function ID associations. */
							      >	  private static HashMap m_functionID = new HashMap();
							      >	    
							      >	  /**
							      >	   * The function table contains customized functions
							      >	   */
							      >	  private Class m_functions_customer[] = new Class[NUM_ALLOWA
							      >
							      >	  /**
							      >	   * Table of function name to function ID associations for c
							      >	   */
							      >	  private HashMap m_functionID_customer = new HashMap();
							      >	  
  static int m_funcNextFreeIndex = NUM_BUILT_IN_FUNCS;	      |	  private int m_funcNextFreeIndex = NUM_BUILT_IN_FUNCS;
							      |	  
    m_functions = new FuncLoader[NUM_BUILT_IN_FUNCS + NUM_ALL |	    m_functions = new Class[NUM_BUILT_IN_FUNCS];
    m_functions[FUNC_CURRENT] = new FuncLoader("FuncCurrent", |	    m_functions[FUNC_CURRENT] = org.apache.xpath.functions.Fu
    m_functions[FUNC_LAST] = new FuncLoader("FuncLast", FUNC_ |	    m_functions[FUNC_LAST] = org.apache.xpath.functions.FuncL
    m_functions[FUNC_POSITION] = new FuncLoader("FuncPosition |	    m_functions[FUNC_POSITION] = org.apache.xpath.functions.F
                                                FUNC_POSITION |	    m_functions[FUNC_COUNT] = org.apache.xpath.functions.Func
    m_functions[FUNC_COUNT] = new FuncLoader("FuncCount", FUN |	    m_functions[FUNC_ID] = org.apache.xpath.functions.FuncId.
    m_functions[FUNC_ID] = new FuncLoader("FuncId", FUNC_ID); <
      new FuncLoader("org.apache.xalan.templates.FuncKey", FU |	      org.apache.xalan.templates.FuncKey.class;
							      |	    m_functions[FUNC_LOCAL_PART] = 
    // m_functions[FUNC_DOC] = new FuncDoc();		      |	      org.apache.xpath.functions.FuncLocalPart.class;
    m_functions[FUNC_LOCAL_PART] = new FuncLoader("FuncLocalP |	    m_functions[FUNC_NAMESPACE] = 
            FUNC_LOCAL_PART);				      |	      org.apache.xpath.functions.FuncNamespace.class;
    m_functions[FUNC_NAMESPACE] = new FuncLoader("FuncNamespa |	    m_functions[FUNC_QNAME] = org.apache.xpath.functions.Func
            FUNC_NAMESPACE);				      |	    m_functions[FUNC_GENERATE_ID] = 
    m_functions[FUNC_QNAME] = new FuncLoader("FuncQname", FUN |	      org.apache.xpath.functions.FuncGenerateId.class;
    m_functions[FUNC_GENERATE_ID] = new FuncLoader("FuncGener |	    m_functions[FUNC_NOT] = org.apache.xpath.functions.FuncNo
            FUNC_GENERATE_ID);				      |	    m_functions[FUNC_TRUE] = org.apache.xpath.functions.FuncT
    m_functions[FUNC_NOT] = new FuncLoader("FuncNot", FUNC_NO |	    m_functions[FUNC_FALSE] = org.apache.xpath.functions.Func
    m_functions[FUNC_TRUE] = new FuncLoader("FuncTrue", FUNC_ |	    m_functions[FUNC_BOOLEAN] = org.apache.xpath.functions.Fu
    m_functions[FUNC_FALSE] = new FuncLoader("FuncFalse", FUN |	    m_functions[FUNC_LANG] = org.apache.xpath.functions.FuncL
    m_functions[FUNC_BOOLEAN] = new FuncLoader("FuncBoolean", |	    m_functions[FUNC_NUMBER] = org.apache.xpath.functions.Fun
    m_functions[FUNC_LANG] = new FuncLoader("FuncLang", FUNC_ |	    m_functions[FUNC_FLOOR] = org.apache.xpath.functions.Func
    m_functions[FUNC_NUMBER] = new FuncLoader("FuncNumber", F |	    m_functions[FUNC_CEILING] = org.apache.xpath.functions.Fu
    m_functions[FUNC_FLOOR] = new FuncLoader("FuncFloor", FUN |	    m_functions[FUNC_ROUND] = org.apache.xpath.functions.Func
    m_functions[FUNC_CEILING] = new FuncLoader("FuncCeiling", |	    m_functions[FUNC_SUM] = org.apache.xpath.functions.FuncSu
    m_functions[FUNC_ROUND] = new FuncLoader("FuncRound", FUN |	    m_functions[FUNC_STRING] = org.apache.xpath.functions.Fun
    m_functions[FUNC_SUM] = new FuncLoader("FuncSum", FUNC_SU |	    m_functions[FUNC_STARTS_WITH] = 
    m_functions[FUNC_STRING] = new FuncLoader("FuncString", F |	      org.apache.xpath.functions.FuncStartsWith.class;
    m_functions[FUNC_STARTS_WITH] = new FuncLoader("FuncStart |	    m_functions[FUNC_CONTAINS] = org.apache.xpath.functions.F
            FUNC_STARTS_WITH);				      |	    m_functions[FUNC_SUBSTRING_BEFORE] = 
    m_functions[FUNC_CONTAINS] = new FuncLoader("FuncContains |	      org.apache.xpath.functions.FuncSubstringBefore.class;
                                                FUNC_CONTAINS |	    m_functions[FUNC_SUBSTRING_AFTER] = 
    m_functions[FUNC_SUBSTRING_BEFORE] = new FuncLoader("Func |	      org.apache.xpath.functions.FuncSubstringAfter.class;
            FUNC_SUBSTRING_BEFORE);			      |	    m_functions[FUNC_NORMALIZE_SPACE] = 
    m_functions[FUNC_SUBSTRING_AFTER] = new FuncLoader("FuncS |	      org.apache.xpath.functions.FuncNormalizeSpace.class;
            FUNC_SUBSTRING_AFTER);			      |	    m_functions[FUNC_TRANSLATE] = 
    m_functions[FUNC_NORMALIZE_SPACE] = new FuncLoader("FuncN |	      org.apache.xpath.functions.FuncTranslate.class;
            FUNC_NORMALIZE_SPACE);			      |	    m_functions[FUNC_CONCAT] = org.apache.xpath.functions.Fun
    m_functions[FUNC_TRANSLATE] = new FuncLoader("FuncTransla |	    m_functions[FUNC_SYSTEM_PROPERTY] = 
            FUNC_TRANSLATE);				      |	      org.apache.xpath.functions.FuncSystemProperty.class;
    m_functions[FUNC_CONCAT] = new FuncLoader("FuncConcat", F <
							      <
    //m_functions[FUNC_FORMAT_NUMBER] = new FuncFormatNumber( <
    m_functions[FUNC_SYSTEM_PROPERTY] = new FuncLoader("FuncS <
            FUNC_SYSTEM_PROPERTY);			      <
      new FuncLoader("FuncExtFunctionAvailable", FUNC_EXT_FUN |	      org.apache.xpath.functions.FuncExtFunctionAvailable.cla
      new FuncLoader("FuncExtElementAvailable", FUNC_EXT_ELEM |	      org.apache.xpath.functions.FuncExtElementAvailable.clas
    m_functions[FUNC_SUBSTRING] = new FuncLoader("FuncSubstri |	    m_functions[FUNC_SUBSTRING] = 
            FUNC_SUBSTRING);				      |	      org.apache.xpath.functions.FuncSubstring.class;
    m_functions[FUNC_STRING_LENGTH] = new FuncLoader("FuncStr |	    m_functions[FUNC_STRING_LENGTH] = 
            FUNC_STRING_LENGTH);			      |	      org.apache.xpath.functions.FuncStringLength.class;
    m_functions[FUNC_DOCLOCATION] = new FuncLoader("FuncDoclo |	    m_functions[FUNC_DOCLOCATION] = 
            FUNC_DOCLOCATION);				      |	      org.apache.xpath.functions.FuncDoclocation.class;
      new FuncLoader("FuncUnparsedEntityURI", FUNC_UNPARSED_E |	      org.apache.xpath.functions.FuncUnparsedEntityURI.class;
							      >	  }
							      >
							      >	  static{
							      >	          m_functionID.put(Keywords.FUNC_CURRENT_STRING,
							      >	                          new Integer(FunctionTable.FUNC_CURR
							      >	          m_functionID.put(Keywords.FUNC_LAST_STRING,
							      >	                          new Integer(FunctionTable.FUNC_LAST
							      >	          m_functionID.put(Keywords.FUNC_POSITION_STRING,
							      >	                          new Integer(FunctionTable.FUNC_POSI
							      >	          m_functionID.put(Keywords.FUNC_COUNT_STRING,
							      >	                          new Integer(FunctionTable.FUNC_COUN
							      >	          m_functionID.put(Keywords.FUNC_ID_STRING,
							      >	                          new Integer(FunctionTable.FUNC_ID))
							      >	          m_functionID.put(Keywords.FUNC_KEY_STRING,
							      >	                          new Integer(FunctionTable.FUNC_KEY)
							      >	          m_functionID.put(Keywords.FUNC_LOCAL_PART_STRING,
							      >	                          new Integer(FunctionTable.FUNC_LOCA
							      >	          m_functionID.put(Keywords.FUNC_NAMESPACE_STRING,
							      >	                          new Integer(FunctionTable.FUNC_NAME
							      >	          m_functionID.put(Keywords.FUNC_NAME_STRING,
							      >	                          new Integer(FunctionTable.FUNC_QNAM
							      >	          m_functionID.put(Keywords.FUNC_GENERATE_ID_STRING,
							      >	                          new Integer(FunctionTable.FUNC_GENE
							      >	          m_functionID.put(Keywords.FUNC_NOT_STRING,
							      >	                          new Integer(FunctionTable.FUNC_NOT)
							      >	          m_functionID.put(Keywords.FUNC_TRUE_STRING,
							      >	                          new Integer(FunctionTable.FUNC_TRUE
							      >	          m_functionID.put(Keywords.FUNC_FALSE_STRING,
							      >	                          new Integer(FunctionTable.FUNC_FALS
							      >	          m_functionID.put(Keywords.FUNC_BOOLEAN_STRING,
							      >	                          new Integer(FunctionTable.FUNC_BOOL
							      >	          m_functionID.put(Keywords.FUNC_LANG_STRING,
							      >	                          new Integer(FunctionTable.FUNC_LANG
							      >	          m_functionID.put(Keywords.FUNC_NUMBER_STRING,
							      >	                          new Integer(FunctionTable.FUNC_NUMB
							      >	          m_functionID.put(Keywords.FUNC_FLOOR_STRING,
							      >	                          new Integer(FunctionTable.FUNC_FLOO
							      >	          m_functionID.put(Keywords.FUNC_CEILING_STRING,
							      >	                          new Integer(FunctionTable.FUNC_CEIL
							      >	          m_functionID.put(Keywords.FUNC_ROUND_STRING,
							      >	                          new Integer(FunctionTable.FUNC_ROUN
							      >	          m_functionID.put(Keywords.FUNC_SUM_STRING,
							      >	                          new Integer(FunctionTable.FUNC_SUM)
							      >	          m_functionID.put(Keywords.FUNC_STRING_STRING,
							      >	                          new Integer(FunctionTable.FUNC_STRI
							      >	          m_functionID.put(Keywords.FUNC_STARTS_WITH_STRING,
							      >	                          new Integer(FunctionTable.FUNC_STAR
							      >	          m_functionID.put(Keywords.FUNC_CONTAINS_STRING,
							      >	                          new Integer(FunctionTable.FUNC_CONT
							      >	          m_functionID.put(Keywords.FUNC_SUBSTRING_BEFORE_STR
							      >	                          new Integer(FunctionTable.FUNC_SUBS
							      >	          m_functionID.put(Keywords.FUNC_SUBSTRING_AFTER_STRI
							      >	                          new Integer(FunctionTable.FUNC_SUBS
							      >	          m_functionID.put(Keywords.FUNC_NORMALIZE_SPACE_STRI
							      >	                          new Integer(FunctionTable.FUNC_NORM
							      >	          m_functionID.put(Keywords.FUNC_TRANSLATE_STRING,
							      >	                          new Integer(FunctionTable.FUNC_TRAN
							      >	          m_functionID.put(Keywords.FUNC_CONCAT_STRING,
							      >	                          new Integer(FunctionTable.FUNC_CONC
							      >	          m_functionID.put(Keywords.FUNC_SYSTEM_PROPERTY_STRI
							      >	                          new Integer(FunctionTable.FUNC_SYST
							      >	          m_functionID.put(Keywords.FUNC_EXT_FUNCTION_AVAILAB
							      >	                        new Integer(FunctionTable.FUNC_EXT_FU
							      >	          m_functionID.put(Keywords.FUNC_EXT_ELEM_AVAILABLE_S
							      >	                          new Integer(FunctionTable.FUNC_EXT_
							      >	          m_functionID.put(Keywords.FUNC_SUBSTRING_STRING,
							      >	                          new Integer(FunctionTable.FUNC_SUBS
							      >	          m_functionID.put(Keywords.FUNC_STRING_LENGTH_STRING
							      >	                          new Integer(FunctionTable.FUNC_STRI
							      >	          m_functionID.put(Keywords.FUNC_UNPARSED_ENTITY_URI_
							      >	                          new Integer(FunctionTable.FUNC_UNPA
							      >	          m_functionID.put(Keywords.FUNC_DOCLOCATION_STRING,
							      >	                          new Integer(FunctionTable.FUNC_DOCL
							      >	  }
							      >	  
							      >	  public FunctionTable(){
							      >	  }
							      >	  
							      >	  /**
							      >	   * Return the name of the a function in the static table. N
							      >	   * making the table publicly available.
							      >	   */
							      >	  String getFunctionName(int funcID) {
							      >	      if (funcID < NUM_BUILT_IN_FUNCS) return m_functions[fun
							      >	      else return m_functions_customer[funcID - NUM_BUILT_IN_
  public static Function getFunction(int which)		      |	  Function getFunction(int which)
    return m_functions[which].getFunction();		      |	          try{
							      >	              if (which < NUM_BUILT_IN_FUNCS) 
							      >	                  return (Function) m_functions[which].newIns
							      >	              else 
							      >	                  return (Function) m_functions_customer[
							      >	                      which-NUM_BUILT_IN_FUNCS].newInstance()
							      >	          }catch (IllegalAccessException ex){
							      >	                  throw new TransformerException(ex.getMessag
							      >	          }catch (InstantiationException ex){
							      >	                  throw new TransformerException(ex.getMessag
							      >	          }
							      |	  
							      >	  /**
							      >	   * Obtain a function ID from a given function name
							      >	   * @param key the function name in a java.lang.String forma
							      >	   * @return a function ID, which may correspond to one of th
							      >	   * found in {@link org.apache.xpath.compiler.FunctionTable}
							      >	   * value installed by an external module.
							      >	   */
							      >	  Object getFunctionID(String key){
							      >	          Object id = m_functionID_customer.get(key);
							      >	          if (null == id) id = m_functionID.get(key);
							      >	          return id;
							      >	  }
							      >	  
   * @param name The unqualified name of the function.	      |	   * @param name The unqualified name of the function, must n
  public static int installFunction(String name, Expression f |	  public int installFunction(String name, Class func)
    Object funcIndexObj = Keywords.m_functions.get(name);     |	    Object funcIndexObj = getFunctionID(name);
							      >	      
							      >	      if (funcIndex < NUM_BUILT_IN_FUNCS){
							      >	              funcIndex = m_funcNextFreeIndex++;
							      >	              m_functionID_customer.put(name, new Integer(fun
							      >	      }
							      >	      m_functions_customer[funcIndex - NUM_BUILT_IN_FUNCS] = 
      funcIndex = m_funcNextFreeIndex;			      |	            funcIndex = m_funcNextFreeIndex++;
							      |	                          
      m_funcNextFreeIndex++;				      |	            m_functions_customer[funcIndex-NUM_BUILT_IN_FUNCS
							      |	                    
      Keywords.m_functions.put(name, new Integer(funcIndex)); |	            m_functionID_customer.put(name, 
							      >	                new Integer(funcIndex));   
							      <
    FuncLoader loader = new FuncLoader(func.getClass().getNam <
							      <
    m_functions[funcIndex] = loader;			      <
							      <
   * Install a function loader at a specific index.	      |	   * Tell if a built-in, non-namespaced function is available
   * @param func A Implementation of an XPath Function object |	   *
   * @param which  The function ID, which may correspond to o |	   * @param methName The local name of the function.
   *    values found in {@link org.apache.xpath.compiler.Func |	   *
   *    be a value installed by an external module. 	      |	   * @return True if the function can be executed.
   * @return the position of the function in the internal ind <
  public static void installFunction(Expression func, int fun |	  public boolean functionAvailable(String methName)
							      |	      Object tblEntry = m_functionID.get(methName);
    FuncLoader loader = new FuncLoader(func.getClass().getNam |	      if (null != tblEntry) return true;
							      |	      else{
    m_functions[funcIndex] = loader;			      |	              tblEntry = m_functionID_customer.get(methName);
							      >	              return (null != tblEntry)? true : false;
							      >	      }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/compiler/Keywords.java xalan-j_2_7_0/src/org/apache/xpath/compiler/Keywords.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: Keywords.java,v 1.10 2004/02/17 04:32:48 minchau Exp  |	 * $Id: Keywords.java,v 1.12 2005/05/17 21:25:46 jycli Exp $
  static Hashtable m_keywords = new Hashtable();	      |	  private static Hashtable m_keywords = new Hashtable();
  static Hashtable m_axisnames = new Hashtable();	      |	  private static Hashtable m_axisnames = new Hashtable();
  static Hashtable m_functions = new Hashtable();	      |	  private static Hashtable m_nodetests = new Hashtable();
  static Hashtable m_nodetypes = new Hashtable();	      |	  private static Hashtable m_nodetypes = new Hashtable();
  private static final String FUNC_CURRENT_STRING = "current" |	  public static final String FUNC_CURRENT_STRING = "current";
  private static final String FUNC_LAST_STRING = "last";      |	  public static final String FUNC_LAST_STRING = "last";
  private static final String FUNC_POSITION_STRING = "positio |	  public static final String FUNC_POSITION_STRING = "position
  private static final String FUNC_COUNT_STRING = "count";    |	  public static final String FUNC_COUNT_STRING = "count";
  private static final String FUNC_LOCAL_PART_STRING = "local |	  public static final String FUNC_LOCAL_PART_STRING = "local-
  private static final String FUNC_NAMESPACE_STRING = "namesp |	  public static final String FUNC_NAMESPACE_STRING = "namespa
  private static final String FUNC_NAME_STRING = "name";      |	  public static final String FUNC_NAME_STRING = "name";
  private static final String FUNC_GENERATE_ID_STRING = "gene |	  public static final String FUNC_GENERATE_ID_STRING = "gener
  private static final String FUNC_NOT_STRING = "not";	      |	  public static final String FUNC_NOT_STRING = "not";
  private static final String FUNC_TRUE_STRING = "true";      |	  public static final String FUNC_TRUE_STRING = "true";
  private static final String FUNC_FALSE_STRING = "false";    |	  public static final String FUNC_FALSE_STRING = "false";
  private static final String FUNC_BOOLEAN_STRING = "boolean" |	  public static final String FUNC_BOOLEAN_STRING = "boolean";
  private static final String FUNC_LANG_STRING = "lang";      |	  public static final String FUNC_LANG_STRING = "lang";
  private static final String FUNC_NUMBER_STRING = "number";  |	  public static final String FUNC_NUMBER_STRING = "number";
  private static final String FUNC_FLOOR_STRING = "floor";    |	  public static final String FUNC_FLOOR_STRING = "floor";
  private static final String FUNC_CEILING_STRING = "ceiling" |	  public static final String FUNC_CEILING_STRING = "ceiling";
  private static final String FUNC_ROUND_STRING = "round";    |	  public static final String FUNC_ROUND_STRING = "round";
  private static final String FUNC_SUM_STRING = "sum";	      |	  public static final String FUNC_SUM_STRING = "sum";
  private static final String FUNC_STRING_STRING = "string";  |	  public static final String FUNC_STRING_STRING = "string";
  private static final String FUNC_STARTS_WITH_STRING = "star |	  public static final String FUNC_STARTS_WITH_STRING = "start
  private static final String FUNC_CONTAINS_STRING = "contain |	  public static final String FUNC_CONTAINS_STRING = "contains
  private static final String FUNC_SUBSTRING_BEFORE_STRING =  |	  public static final String FUNC_SUBSTRING_BEFORE_STRING =
  private static final String FUNC_SUBSTRING_AFTER_STRING = " |	  public static final String FUNC_SUBSTRING_AFTER_STRING = "s
  private static final String FUNC_NORMALIZE_SPACE_STRING = " |	  public static final String FUNC_NORMALIZE_SPACE_STRING = "n
  private static final String FUNC_TRANSLATE_STRING = "transl |	  public static final String FUNC_TRANSLATE_STRING = "transla
  private static final String FUNC_CONCAT_STRING = "concat";  |	  public static final String FUNC_CONCAT_STRING = "concat";
  private static final String FUNC_SYSTEM_PROPERTY_STRING = " |	  public static final String FUNC_SYSTEM_PROPERTY_STRING = "s
  private static final String FUNC_EXT_FUNCTION_AVAILABLE_STR |	  public static final String FUNC_EXT_FUNCTION_AVAILABLE_STRI
  private static final String FUNC_EXT_ELEM_AVAILABLE_STRING  |	  public static final String FUNC_EXT_ELEM_AVAILABLE_STRING =
  private static final String FUNC_SUBSTRING_STRING = "substr |	  public static final String FUNC_SUBSTRING_STRING = "substri
  private static final String FUNC_STRING_LENGTH_STRING = "st |	  public static final String FUNC_STRING_LENGTH_STRING = "str
  private static final String FUNC_UNPARSED_ENTITY_URI_STRING |	  public static final String FUNC_UNPARSED_ENTITY_URI_STRING 
  private static final String FUNC_DOCLOCATION_STRING = "docu |	  public static final String FUNC_DOCLOCATION_STRING = "docum
    m_functions.put(FUNC_CURRENT_STRING,		      <
                    new Integer(FunctionTable.FUNC_CURRENT)); <
    m_functions.put(FUNC_LAST_STRING,			      <
                    new Integer(FunctionTable.FUNC_LAST));    <
    m_functions.put(FUNC_POSITION_STRING,		      <
                    new Integer(FunctionTable.FUNC_POSITION)) <
    m_functions.put(FUNC_COUNT_STRING,			      <
                    new Integer(FunctionTable.FUNC_COUNT));   <
    m_functions.put(FUNC_ID_STRING,			      <
                    new Integer(FunctionTable.FUNC_ID));      <
    m_functions.put(FUNC_KEY_STRING,			      <
                    new Integer(FunctionTable.FUNC_KEY));     <
    m_functions.put(FUNC_LOCAL_PART_STRING,		      <
                    new Integer(FunctionTable.FUNC_LOCAL_PART <
    m_functions.put(FUNC_NAMESPACE_STRING,		      <
                    new Integer(FunctionTable.FUNC_NAMESPACE) <
    m_functions.put(FUNC_NAME_STRING,			      <
                    new Integer(FunctionTable.FUNC_QNAME));   <
    m_functions.put(FUNC_GENERATE_ID_STRING,		      <
                    new Integer(FunctionTable.FUNC_GENERATE_I <
    m_functions.put(FUNC_NOT_STRING,			      <
                    new Integer(FunctionTable.FUNC_NOT));     <
    m_functions.put(FUNC_TRUE_STRING,			      <
                    new Integer(FunctionTable.FUNC_TRUE));    <
    m_functions.put(FUNC_FALSE_STRING,			      <
                    new Integer(FunctionTable.FUNC_FALSE));   <
    m_functions.put(FUNC_BOOLEAN_STRING,		      <
                    new Integer(FunctionTable.FUNC_BOOLEAN)); <
    m_functions.put(FUNC_LANG_STRING,			      <
                    new Integer(FunctionTable.FUNC_LANG));    <
    m_functions.put(FUNC_NUMBER_STRING,			      <
                    new Integer(FunctionTable.FUNC_NUMBER));  <
    m_functions.put(FUNC_FLOOR_STRING,			      <
                    new Integer(FunctionTable.FUNC_FLOOR));   <
    m_functions.put(FUNC_CEILING_STRING,		      <
                    new Integer(FunctionTable.FUNC_CEILING)); <
    m_functions.put(FUNC_ROUND_STRING,			      <
                    new Integer(FunctionTable.FUNC_ROUND));   <
    m_functions.put(FUNC_SUM_STRING,			      <
                    new Integer(FunctionTable.FUNC_SUM));     <
    m_functions.put(FUNC_STRING_STRING,			      <
                    new Integer(FunctionTable.FUNC_STRING));  <
    m_functions.put(FUNC_STARTS_WITH_STRING,		      <
                    new Integer(FunctionTable.FUNC_STARTS_WIT <
    m_functions.put(FUNC_CONTAINS_STRING,		      <
                    new Integer(FunctionTable.FUNC_CONTAINS)) <
    m_functions.put(FUNC_SUBSTRING_BEFORE_STRING,	      <
                    new Integer(FunctionTable.FUNC_SUBSTRING_ <
    m_functions.put(FUNC_SUBSTRING_AFTER_STRING,	      <
                    new Integer(FunctionTable.FUNC_SUBSTRING_ <
    m_functions.put(FUNC_NORMALIZE_SPACE_STRING,	      <
                    new Integer(FunctionTable.FUNC_NORMALIZE_ <
    m_functions.put(FUNC_TRANSLATE_STRING,		      <
                    new Integer(FunctionTable.FUNC_TRANSLATE) <
    m_functions.put(FUNC_CONCAT_STRING,			      <
                    new Integer(FunctionTable.FUNC_CONCAT));  <
							      <
    //m_functions.put(FUNC_FORMAT_NUMBER_STRING, new Integer( <
    m_functions.put(FUNC_SYSTEM_PROPERTY_STRING,	      <
                    new Integer(FunctionTable.FUNC_SYSTEM_PRO <
    m_functions.put(FUNC_EXT_FUNCTION_AVAILABLE_STRING,	      <
                    new Integer(FunctionTable.FUNC_EXT_FUNCTI <
    m_functions.put(FUNC_EXT_ELEM_AVAILABLE_STRING,	      <
                    new Integer(FunctionTable.FUNC_EXT_ELEM_A <
    m_functions.put(FUNC_SUBSTRING_STRING,		      <
                    new Integer(FunctionTable.FUNC_SUBSTRING) <
    m_functions.put(FUNC_STRING_LENGTH_STRING,		      <
                    new Integer(FunctionTable.FUNC_STRING_LEN <
    m_functions.put(FUNC_UNPARSED_ENTITY_URI_STRING,	      <
                    new Integer(FunctionTable.FUNC_UNPARSED_E <
    // These aren't really functions.			      |	    m_nodetests.put(NODETYPE_COMMENT_STRING,
    m_functions.put(NODETYPE_COMMENT_STRING,		      <
    m_functions.put(NODETYPE_TEXT_STRING,		      |	    m_nodetests.put(NODETYPE_TEXT_STRING,
    m_functions.put(NODETYPE_PI_STRING,			      |	    m_nodetests.put(NODETYPE_PI_STRING,
    m_functions.put(NODETYPE_NODE_STRING,		      |	    m_nodetests.put(NODETYPE_NODE_STRING,
    m_functions.put(FUNC_DOCLOCATION_STRING,		      <
                    new Integer(FunctionTable.FUNC_DOCLOCATIO <
							      |	  
  /**							      |	  static Object getAxisName(String key){
   * Tell if a built-in, non-namespaced function is available |	          return m_axisnames.get(key);
   *							      |	  }
   * @param methName The local name of the function.	      |	  
   *							      |	  static Object lookupNodeTest(String key){
   * @return True if the function can be executed.	      |	          return m_nodetests.get(key);
   */							      |	  }
  public static boolean functionAvailable(String methName)    |	  
  {							      |	  static Object getKeyWord(String key){
							      |	          return m_keywords.get(key);
    try							      <
    {							      <
      Object tblEntry = m_functions.get(methName);	      <
							      <
      if (null == tblEntry)				      <
        return false;					      <
							      <
      int funcType = ((Integer) tblEntry).intValue();	      <
							      <
      switch (funcType)					      <
      {							      <
      case OpCodes.NODETYPE_COMMENT :			      <
      case OpCodes.NODETYPE_TEXT :			      <
      case OpCodes.NODETYPE_PI :			      <
      case OpCodes.NODETYPE_NODE :			      <
        return false;  // These look like functions but they' <
      default :						      <
        return true;					      <
      }							      <
    }							      <
    catch (Exception e)					      <
    {							      <
      return false;					      <
    }							      <
							      >	  
							      >	  static Object getNodeType(String key){
							      >	          return m_nodetypes.get(key);
							      >	  }      
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/compiler/Lexer.java xalan-j_2_7_0/src/org/apache/xpath/compiler/Lexer.java
 * $Id: Lexer.java,v 1.14 2004/02/17 04:32:49 minchau Exp $   |	 * $Id: Lexer.java,v 1.16 2004/12/15 17:35:55 jycli Exp $
      Integer itok = (Integer) Keywords.m_keywords.get(key);  |	      Integer itok = (Integer) Keywords.getKeyWord(key);
							      |	        // To older XPath code it doesn't matter if
      // error("Could not locate namespace for prefix: "+pref |	        // error() is called or errorForDOM3().
      m_processor.error(XPATHErrorResources.ER_PREFIX_MUST_RE |			m_processor.errorForDOM3(XPATHErrorResources.
                 new String[] {prefix});  //"Prefix must reso |							 new String[]
							      |
							      >	/** old code commented out 17-Sep-2004
							      >	// error("Could not locate namespace for prefix: "+prefix);
							      >	//		  m_processor.error(XPATHErrorResources.ER_PR
							      >	//					 new String[] {prefix
							      >	*/
只在 xalan-j_2_6_0/src/org/apache/xpath/compiler 存在：ObjectFactory.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/compiler/OpMapVector.java xalan-j_2_7_0/src/org/apache/xpath/compiler/OpMapVector.java
   * @param node object to set				      |	   * @param value object to set
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/compiler/package.html xalan-j_2_7_0/src/org/apache/xpath/compiler/package.html
							      >	<!--
							      >	 * Copyright 2000-2004 The Apache Software Foundation.
							      >	 *
							      >	 * Licensed under the Apache License, Version 2.0 (the "Licen
							      >	 * you may not use this file except in compliance with the Li
							      >	 * You may obtain a copy of the License at
							      >	 *
							      >	 *     http://www.apache.org/licenses/LICENSE-2.0
							      >	 *
							      >	 * Unless required by applicable law or agreed to in writing,
							      >	 * distributed under the License is distributed on an "AS IS"
							      >	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either expre
							      >	 * See the License for the specific language governing permis
							      >	 * limitations under the License.
							      >	-->
只在 xalan-j_2_6_0/src/org/apache/xpath/compiler 存在：SecuritySupport12.java
只在 xalan-j_2_6_0/src/org/apache/xpath/compiler 存在：SecuritySupport.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/compiler/XPathParser.java xalan-j_2_7_0/src/org/apache/xpath/compiler/XPathParser.java
 * $Id: XPathParser.java,v 1.28 2004/02/17 04:32:49 minchau E |	 * $Id: XPathParser.java,v 1.33 2005/05/17 21:25:46 jycli Exp
							      >	import org.apache.xpath.domapi.XPathStylesheetDOM3Exception;
							      >	    m_functionTable = compiler.getFunctionTable();
							      >	    m_functionTable = compiler.getFunctionTable();
							      >	  
							      >	  /** The table contains build-in functions and customized fu
							      >	  private FunctionTable m_functionTable;
							      >	   * This method is added to support DOM 3 XPath API.
							      >	   * <p>
							      >	   * This method is exactly like error(String, Object[]); exc
							      >	   * the underlying TransformerException is 
							      >	   * XpathStylesheetDOM3Exception (which extends TransformerE
							      >	   * <p>
							      >	   * So older XPath code in Xalan is not affected by this. To
							      >	   * the behavior of whether error() or errorForDOM3() is cal
							      >	   * always catching TransformerException objects and is obli
							      >	   * the new subclass of XPathStylesheetDOM3Exception. Older 
							      >	   * runs as before.
							      >	   * <p>
							      >	   * However, newer DOM3 XPath code upon catching a Transform
							      >	   * can check if the exception is an instance of XPathStyles
							      >	   * and take appropriate action.
							      >	   * 
							      >	   * @param msg An error msgkey that corresponds to one of th
							      >	   *            in {@link org.apache.xpath.res.XPATHErrorReso
							      >	   *            a key for a format string.
							      >	   * @param args An array of arguments represented in the for
							      >	   *             may be null.
							      >	   *
							      >	   * @throws TransformerException if the current ErrorListone
							      >	   *                              throw an exception.
							      >	   */
							      >	  void errorForDOM3(String msg, Object[] args) throws Transfo
							      >	  {
							      >
							      >		String fmsg = XSLMessages.createXPATHMessage(msg, arg
							      >		ErrorListener ehandler = this.getErrorListener();
							      >
							      >		TransformerException te = new XPathStylesheetDOM3Exce
							      >		if (null != ehandler)
							      >		{
							      >		  // TO DO: Need to get stylesheet Locator from here.
							      >		  ehandler.fatalError(te);
							      >		}
							      >		else
							      >		{
							      >		  // System.err.println(fmsg);
							      >		  throw te;
							      >		}
							      >	  }
							      >	  /**
							      >	    
							      >	    Object id;
      tok = ((Integer) (Keywords.m_functions.get(key))).intVa |	      // These are nodetests, xpathparser treats them as func
							      >	      // a FilterExpr. 
							      >	      id = Keywords.lookupNodeTest(key);
							      >	      if (null == id) id = m_functionTable.getFunctionID(key)
							      >	      tok = ((Integer) id).intValue();
							      >	    } else if (m_token == null) {
							      >	      error(XPATHErrorResources.ER_EXPECTED_LOC_PATH_AT_END_E
    Object val = Keywords.m_axisnames.get(m_token);	      |	    Object val = Keywords.getAxisName(m_token);
      Object nodeTestOp = Keywords.m_nodetypes.get(m_token);  |	      Object nodeTestOp = Keywords.getNodeType(m_token);
        if (OpCodes.FROM_NAMESPACE == axesType)		      <
        {						      <
          String prefix = (String) this.m_ops.m_tokenQueue.el <
          String namespace =				      <
            ((PrefixResolver) m_namespaceContext).getNamespac <
              prefix);					      <
							      <
          this.m_ops.m_tokenQueue.setElementAt(namespace,m_qu <
        }						      <
							      <
只在 xalan-j_2_7_0/src/org/apache/xpath/domapi 存在：package.html
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/domapi/XPathEvaluatorImpl.java xalan-j_2_7_0/src/org/apache/xpath/domapi/XPathEvaluatorImpl.java
 * Copyright 2002-2004 The Apache Software Foundation.	      |	 * Copyright 2002-2005 The Apache Software Foundation.
import org.apache.xalan.res.XSLMessages;		      <
							      |	import org.apache.xpath.res.XPATHMessages;
 * to the DOM L3 XPath Specification, Working Draft 28, March |	 * to the DOM L3 XPath Specification, Working Group Note 26 F
 * <p>See also the <a href='http://www.w3.org/TR/2002/WD-DOM- |	 * <p>See also the <a href='http://www.w3.org/TR/2004/NOTE-DO
 * @xsl.usage experimental				      |	 * @xsl.usage internal
public class XPathEvaluatorImpl implements XPathEvaluator {   |	public final class XPathEvaluatorImpl implements XPathEvaluat
	class DummyPrefixResolver implements PrefixResolver { |		private class DummyPrefixResolver implements PrefixRe
		public DummyPrefixResolver() {}		      |			DummyPrefixResolver() {}
            String fmsg = XSLMessages.createXPATHMessage(XPAT |	            String fmsg = XPATHMessages.createXPATHMessage(XP
    private Document m_doc = null;			      |	    private final Document m_doc;
    							      <
	/**						      <
	 * Constructor for XPathEvaluatorImpl.		      <
	 */						      <
	public XPathEvaluatorImpl() {			      <
		super();				      <
	}						      <
     /**						      |	    /**
							      >	    
							      >	    /**
							      >	     * Constructor in the case that the XPath expression can 
							      >	     * without needing an XML document at all.
							      >	     *
							      >	     */
							      >	    public XPathEvaluatorImpl() {
							      >	            m_doc = null;
							      >	    }
			      				      |				
			throw new DOMException(XPathException |				// Need to pass back exception code D
							      >				// Error found in DOM Level 3 XPath T
							      >				if(e instanceof XPathStylesheetDOM3Ex
							      >					throw new DOMException(DOMExc
							      >				else
							      >					throw new XPathException(XPat
							      >					
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/domapi/XPathExpressionImpl.java xalan-j_2_7_0/src/org/apache/xpath/domapi/XPathExpressionImpl.java
 * Copyright 2002-2004 The Apache Software Foundation.	      |	 * Copyright 2002-2005 The Apache Software Foundation.
import org.apache.xalan.res.XSLMessages;		      <
import org.apache.xml.utils.PrefixResolver;		      <
							      |	import org.apache.xpath.res.XPATHMessages;
 * to the DOM L3 XPath Specification, Working Draft 28, March |	 * to the DOM L3 XPath Specification, Working Group Note 26 F
							      >	 *
							      >	 * <p>See also the <a href='http://www.w3.org/TR/2004/NOTE-DO
 * <p>See also the <a href='http://www.w3.org/TR/2002/WD-DOM- <
							      <
							      >	 *  
							      >	 * @xsl.usage internal
public class XPathExpressionImpl implements XPathExpression { |	class XPathExpressionImpl implements XPathExpression {
  private PrefixResolver m_resolver;      		      <
  							      <
  private XPath m_xpath;				      |	  final private XPath m_xpath;
  private Document m_doc = null;  			      |	  final private Document m_doc;  
     * to the DOM L3 XPath Specification, Working Draft 28, M |	     * to the DOM L3 XPath Specification, Working Group Note 
     * <p>See also the <a href='http://www.w3.org/TR/2002/WD- |	     * <p>See also the <a href='http://www.w3.org/TR/2004/NOT
     * @xsl.usage experimental				      |	     * @xsl.usage internal
                String fmsg = XSLMessages.createXPATHMessage( |	                String fmsg = XPATHMessages.createXPATHMessag
                    String fmsg = XSLMessages.createXPATHMess |	                    String fmsg = XPATHMessages.createXPATHMe
            String fmsg = XSLMessages.createXPATHMessage(XPAT |	            String fmsg = XPATHMessages.createXPATHMessage(XP
            xobj = m_xpath.execute(xpathSupport, contextNode, |	            xobj = m_xpath.execute(xpathSupport, contextNode,
        return new XPathResultImpl(type,xobj,contextNode);    |	        return new XPathResultImpl(type,xobj,contextNode, m_x
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/domapi/XPathNamespaceImpl.java xalan-j_2_7_0/src/org/apache/xpath/domapi/XPathNamespaceImpl.java
							      >	import org.w3c.dom.UserDataHandler;
							      >
 * <p>See also the <a href='http://www.w3.org/2002/08/WD-DOM- |	 * <p>See also the <a href='http://www.w3.org/TR/2004/NOTE-DO
 * @xsl.usage experimental				      |	 * @xsl.usage internal
public class XPathNamespaceImpl implements XPathNamespace {   |	class XPathNamespaceImpl implements XPathNamespace {
    Node m_attributeNode = null;			      |	    final private Node m_attributeNode;
    public XPathNamespaceImpl(Node node) {		      |	    XPathNamespaceImpl(Node node) {
							      >	    public String getBaseURI ( ) {
							      >	        return null;
							      >	    }
							      >
							      >	    public short compareDocumentPosition(Node other) throws D
							      >	        return 0;
							      >	    }
							      >
							      >	    private String textContent;
							      >	    
							      >	    public String getTextContent() throws DOMException {
							      >	        return textContent;
							      >	    }
							      >	    
							      >	    public void setTextContent(String textContent) throws DOM
							      >	        this.textContent = textContent;
							      >	    }
							      >	    
							      >	    public boolean isSameNode(Node other) {
							      >	        return false;
							      >	    }
							      >
							      >	    public String lookupPrefix(String namespaceURI) {
							      >	        return ""; //PENDING
							      >	    }
							      >
							      >	    public boolean isDefaultNamespace(String namespaceURI) {
							      >	        return false;
							      >	    }
							      >
							      >	    public String lookupNamespaceURI(String prefix) {
							      >	        return null;
							      >	    }
							      >
							      >	    public boolean isEqualNode(Node arg) {
							      >	        return false;
							      >	    }
							      >
							      >	    public Object getFeature(String feature, String version) 
							      >	        return null; //PENDING
							      >	    }
							      >
							      >	    public Object setUserData(String key, 
							      >	                              Object data, 
							      >	                              UserDataHandler handler) {
							      >	        return null; //PENDING
							      >	    }
							      >
							      >	    public Object getUserData(String key) {
							      >	        return null;
							      >	    } 
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/domapi/XPathNSResolverImpl.java xalan-j_2_7_0/src/org/apache/xpath/domapi/XPathNSResolverImpl.java
 * Copyright 2002-2004 The Apache Software Foundation.	      |	 * Copyright 2002-2005 The Apache Software Foundation.
 * to the DOM L3 XPath API Specification, Working Draft 28, M |	 * to the DOM L3 XPath Specification, Working Group Note 26 F
 * 							      |	 *
							      >	 * <p>See also the <a href='http://www.w3.org/TR/2004/NOTE-DO
 * <p>See also the <a href='http://www.w3.org/TR/2002/WD-DOM- <
 * @xsl.usage experimental				      |	 * @xsl.usage internal
public class XPathNSResolverImpl extends PrefixResolverDefaul |	class XPathNSResolverImpl extends PrefixResolverDefault imple
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/domapi/XPathResultImpl.java xalan-j_2_7_0/src/org/apache/xpath/domapi/XPathResultImpl.java
 * Copyright 2002-2004 The Apache Software Foundation.	      |	 * Copyright 2002-2005 The Apache Software Foundation.
import org.apache.xalan.res.XSLMessages;		      |	import org.apache.xpath.XPath;
							      |	import org.apache.xpath.res.XPATHMessages;
 * to the DOM L3 XPath Specification, Working Draft 28, March |	 * to the DOM L3 XPath Specification, Working Group Note 26 F
 * <p>See also the <a href='http://www.w3.org/TR/2002/WD-DOM- |	 * <p>See also the <a href='http://www.w3.org/TR/2004/NOTE-DO
 * @xsl.usage experimental				      |	 * @xsl.usage internal
public class XPathResultImpl implements XPathResult, EventLis |	class XPathResultImpl implements XPathResult, EventListener {
	private XObject m_resultObj;			      |		final private XObject m_resultObj;
							      >		 * The xpath object that wraps the expression used fo
							      >		 */
							      >		final private XPath m_xpath;
							      >			
							      >		/**
	private short m_resultType = ANY_TYPE; 		      |		final private short m_resultType; 
	private Node m_contextNode;			      |		final private Node m_contextNode;
	private NodeIterator m_iterator = null;		      |		private NodeIterator m_iterator = null;;
	 XPathResultImpl(short type, XObject result, Node con |		 XPathResultImpl(short type, XObject result, Node con
            String fmsg = XSLMessages.createXPATHMessage(XPAT |	            String fmsg = XPATHMessages.createXPATHMessage(XP
            String fmsg = XSLMessages.createXPATHMessage(XPAT |	            String fmsg = XPATHMessages.createXPATHMessage(XP
							      >	        this.m_xpath = xpath;
            (m_resultType == XPathResult.UNORDERED_NODE_ITERA |	            (m_resultType == XPathResult.UNORDERED_NODE_ITERA
            (contextNode instanceof EventTarget)) {	      |	            	addEventListener();
                ((EventTarget)contextNode).addEventListener(" |	                
                String fmsg = XSLMessages.createXPATHMessage( |					String fmsg = XPATHMessages.c
                throw new XPathException(XPathException.TYPE_ |	  			    throw new XPathException(XPathExc
            }						      |	           }
                String fmsg = XSLMessages.createXPATHMessage( |					String fmsg = XPATHMessages.c
                throw new XPathException(XPathException.TYPE_ |					throw new XPathException(XPat
			String fmsg = XSLMessages.createXPATH |				String fmsg = XPATHMessages.createXPA
			throw new XPathException(XPathExcepti |				throw new XPathException(XPathExcepti
							      >	//		"The XPathResult of XPath expression {0} has 
			String fmsg = XSLMessages.createXPATH |				String fmsg = XPATHMessages.createXPA
			throw new XPathException(XPathExcepti |				throw new XPathException(XPathExcepti
							      >	//		"The XPathResult of XPath expression {0} has 
			String fmsg = XSLMessages.createXPATH |				String fmsg = XPATHMessages.createXPA
			throw new XPathException(XPathExcepti |				throw new XPathException(XPathExcepti
							      >	//		"The XPathResult of XPath expression {0} has 
           String fmsg = XSLMessages.createXPATHMessage(XPATH |					String fmsg = XPATHMessages.c
		   throw new XPathException(XPathException.TY |					throw new XPathException(XPat
                                                              |	//				"The XPathResult of XPath exp
							      >	//				 This method applies only to 
           String fmsg = XSLMessages.createXPATHMessage(XPATH |					String fmsg = XPATHMessages.c
		   throw new XPathException(XPathException.TY |					throw new XPathException(XPat
                                                         //UN |	//				"The method getSnapshotLength
          String fmsg = XSLMessages.createXPATHMessage(XPATHE |	          String fmsg = XPATHMessages.createXPATHMessage(XPAT
		  throw new XPathException(XPathException.TYP |			  throw new XPathException(XPathException.TYP
							      >	//		  "The method iterateNext cannot be called on
							      >	//		  This method applies only to types UNORDERED
          String fmsg = XSLMessages.createXPATHMessage(XPATHE |	          String fmsg = XPATHMessages.createXPATHMessage(XPAT
        						      |	        if(null == node)
							      >	        	removeEventListener(); // JIRA 1673
           String fmsg = XSLMessages.createXPATHMessage(XPATH |	           String fmsg = XPATHMessages.createXPATHMessage(XPA
           throw new XPathException(XPathException.TYPE_ERR,  |	           throw new XPathException(XPathException.TYPE_ERR, 
                                                              |	//		"The method snapshotItem cannot be called on 
							      >	//		This method applies only to types UNORDERED_N
	public static boolean isValidType( short type ) {     |		static boolean isValidType( short type ) {
		if (event.getType().equals("MutationEvents")) |			if (event.getType().equals("DOMSubtreeModifie
			((EventTarget)m_contextNode).removeEv |				removeEventListener();
							      <
  public String getTypeString(int type)			      |	  private String getTypeString(int type)
							      >	  
							      >	/**
							      >	 * Add m_contextNode to Event Listner to listen for Mutations
							      >	 *
							      >	 */
							      >	  private void addEventListener(){
							      >	  	if(m_contextNode instanceof EventTarget)
							      >			((EventTarget)m_contextNode).addEventListener
							      >	  	
							      >	  }
							      >	  
							      >
							      >	/**
							      >	 * Remove m_contextNode to Event Listner to listen for Mutati
							      >	 *
							      >	 */
							      >	private void removeEventListener(){
							      >		if(m_contextNode instanceof EventTarget)
							      >			((EventTarget)m_contextNode).removeEventListe
							      >	}
只在 xalan-j_2_7_0/src/org/apache/xpath/domapi 存在：XPathStylesheetDOM3Exception.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/Expression.java xalan-j_2_7_0/src/org/apache/xpath/Expression.java
 * $Id: Expression.java,v 1.23 2004/02/17 04:30:02 minchau Ex |	 * $Id: Expression.java,v 1.25 2005/01/23 01:02:10 mcnamara E
							      |	    static final long serialVersionUID = 565665869777906902L;
   * if you can execute {@link asNode() asNode} without an ex |	   * if you can execute {@link #asNode(XPathContext) asNode} 
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/FoundIndex.java xalan-j_2_7_0/src/org/apache/xpath/FoundIndex.java
 * $Id: FoundIndex.java,v 1.5 2004/02/17 04:30:02 minchau Exp |	 * $Id: FoundIndex.java,v 1.6 2004/08/17 19:25:33 jycli Exp $
							      >	    static final long serialVersionUID = -4643975335243078270
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncBoolean.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncBoolean.java
 * $Id: FuncBoolean.java,v 1.9 2004/02/17 04:34:00 minchau Ex |	 * $Id: FuncBoolean.java,v 1.10 2004/08/17 19:25:35 jycli Exp
							      >	    static final long serialVersionUID = 4328660760070034592L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncCeiling.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncCeiling.java
 * $Id: FuncCeiling.java,v 1.8 2004/02/17 04:34:01 minchau Ex |	 * $Id: FuncCeiling.java,v 1.9 2004/08/17 19:25:36 jycli Exp 
							      >	    static final long serialVersionUID = -1275988936390464739
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncConcat.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncConcat.java
 * $Id: FuncConcat.java,v 1.11 2004/02/17 04:34:01 minchau Ex |	 * $Id: FuncConcat.java,v 1.12 2004/08/17 19:25:36 jycli Exp 
							      >	    static final long serialVersionUID = 1737228885202314413L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncContains.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncContains.java
 * $Id: FuncContains.java,v 1.8 2004/02/17 04:34:01 minchau E |	 * $Id: FuncContains.java,v 1.9 2004/08/17 19:25:36 jycli Exp
							      >	    static final long serialVersionUID = 5084753781887919723L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncCount.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncCount.java
 * $Id: FuncCount.java,v 1.10 2004/02/17 04:34:00 minchau Exp |	 * $Id: FuncCount.java,v 1.11 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = -7116225100474153751
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncCurrent.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncCurrent.java
 * $Id: FuncCurrent.java,v 1.13 2004/02/17 04:34:01 minchau E |	 * $Id: FuncCurrent.java,v 1.14 2004/08/17 19:25:36 jycli Exp
							      >	    static final long serialVersionUID = 5715316804877715008L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncDoclocation.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncDoclocation.java
 * $Id: FuncDoclocation.java,v 1.8 2004/02/17 04:34:01 mincha |	 * $Id: FuncDoclocation.java,v 1.9 2004/08/17 19:25:36 jycli 
							      >	    static final long serialVersionUID = 7469213946343568769L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncExtElementAvailable.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncExtElementAvailable.java
 * $Id: FuncExtElementAvailable.java,v 1.12 2004/02/17 04:34: |	 * $Id: FuncExtElementAvailable.java,v 1.13 2004/08/17 19:25:
							      >	    static final long serialVersionUID = -472533699257968546L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncExtFunctionAvailable.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncExtFunctionAvailable.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: FuncExtFunctionAvailable.java,v 1.11 2004/02/17 04:34 |	 * $Id: FuncExtFunctionAvailable.java,v 1.13 2005/05/17 21:25
import org.apache.xpath.compiler.Keywords;		      |	import org.apache.xpath.compiler.FunctionTable;
							      >	    static final long serialVersionUID = 5118814314918592241L
							      >	    
							      >	    transient private FunctionTable m_functionTable = null;
        return Keywords.functionAvailable(methName) ? XBoolea |	        if (null == m_functionTable) m_functionTable = new Fu
							      >	        return m_functionTable.functionAvailable(methName) ? 
							      >	  }
							      >	  
							      >	  /**
							      >	   * The function table is an instance field. In order to acc
							      >	   * field during evaluation, this method is called at compil
							      >	   * insert function table information for later usage. It sh
							      >	   * during compiling of XPath expressions.
							      >	   * @param aTable an instance of the function table
							      >	   */
							      >	  public void setFunctionTable(FunctionTable aTable){
							      >	          m_functionTable = aTable;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncExtFunction.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncExtFunction.java
 * $Id: FuncExtFunction.java,v 1.24 2004/02/17 04:34:01 minch |	 * $Id: FuncExtFunction.java,v 1.27 2005/06/07 15:35:53 mkwan
							      >	import org.apache.xpath.res.XPATHMessages;
							      >	    static final long serialVersionUID = 5196115554693708718L
							      |	    if (xctxt.isSecureProcessing())
							      >	      throw new javax.xml.transform.TransformerException(
							      >	        XPATHMessages.createXPATHMessage(
							      >	          XPATHErrorResources.ER_EXTENSION_FUNCTION_CANNOT_BE
							      >	          new Object[] {toString()}));
							      >	      
							      >	    arg.exprSetParent(this);
							      >	  
							      >	  /**
							      >	   * Return the name of the extesion function in string forma
							      >	   */
							      >	  public String toString()
							      >	  {
							      >	    if (m_namespace != null && m_namespace.length() > 0)
							      >	      return "{" + m_namespace + "}" + m_extensionName;
							      >	    else
							      >	      return m_extensionName;
							      >	  }  
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncFalse.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncFalse.java
 * $Id: FuncFalse.java,v 1.8 2004/02/17 04:34:01 minchau Exp  |	 * $Id: FuncFalse.java,v 1.9 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = 6150918062759769887L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncFloor.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncFloor.java
 * $Id: FuncFloor.java,v 1.8 2004/02/17 04:34:00 minchau Exp  |	 * $Id: FuncFloor.java,v 1.9 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = 2326752233236309265L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncGenerateId.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncGenerateId.java
 * $Id: FuncGenerateId.java,v 1.10 2004/02/17 04:34:01 mincha |	 * $Id: FuncGenerateId.java,v 1.11 2004/08/17 19:25:36 jycli 
							      >	    static final long serialVersionUID = 973544842091724273L;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncId.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncId.java
 * $Id: FuncId.java,v 1.14 2004/02/17 04:34:01 minchau Exp $  |	 * $Id: FuncId.java,v 1.15 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = 8930573966143567310L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncLang.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncLang.java
 * $Id: FuncLang.java,v 1.8 2004/02/17 04:34:01 minchau Exp $ |	 * $Id: FuncLang.java,v 1.9 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = -7868705139354872185
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncLast.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncLast.java
 * $Id: FuncLast.java,v 1.15 2004/02/17 04:34:01 minchau Exp  |	 * $Id: FuncLast.java,v 1.16 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = 9205812403085432943L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncLocalPart.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncLocalPart.java
 * $Id: FuncLocalPart.java,v 1.10 2004/02/17 04:34:01 minchau |	 * $Id: FuncLocalPart.java,v 1.11 2004/08/17 19:25:36 jycli E
							      >	    static final long serialVersionUID = 7591798770325814746L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncNamespace.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncNamespace.java
 * $Id: FuncNamespace.java,v 1.10 2004/02/17 04:34:01 minchau |	 * $Id: FuncNamespace.java,v 1.11 2004/08/17 19:25:36 jycli E
							      >	    static final long serialVersionUID = -4695674566722321237
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncNormalizeSpace.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncNormalizeSpace.java
 * $Id: FuncNormalizeSpace.java,v 1.12 2004/02/17 04:34:01 mi |	 * $Id: FuncNormalizeSpace.java,v 1.13 2004/08/17 19:25:36 jy
							      >	    static final long serialVersionUID = -3377956872032190880
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncNot.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncNot.java
 * $Id: FuncNot.java,v 1.8 2004/02/17 04:34:00 minchau Exp $  |	 * $Id: FuncNot.java,v 1.9 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = 7299699961076329790L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncNumber.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncNumber.java
 * $Id: FuncNumber.java,v 1.8 2004/02/17 04:34:00 minchau Exp |	 * $Id: FuncNumber.java,v 1.9 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = 7266745342264153076L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncPosition.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncPosition.java
 * $Id: FuncPosition.java,v 1.12 2004/02/17 04:34:00 minchau  |	 * $Id: FuncPosition.java,v 1.13 2004/08/17 19:25:36 jycli Ex
							      >	    static final long serialVersionUID = -9092846348197271582
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncQname.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncQname.java
 * $Id: FuncQname.java,v 1.9 2004/02/17 04:34:01 minchau Exp  |	 * $Id: FuncQname.java,v 1.10 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = -1532307875532617380
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncRound.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncRound.java
 * $Id: FuncRound.java,v 1.10 2004/02/17 04:34:00 minchau Exp |	 * $Id: FuncRound.java,v 1.11 2004/08/17 19:25:36 jycli Exp $
							      >	    static final long serialVersionUID = -7970583902573826611
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncStartsWith.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncStartsWith.java
 * $Id: FuncStartsWith.java,v 1.8 2004/02/17 04:34:00 minchau |	 * $Id: FuncStartsWith.java,v 1.9 2004/08/17 19:25:36 jycli E
							      >	    static final long serialVersionUID = 2194585774699567928L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncString.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncString.java
 * $Id: FuncString.java,v 1.8 2004/02/17 04:34:00 minchau Exp |	 * $Id: FuncString.java,v 1.9 2004/08/17 19:25:37 jycli Exp $
							      >	    static final long serialVersionUID = -2206677149497712883
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncStringLength.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncStringLength.java
 * $Id: FuncStringLength.java,v 1.8 2004/02/17 04:34:01 minch |	 * $Id: FuncStringLength.java,v 1.9 2004/08/17 19:25:37 jycli
							      >	    static final long serialVersionUID = -159616417996519839L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncSubstringAfter.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncSubstringAfter.java
 * $Id: FuncSubstringAfter.java,v 1.8 2004/02/17 04:34:00 min |	 * $Id: FuncSubstringAfter.java,v 1.9 2004/08/17 19:25:37 jyc
							      >	    static final long serialVersionUID = -8119731889862512194
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncSubstringBefore.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncSubstringBefore.java
 * $Id: FuncSubstringBefore.java,v 1.8 2004/02/17 04:34:01 mi |	 * $Id: FuncSubstringBefore.java,v 1.9 2004/08/17 19:25:37 jy
							      >	    static final long serialVersionUID = 4110547161672431775L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncSubstring.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncSubstring.java
 * $Id: FuncSubstring.java,v 1.12 2004/02/17 04:34:01 minchau |	 * $Id: FuncSubstring.java,v 1.13 2004/08/17 19:25:37 jycli E
							      >	    static final long serialVersionUID = -5996676095024715502
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncSum.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncSum.java
 * $Id: FuncSum.java,v 1.10 2004/02/17 04:34:01 minchau Exp $ |	 * $Id: FuncSum.java,v 1.11 2004/08/17 19:25:37 jycli Exp $
							      >	    static final long serialVersionUID = -2719049259574677519
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncSystemProperty.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncSystemProperty.java
 * $Id: FuncSystemProperty.java,v 1.18 2004/02/23 10:29:37 ar |	 * $Id: FuncSystemProperty.java,v 1.21 2005/07/25 20:26:46 mc
							      >	    static final long serialVersionUID = 3694874980992204867L
  static String XSLT_PROPERTIES = "org/apache/xalan/res/XSLTI |	  static final String XSLT_PROPERTIES = 
							      >	            "org/apache/xalan/res/XSLTInfo.properties";
        return new XNumber(1.0);			      |	        return new XString("1.0");
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/Function2Args.java xalan-j_2_7_0/src/org/apache/xpath/functions/Function2Args.java
 * $Id: Function2Args.java,v 1.13 2004/02/17 04:34:01 minchau |	 * $Id: Function2Args.java,v 1.15 2005/01/23 01:08:21 mcnamar
							      >	    static final long serialVersionUID = 5574294996842710641L
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/Function3Args.java xalan-j_2_7_0/src/org/apache/xpath/functions/Function3Args.java
 * $Id: Function3Args.java,v 1.14 2004/02/17 04:34:01 minchau |	 * $Id: Function3Args.java,v 1.16 2005/01/23 01:08:21 mcnamar
							      >	    static final long serialVersionUID = 7915240747161506646L
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FunctionDef1Arg.java xalan-j_2_7_0/src/org/apache/xpath/functions/FunctionDef1Arg.java
 * $Id: FunctionDef1Arg.java,v 1.12 2004/02/17 04:34:00 minch |	 * $Id: FunctionDef1Arg.java,v 1.13 2004/08/17 19:25:37 jycli
							      >	    static final long serialVersionUID = 2325189412814149264L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/Function.java xalan-j_2_7_0/src/org/apache/xpath/functions/Function.java
 * $Id: Function.java,v 1.13 2004/02/17 04:34:00 minchau Exp  |	 * $Id: Function.java,v 1.15 2005/01/23 01:08:21 mcnamara Exp
							      >	    static final long serialVersionUID = 6927661240854599768L
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FunctionMultiArgs.java xalan-j_2_7_0/src/org/apache/xpath/functions/FunctionMultiArgs.java
 * $Id: FunctionMultiArgs.java,v 1.14 2004/02/17 04:34:01 min |	 * $Id: FunctionMultiArgs.java,v 1.16 2005/01/23 01:08:21 mcn
							      >	    static final long serialVersionUID = 7117257746138417181L
     * @see XPathVisitable#callVisitors(ExpressionOwner, XPat |	     * @see org.apache.xpath.XPathVisitable#callVisitors(Expr
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FunctionOneArg.java xalan-j_2_7_0/src/org/apache/xpath/functions/FunctionOneArg.java
 * $Id: FunctionOneArg.java,v 1.13 2004/02/17 04:34:00 mincha |	 * $Id: FunctionOneArg.java,v 1.15 2005/01/23 01:08:21 mcnama
							      >	    static final long serialVersionUID = -5180174180765609758
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncTranslate.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncTranslate.java
 * $Id: FuncTranslate.java,v 1.8 2004/02/17 04:34:00 minchau  |	 * $Id: FuncTranslate.java,v 1.9 2004/08/17 19:25:37 jycli Ex
							      >	    static final long serialVersionUID = -1672834340026116482
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncTrue.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncTrue.java
 * $Id: FuncTrue.java,v 1.8 2004/02/17 04:34:01 minchau Exp $ |	 * $Id: FuncTrue.java,v 1.9 2004/08/17 19:25:37 jycli Exp $
							      >	    static final long serialVersionUID = 5663314547346339447L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/FuncUnparsedEntityURI.java xalan-j_2_7_0/src/org/apache/xpath/functions/FuncUnparsedEntityURI.java
 * $Id: FuncUnparsedEntityURI.java,v 1.8 2004/02/17 04:34:00  |	 * $Id: FuncUnparsedEntityURI.java,v 1.9 2004/08/17 19:25:37 
							      >	    static final long serialVersionUID = 845309759097448178L;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/ObjectFactory.java xalan-j_2_7_0/src/org/apache/xpath/functions/ObjectFactory.java
 * $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:37 aruny Ex |	 * $Id: ObjectFactory.java,v 1.5 2004/08/17 19:25:37 jycli Ex
 * @version $Id: ObjectFactory.java,v 1.2 2004/02/23 10:29:37 |	 * @version $Id: ObjectFactory.java,v 1.5 2004/08/17 19:25:37
							      >	                FileInputStream fis = null;
                        FileInputStream fis =		      |	                        fis = ss.getFileInputStream(propertie
                                         ss.getFileInputStrea <
                        fis.close();			      <
	            } catch (Exception x) {		      |		        } catch (Exception x) {
	                fXalanProperties = null;	      |		            fXalanProperties = null;
	                fLastModified = -1;		      |		            fLastModified = -1;
                        // assert(x instanceof FileNotFoundEx |	                    // assert(x instanceof FileNotFoundExcept
	                //        || x instanceof SecurityExc |		            //        || x instanceof SecurityExcepti
	                // In both cases, ignore and continue |		            // In both cases, ignore and continue w/ 
	            }					      |		        }
							      >	                finally {
							      >	                    // try to close the input stream if one w
							      >	                    if (fis != null) {
							      >	                        try {
							      >	                            fis.close();
							      >	                        }
							      >	                        // Ignore the exception.
							      >	                        catch (IOException exc) {}
							      >	                    }
							      >	                }	            
							      >	            FileInputStream fis = null;
                FileInputStream fis =			      |	                fis = ss.getFileInputStream(new File(properti
                           ss.getFileInputStream(new File(pro <
                fis.close();				      <
							      >	            finally {
							      >	                // try to close the input stream if one was o
							      >	                if (fis != null) {
							      >	                    try {
							      >	                        fis.close();
							      >	                    }
							      >	                    // Ignore the exception.
							      >	                    catch (IOException exc) {}
							      >	                }
							      >	            }               
            if (security != null){			      |	                if (security != null){
                security.checkPackageAccess(className);	      |	                    final int lastDot = className.lastIndexOf
             }   					      |	                    String packageName = className;
							      >	                    if (lastDot != -1) packageName = classNam
							      >	                    security.checkPackageAccess(packageName);
							      >	                 }   
            rd.close();					      <
							      >	        finally {
							      >	            try {
							      >	                // try to close the reader.
							      >	                rd.close();
							      >	            }
							      >	            // Ignore the exception.
							      >	            catch (IOException exc) {}
							      >	        }          
							      |	                static final long serialVersionUID = -5782303
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/functions/WrongNumberArgsException.java xalan-j_2_7_0/src/org/apache/xpath/functions/WrongNumberArgsException.java
 * $Id: WrongNumberArgsException.java,v 1.6 2004/02/17 04:34: |	 * $Id: WrongNumberArgsException.java,v 1.7 2004/08/17 19:25:
							      >	    static final long serialVersionUID = -4551577097576242432
只在 xalan-j_2_7_0/src/org/apache/xpath 存在：jaxp
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/NodeSetDTM.java xalan-j_2_7_0/src/org/apache/xpath/NodeSetDTM.java
 * $Id: NodeSetDTM.java,v 1.15 2004/02/17 04:30:02 minchau Ex |	 * $Id: NodeSetDTM.java,v 1.17 2005/01/23 01:02:10 mcnamara E
							      >	    static final long serialVersionUID = 7686480133331317070L
   * @param ni Iterator which yields Nodes to be made members |	   * @param iterator Iterator which yields Nodes to be made m
   * @param ni Iterator which yields Nodes to be made members <
   * @param execContext The XPath runtime context for this    |	   * @param context The XPath runtime context for this
   * @param v Vector of nodes, presumably containing Nodes    <
   * @param obj Node object.				      <
   *							      <
   * @param v Vector of nodes, presumably containing Nodes    <
   * @param obj Node object.				      <
   *							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/NodeSet.java xalan-j_2_7_0/src/org/apache/xpath/NodeSet.java
 * $Id: NodeSet.java,v 1.21 2004/02/17 04:30:02 minchau Exp $ |	 * $Id: NodeSet.java,v 1.22 2005/01/23 01:02:10 mcnamara Exp 
   * @param v Vector of nodes, presumably containing Nodes    <
   * @param obj Node object.				      <
   *							      <
   * @param v Vector of nodes, presumably containing Nodes    <
   * @param obj Node object.				      <
   *							      <
只在 xalan-j_2_7_0/src/org/apache/xpath/objects 存在：DTMXRTreeFrag.java
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XBoolean.java xalan-j_2_7_0/src/org/apache/xpath/objects/XBoolean.java
 * $Id: XBoolean.java,v 1.16 2004/02/17 04:34:38 minchau Exp  |	 * $Id: XBoolean.java,v 1.18 2004/12/15 17:35:55 jycli Exp $
							      >	    static final long serialVersionUID = -2964933058866100881
  public static XBoolean S_TRUE = new XBooleanStatic(true);   |	  public static final XBoolean S_TRUE = new XBooleanStatic(tr
  public static XBoolean S_FALSE = new XBooleanStatic(false); |	  public static final XBoolean S_FALSE = new XBooleanStatic(f
  boolean m_val;					      |	  private final boolean m_val;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XBooleanStatic.java xalan-j_2_7_0/src/org/apache/xpath/objects/XBooleanStatic.java
 * $Id: XBooleanStatic.java,v 1.10 2004/02/17 04:34:38 mincha |	 * $Id: XBooleanStatic.java,v 1.12 2004/12/15 17:35:55 jycli 
							      >	    static final long serialVersionUID = -8064147275772687409
  boolean m_val;					      |	  private final boolean m_val;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XMLStringFactoryImpl.java xalan-j_2_7_0/src/org/apache/xpath/objects/XMLStringFactoryImpl.java
 * $Id: XMLStringFactoryImpl.java,v 1.6 2004/02/17 04:34:38 m |	 * $Id: XMLStringFactoryImpl.java,v 1.7 2005/01/23 01:08:21 m
   * @param string FastStringBuffer reference, which must be  |	   * @param fsb FastStringBuffer reference, which must be non
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XNodeSetForDOM.java xalan-j_2_7_0/src/org/apache/xpath/objects/XNodeSetForDOM.java
 * $Id: XNodeSetForDOM.java,v 1.6 2004/02/17 04:34:38 minchau |	 * $Id: XNodeSetForDOM.java,v 1.7 2004/08/17 19:25:39 jycli E
							      >	    static final long serialVersionUID = -8396190713754624640
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XNodeSet.java xalan-j_2_7_0/src/org/apache/xpath/objects/XNodeSet.java
 * $Id: XNodeSet.java,v 1.28 2004/02/17 04:34:38 minchau Exp  |	 * $Id: XNodeSet.java,v 1.30 2004/12/15 17:35:55 jycli Exp $
							      >	    static final long serialVersionUID = 1916026368035639667L
  static LessThanComparator S_LT = new LessThanComparator();  |	  static final LessThanComparator S_LT = new LessThanComparat
  static LessThanOrEqualComparator S_LTE = new LessThanOrEqua |	  static final LessThanOrEqualComparator S_LTE = new LessThan
  static GreaterThanComparator S_GT = new GreaterThanComparat |	  static final GreaterThanComparator S_GT = new GreaterThanCo
  static GreaterThanOrEqualComparator S_GTE =		      |	  static final GreaterThanOrEqualComparator S_GTE =
  static EqualComparator S_EQ = new EqualComparator();	      |	  static final EqualComparator S_EQ = new EqualComparator();
  static NotEqualComparator S_NEQ = new NotEqualComparator(); |	  static final NotEqualComparator S_NEQ = new NotEqualCompara
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XNull.java xalan-j_2_7_0/src/org/apache/xpath/objects/XNull.java
 * $Id: XNull.java,v 1.13 2004/02/17 04:34:38 minchau Exp $   |	 * $Id: XNull.java,v 1.14 2004/08/17 19:25:39 jycli Exp $
							      >	    static final long serialVersionUID = -6841683711458983005
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XNumber.java xalan-j_2_7_0/src/org/apache/xpath/objects/XNumber.java
 * $Id: XNumber.java,v 1.19 2004/02/17 04:34:38 minchau Exp $ |	 * $Id: XNumber.java,v 1.21 2005/01/23 01:08:21 mcnamara Exp 
							      >	    static final long serialVersionUID = -2720400709619020193
   * @param d Value of the object			      |	   * @param num Value of the object
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XObject.java xalan-j_2_7_0/src/org/apache/xpath/objects/XObject.java
 * $Id: XObject.java,v 1.25 2004/02/17 04:34:38 minchau Exp $ |	 * $Id: XObject.java,v 1.27 2005/01/23 01:08:21 mcnamara Exp 
							      >	    static final long serialVersionUID = -821887098985662951L
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XRTreeFrag.java xalan-j_2_7_0/src/org/apache/xpath/objects/XRTreeFrag.java
 * $Id: XRTreeFrag.java,v 1.30 2004/02/17 04:34:38 minchau Ex |	 * $Id: XRTreeFrag.java,v 1.33 2005/01/24 04:04:40 mcnamara E
  DTM m_dtm;						      |	    static final long serialVersionUID = -3201553822254911567
  int m_dtmRoot;					      |	  private DTMXRTreeFrag m_DTMXRTreeFrag;
  XPathContext m_xctxt;					      |	  private int m_dtmRoot = DTM.NULL;
  boolean m_allowRelease = false;			      |	  protected boolean m_allowRelease = false;
							      |
//  /**							      |
//   * Create an XRTreeFrag Object.			      <
//   *							      <
//   * @param frag Document fragment this will wrap	      <
//   */							      <
//  public XRTreeFrag(DTMIterator frag)			      <
//  {							      <
//    super(frag);					      <
//    							      <
//    // Obviously, this constructor should be avoided when p <
//    m_dtmRoot = frag.cloneWithReset().nextNode();	      <
//  }							      <
  							      <
   * @param frag Document fragment this will wrap	      <
    							      <
    // Obviously, this constructor should be avoided when pos <
    m_dtmRoot = root;					      |	    initDTM(root, xctxt);    
    m_xctxt = xctxt;					      <
    m_dtm = xctxt.getDTM(root);				      <
   * @param frag Document fragment this will wrap	      <
    super(null);					      |	    super(null); 
    							      |	   initDTM(root, xctxt); 
    // Obviously, this constructor should be avoided when pos |	  }
							      >	  
							      >	  private final void initDTM(int root, XPathContext xctxt){
    m_xctxt = xctxt;					      |	    final DTM dtm = xctxt.getDTM(root);
    m_dtm = xctxt.getDTM(root);				      |	    if(dtm != null){
							      >	      m_DTMXRTreeFrag = xctxt.getDTMXRTreeFrag(xctxt.getDTMId
							      >	    }
							      <
    if (m_xctxt != null)				      |	    if (m_DTMXRTreeFrag.getXPathContext() != null)
      return new org.apache.xml.dtm.ref.DTMNodeIterator((DTMI |	      return new org.apache.xml.dtm.ref.DTMNodeIterator((DTMI
   * @param frag Document fragment this will wrap	      <
  							      |	    
  /**							      <
   * Release any resources this object may have by calling de <
   * %ISSUE% This release will occur asynchronously. Resource <
   * MUST be thread-safe!				      <
   *							      <
   * @throws Throwable					      <
   */							      <
  protected void finalize() throws Throwable		      <
  {							      <
    try							      <
    {							      <
      destruct();					      <
    }							      <
    finally						      <
    {							      <
      super.finalize();  // Always use this.		      <
    }							      <
  }							      <
  							      <
  public void detach()					      |	  public void detach(){
  {							      |	    if(m_allowRelease){
    if(m_allowRelease)					      |	    	m_DTMXRTreeFrag.destruct();
    {							      <
    	// %REVIEW% Do we actually _need_ detach, now that DT <
    	// storage is managed as a stack?		      <
      // See #destruct() for a comment about this next check. <
      int ident = m_xctxt.getDTMIdentity(m_dtm);	      <
      DTM foundDTM = m_xctxt.getDTM(ident);      	      <
      if(foundDTM == m_dtm)				      <
      {							      <
        m_xctxt.release(m_dtm, true);			      <
        m_dtm = null;					      <
        m_xctxt = null;					      <
      }							      <
   * Forces the object to release it's resources.  This is mo <
   * detach().  You can call destruct as many times as you wa <
   */							      <
  public void destruct()				      <
  {							      <
    if(null != m_dtm)					      <
    {							      <
      // For this next check, see http://nagoya.apache.org/bu <
      // What happens if you don't do this this check:	      <
      // 1) Transform#1 creates an XRTreeFrag.  This has a re <
      //    is registered with a DTMManager.  The DTM will ne <
      //    DTMManager when the XRTreeFrag is deleted.  The X <
      //    reference to the XPathContext.		      <
      // 2) Transform#1 completes.  The XPathContext is reset <
      //    of structures are reset or rebuilt, including DTM <
      //    BUT, the XRTreeFrags are still hanging around, wa <
      // 3) Transform#2 starts humming along.  It builds a XR <
      //    RTF DTM into DTMManagerDefault#m_dtms[2].	      <
      // 4) The finalizer thread wakes and decides to delete  <
      //    from Transform#1.				      <
      // 5) The XRTreeFrag#finalize() method references throu <
      //    deletes what it thinks is it's DTM from  DTMManag <
      //    getDTMIdentity(dtm)).			      <
      // 6) Transform#2 tries to reference DTMManagerDefault# <
      //    null, and chaos results.			      <
      int ident = m_xctxt.getDTMIdentity(m_dtm);	      <
      DTM foundDTM = m_xctxt.getDTM(ident);      	      <
      if(foundDTM == m_dtm)				      <
      {							      <
        m_xctxt.release(m_dtm, true);			      <
        m_dtm = null;					      <
        m_xctxt = null;					      <
      }							      <
    }							      <
    m_obj = null;					      <
 }							      <
							      <
  /**							      <
      m_xmlStr = m_dtm.getStringValue(m_dtmRoot);	      |	      m_xmlStr = m_DTMXRTreeFrag.getDTM().getStringValue(m_dt
    String str = m_dtm.getStringValue(m_dtmRoot).toString();  |	    String str = m_DTMXRTreeFrag.getDTM().getStringValue(m_dt
    return new RTFIterator(m_dtmRoot, m_xctxt.getDTMManager() |	    return new RTFIterator(m_dtmRoot, m_DTMXRTreeFrag.getXPat
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XRTreeFragSelectWrapper.java xalan-j_2_7_0/src/org/apache/xpath/objects/XRTreeFragSelectWrapper.java
 * $Id: XRTreeFragSelectWrapper.java,v 1.11 2004/02/17 04:34: |	 * $Id: XRTreeFragSelectWrapper.java,v 1.13 2004/08/17 19:25:
  XObject m_selected;					      |	    static final long serialVersionUID = -6526177905590461251
							      <
							      >		 XObject m_selected;
    if(m_allowRelease)					      |		throw new RuntimeException(XSLMessages.createXPATHMes
    {							      <
      m_selected.detach();				      <
      m_selected = null;				      <
    }							      <
    							      <
    super.detach();					      <
    return m_selected.num();				      |		throw new RuntimeException(XSLMessages.createXPATHMes
    return m_selected.xstr();				      |		throw new RuntimeException(XSLMessages.createXPATHMes
    return m_selected.str();				      |		throw new RuntimeException(XSLMessages.createXPATHMes
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XStringForChars.java xalan-j_2_7_0/src/org/apache/xpath/objects/XStringForChars.java
 * $Id: XStringForChars.java,v 1.8 2004/02/17 04:34:38 mincha |	 * $Id: XStringForChars.java,v 1.9 2004/08/17 19:25:40 jycli 
							      >	    static final long serialVersionUID = -2235248887220850467
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XStringForFSB.java xalan-j_2_7_0/src/org/apache/xpath/objects/XStringForFSB.java
 * $Id: XStringForFSB.java,v 1.20 2004/02/17 04:34:38 minchau |	 * $Id: XStringForFSB.java,v 1.24 2005/01/23 01:08:21 mcnamar
							      >	    static final long serialVersionUID = -1533039186550674548
   * @param   anObject   the object to compare this <code>Str |	   * @param   obj2       the object to compare this <code>Str
   * NEEDSDOC @param obj2				      <
   * @param obj2 Object to compare this to		      |	   * @param anotherString Object to compare this to
   *							      <
   * NEEDSDOC @param anotherString			      <
   * @param   anObject   the object to compare this <code>Str |	   * @param   obj2       the object to compare this <code>Str
   * NEEDSDOC @param obj2				      <
      return equals((XMLString) this);			      |	      return equals((XMLString) obj2);
   * @param   anotherString   the <code>String</code> to be c |	   * @param   xstr   the <code>String</code> to be compared.
   * NEEDSDOC @param xstr				      <
   * @param   str   the <code>String</code> to be compared.   |	   * @param   xstr   the <code>String</code> to be compared.
   * NEEDSDOC @param xstr				      <
							      >	    if (i == m_length) return Double.NaN;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/objects/XString.java xalan-j_2_7_0/src/org/apache/xpath/objects/XString.java
 * $Id: XString.java,v 1.14 2004/02/17 04:34:38 minchau Exp $ |	 * $Id: XString.java,v 1.20 2005/07/25 18:19:33 johng Exp $
							      >	    static final long serialVersionUID = 2020470518395094525L
  public static XString EMPTYSTRING = new XString("");	      |	  public static final XString EMPTYSTRING = new XString("");
    int end = length();					      |	    /* XMLCharacterRecognizer.isWhiteSpace(char c) methods tr
    							      |	     * characters as white space characters.
    if(0 == end)					      |	     * ht - horizontal tab, nl - newline , cr - carriage retu
      return Double.NaN;				      |	     * trim() methods by default also takes care of these whi
							      |	     * So trim() method is used to remove leading and trailin
    double result = 0.0;				      |	     */
    int start = 0;					      |		XMLString s = trim();
    int punctPos = end-1;				      |		double result = Double.NaN;
							      |		for (int i = 0; i < s.length(); i++)
    // Scan to first whitespace character.		      |		{
    for (int i = start; i < end; i++)			      |			char c = s.charAt(i);
    {							      |	    if (c != '-' && c != '.' && ( c < 0X30 || c > 0x39)) {
      char c = charAt(i);				      |	            // The character is not a '-' or a '.' or a digit
							      |	            // then return NaN because something is wrong.
      if (!XMLCharacterRecognizer.isWhiteSpace(c))	      |				return result;
      {							      <
        break;						      <
      }							      <
      else						      <
        start++;					      <
    }							      <
							      <
    double sign = 1.0;					      <
							      <
    if (start < end && charAt(start) == '-')		      <
    {							      <
      sign = -1.0;					      <
							      <
      start++;						      <
    }							      <
							      <
    int digitsFound = 0;				      <
							      <
    for (int i = start; i < end; i++)  // parse the string fr <
    {							      <
      char c = charAt(i);				      <
							      <
      if (c != '.')					      <
      {							      <
        if (XMLCharacterRecognizer.isWhiteSpace(c))	      <
          break;					      <
        else if (Character.isDigit(c))			      <
        {						      <
          result = result * 10.0 + (c - 0x30);		      <
							      <
          digitsFound++;				      <
        else						      |		}
        {						      |		try
          return Double.NaN;				      |		{
        }						      |			result = Double.parseDouble(s.toString());
      }							      |		} catch (NumberFormatException e){}
      else						      <
      {							      <
        punctPos = i;					      <
        break;						      |		return result;
      }							      |	}
    }							      <
							      <
    if (charAt(punctPos) == '.')  // parse the string from th <
    {							      <
      double fractPart = 0.0;				      <
							      <
      for (int i = end - 1; i > punctPos; i--)		      <
      {							      <
        char c = charAt(i);				      <
							      <
        if (XMLCharacterRecognizer.isWhiteSpace(c))	      <
          break;					      <
        else if (Character.isDigit(c))			      <
        {						      <
          fractPart = fractPart / 10.0 + (c - 0x30);	      <
							      <
          digitsFound++;				      <
        }						      <
        else						      <
        {						      <
          return Double.NaN;				      <
        }						      <
      }							      <
							      <
      result += fractPart / 10.0;			      <
    }							      <
							      <
    if (0 == digitsFound)				      <
      return Double.NaN;				      <
							      <
    return result * sign;				      <
  }							      <
   * @param   anObject   the object to compare this <code>Str |	   * @param   obj2       the object to compare this <code>Str
   *							      <
   * NEEDSDOC @param obj2				      <
   * @param   anotherString   the <code>String</code> to be c |	   * @param   xstr   the <code>String</code> to be compared.
   * NEEDSDOC @param xstr				      <
   * "Fahrvergngen".toUpperCase() returns "FAHRVERGNGEN"      |	   * "Fahrvergn&uuml;gen".toUpperCase() returns "FAHRVERGN&Uu
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/And.java xalan-j_2_7_0/src/org/apache/xpath/operations/And.java
 * $Id: And.java,v 1.9 2004/02/17 04:35:12 minchau Exp $      |	 * $Id: And.java,v 1.10 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 392330077126534022L;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Bool.java xalan-j_2_7_0/src/org/apache/xpath/operations/Bool.java
 * $Id: Bool.java,v 1.9 2004/02/17 04:35:12 minchau Exp $     |	 * $Id: Bool.java,v 1.10 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 44705375321914635L;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Div.java xalan-j_2_7_0/src/org/apache/xpath/operations/Div.java
 * $Id: Div.java,v 1.8 2004/02/17 04:35:12 minchau Exp $      |	 * $Id: Div.java,v 1.9 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 6220756595959798135L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Equals.java xalan-j_2_7_0/src/org/apache/xpath/operations/Equals.java
 * $Id: Equals.java,v 1.9 2004/02/17 04:35:12 minchau Exp $   |	 * $Id: Equals.java,v 1.10 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = -2658315633903426134
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Gte.java xalan-j_2_7_0/src/org/apache/xpath/operations/Gte.java
 * $Id: Gte.java,v 1.7 2004/02/17 04:35:12 minchau Exp $      |	 * $Id: Gte.java,v 1.8 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 9142945909906680220L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Gt.java xalan-j_2_7_0/src/org/apache/xpath/operations/Gt.java
 * $Id: Gt.java,v 1.7 2004/02/17 04:35:12 minchau Exp $	      |	 * $Id: Gt.java,v 1.8 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 8927078751014375950L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Lte.java xalan-j_2_7_0/src/org/apache/xpath/operations/Lte.java
 * $Id: Lte.java,v 1.7 2004/02/17 04:35:12 minchau Exp $      |	 * $Id: Lte.java,v 1.8 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 6945650810527140228L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Lt.java xalan-j_2_7_0/src/org/apache/xpath/operations/Lt.java
 * $Id: Lt.java,v 1.7 2004/02/17 04:35:12 minchau Exp $	      |	 * $Id: Lt.java,v 1.8 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 3388420509289359422L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Minus.java xalan-j_2_7_0/src/org/apache/xpath/operations/Minus.java
 * $Id: Minus.java,v 1.8 2004/02/17 04:35:12 minchau Exp $    |	 * $Id: Minus.java,v 1.9 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = -5297672838170871043
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Mod.java xalan-j_2_7_0/src/org/apache/xpath/operations/Mod.java
 * $Id: Mod.java,v 1.8 2004/02/17 04:35:12 minchau Exp $      |	 * $Id: Mod.java,v 1.9 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 5009471154238918201L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Mult.java xalan-j_2_7_0/src/org/apache/xpath/operations/Mult.java
 * $Id: Mult.java,v 1.8 2004/02/17 04:35:12 minchau Exp $     |	 * $Id: Mult.java,v 1.9 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = -4956770147013414675
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Neg.java xalan-j_2_7_0/src/org/apache/xpath/operations/Neg.java
 * $Id: Neg.java,v 1.8 2004/02/17 04:35:12 minchau Exp $      |	 * $Id: Neg.java,v 1.9 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = -6280607702375702291
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/NotEquals.java xalan-j_2_7_0/src/org/apache/xpath/operations/NotEquals.java
 * $Id: NotEquals.java,v 1.7 2004/02/17 04:35:12 minchau Exp  |	 * $Id: NotEquals.java,v 1.8 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = -7869072863070586900
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Number.java xalan-j_2_7_0/src/org/apache/xpath/operations/Number.java
 * $Id: Number.java,v 1.8 2004/02/17 04:35:12 minchau Exp $   |	 * $Id: Number.java,v 1.9 2004/08/17 19:25:40 jycli Exp $
							      >	    static final long serialVersionUID = 7196954482871619765L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Operation.java xalan-j_2_7_0/src/org/apache/xpath/operations/Operation.java
 * $Id: Operation.java,v 1.12 2004/02/17 04:35:12 minchau Exp |	 * $Id: Operation.java,v 1.14 2005/01/23 01:08:22 mcnamara Ex
							      >	    static final long serialVersionUID = -3037139537171050430
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Or.java xalan-j_2_7_0/src/org/apache/xpath/operations/Or.java
 * $Id: Or.java,v 1.9 2004/02/17 04:35:12 minchau Exp $	      |	 * $Id: Or.java,v 1.10 2004/08/17 19:25:41 jycli Exp $
							      >	    static final long serialVersionUID = -644107191353853079L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Plus.java xalan-j_2_7_0/src/org/apache/xpath/operations/Plus.java
 * $Id: Plus.java,v 1.8 2004/02/17 04:35:12 minchau Exp $     |	 * $Id: Plus.java,v 1.9 2004/08/17 19:25:41 jycli Exp $
							      >	    static final long serialVersionUID = -4492072861616504256
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Quo.java xalan-j_2_7_0/src/org/apache/xpath/operations/Quo.java
 * $Id: Quo.java,v 1.7 2004/02/17 04:35:12 minchau Exp $      |	 * $Id: Quo.java,v 1.9 2005/01/23 01:08:22 mcnamara Exp $
 * @deprecated.						      |	 * @deprecated
							      >	    static final long serialVersionUID = 693765299196169905L;
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/String.java xalan-j_2_7_0/src/org/apache/xpath/operations/String.java
 * $Id: String.java,v 1.7 2004/02/17 04:35:12 minchau Exp $   |	 * $Id: String.java,v 1.8 2004/08/17 19:25:41 jycli Exp $
							      >	    static final long serialVersionUID = 2973374377453022888L
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/UnaryOperation.java xalan-j_2_7_0/src/org/apache/xpath/operations/UnaryOperation.java
 * $Id: UnaryOperation.java,v 1.12 2004/02/17 04:35:12 mincha |	 * $Id: UnaryOperation.java,v 1.14 2005/01/23 01:08:22 mcnama
							      >	    static final long serialVersionUID = 6536083808424286166L
   * @see XPathVisitable#callVisitors(XPathVisitor)	      |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/Variable.java xalan-j_2_7_0/src/org/apache/xpath/operations/Variable.java
 * $Id: Variable.java,v 1.22 2004/02/17 04:35:12 minchau Exp  |	 * $Id: Variable.java,v 1.26 2005/05/17 17:22:15 mkwan Exp $
							      >	    static final long serialVersionUID = -4334975375609297049
  	org.apache.xml.utils.PrefixResolver xprefixResolver = |	    org.apache.xml.utils.PrefixResolver xprefixResolver = xct
							      >	    XObject result;
      XObject result;					      <
							      >	    } 
							      >	    else {  
							      >	    	result = xctxt.getVarStack().getVariableOrParam(xctxt
							      >	    }
    }							      |	//    }
    else						      |	//    else
    {							      |	//    {
      // Hack city... big time.  This is needed to evaluate x |	//      // Hack city... big time.  This is needed to evaluate
      // pending some bright light going off in my head.  Som |	//      // pending some bright light going off in my head.  S
      synchronized(this)				      |	//      synchronized(this)
      {							      |	//      {
      	org.apache.xalan.templates.ElemVariable vvar= getElem |	//      	org.apache.xalan.templates.ElemVariable vvar=
      	if(null != vvar)				      |	//      	if(null != vvar)
      	{						      |	//      	{
          m_index = vvar.getIndex();			      |	//          m_index = vvar.getIndex();
          m_isGlobal = vvar.getIsTopLevel();		      |	//          m_isGlobal = vvar.getIsTopLevel();
          m_fixUpWasCalled = true;			      |	//          m_fixUpWasCalled = true;
          return execute(xctxt);			      |	//          return execute(xctxt);
      	}						      |	//      	}
      }							      |	//      }
      throw new javax.xml.transform.TransformerException(XSLM |	//      throw new javax.xml.transform.TransformerException(XS
    }							      |	//    }
							      >	    org.apache.xalan.templates.ElemVariable vvar = null;
      org.apache.xalan.templates.ElemVariable vvar;	      <
							      <
        while ( !(prev.getParentNode() instanceof org.apache. |	        while ( prev != null && !(prev.getParentNode() instan
							      >	              vvar = null; 	 	
							      |	      if (prev != null)
      vvar = prev.getStylesheetRoot().getVariableOrParamCompo |	        vvar = prev.getStylesheetRoot().getVariableOrParamCom
      if (null != vvar)					      <
      {							      <
        return vvar;					      <
      }							      <
							      <
    return null;					      |	    return vvar;
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/operations/VariableSafeAbsRef.java xalan-j_2_7_0/src/org/apache/xpath/operations/VariableSafeAbsRef.java
 * $Id: VariableSafeAbsRef.java,v 1.5 2004/02/17 04:35:12 min |	 * $Id: VariableSafeAbsRef.java,v 1.6 2004/08/17 19:25:41 jyc
							      >	    static final long serialVersionUID = -9174661990819967452
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/patterns/ContextMatchStepPattern.java xalan-j_2_7_0/src/org/apache/xpath/patterns/ContextMatchStepPattern.java
 * $Id: ContextMatchStepPattern.java,v 1.6 2004/02/17 04:35:3 |	 * $Id: ContextMatchStepPattern.java,v 1.8 2005/01/24 04:04:4
							      >	    static final long serialVersionUID = -1888092779313211942
   * @param whatToShow Bit set defined mainly by {@link org.w <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/patterns/FunctionPattern.java xalan-j_2_7_0/src/org/apache/xpath/patterns/FunctionPattern.java
 * $Id: FunctionPattern.java,v 1.13 2004/02/17 04:35:37 minch |	 * $Id: FunctionPattern.java,v 1.15 2005/01/23 01:08:22 mcnam
							      >	    static final long serialVersionUID = -5426793413091209944
   *							      <
   *							      <
   * @param a should be a {@link org.apache.xpath.functions.F <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/patterns/NodeTest.java xalan-j_2_7_0/src/org/apache/xpath/patterns/NodeTest.java
 * $Id: NodeTest.java,v 1.27 2004/02/17 04:35:37 minchau Exp  |	 * $Id: NodeTest.java,v 1.30 2005/01/23 01:08:22 mcnamara Exp
							      >	    static final long serialVersionUID = -5736721866747906182
      String ns = dtm.getNodeValue(context);		      |	      String ns = dtm.getLocalName(context);
      String ns = dtm.getNodeValue(context);		      |	      String ns = dtm.getLocalName(context);
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/patterns/StepPattern.java xalan-j_2_7_0/src/org/apache/xpath/patterns/StepPattern.java
 * $Id: StepPattern.java,v 1.28 2004/02/17 04:35:37 minchau E |	 * $Id: StepPattern.java,v 1.31 2005/01/23 01:08:22 mcnamara 
							      >	    static final long serialVersionUID = 9071668960168152644L
      buf.append(Axis.names[pat.m_axis]);		      |	      buf.append(Axis.getNames(pat.m_axis));
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/patterns/UnionPattern.java xalan-j_2_7_0/src/org/apache/xpath/patterns/UnionPattern.java
 * $Id: UnionPattern.java,v 1.13 2004/02/17 04:35:37 minchau  |	 * $Id: UnionPattern.java,v 1.15 2005/01/23 01:08:22 mcnamara
							      >	    static final long serialVersionUID = -6670449967116905820
   * @see XPathVisitable#callVisitors(ExpressionOwner, XPathV |	   * @see org.apache.xpath.XPathVisitable#callVisitors(Expres
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_ca.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_ca.java
 * $Id: XPATHErrorResources_ca.java,v 1.3 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_ca.java,v 1.5 2005/01/23 01:39:54
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_cs.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_cs.java
 * $Id: XPATHErrorResources_cs.java,v 1.3 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_cs.java,v 1.5 2005/01/23 01:39:54
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_de.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_de.java
 * $Id: XPATHErrorResources_de.java,v 1.8 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_de.java,v 1.10 2005/01/23 01:39:5
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_es.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_es.java
 * $Id: XPATHErrorResources_es.java,v 1.8 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_es.java,v 1.10 2005/01/23 01:39:5
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_fr.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_fr.java
 * $Id: XPATHErrorResources_fr.java,v 1.8 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_fr.java,v 1.10 2005/01/23 01:39:5
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_hu.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_hu.java
 * $Id: XPATHErrorResources_hu.java,v 1.3 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_hu.java,v 1.5 2005/01/23 01:39:54
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_it.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_it.java
 * $Id: XPATHErrorResources_it.java,v 1.8 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_it.java,v 1.10 2005/01/23 01:39:5
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_ja.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_ja.java
 * $Id: XPATHErrorResources_ja.java,v 1.8 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_ja.java,v 1.10 2005/01/23 01:39:5
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources.java
 * Copyright 1999-2004 The Apache Software Foundation.	      |	 * Copyright 1999-2005 The Apache Software Foundation.
 * $Id: XPATHErrorResources.java,v 1.24 2004/02/17 04:36:46 m |	 * $Id: XPATHErrorResources.java,v 1.32 2005/06/29 19:33:06 j
  /** Field MAX_CODE          */			      <
  public static final int MAX_CODE = 108;  // this is needed  <
							      <
  /** Field MAX_WARNING          */			      <
  public static final int MAX_WARNING = 11;  // this is neede <
							      <
  /** Field MAX_OTHERS          */			      <
  public static final int MAX_OTHERS = 20;		      <
							      <
  /** Field MAX_MESSAGES          */			      <
  public static final int MAX_MESSAGES = MAX_CODE + MAX_WARNI <
							      <
							      <
							      >	  public static final String ER_CANT_CONVERT_XPATHRESULTTYPE_
							      >		   "ER_CANT_CONVERT_XPATHRESULTTYPE_TO_NUMBER";	 
  //public static final String ER_CREATEDOCUMENT_NOT_SUPPORTE <
//	 "ER_CREATEDOCUMENT_NOT_SUPPORTED";		      <
  //public static final String ER_CHILD_HAS_NO_OWNER_DOCUMENT <
//	 "ER_CHILD_HAS_NO_OWNER_DOCUMENT";		      <
  //public static final String ER_CHILD_HAS_NO_OWNER_DOCUMENT <
//	 "ER_CHILD_HAS_NO_OWNER_DOCUMENT_ELEMENT";	      <
  //public static final String ER_CANT_OUTPUT_TEXT_BEFORE_DOC <
//	 "ER_CANT_OUTPUT_TEXT_BEFORE_DOC";		      <
  //public static final String ER_CANT_HAVE_MORE_THAN_ONE_ROO <
//	 "ER_CANT_HAVE_MORE_THAN_ONE_ROOT";		      <
 //public static final String ER_ARG_LOCALNAME_NULL = "ER_ARG <
							      >	  public static final String ER_EXPECTED_LOC_PATH_AT_END_EXPR
							      >	                                        "ER_EXPECTED_LOC_PATH
  /** localname in QNAME should be a valid NCName */	      |	  /** ER_CANT_CONVERT_XPATHRESULTTYPE_TO_BOOLEAN          */
  //public static final String ER_ARG_LOCALNAME_INVALID =     <
//	 "ER_ARG_LOCALNAME_INVALID";			      <
  /** prefix in QNAME should be a valid NCName */	      <
  //public static final String ER_ARG_PREFIX_INVALID = "ER_AR <
  /** Field ER_CANT_CONVERT_TO_BOOLEAN          */	      <
							      >	  //BEGIN: Keys needed for exception messages of  JAXP 1.3 XP
							      >	  public static final String ER_EXTENSION_FUNCTION_CANNOT_BE_
							      >	  public static final String ER_RESOLVE_VARIABLE_RETURNS_NULL
							      >	  public static final String ER_UNSUPPORTED_RETURN_TYPE = "ER
							      >	  public static final String ER_SOURCE_RETURN_TYPE_CANNOT_BE_
							      >	  public static final String ER_ARG_CANNOT_BE_NULL = "ER_ARG_
							      >
							      >	  public static final String ER_OBJECT_MODEL_NULL = "ER_OBJEC
							      >	  public static final String ER_OBJECT_MODEL_EMPTY = "ER_OBJE
							      >	  public static final String ER_FEATURE_NAME_NULL = "ER_FEATU
							      >	  public static final String ER_FEATURE_UNKNOWN = "ER_FEATURE
							      >	  public static final String ER_GETTING_NULL_FEATURE = "ER_GE
							      >	  public static final String ER_GETTING_UNKNOWN_FEATURE = "ER
							      >	  public static final String ER_NULL_XPATH_FUNCTION_RESOLVER 
							      >	  public static final String ER_NULL_XPATH_VARIABLE_RESOLVER 
							      >	  //END: Keys needed for exception messages of  JAXP 1.3 XPat
							      >
							      >	  /**  detach() not supported by XRTreeFragSelectWrapper   */
							      >	  public static final String ER_DETACH_NOT_SUPPORTED_XRTREEFR
							      >		 "ER_DETACH_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER";
							      >	  /**  num() not supported by XRTreeFragSelectWrapper   */
							      >	  public static final String ER_NUM_NOT_SUPPORTED_XRTREEFRAGS
							      >		 "ER_NUM_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER";
							      >	  /**  xstr() not supported by XRTreeFragSelectWrapper   */
							      >	  public static final String ER_XSTR_NOT_SUPPORTED_XRTREEFRAG
							      >		 "ER_XSTR_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER";
							      >	  /**  str() not supported by XRTreeFragSelectWrapper   */
							      >	  public static final String ER_STR_NOT_SUPPORTED_XRTREEFRAGS
							      >		 "ER_STR_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER";
  public static final Object[][] contents = {		      <
							      <
  /** Field ERROR0000          */			      <
//  public static final int ERROR0000 = 0;		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      <
  /** Field ER_CURRENT_NOT_ALLOWED_IN_MATCH          */	      <
//  public static final int ER_CURRENT_NOT_ALLOWED_IN_MATCH = <
							      <
  /** Field ER_CURRENT_TAKES_NO_ARGS          */	      <
  //public static final int ER_CURRENT_TAKES_NO_ARGS = 2;     <
							      <
  /** Field ER_DOCUMENT_REPLACED          */		      <
//  public static final int ER_DOCUMENT_REPLACED = 3;	      <
  							      <
							      <
  /** Field ER_CONTEXT_HAS_NO_OWNERDOC          */	      <
 // public static final int ER_CONTEXT_HAS_NO_OWNERDOC = 4;   <
  /** Field ER_LOCALNAME_HAS_TOO_MANY_ARGS          */	      <
 // public static final int ER_LOCALNAME_HAS_TOO_MANY_ARGS =  <
							      <
  /** Field ER_NAMESPACEURI_HAS_TOO_MANY_ARGS          */     <
 //public static final int ER_NAMESPACEURI_HAS_TOO_MANY_ARGS  <
							      <
  /** Field ER_NORMALIZESPACE_HAS_TOO_MANY_ARGS          */   <
//  public static final int ER_NORMALIZESPACE_HAS_TOO_MANY_AR <
  /** Field ER_NUMBER_HAS_TOO_MANY_ARGS          */	      <
//  public static final int ER_NUMBER_HAS_TOO_MANY_ARGS = 8;  <
							      <
  /** Field ER_NAME_HAS_TOO_MANY_ARGS          */	      <
//  public static final int ER_NAME_HAS_TOO_MANY_ARGS = 9;    <
							      <
  /** Field ER_STRING_HAS_TOO_MANY_ARGS          */	      <
//  public static final int ER_STRING_HAS_TOO_MANY_ARGS = 10; <
							      <
  /** Field ER_STRINGLENGTH_HAS_TOO_MANY_ARGS          */     <
//  public static final int ER_STRINGLENGTH_HAS_TOO_MANY_ARGS <
							      <
  /** Field ER_TRANSLATE_TAKES_3_ARGS          */	      <
//  public static final int ER_TRANSLATE_TAKES_3_ARGS = 12;   <
							      <
  /** Field ER_UNPARSEDENTITYURI_TAKES_1_ARG          */      <
//  public static final int ER_UNPARSEDENTITYURI_TAKES_1_ARG  <
							      <
  /** Field ER_NAMESPACEAXIS_NOT_IMPLEMENTED          */      <
//  public static final int ER_NAMESPACEAXIS_NOT_IMPLEMENTED  <
							      <
  /** Field ER_UNKNOWN_AXIS          */			      <
//  public static final int ER_UNKNOWN_AXIS = 15;	      <
							      <
  /** Field ER_UNKNOWN_MATCH_OPERATION          */	      <
//  public static final int ER_UNKNOWN_MATCH_OPERATION = 16;  <
							      <
  /** Field ER_INCORRECT_ARG_LENGTH          */		      <
//  public static final int ER_INCORRECT_ARG_LENGTH = 17;     <
							      <
  /** Field ER_CANT_CONVERT_TO_NUMBER          */	      <
//  public static final int ER_CANT_CONVERT_TO_NUMBER = 18;   <
							      <
  /** Field ER_CANT_CONVERT_TO_NODELIST          */	      <
  //public static final int ER_CANT_CONVERT_TO_NODELIST = 19; <
							      <
  /** Field ER_CANT_CONVERT_TO_MUTABLENODELIST          */    <
//  public static final int ER_CANT_CONVERT_TO_MUTABLENODELIS <
							      <
  /** Field ER_CANT_CONVERT_TO_TYPE          */		      <
//  public static final int ER_CANT_CONVERT_TO_TYPE = 21;     <
							      <
  /** Field ER_EXPECTED_MATCH_PATTERN          */	      <
//  public static final int ER_EXPECTED_MATCH_PATTERN = 22;   <
							      <
  /** Field ER_COULDNOT_GET_VAR_NAMED          */	      <
//  public static final int ER_COULDNOT_GET_VAR_NAMED = 23;   <
							      <
  /** Field ER_UNKNOWN_OPCODE          */		      <
//  public static final int ER_UNKNOWN_OPCODE = 24;	      <
							      <
  /** Field ER_EXTRA_ILLEGAL_TOKENS          */		      <
//  public static final int ER_EXTRA_ILLEGAL_TOKENS = 25;     <
							      <
  /** Field ER_EXPECTED_DOUBLE_QUOTE          */	      <
//  public static final int ER_EXPECTED_DOUBLE_QUOTE = 26;    <
							      <
  /** Field ER_EXPECTED_SINGLE_QUOTE          */	      <
//  public static final int ER_EXPECTED_SINGLE_QUOTE = 27;    <
							      <
  /** Field ER_EMPTY_EXPRESSION          */		      <
//  public static final int ER_EMPTY_EXPRESSION = 28;	      <
							      <
  /** Field ER_EXPECTED_BUT_FOUND          */		      <
//  public static final int ER_EXPECTED_BUT_FOUND = 29;	      <
							      <
  /** Field ER_INCORRECT_PROGRAMMER_ASSERTION          */     <
//  public static final int ER_INCORRECT_PROGRAMMER_ASSERTION <
							      <
  /** Field ER_BOOLEAN_ARG_NO_LONGER_OPTIONAL          */     <
//  public static final int ER_BOOLEAN_ARG_NO_LONGER_OPTIONAL <
							      <
  /** Field ER_FOUND_COMMA_BUT_NO_PRECEDING_ARG          */   <
//  public static final int ER_FOUND_COMMA_BUT_NO_PRECEDING_A <
							      <
  /** Field ER_FOUND_COMMA_BUT_NO_FOLLOWING_ARG          */   <
//  public static final int ER_FOUND_COMMA_BUT_NO_FOLLOWING_A <
							      <
  /** Field ER_PREDICATE_ILLEGAL_SYNTAX          */	      <
//  public static final int ER_PREDICATE_ILLEGAL_SYNTAX = 34; <
							      <
  /** Field ER_ILLEGAL_AXIS_NAME          */		      <
//  public static final int ER_ILLEGAL_AXIS_NAME = 35;	      <
							      <
  /** Field ER_UNKNOWN_NODETYPE          */		      <
//  public static final int ER_UNKNOWN_NODETYPE = 36;	      <
							      <
  /** Field ER_PATTERN_LITERAL_NEEDS_BE_QUOTED          */    <
//  public static final int ER_PATTERN_LITERAL_NEEDS_BE_QUOTE <
							      <
  /** Field ER_COULDNOT_BE_FORMATTED_TO_NUMBER          */    <
//  public static final int ER_COULDNOT_BE_FORMATTED_TO_NUMBE <
							      <
  /** Field ER_COULDNOT_CREATE_XMLPROCESSORLIAISON          * <
//  public static final int ER_COULDNOT_CREATE_XMLPROCESSORLI <
							      <
  /** Field ER_DIDNOT_FIND_XPATH_SELECT_EXP          */	      <
//  public static final int ER_DIDNOT_FIND_XPATH_SELECT_EXP = <
							      <
  /** Field ER_COULDNOT_FIND_ENDOP_AFTER_OPLOCATIONPATH       <
//  public static final int ER_COULDNOT_FIND_ENDOP_AFTER_OPLO <
							      <
  /** Field ER_ERROR_OCCURED          */		      <
//  public static final int ER_ERROR_OCCURED = 42;	      <
							      <
  /** Field ER_ILLEGAL_VARIABLE_REFERENCE          */	      <
//  public static final int ER_ILLEGAL_VARIABLE_REFERENCE = 4 <
							      <
  /** Field ER_AXES_NOT_ALLOWED          */		      <
//  public static final int ER_AXES_NOT_ALLOWED = 44;	      <
							      <
  /** Field ER_KEY_HAS_TOO_MANY_ARGS          */	      <
//  public static final int ER_KEY_HAS_TOO_MANY_ARGS = 45;    <
							      <
  /** Field ER_COUNT_TAKES_1_ARG          */		      <
//  public static final int ER_COUNT_TAKES_1_ARG = 46;	      <
							      <
  /** Field ER_COULDNOT_FIND_FUNCTION          */	      <
//  public static final int ER_COULDNOT_FIND_FUNCTION = 47;   <
							      <
  /** Field ER_UNSUPPORTED_ENCODING          */		      <
//  public static final int ER_UNSUPPORTED_ENCODING = 48;     <
							      <
  /** Field ER_PROBLEM_IN_DTM_NEXTSIBLING          */	      <
//  public static final int ER_PROBLEM_IN_DTM_NEXTSIBLING = 4 <
							      <
  /** Field ER_CANNOT_WRITE_TO_EMPTYNODELISTIMPL          */  <
//  public static final int ER_CANNOT_WRITE_TO_EMPTYNODELISTI <
							      <
  /** Field ER_SETDOMFACTORY_NOT_SUPPORTED          */	      <
//  public static final int ER_SETDOMFACTORY_NOT_SUPPORTED =  <
							      <
  /** Field ER_PREFIX_MUST_RESOLVE          */		      <
//  public static final int ER_PREFIX_MUST_RESOLVE = 52;      <
							      <
  /** Field ER_PARSE_NOT_SUPPORTED          */		      <
//  public static final int ER_PARSE_NOT_SUPPORTED = 53;      <
							      <
  /** Field ER_CREATEDOCUMENT_NOT_SUPPORTED          */	      <
//  public static final int ER_CREATEDOCUMENT_NOT_SUPPORTED = <
							      <
  //{ ER_CREATEDOCUMENT_NOT_SUPPORTED,			      <
  //    "createDocument() not supported in XPathContext!"},   <
							      <
  /** Field ER_CHILD_HAS_NO_OWNER_DOCUMENT          */	      <
//  public static final int ER_CHILD_HAS_NO_OWNER_DOCUMENT =  <
							      <
  //{ ER_CHILD_HAS_NO_OWNER_DOCUMENT,			      <
  //    "Attribute child does not have an owner document!"},  <
							      <
  /** Field ER_CHILD_HAS_NO_OWNER_DOCUMENT_ELEMENT          * <
//  public static final int ER_CHILD_HAS_NO_OWNER_DOCUMENT_EL <
							      <
  //{ ER_CHILD_HAS_NO_OWNER_DOCUMENT_ELEMENT,		      <
  //    "Attribute child does not have an owner document elem <
							      <
  /** Field ER_SAX_API_NOT_HANDLED          */		      <
//  public static final int ER_SAX_API_NOT_HANDLED = 57;      <
							      <
  /** Field ER_IGNORABLE_WHITESPACE_NOT_HANDLED          */   <
//public static final int ER_IGNORABLE_WHITESPACE_NOT_HANDLED <
							      <
  /** Field ER_DTM_CANNOT_HANDLE_NODES          */	      <
//  public static final int ER_DTM_CANNOT_HANDLE_NODES = 59;  <
							      <
  /** Field ER_XERCES_CANNOT_HANDLE_NODES          */	      <
//  public static final int ER_XERCES_CANNOT_HANDLE_NODES = 6 <
							      <
  /** Field ER_XERCES_PARSE_ERROR_DETAILS          */	      <
//  public static final int ER_XERCES_PARSE_ERROR_DETAILS = 6 <
							      <
  /** Field ER_XERCES_PARSE_ERROR          */		      <
//  public static final int ER_XERCES_PARSE_ERROR = 62;	      <
							      <
  /** Field ER_CANT_OUTPUT_TEXT_BEFORE_DOC          */	      <
//  public static final int ER_CANT_OUTPUT_TEXT_BEFORE_DOC =  <
							      <
  //{ ER_CANT_OUTPUT_TEXT_BEFORE_DOC,			      <
   //   "Warning: can't output text before document element!  <
							      <
  /** Field ER_CANT_HAVE_MORE_THAN_ONE_ROOT          */	      <
//  public static final int ER_CANT_HAVE_MORE_THAN_ONE_ROOT = <
							      <
  //{ ER_CANT_HAVE_MORE_THAN_ONE_ROOT,			      <
   //   "Can't have more than one root on a DOM!"},	      <
							      <
  /** Field ER_INVALID_UTF16_SURROGATE          */	      <
//  public static final int ER_INVALID_UTF16_SURROGATE = 65;  <
							      <
  /** Field ER_OIERROR          */			      <
  //public static final int ER_OIERROR = 66;		      <
							      <
  /** Field ER_CANNOT_CREATE_URL          */		      <
  //public static final int ER_CANNOT_CREATE_URL = 67;	      <
							      <
  /** Field ER_XPATH_READOBJECT          */		      <
//  public static final int ER_XPATH_READOBJECT = 68;	      <
							      <
  							      <
  /** Field ER_FUNCTION_TOKEN_NOT_FOUND         */	      <
// public static final int ER_FUNCTION_TOKEN_NOT_FOUND = 69;  <
  							      <
   /**  Argument 'localName' is null  */		      <
// public static final int ER_ARG_LOCALNAME_NULL = 70;	      <
							      <
  //{ ER_ARG_LOCALNAME_NULL,				      <
  //     "Argument 'localName' is null"},		      <
  							      <
   /**  Can not deal with XPath type:   */		      <
//  public static final int ER_CANNOT_DEAL_XPATH_TYPE = 71;   <
  							      <
   /**  This NodeSet is not mutable  */			      <
 // public static final int ER_NODESET_NOT_MUTABLE = 72;      <
  							      <
   /**  This NodeSetDTM is not mutable  */		      <
//  public static final int ER_NODESETDTM_NOT_MUTABLE = 73;   <
  							      <
   /**  Variable not resolvable:   */			      <
//  public static final int ER_VAR_NOT_RESOLVABLE = 74;	      <
  							      <
   /** Null error handler  */				      <
// public static final int ER_NULL_ERROR_HANDLER = 75;	      <
  							      <
   /**  Programmer's assertion: unknown opcode  */	      <
 // public static final int ER_PROG_ASSERT_UNKNOWN_OPCODE = 7 <
  							      <
   /**  0 or 1   */					      <
//  public static final int ER_ZERO_OR_ONE = 77;	      <
  							      <
  							      <
   /**  rtf() not supported by XRTreeFragSelectWrapper   */   <
  //public static final int ER_RTF_NOT_SUPPORTED_XRTREEFRAGSE <
  							      <
   /**  asNodeIterator() not supported by XRTreeFragSelectWra <
  //public static final int ER_ASNODEITERATOR_NOT_SUPPORTED_X <
  							      |	       
   /**  fsb() not supported for XStringForChars   */	      |		/**  detach() not supported by XRTreeFragSelectWrappe
 // public static final int ER_FSB_NOT_SUPPORTED_XSTRINGFORCH |	   { ER_DETACH_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER,
							      >			"detach() not supported by XRTreeFragSelectWr
							      >			
							      >		/**  num() not supported by XRTreeFragSelectWrapper  
							      >	   { ER_NUM_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER,
							      >			"num() not supported by XRTreeFragSelectWrapp
							      >			
							      >		/**  xstr() not supported by XRTreeFragSelectWrapper 
							      >	   { ER_XSTR_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER,
							      >			"xstr() not supported by XRTreeFragSelectWrap
							      >			
							      >		/**  str() not supported by XRTreeFragSelectWrapper  
							      >	   { ER_STR_NOT_SUPPORTED_XRTREEFRAGSELECTWRAPPER,
							      >			"str() not supported by XRTreeFragSelectWrapp
  							      <
   /**  Could not find variable with the name of   */	      <
// public static final int ER_COULD_NOT_FIND_VAR = 81;	      <
  							      <
   /**  XStringForChars can not take a string for an argument <
// public static final int ER_XSTRINGFORCHARS_CANNOT_TAKE_STR <
  							      <
   /**  The FastStringBuffer argument can not be null   */    <
// public static final int ER_FASTSTRINGBUFFER_CANNOT_BE_NULL <
  /* MANTIS_XALAN CHANGE: BEGIN */ 			      <
   /**  2 or 3   */					      <
//  public static final int ER_TWO_OR_THREE = 84;	      <
							      <
   /** Variable accessed before it is bound! */		      <
//  public static final int ER_VARIABLE_ACCESSED_BEFORE_BIND  <
							      <
   /** XStringForFSB can not take a string for an argument! * <
// public static final int ER_FSB_CANNOT_TAKE_STRING = 86;    <
							      <
   /** Error! Setting the root of a walker to null! */	      <
//  public static final int ER_SETTING_WALKER_ROOT_TO_NULL =  <
							      <
   /** This NodeSetDTM can not iterate to a previous node! */ <
//  public static final int ER_NODESETDTM_CANNOT_ITERATE = 88 <
							      <
  /** This NodeSet can not iterate to a previous node! */     <
// public static final int ER_NODESET_CANNOT_ITERATE = 89;    <
							      <
  /** This NodeSetDTM can not do indexing or counting functio <
//  public static final int ER_NODESETDTM_CANNOT_INDEX = 90;  <
							      <
  /** This NodeSet can not do indexing or counting functions! <
//  public static final int ER_NODESET_CANNOT_INDEX = 91;     <
							      <
  /** Can not call setShouldCacheNodes after nextNode has bee <
//  public static final int ER_CANNOT_CALL_SETSHOULDCACHENODE <
							      <
  /** {0} only allows {1} arguments */			      <
// public static final int ER_ONLY_ALLOWS = 93;		      <
							      <
  /** Programmer's assertion in getNextStepPos: unknown stepT <
//  public static final int ER_UNKNOWN_STEP = 94;	      <
							      <
							      <
  /** Problem with RelativeLocationPath */		      <
//  public static final int ER_EXPECTED_REL_LOC_PATH = 95;    <
							      <
							      <
  /** Problem with LocationPath */			      <
//  public static final int ER_EXPECTED_LOC_PATH = 96;	      <
							      <
							      >	  // Note to translators:  A location path is a form of XPath
							      >	  // The message indicates that syntactically such a subexpre
							      >	  // but no more characters were found in the expression.
							      >	  { ER_EXPECTED_LOC_PATH_AT_END_EXPR,
							      >	       "A location path was expected, but the end of the XPat
							      >
							      <
  /** Problem with Step */				      <
//  public static final int ER_EXPECTED_LOC_STEP = 97;	      <
							      <
							      <
  /** Problem with NodeTest */				      <
//  public static final int ER_EXPECTED_NODE_TEST = 98;	      <
							      <
							      <
  /** Expected step pattern */				      <
//  public static final int ER_EXPECTED_STEP_PATTERN = 99;    <
							      <
 							      <
  /** Expected relative path pattern */			      <
//  public static final int ER_EXPECTED_REL_PATH_PATTERN = 10 <
							      <
  // Note to translators:  A QNAME has the syntactic form [NC <
  // The localname is the portion after the optional colon; t <
  // that there is a problem with that part of the QNAME.     <
							      <
  /** localname in QNAME should be a valid NCName */	      <
//  public static final int ER_ARG_LOCALNAME_INVALID = 101;   <
							      <
  //{ ER_ARG_LOCALNAME_INVALID,				      <
  //     "Localname in QNAME should be a valid NCName"},      <
  							      <
  // Note to translators:  A QNAME has the syntactic form [NC <
  // The prefix is the portion before the optional colon; the <
  // that there is a problem with that part of the QNAME.     <
							      <
  /** prefix in QNAME should be a valid NCName */	      <
 // public static final int ER_ARG_PREFIX_INVALID = 102;      <
							      <
  //{ ER_ARG_PREFIX_INVALID,				      <
   //    "Prefix in QNAME should be a valid NCName"},	      <
							      <
  // to a value of type string.				      |	  // to a value of type boolean.
							      <
  /** Field ER_CANT_CONVERT_TO_BOOLEAN          */	      <
//  public static final int ER_CANT_CONVERT_TO_BOOLEAN = 103; <
							      <
       "Cannot convert {0} to a boolean."},		      |	       "The XPathResult of XPath expression ''{0}'' has an XP
							      <
  /** Field ER_CANT_CONVERT_TO_SINGLENODE       */	      <
  //public static final int ER_CANT_CONVERT_TO_SINGLENODE = 1 <
							      <
       "Cannot convert {0} to a single node. This getter appl |	       "The XPathResult of XPath expression ''{0}'' has an XP
							      <
  /** Field ER_CANT_GET_SNAPSHOT_LENGTH         */	      <
//  public static final int ER_CANT_GET_SNAPSHOT_LENGTH = 105 <
							      <
       "Cannot get snapshot length on type: {0}. This getter  |	       "The method getSnapshotLength cannot be called on the 
							      <
  /** Field ER_NON_ITERATOR_TYPE                */	      <
  //public static final int ER_NON_ITERATOR_TYPE        = 106 <
       "Cannot iterate over non-iterator type: {0}"},	      |	       "The method iterateNext cannot be called on the XPathR
							      <
  /** Field ER_DOC_MUTATED                      */	      <
//  public static final int ER_DOC_MUTATED              = 107 <
							      <
  /** Field ER_INVALID_XPATH_TYPE               */	      <
//  public static final int ER_INVALID_XPATH_TYPE       = 108 <
							      <
  /** Field ER_EMPTY_XPATH_RESULT                */	      <
//  public static final int ER_EMPTY_XPATH_RESULT       = 109 <
							      <
  /** Field ER_INCOMPATIBLE_TYPES                */	      <
//  public static final int ER_INCOMPATIBLE_TYPES       = 110 <
							      <
       "The returned type: {0} cannot be coerced into the spe |	       "The XPathResult of XPath expression ''{0}'' has an XP
							      <
  /** Field ER_NULL_RESOLVER                     */	      <
 // public static final int ER_NULL_RESOLVER            = 111 <
							      <
  /** Field ER_CANT_CONVERT_TO_STRING            */	      <
//  public static final int ER_CANT_CONVERT_TO_STRING   = 112 <
							      <
       "Cannot convert {0} to a string."},		      |	       "The XPathResult of XPath expression ''{0}'' has an XP
							      <
  /** Field ER_NON_SNAPSHOT_TYPE                 */	      <
//  public static final int ER_NON_SNAPSHOT_TYPE       = 113; <
							      <
       "Cannot call snapshotItem on type: {0}. This method ap |	       "The method snapshotItem cannot be called on the XPath
							      <
  /** Field ER_WRONG_DOCUMENT                    */	      <
//  public static final int ER_WRONG_DOCUMENT          = 114; <
							      <
  /** Field ER_WRONG_NODETYPE                    */	      <
//  public static final int ER_WRONG_NODETYPE          = 115; <
							      <
  /** Field ER_XPATH_ERROR                       */	      <
//  public static final int ER_XPATH_ERROR             = 116; <
							      <
							      >	  { ER_CANT_CONVERT_XPATHRESULTTYPE_TO_NUMBER,
							      >		"The XPathResult of XPath expression ''{0}'' has an X
  // Warnings...					      |	  //BEGIN:  Definitions of error keys used  in exception mess
							      >
							      >	  /** Field ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED          
							      >
							      >	  { ER_EXTENSION_FUNCTION_CANNOT_BE_INVOKED,
							      >	       "Extension function: ''{0}'' can not be invoked when t
							      >
							      >	  /** Field ER_RESOLVE_VARIABLE_RETURNS_NULL                 
							      >
							      >	  { ER_RESOLVE_VARIABLE_RETURNS_NULL,
							      >	       "resolveVariable for variable {0} returning null"},
							      >
							      >	  /** Field ER_UNSUPPORTED_RETURN_TYPE                       
							      >
							      >	  { ER_UNSUPPORTED_RETURN_TYPE,
							      >	       "UnSupported Return Type : {0}"},
							      >
							      >	  /** Field ER_SOURCE_RETURN_TYPE_CANNOT_BE_NULL             
							      >
							      >	  { ER_SOURCE_RETURN_TYPE_CANNOT_BE_NULL,
							      >	       "Source and/or Return Type can not be null"},
							      >
							      >	  /** Field ER_SOURCE_RETURN_TYPE_CANNOT_BE_NULL             
							      >
							      >	  { ER_SOURCE_RETURN_TYPE_CANNOT_BE_NULL,
							      >	       "Source and/or Return Type can not be null"},
							      >
							      >	  /** Field ER_ARG_CANNOT_BE_NULL                       */
							      >
							      >	  { ER_ARG_CANNOT_BE_NULL,
							      >	       "{0} argument can not be null"},
							      >
							      >	  /** Field ER_OBJECT_MODEL_NULL                       */
							      >
							      >	  { ER_OBJECT_MODEL_NULL,
							      >	       "{0}#isObjectModelSupported( String objectModel ) cann
							      >
							      >	  /** Field ER_OBJECT_MODEL_EMPTY                       */
							      >
							      >	  { ER_OBJECT_MODEL_EMPTY,
							      >	       "{0}#isObjectModelSupported( String objectModel ) cann
							      >
							      >	  /** Field ER_OBJECT_MODEL_EMPTY                       */
							      >
							      >	  { ER_FEATURE_NAME_NULL,
							      >	       "Trying to set a feature with a null name: {0}#setFeat
							      >
							      >	  /** Field ER_FEATURE_UNKNOWN                       */
							      >
							      >	  { ER_FEATURE_UNKNOWN,
							      >	       "Trying to set the unknown feature \"{0}\":{1}#setFeat
							      >
							      >	  /** Field ER_GETTING_NULL_FEATURE                       */
							      >
							      >	  { ER_GETTING_NULL_FEATURE,
							      >	       "Trying to get a feature with a null name: {0}#getFeat
							      >
							      >	  /** Field ER_GETTING_NULL_FEATURE                       */
							      >
							      >	  { ER_GETTING_UNKNOWN_FEATURE,
							      >	       "Trying to get the unknown feature \"{0}\":{1}#getFeat
  /** Field WG_LOCALE_NAME_NOT_HANDLED          */	      |	  /** Field ER_NULL_XPATH_FUNCTION_RESOLVER                  
//  public static final int WG_LOCALE_NAME_NOT_HANDLED = 1;   |
							      >	  { ER_NULL_XPATH_FUNCTION_RESOLVER,
							      >	       "Attempting to set a null XPathFunctionResolver:{0}#se
							      >
							      >	  /** Field ER_NULL_XPATH_VARIABLE_RESOLVER                  
							      >
							      >	  { ER_NULL_XPATH_VARIABLE_RESOLVER,
							      >	       "Attempting to set a null XPathVariableResolver:{0}#se
							      >
							      >	  //END:  Definitions of error keys used  in exception messag
							      >
							      >	  // Warnings...
  /** Field WG_PROPERTY_NOT_SUPPORTED          */	      <
//  public static final int WG_PROPERTY_NOT_SUPPORTED = 2;    <
							      <
  /** Field WG_DONT_DO_ANYTHING_WITH_NS          */	      <
//  public static final int WG_DONT_DO_ANYTHING_WITH_NS = 3;  <
							      <
  /** Field WG_SECURITY_EXCEPTION          */		      <
// public static final int WG_SECURITY_EXCEPTION = 4;	      <
							      <
  /** Field WG_QUO_NO_LONGER_DEFINED          */	      <
//  public static final int WG_QUO_NO_LONGER_DEFINED = 5;     <
							      <
  /** Field WG_NEED_DERIVED_OBJECT_TO_IMPLEMENT_NODETEST      <
// public static final int WG_NEED_DERIVED_OBJECT_TO_IMPLEMEN <
							      <
  /** Field WG_FUNCTION_TOKEN_NOT_FOUND          */	      <
//  public static final int WG_FUNCTION_TOKEN_NOT_FOUND = 7;  <
							      <
  /** Field WG_COULDNOT_FIND_FUNCTION          */	      <
//  public static final int WG_COULDNOT_FIND_FUNCTION = 8;    <
							      <
  /** Field WG_CANNOT_MAKE_URL_FROM          */		      <
//  public static final int WG_CANNOT_MAKE_URL_FROM = 9;      <
							      <
  /** Field WG_EXPAND_ENTITIES_NOT_SUPPORTED          */      <
//  public static final int WG_EXPAND_ENTITIES_NOT_SUPPORTED  <
							      <
  /** Field WG_ILLEGAL_VARIABLE_REFERENCE          */	      <
//  public static final int WG_ILLEGAL_VARIABLE_REFERENCE = 1 <
							      <
  /** Field WG_UNSUPPORTED_ENCODING          */		      <
//  public static final int WG_UNSUPPORTED_ENCODING = 12;     <
							      <
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_ko.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_ko.java
 * $Id: XPATHErrorResources_ko.java,v 1.8 2004/02/17 04:36:45 |	 * $Id: XPATHErrorResources_ko.java,v 1.10 2005/01/23 01:39:5
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_pl.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_pl.java
 * $Id: XPATHErrorResources_pl.java,v 1.3 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_pl.java,v 1.5 2005/01/23 01:39:54
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_pt_BR.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_pt_BR.java
 * $Id: XPATHErrorResources_pt_BR.java,v 1.3 2004/02/17 04:36 |	 * $Id: XPATHErrorResources_pt_BR.java,v 1.5 2005/01/23 01:39
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_ru.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_ru.java
 * $Id: XPATHErrorResources_ru.java,v 1.3 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_ru.java,v 1.5 2005/01/23 01:39:54
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_sk.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_sk.java
 * $Id: XPATHErrorResources_sk.java,v 1.3 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_sk.java,v 1.5 2005/01/23 01:39:54
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_sv.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_sv.java
 * $Id: XPATHErrorResources_sv.java,v 1.7 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_sv.java,v 1.8 2004/12/15 17:35:58
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_tr.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_tr.java
 * $Id: XPATHErrorResources_tr.java,v 1.3 2004/02/17 04:36:46 |	 * $Id: XPATHErrorResources_tr.java,v 1.5 2005/01/23 01:39:54
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_zh_CN.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_zh_CN.java
 * $Id: XPATHErrorResources_zh_CN.java,v 1.8 2004/02/17 04:36 |	 * $Id: XPATHErrorResources_zh_CN.java,v 1.10 2005/01/23 01:3
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHErrorResources_zh_TW.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHErrorResources_zh_TW.java
 * $Id: XPATHErrorResources_zh_TW.java,v 1.8 2004/02/17 04:36 |	 * $Id: XPATHErrorResources_zh_TW.java,v 1.10 2005/01/23 01:3
  public static final Object[][] contents = {		      |	  /**
							      >	   * Get the association list.
							      >	   *
							      >	   * @return The association list.
							      >	   */
							      >	  public Object[][] getContents()
							      >	  {
							      >	    return new Object[][]{
							      >	  }
  /**							      <
   * Get the association list.				      <
   *							      <
   * @return The association list.			      <
   */							      <
  public Object[][] getContents()			      <
  {							      <
    return contents;					      <
  }							      <
   *							      <
   * @param res the name of the resource to load.	      <
   * @param locale the locale to prefer when searching for th <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/res/XPATHMessages.java xalan-j_2_7_0/src/org/apache/xpath/res/XPATHMessages.java
 * $Id: XPATHMessages.java,v 1.5 2004/02/17 04:36:46 minchau  |	 * $Id: XPATHMessages.java,v 1.6 2005/01/23 01:08:22 mcnamara
   * @param errorCode The key for the message text.	      |	   * @param msgKey    The key for the message text.
   *							      <
   * @param errorCode The key for the message text.	      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/SourceTreeManager.java xalan-j_2_7_0/src/org/apache/xpath/SourceTreeManager.java
 * $Id: SourceTreeManager.java,v 1.34 2004/02/17 04:30:02 min |	 * $Id: SourceTreeManager.java,v 1.35 2005/01/23 01:02:10 mcn
   * @returns a SAX2 XMLReader to use to resolve the inputSou |	   * @return a SAX2 XMLReader to use to resolve the inputSour
   *							      <
   * @return non-null XMLReader reference ready to parse.     <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/VariableStack.java xalan-j_2_7_0/src/org/apache/xpath/VariableStack.java
 * $Id: VariableStack.java,v 1.46 2004/02/17 04:30:02 minchau |	 * $Id: VariableStack.java,v 1.47 2005/01/23 01:02:10 mcnamar
   * {@link link(int size)}.				      |	   * {@link #link(int size)}.
   * {@link link(int size)}.				      |	   * {@link #link(int size)}.
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/XPathAPI.java xalan-j_2_7_0/src/org/apache/xpath/XPathAPI.java
 * $Id: XPathAPI.java,v 1.17 2004/02/17 04:30:02 minchau Exp  |	 * $Id: XPathAPI.java,v 1.18 2005/01/23 01:02:10 mcnamara Exp
   *  @param namespaceNode The node from which prefixes in th <
   *   @param namespaceNode The node from which prefixes in t <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/XPathContext.java xalan-j_2_7_0/src/org/apache/xpath/XPathContext.java
 * $Id: XPathContext.java,v 1.52 2004/02/17 04:30:02 minchau  |	 * $Id: XPathContext.java,v 1.55 2005/06/07 15:35:52 mkwan Ex
							      >	import java.util.HashMap;
							      >	import java.util.Iterator;
							      >	import org.apache.xpath.objects.DTMXRTreeFrag;
							      >	  /**
							      >	   * HashMap of cached the DTMXRTreeFrag objects, which are i
							      >	   * The object are just wrappers for DTMs which are used in 
							      >	   */
							      >	  private HashMap m_DTMXRTreeFrags = null;
							      >	  
							      >	  /**
							      >	   * state of the secure processing feature.
							      >	   */
							      >	  private boolean m_isSecureProcessing = false;
							      >	   * Set the state of the secure processing feature
							      >	   */
							      >	  public void setSecureProcessing(boolean flag)
							      >	  {
							      >	    m_isSecureProcessing = flag;
							      >	  }
							      >	  
							      >	  /**
							      >	   * Return the state of the secure processing feature
							      >	   */
							      >	  public boolean isSecureProcessing()
							      >	  {
							      >	    return m_isSecureProcessing;
							      >	  }
							      >	  
							      >	  /**
   * @param whiteSpaceFilter Enables filtering of whitespace  |	   * @param wsfilter Enables filtering of whitespace nodes, a
   *                         be null.			      <
							      >	    releaseDTMXRTreeFrags();
							      >	    
   * @param location The location within the stylesheet.      <
							      >	  
							      >	  /**
							      >	   * Gets DTMXRTreeFrag object if one has already been create
							      >	   * Creates new DTMXRTreeFrag object and adds to m_DTMXRTree
							      >	   * otherwise.  
							      >	   * @param dtmIdentity
							      >	   * @return DTMXRTreeFrag
							      >	   */
							      >	  public DTMXRTreeFrag getDTMXRTreeFrag(int dtmIdentity){
							      >	    if(m_DTMXRTreeFrags == null){
							      >	      m_DTMXRTreeFrags = new HashMap();     
							      >	    }
							      >	    
							      >	    if(m_DTMXRTreeFrags.containsKey(new Integer(dtmIdentity))
							      >	       return (DTMXRTreeFrag)m_DTMXRTreeFrags.get(new Integer
							      >	    }else{
							      >	      final DTMXRTreeFrag frag = new DTMXRTreeFrag(dtmIdentit
							      >	      m_DTMXRTreeFrags.put(new Integer(dtmIdentity),frag);
							      >	      return frag ;
							      >	    }   
							      >	  }
							      >	 
							      >	  /**
							      >	   * Cleans DTMXRTreeFrag objects by removing references 
							      >	   * to DTM and XPathContext objects.   
							      >	   */
							      >	  private final void releaseDTMXRTreeFrags(){
							      >	    if(m_DTMXRTreeFrags == null){
							      >	      return;
							      >	    }
							      >	    final Iterator iter = (m_DTMXRTreeFrags.values()).iterato
							      >	    while(iter.hasNext()){
							      >	      DTMXRTreeFrag frag = (DTMXRTreeFrag)iter.next();
							      >	      frag.destruct();
							      >	      iter.remove();
							      >	    }
							      >	    m_DTMXRTreeFrags = null;
							      >	 }
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/XPathException.java xalan-j_2_7_0/src/org/apache/xpath/XPathException.java
 * $Id: XPathException.java,v 1.12 2004/02/17 04:30:02 mincha |	 * $Id: XPathException.java,v 1.13 2004/08/17 16:18:27 mcnama
							      >	    static final long serialVersionUID = 4263549717619045963L
							      |	        
							      >	    
							      >	    
							      >	    boolean isJdk14OrHigher = false;
							      >	    try {
							      >	        Throwable.class.getMethod("getCause",null);
							      >	        isJdk14OrHigher = true;
							      >	    } catch (NoSuchMethodException nsme) {
							      >	        // do nothing
							      >	    }
							      >	        
							      >	    // The printStackTrace method of the Throwable class in j
							      >	    // and higher will include the cause when printing the ba
							      >	    // The following code is only required when using jdk 1.3
							      >	    if (!isJdk14OrHigher) {
							      >	    	        
							      >	      Throwable exception = m_exception;
    Throwable exception = m_exception;			      |	      for (int i = 0; (i < 10) && (null != exception); i++)
							      >	      {
							      >	        s.println("---------");
    for (int i = 0; (i < 10) && (null != exception); i++)     |	        try
    {							      |	        {
      s.println("---------");				      |	          exception.printStackTrace(s);
							      >	        }
							      >	        catch (Exception e)
							      >	        {
							      >	          s.println("Could not print stack trace...");
							      >	        }
      try						      |	        if (exception instanceof TransformerException)
      {							      |	        {
        exception.printStackTrace(s);			      |	          TransformerException se = (TransformerException) ex
      }							      |	          Throwable prev = exception;
      catch (Exception e)				      <
      {							      <
        s.println("Could not print stack trace...");	      <
      }							      <
      if (exception instanceof TransformerException)	      |	          exception = se.getException();
      {							      <
        TransformerException se = (TransformerException) exce <
        Throwable prev = exception;			      <
        exception = se.getException();			      |	          if (prev == exception)
							      >	          {
							      >	            exception = null;
        if (prev == exception)				      |	            break;
							      >	          }
							      >	        }
							      >	        else
							      <
          break;					      <
      }							      <
      else						      <
      {							      <
        exception = null;				      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/XPath.java xalan-j_2_7_0/src/org/apache/xpath/XPath.java
 * $Id: XPath.java,v 1.30 2004/02/17 04:30:02 minchau Exp $   |	 * $Id: XPath.java,v 1.32 2004/12/15 17:35:55 jycli Exp $
							      >	    static final long serialVersionUID = 3976493477939110553L
							      >	  
							      >	  /**
							      >	   * The function table for xpath build-in functions
							      >	   */
							      >	  private transient FunctionTable m_funcTable = null;
							      >
							      >	  /**
							      >	   * initial the function table
							      >	   */
							      >	  private void initFunctionTable(){
							      >	  	      m_funcTable = new FunctionTable();
							      >	  }
  {      						      |	  { 
							      >	    initFunctionTable();     
    Compiler compiler = new Compiler(errorListener, locator); |	    Compiler compiler = new Compiler(errorListener, locator, 
							      >
							      >	  /**
							      >	   * Construct an XPath object.  
							      >	   *
							      >	   * (Needs review -sc) This method initializes an XPathParse
							      >	   * Compiler and compiles the expression.
							      >	   * @param exprString The XPath expression.
							      >	   * @param locator The location of the expression, may be nu
							      >	   * @param prefixResolver A prefix resolver to use to resolv
							      >	   *                       namespace URIs.
							      >	   * @param type one of {@link #SELECT} or {@link #MATCH}.
							      >	   * @param errorListener The error listener, or null if defa
							      >	   *
							      >	   * @throws javax.xml.transform.TransformerException if synt
							      >	   */
							      >	  public XPath(
							      >	          String exprString, SourceLocator locator, 
							      >	          PrefixResolver prefixResolver, int type,
							      >	          ErrorListener errorListener, FunctionTable aTable)
							      >	            throws javax.xml.transform.TransformerException
							      >	  { 
							      >	    m_funcTable = aTable;     
							      >	    if(null == errorListener)
							      >	      errorListener = new org.apache.xml.utils.DefaultErrorHa
							      >	    
							      >	    m_patternString = exprString;
							      >
							      >	    XPathParser parser = new XPathParser(errorListener, locat
							      >	    Compiler compiler = new Compiler(errorListener, locator, 
							      >
							      >	    if (SELECT == type)
							      >	      parser.initXPath(compiler, exprString, prefixResolver);
							      >	    else if (MATCH == type)
							      >	      parser.initMatchPattern(compiler, exprString, prefixRes
							      >	    else
							      >	      throw new RuntimeException(XSLMessages.createXPATHMessa
							      >	            XPATHErrorResources.ER_CANNOT_DEAL_XPATH_TYPE, 
							      >	            new Object[]{Integer.toString(type)})); 
							      >	            //"Can not deal with XPath type: " + type);
							      >
							      >	    // System.out.println("----------------");
							      >	    Expression expr = compiler.compile(0);
							      >
							      >	    // System.out.println("expr: "+expr);
							      >	    this.setExpression(expr);
							      >	    
							      >	    if((null != locator) && locator instanceof ExpressionNode
							      >	    {
							      >	    	expr.exprSetParent((ExpressionNode)locator);
							      >	    }
							      >
							      >	  }
    this.setExpression(expr);   			      |	    this.setExpression(expr);
							      >	    initFunctionTable();   
  /**							      <
   * Install a built-in function.			      <
   * @param name The unqualified name of the function; not cu <
   * @param funcIndex The index of the function in the table. <
   * @param func An Implementation of an XPath Function objec <
   * @return the position of the function in the internal ind <
   */							      <
  public void installFunction(String name, int funcIndex, Fun <
  {							      <
    FunctionTable.installFunction(func, funcIndex);	      <
  }							      <
diff -ry --suppress-common-lines xalan-j_2_6_0/src/org/apache/xpath/XPathProcessorException.java xalan-j_2_7_0/src/org/apache/xpath/XPathProcessorException.java
 * $Id: XPathProcessorException.java,v 1.6 2004/02/17 04:30:0 |	 * $Id: XPathProcessorException.java,v 1.7 2004/08/17 19:25:3
							      >	    static final long serialVersionUID = 1215509418326642603L
只在 xalan-j_2_6_0/src/org/ 存在：w3c
